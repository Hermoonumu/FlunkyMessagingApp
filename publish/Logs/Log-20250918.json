{"Timestamp":"2025-09-18T18:23:01.9728286+03:00","Level":"Information","MessageTemplate":"Application is shutting down...","Properties":{"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"Timestamp":"2025-09-18T18:42:44.1670688+03:00","Level":"Information","MessageTemplate":"User profile is available. Using '{FullName}' as key repository; keys will not be encrypted at rest.","Properties":{"FullName":"/home/hermoonumu/.aspnet/DataProtection-Keys","EventId":{"Id":62,"Name":"UsingProfileAsKeyRepository"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"}}
{"Timestamp":"2025-09-18T18:42:44.3132132+03:00","Level":"Information","MessageTemplate":"Now listening on: {address}","Properties":{"address":"http://0.0.0.0:6865","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"Timestamp":"2025-09-18T18:42:44.3151900+03:00","Level":"Information","MessageTemplate":"Application started. Press Ctrl+C to shut down.","Properties":{"SourceContext":"Microsoft.Hosting.Lifetime"}}
{"Timestamp":"2025-09-18T18:42:44.3157166+03:00","Level":"Information","MessageTemplate":"Hosting environment: {EnvName}","Properties":{"EnvName":"Development","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"Timestamp":"2025-09-18T18:42:44.3159552+03:00","Level":"Information","MessageTemplate":"Content root path: {ContentRoot}","Properties":{"ContentRoot":"/run/media/hermoonumu/DATA/Project/Learning/MyWebApp/MessagingApp","SourceContext":"Microsoft.Hosting.Lifetime"}}
{"Timestamp":"2025-09-18T18:44:06.7312595+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"d91fed216773ec7d39ff2fa5277e7020","SpanId":"dfec3be163f26cc9","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CL:00000001","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:06.7380866+03:00","Level":"Warning","MessageTemplate":"Failed to determine the https port for redirect.","TraceId":"d91fed216773ec7d39ff2fa5277e7020","SpanId":"dfec3be163f26cc9","Properties":{"EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HNFMP8PQI2CL:00000001","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:06.7660933+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"d91fed216773ec7d39ff2fa5277e7020","SpanId":"dfec3be163f26cc9","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CL:00000001","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:06.7727776+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"d91fed216773ec7d39ff2fa5277e7020","SpanId":"dfec3be163f26cc9","Properties":{"ElapsedMilliseconds":43.5048,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CL:00000001","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:06.7852580+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"6d752572c232faf81057105e9189728b","SpanId":"da0a1c5747778004","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CL:00000002","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:06.7880252+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"6d752572c232faf81057105e9189728b","SpanId":"da0a1c5747778004","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CL:00000002","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:07.0090681+03:00","Level":"Information","MessageTemplate":"Failed to validate the token.","TraceId":"6d752572c232faf81057105e9189728b","SpanId":"da0a1c5747778004","Exception":"Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/3/2025 12:22:14 PM', Current time (UTC): '9/18/2025 3:44:07 PM'.\n   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)","Properties":{"EventId":{"Id":1,"Name":"TokenValidationFailed"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HNFMP8PQI2CL:00000002","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:07.0268026+03:00","Level":"Information","MessageTemplate":"{AuthenticationScheme} was not authenticated. Failure message: {FailureMessage}","TraceId":"6d752572c232faf81057105e9189728b","SpanId":"da0a1c5747778004","Properties":{"AuthenticationScheme":"Bearer","FailureMessage":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/3/2025 12:22:14 PM', Current time (UTC): '9/18/2025 3:44:07 PM'.","EventId":{"Id":7,"Name":"AuthenticationSchemeNotAuthenticatedWithFailure"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HNFMP8PQI2CL:00000002","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:07.0316243+03:00","Level":"Information","MessageTemplate":"Authorization failed. {Reason}","TraceId":"6d752572c232faf81057105e9189728b","SpanId":"da0a1c5747778004","Properties":{"Reason":"These requirements were not met:\nDenyAnonymousAuthorizationRequirement: Requires an authenticated user.","EventId":{"Id":2,"Name":"UserAuthorizationFailed"},"SourceContext":"Microsoft.AspNetCore.Authorization.DefaultAuthorizationService","RequestId":"0HNFMP8PQI2CL:00000002","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:07.0363417+03:00","Level":"Information","MessageTemplate":"AuthenticationScheme: {AuthenticationScheme} was challenged.","TraceId":"6d752572c232faf81057105e9189728b","SpanId":"da0a1c5747778004","Properties":{"AuthenticationScheme":"Bearer","EventId":{"Id":12,"Name":"AuthenticationSchemeChallenged"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HNFMP8PQI2CL:00000002","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:07.0374802+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"6d752572c232faf81057105e9189728b","SpanId":"da0a1c5747778004","Properties":{"ElapsedMilliseconds":252.5812,"StatusCode":401,"ContentType":null,"ContentLength":0,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CL:00000002","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:07.0437949+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"5b6cec0c7ad158c45c2809ec847ac254","SpanId":"8b30aa6ce3c1d181","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/refresh","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CL:00000003","RequestPath":"/api/auth/refresh","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:07.0447245+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"5b6cec0c7ad158c45c2809ec847ac254","SpanId":"8b30aa6ce3c1d181","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CL:00000003","RequestPath":"/api/auth/refresh","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:07.0451489+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"5b6cec0c7ad158c45c2809ec847ac254","SpanId":"8b30aa6ce3c1d181","Properties":{"ElapsedMilliseconds":1.3463,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/refresh","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CL:00000003","RequestPath":"/api/auth/refresh","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:07.0485368+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"e3d06529f306a37bb71fef08c3ba14fe","SpanId":"3989c6e4cc952335","Properties":{"Protocol":"HTTP/1.1","Method":"POST","ContentType":"application/json","ContentLength":191,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/refresh","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CL:00000004","RequestPath":"/api/auth/refresh","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:07.0499183+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"e3d06529f306a37bb71fef08c3ba14fe","SpanId":"3989c6e4cc952335","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CL:00000004","RequestPath":"/api/auth/refresh","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:07.0535680+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"e3d06529f306a37bb71fef08c3ba14fe","SpanId":"3989c6e4cc952335","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.RefreshTokens (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CL:00000004","RequestPath":"/api/auth/refresh","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:07.0706028+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"e3d06529f306a37bb71fef08c3ba14fe","SpanId":"3989c6e4cc952335","Properties":{"RouteData":"{action = \"RefreshTokens\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] RefreshTokens(MessagingApp.DTO.RefreshTokenDTO)","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"e5f166a2-2974-46af-9198-2556feecf49b","ActionName":"MessagingApp.Controllers.AuthController.RefreshTokens (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000004","RequestPath":"/api/auth/refresh","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:07.3854811+03:00","Level":"Information","MessageTemplate":"Initiated token refresh by 192.168.31.243:6865","TraceId":"e3d06529f306a37bb71fef08c3ba14fe","SpanId":"3989c6e4cc952335","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","ActionId":"e5f166a2-2974-46af-9198-2556feecf49b","ActionName":"MessagingApp.Controllers.AuthController.RefreshTokens (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000004","RequestPath":"/api/auth/refresh","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:07.3888648+03:00","Level":"Information","MessageTemplate":"Refreshing tokens","TraceId":"e3d06529f306a37bb71fef08c3ba14fe","SpanId":"3989c6e4cc952335","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"e5f166a2-2974-46af-9198-2556feecf49b","ActionName":"MessagingApp.Controllers.AuthController.RefreshTokens (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000004","RequestPath":"/api/auth/refresh","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:08.5927859+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"e3d06529f306a37bb71fef08c3ba14fe","SpanId":"3989c6e4cc952335","Properties":{"elapsed":"46","parameters":"@__refreshToken_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"ExpiresAt\", r.\"IssuedAt\", r.\"Token\", r.\"UserID\"\nFROM \"RefreshTokens\" AS r\nWHERE r.\"Token\" = @__refreshToken_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"e5f166a2-2974-46af-9198-2556feecf49b","ActionName":"MessagingApp.Controllers.AuthController.RefreshTokens (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000004","RequestPath":"/api/auth/refresh","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:08.6096889+03:00","Level":"Warning","MessageTemplate":"No such refresh token","TraceId":"e3d06529f306a37bb71fef08c3ba14fe","SpanId":"3989c6e4cc952335","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"e5f166a2-2974-46af-9198-2556feecf49b","ActionName":"MessagingApp.Controllers.AuthController.RefreshTokens (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000004","RequestPath":"/api/auth/refresh","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:08.6100525+03:00","Level":"Warning","MessageTemplate":"Invalid refresh token provided by 192.168.31.243:6865. Refresh failed. 765cO6XXdpo5rbTHKMEDSZukc2TryXv3iNXMDNERHfUYJXlcLqChLjeia+3y8XAEhGgybzd/+Sp7yfDgc9oCAdA55FMrkQQ5DO2Tbb9XR/Gf6vRarYf17Dik+0yBtcGsv/cNdLdk0IpGO3wOlHklDljoWCQmsFOoLULIEidl/d8=","TraceId":"e3d06529f306a37bb71fef08c3ba14fe","SpanId":"3989c6e4cc952335","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","ActionId":"e5f166a2-2974-46af-9198-2556feecf49b","ActionName":"MessagingApp.Controllers.AuthController.RefreshTokens (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000004","RequestPath":"/api/auth/refresh","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:08.6141897+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"e3d06529f306a37bb71fef08c3ba14fe","SpanId":"3989c6e4cc952335","Properties":{"ObjectResultType":"UnauthorizedObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"e5f166a2-2974-46af-9198-2556feecf49b","ActionName":"MessagingApp.Controllers.AuthController.RefreshTokens (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000004","RequestPath":"/api/auth/refresh","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:08.6184128+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"e3d06529f306a37bb71fef08c3ba14fe","SpanId":"3989c6e4cc952335","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.RefreshTokens (MessagingApp)","ElapsedMilliseconds":1544.5686,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CL:00000004","RequestPath":"/api/auth/refresh","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:08.6191883+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"e3d06529f306a37bb71fef08c3ba14fe","SpanId":"3989c6e4cc952335","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.RefreshTokens (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CL:00000004","RequestPath":"/api/auth/refresh","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:08.6264605+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"e3d06529f306a37bb71fef08c3ba14fe","SpanId":"3989c6e4cc952335","Properties":{"ElapsedMilliseconds":1577.9455,"StatusCode":401,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"POST","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/refresh","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CL:00000004","RequestPath":"/api/auth/refresh","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:15.0681216+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"4352db048e06aeb6903d23fb6260b115","SpanId":"9a2ec421e21132cd","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/login","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CL:00000005","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:15.0688055+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"4352db048e06aeb6903d23fb6260b115","SpanId":"9a2ec421e21132cd","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CL:00000005","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:15.0693557+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"4352db048e06aeb6903d23fb6260b115","SpanId":"9a2ec421e21132cd","Properties":{"ElapsedMilliseconds":1.1658,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/login","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CL:00000005","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:15.0724087+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"cca8b6736dd1a877c4a253bf32f87b67","SpanId":"abfd5a55f6328889","Properties":{"Protocol":"HTTP/1.1","Method":"POST","ContentType":"application/json","ContentLength":49,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/login","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CL:00000006","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:15.0730020+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"cca8b6736dd1a877c4a253bf32f87b67","SpanId":"abfd5a55f6328889","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CL:00000006","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:15.0741873+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"cca8b6736dd1a877c4a253bf32f87b67","SpanId":"abfd5a55f6328889","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CL:00000006","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:15.0813413+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"cca8b6736dd1a877c4a253bf32f87b67","SpanId":"abfd5a55f6328889","Properties":{"RouteData":"{action = \"Login\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] Login(MessagingApp.DTO.AuthDTO)","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000006","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:15.0938360+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"cca8b6736dd1a877c4a253bf32f87b67","SpanId":"abfd5a55f6328889","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000006","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:15.0950506+03:00","Level":"Information","MessageTemplate":"Initiated login","TraceId":"cca8b6736dd1a877c4a253bf32f87b67","SpanId":"abfd5a55f6328889","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000006","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:15.0980305+03:00","Level":"Information","MessageTemplate":"Authenticating user","TraceId":"cca8b6736dd1a877c4a253bf32f87b67","SpanId":"abfd5a55f6328889","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000006","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:15.1359323+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"cca8b6736dd1a877c4a253bf32f87b67","SpanId":"abfd5a55f6328889","Properties":{"elapsed":"4","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000006","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:15.1367440+03:00","Level":"Warning","MessageTemplate":"Couldn't authenticate, no such user","TraceId":"cca8b6736dd1a877c4a253bf32f87b67","SpanId":"abfd5a55f6328889","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000006","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:15.1372386+03:00","Level":"Warning","MessageTemplate":"No such user for auth","TraceId":"cca8b6736dd1a877c4a253bf32f87b67","SpanId":"abfd5a55f6328889","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000006","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:15.1378339+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"cca8b6736dd1a877c4a253bf32f87b67","SpanId":"abfd5a55f6328889","Properties":{"ObjectResultType":"ObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000006","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:15.1383346+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"cca8b6736dd1a877c4a253bf32f87b67","SpanId":"abfd5a55f6328889","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","ElapsedMilliseconds":56.5121,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CL:00000006","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:15.1386095+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"cca8b6736dd1a877c4a253bf32f87b67","SpanId":"abfd5a55f6328889","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CL:00000006","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:15.1390593+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"cca8b6736dd1a877c4a253bf32f87b67","SpanId":"abfd5a55f6328889","Properties":{"ElapsedMilliseconds":66.6576,"StatusCode":404,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"POST","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/login","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CL:00000006","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:18.8527286+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"f52dc9add3e055416efe8cb48741fbbe","SpanId":"ef8eb31755272ba3","Properties":{"Protocol":"HTTP/1.1","Method":"POST","ContentType":"application/json","ContentLength":49,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/login","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CL:00000007","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:18.8534488+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"f52dc9add3e055416efe8cb48741fbbe","SpanId":"ef8eb31755272ba3","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CL:00000007","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:18.8539945+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"f52dc9add3e055416efe8cb48741fbbe","SpanId":"ef8eb31755272ba3","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CL:00000007","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:18.8543289+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"f52dc9add3e055416efe8cb48741fbbe","SpanId":"ef8eb31755272ba3","Properties":{"RouteData":"{action = \"Login\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] Login(MessagingApp.DTO.AuthDTO)","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000007","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:18.8593600+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"f52dc9add3e055416efe8cb48741fbbe","SpanId":"ef8eb31755272ba3","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000007","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:18.8596285+03:00","Level":"Information","MessageTemplate":"Initiated login","TraceId":"f52dc9add3e055416efe8cb48741fbbe","SpanId":"ef8eb31755272ba3","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000007","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:18.8598722+03:00","Level":"Information","MessageTemplate":"Authenticating user","TraceId":"f52dc9add3e055416efe8cb48741fbbe","SpanId":"ef8eb31755272ba3","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000007","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:18.9188117+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"f52dc9add3e055416efe8cb48741fbbe","SpanId":"ef8eb31755272ba3","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000007","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:18.9192813+03:00","Level":"Warning","MessageTemplate":"Couldn't authenticate, no such user","TraceId":"f52dc9add3e055416efe8cb48741fbbe","SpanId":"ef8eb31755272ba3","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000007","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:18.9195923+03:00","Level":"Warning","MessageTemplate":"No such user for auth","TraceId":"f52dc9add3e055416efe8cb48741fbbe","SpanId":"ef8eb31755272ba3","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000007","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:18.9198638+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"f52dc9add3e055416efe8cb48741fbbe","SpanId":"ef8eb31755272ba3","Properties":{"ObjectResultType":"ObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000007","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:18.9201266+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"f52dc9add3e055416efe8cb48741fbbe","SpanId":"ef8eb31755272ba3","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","ElapsedMilliseconds":65.4792,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CL:00000007","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:18.9204340+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"f52dc9add3e055416efe8cb48741fbbe","SpanId":"ef8eb31755272ba3","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CL:00000007","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:18.9207649+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"f52dc9add3e055416efe8cb48741fbbe","SpanId":"ef8eb31755272ba3","Properties":{"ElapsedMilliseconds":68.0232,"StatusCode":404,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"POST","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/login","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CL:00000007","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:19.4006723+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"145ac90bc3db5199594b5012bb051816","SpanId":"84fce93e13f2ff9b","Properties":{"Protocol":"HTTP/1.1","Method":"POST","ContentType":"application/json","ContentLength":49,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/login","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CL:00000008","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:19.4011535+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"145ac90bc3db5199594b5012bb051816","SpanId":"84fce93e13f2ff9b","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CL:00000008","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:19.4016284+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"145ac90bc3db5199594b5012bb051816","SpanId":"84fce93e13f2ff9b","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CL:00000008","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:19.4018775+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"145ac90bc3db5199594b5012bb051816","SpanId":"84fce93e13f2ff9b","Properties":{"RouteData":"{action = \"Login\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] Login(MessagingApp.DTO.AuthDTO)","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000008","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:19.4026439+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"145ac90bc3db5199594b5012bb051816","SpanId":"84fce93e13f2ff9b","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000008","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:19.4028959+03:00","Level":"Information","MessageTemplate":"Initiated login","TraceId":"145ac90bc3db5199594b5012bb051816","SpanId":"84fce93e13f2ff9b","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000008","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:19.4030777+03:00","Level":"Information","MessageTemplate":"Authenticating user","TraceId":"145ac90bc3db5199594b5012bb051816","SpanId":"84fce93e13f2ff9b","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000008","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:19.4045611+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"145ac90bc3db5199594b5012bb051816","SpanId":"84fce93e13f2ff9b","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000008","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:19.4050188+03:00","Level":"Warning","MessageTemplate":"Couldn't authenticate, no such user","TraceId":"145ac90bc3db5199594b5012bb051816","SpanId":"84fce93e13f2ff9b","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000008","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:19.4052788+03:00","Level":"Warning","MessageTemplate":"No such user for auth","TraceId":"145ac90bc3db5199594b5012bb051816","SpanId":"84fce93e13f2ff9b","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000008","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:19.4055451+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"145ac90bc3db5199594b5012bb051816","SpanId":"84fce93e13f2ff9b","Properties":{"ObjectResultType":"ObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000008","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:19.4059041+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"145ac90bc3db5199594b5012bb051816","SpanId":"84fce93e13f2ff9b","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","ElapsedMilliseconds":3.7597,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CL:00000008","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:19.4061537+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"145ac90bc3db5199594b5012bb051816","SpanId":"84fce93e13f2ff9b","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CL:00000008","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:19.4068595+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"145ac90bc3db5199594b5012bb051816","SpanId":"84fce93e13f2ff9b","Properties":{"ElapsedMilliseconds":6.1724,"StatusCode":404,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"POST","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/login","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CL:00000008","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:19.5573771+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"8c80e7421ed1af759bc35a213e656021","SpanId":"83880adae319e1c6","Properties":{"Protocol":"HTTP/1.1","Method":"POST","ContentType":"application/json","ContentLength":49,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/login","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CL:00000009","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:19.5578130+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"8c80e7421ed1af759bc35a213e656021","SpanId":"83880adae319e1c6","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CL:00000009","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:19.5581207+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"8c80e7421ed1af759bc35a213e656021","SpanId":"83880adae319e1c6","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CL:00000009","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:19.5583812+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"8c80e7421ed1af759bc35a213e656021","SpanId":"83880adae319e1c6","Properties":{"RouteData":"{action = \"Login\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] Login(MessagingApp.DTO.AuthDTO)","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000009","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:19.5591142+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"8c80e7421ed1af759bc35a213e656021","SpanId":"83880adae319e1c6","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000009","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:19.5592945+03:00","Level":"Information","MessageTemplate":"Initiated login","TraceId":"8c80e7421ed1af759bc35a213e656021","SpanId":"83880adae319e1c6","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000009","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:19.5594678+03:00","Level":"Information","MessageTemplate":"Authenticating user","TraceId":"8c80e7421ed1af759bc35a213e656021","SpanId":"83880adae319e1c6","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000009","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:19.5608181+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"8c80e7421ed1af759bc35a213e656021","SpanId":"83880adae319e1c6","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000009","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:19.5612162+03:00","Level":"Warning","MessageTemplate":"Couldn't authenticate, no such user","TraceId":"8c80e7421ed1af759bc35a213e656021","SpanId":"83880adae319e1c6","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000009","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:19.5614565+03:00","Level":"Warning","MessageTemplate":"No such user for auth","TraceId":"8c80e7421ed1af759bc35a213e656021","SpanId":"83880adae319e1c6","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000009","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:19.5617267+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"8c80e7421ed1af759bc35a213e656021","SpanId":"83880adae319e1c6","Properties":{"ObjectResultType":"ObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000009","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:19.5619672+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"8c80e7421ed1af759bc35a213e656021","SpanId":"83880adae319e1c6","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","ElapsedMilliseconds":3.2857,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CL:00000009","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:19.5621777+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"8c80e7421ed1af759bc35a213e656021","SpanId":"83880adae319e1c6","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CL:00000009","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:19.5624717+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"8c80e7421ed1af759bc35a213e656021","SpanId":"83880adae319e1c6","Properties":{"ElapsedMilliseconds":5.0878,"StatusCode":404,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"POST","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/login","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CL:00000009","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:26.6742484+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"0e816aac85d0538c09346df5432dc0df","SpanId":"e177f164a164a4df","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CL:0000000A","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:26.6746758+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"0e816aac85d0538c09346df5432dc0df","SpanId":"e177f164a164a4df","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CL:0000000A","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:26.6750048+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"0e816aac85d0538c09346df5432dc0df","SpanId":"e177f164a164a4df","Properties":{"ElapsedMilliseconds":0.7439,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CL:0000000A","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:26.6777574+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"8b11cd2da650ce5788540c6772853045","SpanId":"7a4710b24632ed90","Properties":{"Protocol":"HTTP/1.1","Method":"POST","ContentType":"application/json","ContentLength":49,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CL:0000000B","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:26.6781461+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"8b11cd2da650ce5788540c6772853045","SpanId":"7a4710b24632ed90","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CL:0000000B","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:26.6784267+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"8b11cd2da650ce5788540c6772853045","SpanId":"7a4710b24632ed90","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CL:0000000B","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:26.6820601+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"8b11cd2da650ce5788540c6772853045","SpanId":"7a4710b24632ed90","Properties":{"RouteData":"{action = \"Register\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MessagingApp.Models.User]] Register(MessagingApp.DTO.AuthDTO)","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CL:0000000B","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:26.6840281+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"8b11cd2da650ce5788540c6772853045","SpanId":"7a4710b24632ed90","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CL:0000000B","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:26.6842138+03:00","Level":"Information","MessageTemplate":"Initiated user registration by ","TraceId":"8b11cd2da650ce5788540c6772853045","SpanId":"7a4710b24632ed90","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CL:0000000B","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:26.6854100+03:00","Level":"Information","MessageTemplate":"Adding user to DB","TraceId":"8b11cd2da650ce5788540c6772853045","SpanId":"7a4710b24632ed90","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CL:0000000B","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:26.6866903+03:00","Level":"Information","MessageTemplate":"Creating new user","TraceId":"8b11cd2da650ce5788540c6772853045","SpanId":"7a4710b24632ed90","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CL:0000000B","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:26.6870269+03:00","Level":"Information","MessageTemplate":"Composing new user object","TraceId":"8b11cd2da650ce5788540c6772853045","SpanId":"7a4710b24632ed90","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CL:0000000B","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:26.6874542+03:00","Level":"Information","MessageTemplate":"Generating password hash","TraceId":"8b11cd2da650ce5788540c6772853045","SpanId":"7a4710b24632ed90","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CL:0000000B","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:26.7563239+03:00","Level":"Information","MessageTemplate":"Saving new user...","TraceId":"8b11cd2da650ce5788540c6772853045","SpanId":"7a4710b24632ed90","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CL:0000000B","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:26.9204891+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"8b11cd2da650ce5788540c6772853045","SpanId":"7a4710b24632ed90","Properties":{"elapsed":"10","parameters":"@p0='?', @p1='?' (DbType = Int32), @p2='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"INSERT INTO \"Users\" (\"PasswordHash\", \"Role\", \"Username\")\nVALUES (@p0, @p1, @p2)\nRETURNING \"ID\";","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CL:0000000B","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:26.9477292+03:00","Level":"Information","MessageTemplate":"User successfully created, returning HTTP OK","TraceId":"8b11cd2da650ce5788540c6772853045","SpanId":"7a4710b24632ed90","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CL:0000000B","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:26.9482529+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"8b11cd2da650ce5788540c6772853045","SpanId":"7a4710b24632ed90","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CL:0000000B","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:26.9485845+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"8b11cd2da650ce5788540c6772853045","SpanId":"7a4710b24632ed90","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","ElapsedMilliseconds":266.273,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CL:0000000B","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:26.9487906+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"8b11cd2da650ce5788540c6772853045","SpanId":"7a4710b24632ed90","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CL:0000000B","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:26.9490732+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"8b11cd2da650ce5788540c6772853045","SpanId":"7a4710b24632ed90","Properties":{"ElapsedMilliseconds":271.3091,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"POST","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CL:0000000B","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:42.5424902+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"afc84bc3107e5a675bb2af899a156fd4","SpanId":"005c52f856e4d2eb","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CL:0000000C","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:42.8762537+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"afc84bc3107e5a675bb2af899a156fd4","SpanId":"005c52f856e4d2eb","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CL:0000000C","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:42.8770881+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"afc84bc3107e5a675bb2af899a156fd4","SpanId":"005c52f856e4d2eb","Properties":{"ElapsedMilliseconds":334.2783,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CL:0000000C","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:42.8798459+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"86c48693bc4e4eabdad3524d5d9f7d2b","SpanId":"9d29fbcf41d2109c","Properties":{"Protocol":"HTTP/1.1","Method":"POST","ContentType":"application/json","ContentLength":49,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CL:0000000D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:42.8803337+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"86c48693bc4e4eabdad3524d5d9f7d2b","SpanId":"9d29fbcf41d2109c","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CL:0000000D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:42.8805815+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"86c48693bc4e4eabdad3524d5d9f7d2b","SpanId":"9d29fbcf41d2109c","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CL:0000000D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:42.8807704+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"86c48693bc4e4eabdad3524d5d9f7d2b","SpanId":"9d29fbcf41d2109c","Properties":{"RouteData":"{action = \"Register\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MessagingApp.Models.User]] Register(MessagingApp.DTO.AuthDTO)","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CL:0000000D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:42.8816327+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"86c48693bc4e4eabdad3524d5d9f7d2b","SpanId":"9d29fbcf41d2109c","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CL:0000000D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:42.8818669+03:00","Level":"Information","MessageTemplate":"Initiated user registration by ","TraceId":"86c48693bc4e4eabdad3524d5d9f7d2b","SpanId":"9d29fbcf41d2109c","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CL:0000000D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:42.8821238+03:00","Level":"Information","MessageTemplate":"Adding user to DB","TraceId":"86c48693bc4e4eabdad3524d5d9f7d2b","SpanId":"9d29fbcf41d2109c","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CL:0000000D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:42.8822699+03:00","Level":"Information","MessageTemplate":"Creating new user","TraceId":"86c48693bc4e4eabdad3524d5d9f7d2b","SpanId":"9d29fbcf41d2109c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CL:0000000D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:42.8824011+03:00","Level":"Information","MessageTemplate":"Composing new user object","TraceId":"86c48693bc4e4eabdad3524d5d9f7d2b","SpanId":"9d29fbcf41d2109c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CL:0000000D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:42.8825275+03:00","Level":"Information","MessageTemplate":"Generating password hash","TraceId":"86c48693bc4e4eabdad3524d5d9f7d2b","SpanId":"9d29fbcf41d2109c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CL:0000000D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:42.9487165+03:00","Level":"Information","MessageTemplate":"Saving new user...","TraceId":"86c48693bc4e4eabdad3524d5d9f7d2b","SpanId":"9d29fbcf41d2109c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CL:0000000D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:42.9567865+03:00","Level":"Error","MessageTemplate":"Failed executing DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"86c48693bc4e4eabdad3524d5d9f7d2b","SpanId":"9d29fbcf41d2109c","Properties":{"elapsed":"5","parameters":"@p0='?', @p1='?' (DbType = Int32), @p2='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"INSERT INTO \"Users\" (\"PasswordHash\", \"Role\", \"Username\")\nVALUES (@p0, @p1, @p2)\nRETURNING \"ID\";","EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CL:0000000D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:42.9685025+03:00","Level":"Error","MessageTemplate":"An exception occurred in the database while saving changes for context type '{contextType}'.{newline}{error}","TraceId":"86c48693bc4e4eabdad3524d5d9f7d2b","SpanId":"9d29fbcf41d2109c","Exception":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint \"AK_Users_Username\"\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23505\n    MessageText: duplicate key value violates unique constraint \"AK_Users_Username\"\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: Users\n    ConstraintName: AK_Users_Username\n    File: nbtinsert.c\n    Line: 666\n    Routine: _bt_check_unique\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","Properties":{"contextType":"DataContext","newline":"\n","error":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint \"AK_Users_Username\"\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23505\n    MessageText: duplicate key value violates unique constraint \"AK_Users_Username\"\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: Users\n    ConstraintName: AK_Users_Username\n    File: nbtinsert.c\n    Line: 666\n    Routine: _bt_check_unique\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CL:0000000D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:42.9723865+03:00","Level":"Warning","MessageTemplate":"User with such username already exists","TraceId":"86c48693bc4e4eabdad3524d5d9f7d2b","SpanId":"9d29fbcf41d2109c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CL:0000000D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:42.9726141+03:00","Level":"Warning","MessageTemplate":"A user with such username already exists.","TraceId":"86c48693bc4e4eabdad3524d5d9f7d2b","SpanId":"9d29fbcf41d2109c","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CL:0000000D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:42.9728891+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"86c48693bc4e4eabdad3524d5d9f7d2b","SpanId":"9d29fbcf41d2109c","Properties":{"ObjectResultType":"ObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CL:0000000D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:42.9733865+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"86c48693bc4e4eabdad3524d5d9f7d2b","SpanId":"9d29fbcf41d2109c","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","ElapsedMilliseconds":92.3268,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CL:0000000D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:42.9736607+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"86c48693bc4e4eabdad3524d5d9f7d2b","SpanId":"9d29fbcf41d2109c","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CL:0000000D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:42.9739813+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"86c48693bc4e4eabdad3524d5d9f7d2b","SpanId":"9d29fbcf41d2109c","Properties":{"ElapsedMilliseconds":94.1225,"StatusCode":409,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"POST","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CL:0000000D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:49.3764500+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"544c3f8566769e4f5cf2fc57f84a27b2","SpanId":"e12854cba6ea6b92","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/login","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CL:0000000E","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:49.3769893+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"544c3f8566769e4f5cf2fc57f84a27b2","SpanId":"e12854cba6ea6b92","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CL:0000000E","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:49.3773820+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"544c3f8566769e4f5cf2fc57f84a27b2","SpanId":"e12854cba6ea6b92","Properties":{"ElapsedMilliseconds":0.9198,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/login","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CL:0000000E","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:49.3804574+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"34d7041428855423ce34a942edc0c61e","SpanId":"9ee997c928c16d6a","Properties":{"Protocol":"HTTP/1.1","Method":"POST","ContentType":"application/json","ContentLength":49,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/login","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CL:0000000F","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:49.3809425+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"34d7041428855423ce34a942edc0c61e","SpanId":"9ee997c928c16d6a","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CL:0000000F","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:49.3813886+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"34d7041428855423ce34a942edc0c61e","SpanId":"9ee997c928c16d6a","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CL:0000000F","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:49.3816529+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"34d7041428855423ce34a942edc0c61e","SpanId":"9ee997c928c16d6a","Properties":{"RouteData":"{action = \"Login\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] Login(MessagingApp.DTO.AuthDTO)","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:0000000F","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:49.3825351+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"34d7041428855423ce34a942edc0c61e","SpanId":"9ee997c928c16d6a","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:0000000F","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:49.3827838+03:00","Level":"Information","MessageTemplate":"Initiated login","TraceId":"34d7041428855423ce34a942edc0c61e","SpanId":"9ee997c928c16d6a","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:0000000F","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:49.3829691+03:00","Level":"Information","MessageTemplate":"Authenticating user","TraceId":"34d7041428855423ce34a942edc0c61e","SpanId":"9ee997c928c16d6a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:0000000F","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:49.3851518+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"34d7041428855423ce34a942edc0c61e","SpanId":"9ee997c928c16d6a","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:0000000F","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:49.4577798+03:00","Level":"Information","MessageTemplate":"Successfully authorized","TraceId":"34d7041428855423ce34a942edc0c61e","SpanId":"9ee997c928c16d6a","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:0000000F","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:49.4591956+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"34d7041428855423ce34a942edc0c61e","SpanId":"9ee997c928c16d6a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:0000000F","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:49.4608162+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"34d7041428855423ce34a942edc0c61e","SpanId":"9ee997c928c16d6a","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:0000000F","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:49.4632519+03:00","Level":"Information","MessageTemplate":"Generating token pair","TraceId":"34d7041428855423ce34a942edc0c61e","SpanId":"9ee997c928c16d6a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:0000000F","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:49.4635081+03:00","Level":"Information","MessageTemplate":"Obtaining private signing key","TraceId":"34d7041428855423ce34a942edc0c61e","SpanId":"9ee997c928c16d6a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:0000000F","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:49.4638987+03:00","Level":"Information","MessageTemplate":"Instantiating token descriptor","TraceId":"34d7041428855423ce34a942edc0c61e","SpanId":"9ee997c928c16d6a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:0000000F","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:49.4643719+03:00","Level":"Information","MessageTemplate":"Generating claims for 1234567890","TraceId":"34d7041428855423ce34a942edc0c61e","SpanId":"9ee997c928c16d6a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:0000000F","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:49.4649515+03:00","Level":"Information","MessageTemplate":"Creating access token","TraceId":"34d7041428855423ce34a942edc0c61e","SpanId":"9ee997c928c16d6a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:0000000F","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:49.4747912+03:00","Level":"Information","MessageTemplate":"Creating refresh token","TraceId":"34d7041428855423ce34a942edc0c61e","SpanId":"9ee997c928c16d6a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:0000000F","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:49.4751648+03:00","Level":"Information","MessageTemplate":"Obtaining all refresh tokens owned by the user","TraceId":"34d7041428855423ce34a942edc0c61e","SpanId":"9ee997c928c16d6a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:0000000F","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:49.4860003+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"34d7041428855423ce34a942edc0c61e","SpanId":"9ee997c928c16d6a","Properties":{"elapsed":"2","parameters":"@__user_ID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"ExpiresAt\", r.\"IssuedAt\", r.\"Token\", r.\"UserID\"\nFROM \"RefreshTokens\" AS r\nWHERE r.\"UserID\" = @__user_ID_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:0000000F","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:49.5077492+03:00","Level":"Information","MessageTemplate":"Saving tokens, sending response.","TraceId":"34d7041428855423ce34a942edc0c61e","SpanId":"9ee997c928c16d6a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:0000000F","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:49.5251821+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"34d7041428855423ce34a942edc0c61e","SpanId":"9ee997c928c16d6a","Properties":{"elapsed":"9","parameters":"@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"INSERT INTO \"RefreshTokens\" (\"ExpiresAt\", \"IssuedAt\", \"Token\", \"UserID\")\nVALUES (@p0, @p1, @p2, @p3)\nRETURNING \"ID\";","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:0000000F","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:49.5298845+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"34d7041428855423ce34a942edc0c61e","SpanId":"9ee997c928c16d6a","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CL:0000000F","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:49.5353260+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"34d7041428855423ce34a942edc0c61e","SpanId":"9ee997c928c16d6a","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","ElapsedMilliseconds":153.3098,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CL:0000000F","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:49.5355911+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"34d7041428855423ce34a942edc0c61e","SpanId":"9ee997c928c16d6a","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CL:0000000F","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:49.5359600+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"34d7041428855423ce34a942edc0c61e","SpanId":"9ee997c928c16d6a","Properties":{"ElapsedMilliseconds":155.4933,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"POST","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/login","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CL:0000000F","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:49.5427148+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"a6c212f3eb8d772b94cffa36a19e750c","SpanId":"fd355a135488706d","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CL:00000010","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:49.5432691+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"a6c212f3eb8d772b94cffa36a19e750c","SpanId":"fd355a135488706d","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CL:00000010","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:49.5436014+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"a6c212f3eb8d772b94cffa36a19e750c","SpanId":"fd355a135488706d","Properties":{"ElapsedMilliseconds":0.8948,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CL:00000010","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:49.5461710+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"3e9635ee3c2cdcb9d928d69f0a7d9bd0","SpanId":"8167b87812ad6475","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CL:00000011","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:49.5465455+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"3e9635ee3c2cdcb9d928d69f0a7d9bd0","SpanId":"8167b87812ad6475","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CL:00000011","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:49.5623858+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3e9635ee3c2cdcb9d928d69f0a7d9bd0","SpanId":"8167b87812ad6475","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CL:00000011","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:49.5664553+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"3e9635ee3c2cdcb9d928d69f0a7d9bd0","SpanId":"8167b87812ad6475","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.AuthTest (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CL:00000011","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:49.5691943+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"3e9635ee3c2cdcb9d928d69f0a7d9bd0","SpanId":"8167b87812ad6475","Properties":{"RouteData":"{action = \"AuthTest\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MessagingApp.DTO.AuthDTO]] AuthTest()","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"37384c53-ad91-4e52-9ac7-73a6d3f796c5","ActionName":"MessagingApp.Controllers.AuthController.AuthTest (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000011","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:49.5709440+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"3e9635ee3c2cdcb9d928d69f0a7d9bd0","SpanId":"8167b87812ad6475","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"37384c53-ad91-4e52-9ac7-73a6d3f796c5","ActionName":"MessagingApp.Controllers.AuthController.AuthTest (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000011","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:49.5715408+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"3e9635ee3c2cdcb9d928d69f0a7d9bd0","SpanId":"8167b87812ad6475","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"37384c53-ad91-4e52-9ac7-73a6d3f796c5","ActionName":"MessagingApp.Controllers.AuthController.AuthTest (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000011","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:49.5727667+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3e9635ee3c2cdcb9d928d69f0a7d9bd0","SpanId":"8167b87812ad6475","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"37384c53-ad91-4e52-9ac7-73a6d3f796c5","ActionName":"MessagingApp.Controllers.AuthController.AuthTest (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000011","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:49.5735104+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"3e9635ee3c2cdcb9d928d69f0a7d9bd0","SpanId":"8167b87812ad6475","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"37384c53-ad91-4e52-9ac7-73a6d3f796c5","ActionName":"MessagingApp.Controllers.AuthController.AuthTest (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000011","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:49.5736552+03:00","Level":"Information","MessageTemplate":"Initiated test auth","TraceId":"3e9635ee3c2cdcb9d928d69f0a7d9bd0","SpanId":"8167b87812ad6475","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"37384c53-ad91-4e52-9ac7-73a6d3f796c5","ActionName":"MessagingApp.Controllers.AuthController.AuthTest (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000011","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:49.5738083+03:00","Level":"Information","MessageTemplate":"Successfully authorized","TraceId":"3e9635ee3c2cdcb9d928d69f0a7d9bd0","SpanId":"8167b87812ad6475","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"37384c53-ad91-4e52-9ac7-73a6d3f796c5","ActionName":"MessagingApp.Controllers.AuthController.AuthTest (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000011","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CL","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:44:49.5762287+03:00","Level":"Information","MessageTemplate":"Executing StatusCodeResult, setting HTTP status code {StatusCode}","TraceId":"3e9635ee3c2cdcb9d928d69f0a7d9bd0","SpanId":"8167b87812ad6475","Properties":{"StatusCode":200,"EventId":{"Id":1,"Name":"HttpStatusCodeResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.StatusCodeResult","ActionId":"37384c53-ad91-4e52-9ac7-73a6d3f796c5","ActionName":"MessagingApp.Controllers.AuthController.AuthTest (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000011","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:49.5764788+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"3e9635ee3c2cdcb9d928d69f0a7d9bd0","SpanId":"8167b87812ad6475","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.AuthTest (MessagingApp)","ElapsedMilliseconds":7.042,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CL:00000011","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:49.5766601+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"3e9635ee3c2cdcb9d928d69f0a7d9bd0","SpanId":"8167b87812ad6475","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.AuthTest (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CL:00000011","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:49.5769569+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"3e9635ee3c2cdcb9d928d69f0a7d9bd0","SpanId":"8167b87812ad6475","Properties":{"ElapsedMilliseconds":30.7818,"StatusCode":200,"ContentType":null,"ContentLength":0,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CL:00000011","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:49.6001085+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"c10bbc04ac50461d004773fe5c7c13c7","SpanId":"0284e674952fc37a","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/myChats","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CL:00000012","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:49.6005768+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"c10bbc04ac50461d004773fe5c7c13c7","SpanId":"0284e674952fc37a","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CL:00000012","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:49.6015140+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"c10bbc04ac50461d004773fe5c7c13c7","SpanId":"0284e674952fc37a","Properties":{"ElapsedMilliseconds":1.3684,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/myChats","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CL:00000012","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:49.6109763+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"25c8aa87da40aba50a8006177a81e9b4","SpanId":"385ce5dcf05c0a0f","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/myChats","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CL:00000013","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:49.6126791+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"25c8aa87da40aba50a8006177a81e9b4","SpanId":"385ce5dcf05c0a0f","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CL:00000013","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:49.6146753+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"25c8aa87da40aba50a8006177a81e9b4","SpanId":"385ce5dcf05c0a0f","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CL:00000013","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:49.6168300+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"25c8aa87da40aba50a8006177a81e9b4","SpanId":"385ce5dcf05c0a0f","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.GetUserChatsAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CL:00000013","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:49.6204644+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"25c8aa87da40aba50a8006177a81e9b4","SpanId":"385ce5dcf05c0a0f","Properties":{"RouteData":"{action = \"GetUserChats\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.Dictionary`2[System.String,System.Int64]]] GetUserChatsAsync()","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"8c1175a5-2cba-4c13-80b3-ce99b434026c","ActionName":"MessagingApp.Controllers.ChatController.GetUserChatsAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000013","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:49.6227928+03:00","Level":"Information","MessageTemplate":"Initiated chats retrieval by 192.168.31.243:6865","TraceId":"25c8aa87da40aba50a8006177a81e9b4","SpanId":"385ce5dcf05c0a0f","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"8c1175a5-2cba-4c13-80b3-ce99b434026c","ActionName":"MessagingApp.Controllers.ChatController.GetUserChatsAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000013","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:49.6233046+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"25c8aa87da40aba50a8006177a81e9b4","SpanId":"385ce5dcf05c0a0f","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"8c1175a5-2cba-4c13-80b3-ce99b434026c","ActionName":"MessagingApp.Controllers.ChatController.GetUserChatsAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000013","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:49.6238435+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"25c8aa87da40aba50a8006177a81e9b4","SpanId":"385ce5dcf05c0a0f","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"8c1175a5-2cba-4c13-80b3-ce99b434026c","ActionName":"MessagingApp.Controllers.ChatController.GetUserChatsAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000013","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:49.6263392+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"25c8aa87da40aba50a8006177a81e9b4","SpanId":"385ce5dcf05c0a0f","Properties":{"elapsed":"2","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"8c1175a5-2cba-4c13-80b3-ce99b434026c","ActionName":"MessagingApp.Controllers.ChatController.GetUserChatsAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000013","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:49.6316508+03:00","Level":"Information","MessageTemplate":"Getting available chats of user","TraceId":"25c8aa87da40aba50a8006177a81e9b4","SpanId":"385ce5dcf05c0a0f","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","ActionId":"8c1175a5-2cba-4c13-80b3-ce99b434026c","ActionName":"MessagingApp.Controllers.ChatController.GetUserChatsAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000013","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:49.7714646+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"25c8aa87da40aba50a8006177a81e9b4","SpanId":"385ce5dcf05c0a0f","Properties":{"elapsed":"3","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u1.\"ID\", u1.\"PasswordHash\", u1.\"Role\", u1.\"Username\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"Name\", s.\"OwnerID\"\nFROM (\n    SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\n    FROM \"Users\" AS u\n    WHERE u.\"ID\" = @__UserID_0\n    LIMIT 1\n) AS u1\nLEFT JOIN (\n    SELECT u0.\"ChatID\", u0.\"UserID\", c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"UserChatJoinTable\" AS u0\n    INNER JOIN \"Chats\" AS c ON u0.\"ChatID\" = c.\"ID\"\n) AS s ON u1.\"ID\" = s.\"UserID\"\nORDER BY u1.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"8c1175a5-2cba-4c13-80b3-ce99b434026c","ActionName":"MessagingApp.Controllers.ChatController.GetUserChatsAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000013","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:49.7766976+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"25c8aa87da40aba50a8006177a81e9b4","SpanId":"385ce5dcf05c0a0f","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.UserChatsDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"8c1175a5-2cba-4c13-80b3-ce99b434026c","ActionName":"MessagingApp.Controllers.ChatController.GetUserChatsAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000013","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:49.7835357+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"25c8aa87da40aba50a8006177a81e9b4","SpanId":"385ce5dcf05c0a0f","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.GetUserChatsAsync (MessagingApp)","ElapsedMilliseconds":162.7716,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CL:00000013","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:49.7837992+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"25c8aa87da40aba50a8006177a81e9b4","SpanId":"385ce5dcf05c0a0f","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.GetUserChatsAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CL:00000013","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:44:49.7841503+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"25c8aa87da40aba50a8006177a81e9b4","SpanId":"385ce5dcf05c0a0f","Properties":{"ElapsedMilliseconds":173.14,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/myChats","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CL:00000013","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:45:58.2551709+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"311a012cef3a1d41ae1304d29c53b994","SpanId":"ec63e9ca95f10feb","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/logout","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CL:00000014","RequestPath":"/api/auth/logout","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:45:58.4003428+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"311a012cef3a1d41ae1304d29c53b994","SpanId":"ec63e9ca95f10feb","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CL:00000014","RequestPath":"/api/auth/logout","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:45:58.4008266+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"311a012cef3a1d41ae1304d29c53b994","SpanId":"ec63e9ca95f10feb","Properties":{"ElapsedMilliseconds":145.6497,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/logout","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CL:00000014","RequestPath":"/api/auth/logout","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:45:58.4098069+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"eadd140f4c02f83fd20cb6dbc3eb3506","SpanId":"05b0aebf0a0b6c5e","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/logout","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CL:00000015","RequestPath":"/api/auth/logout","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:45:58.5091610+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"eadd140f4c02f83fd20cb6dbc3eb3506","SpanId":"05b0aebf0a0b6c5e","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CL:00000015","RequestPath":"/api/auth/logout","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:45:58.5316528+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"eadd140f4c02f83fd20cb6dbc3eb3506","SpanId":"05b0aebf0a0b6c5e","Properties":{"elapsed":"7","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CL:00000015","RequestPath":"/api/auth/logout","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:45:58.5407780+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"eadd140f4c02f83fd20cb6dbc3eb3506","SpanId":"05b0aebf0a0b6c5e","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Logout (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CL:00000015","RequestPath":"/api/auth/logout","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:45:58.5579563+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"eadd140f4c02f83fd20cb6dbc3eb3506","SpanId":"05b0aebf0a0b6c5e","Properties":{"RouteData":"{action = \"Logout\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] Logout()","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"93ae20d2-d7c0-49e7-9a68-1bed421743da","ActionName":"MessagingApp.Controllers.AuthController.Logout (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000015","RequestPath":"/api/auth/logout","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:45:58.5678036+03:00","Level":"Information","MessageTemplate":"Initiated session invalidation by 192.168.31.243:6865","TraceId":"eadd140f4c02f83fd20cb6dbc3eb3506","SpanId":"05b0aebf0a0b6c5e","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","ActionId":"93ae20d2-d7c0-49e7-9a68-1bed421743da","ActionName":"MessagingApp.Controllers.AuthController.Logout (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000015","RequestPath":"/api/auth/logout","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:45:58.5885361+03:00","Level":"Information","MessageTemplate":"Obtaining the token from HTTP header","TraceId":"eadd140f4c02f83fd20cb6dbc3eb3506","SpanId":"05b0aebf0a0b6c5e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"93ae20d2-d7c0-49e7-9a68-1bed421743da","ActionName":"MessagingApp.Controllers.AuthController.Logout (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000015","RequestPath":"/api/auth/logout","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:45:58.5905341+03:00","Level":"Information","MessageTemplate":"Revoking tokens","TraceId":"eadd140f4c02f83fd20cb6dbc3eb3506","SpanId":"05b0aebf0a0b6c5e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"93ae20d2-d7c0-49e7-9a68-1bed421743da","ActionName":"MessagingApp.Controllers.AuthController.Logout (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000015","RequestPath":"/api/auth/logout","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:45:58.5943649+03:00","Level":"Information","MessageTemplate":"Validating token","TraceId":"eadd140f4c02f83fd20cb6dbc3eb3506","SpanId":"05b0aebf0a0b6c5e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"93ae20d2-d7c0-49e7-9a68-1bed421743da","ActionName":"MessagingApp.Controllers.AuthController.Logout (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000015","RequestPath":"/api/auth/logout","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:45:58.6082222+03:00","Level":"Information","MessageTemplate":"Token is valid","TraceId":"eadd140f4c02f83fd20cb6dbc3eb3506","SpanId":"05b0aebf0a0b6c5e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"93ae20d2-d7c0-49e7-9a68-1bed421743da","ActionName":"MessagingApp.Controllers.AuthController.Logout (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000015","RequestPath":"/api/auth/logout","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:45:58.6104175+03:00","Level":"Information","MessageTemplate":"Revoking JWT","TraceId":"eadd140f4c02f83fd20cb6dbc3eb3506","SpanId":"05b0aebf0a0b6c5e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"93ae20d2-d7c0-49e7-9a68-1bed421743da","ActionName":"MessagingApp.Controllers.AuthController.Logout (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000015","RequestPath":"/api/auth/logout","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:45:58.7294264+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"eadd140f4c02f83fd20cb6dbc3eb3506","SpanId":"05b0aebf0a0b6c5e","Properties":{"elapsed":"1","parameters":"@__userId_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"ExpiresAt\", r.\"IssuedAt\", r.\"Token\", r.\"UserID\"\nFROM \"RefreshTokens\" AS r\nWHERE r.\"UserID\" = @__userId_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"93ae20d2-d7c0-49e7-9a68-1bed421743da","ActionName":"MessagingApp.Controllers.AuthController.Logout (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000015","RequestPath":"/api/auth/logout","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:45:58.7781432+03:00","Level":"Information","MessageTemplate":"Revoking refresh token","TraceId":"eadd140f4c02f83fd20cb6dbc3eb3506","SpanId":"05b0aebf0a0b6c5e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"93ae20d2-d7c0-49e7-9a68-1bed421743da","ActionName":"MessagingApp.Controllers.AuthController.Logout (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000015","RequestPath":"/api/auth/logout","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:45:58.7885001+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"eadd140f4c02f83fd20cb6dbc3eb3506","SpanId":"05b0aebf0a0b6c5e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"93ae20d2-d7c0-49e7-9a68-1bed421743da","ActionName":"MessagingApp.Controllers.AuthController.Logout (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000015","RequestPath":"/api/auth/logout","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:45:58.9828086+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"eadd140f4c02f83fd20cb6dbc3eb3506","SpanId":"05b0aebf0a0b6c5e","Properties":{"elapsed":"9","parameters":"@p0='?' (DbType = Int64), @p1='?', @p2='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"DELETE FROM \"RefreshTokens\"\nWHERE \"ID\" = @p0;\nINSERT INTO revoked_jwts (\"JTI\", \"Token\")\nVALUES (@p1, @p2)\nRETURNING \"ID\";","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"93ae20d2-d7c0-49e7-9a68-1bed421743da","ActionName":"MessagingApp.Controllers.AuthController.Logout (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000015","RequestPath":"/api/auth/logout","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:45:59.0084549+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"eadd140f4c02f83fd20cb6dbc3eb3506","SpanId":"05b0aebf0a0b6c5e","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"93ae20d2-d7c0-49e7-9a68-1bed421743da","ActionName":"MessagingApp.Controllers.AuthController.Logout (MessagingApp)","RequestId":"0HNFMP8PQI2CL:00000015","RequestPath":"/api/auth/logout","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:45:59.0267134+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"eadd140f4c02f83fd20cb6dbc3eb3506","SpanId":"05b0aebf0a0b6c5e","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.Logout (MessagingApp)","ElapsedMilliseconds":459.8652,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CL:00000015","RequestPath":"/api/auth/logout","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:45:59.0271097+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"eadd140f4c02f83fd20cb6dbc3eb3506","SpanId":"05b0aebf0a0b6c5e","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Logout (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CL:00000015","RequestPath":"/api/auth/logout","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:45:59.0275267+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"eadd140f4c02f83fd20cb6dbc3eb3506","SpanId":"05b0aebf0a0b6c5e","Properties":{"ElapsedMilliseconds":617.7068,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/logout","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CL:00000015","RequestPath":"/api/auth/logout","ConnectionId":"0HNFMP8PQI2CL"}}
{"Timestamp":"2025-09-18T18:46:12.8100477+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"7696b568c8382ffa84e84b803a39512a","SpanId":"8bc38b87a07796c1","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CM:00000001","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CM"}}
{"Timestamp":"2025-09-18T18:46:12.8105309+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"7696b568c8382ffa84e84b803a39512a","SpanId":"8bc38b87a07796c1","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CM:00000001","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CM"}}
{"Timestamp":"2025-09-18T18:46:12.8109396+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"7696b568c8382ffa84e84b803a39512a","SpanId":"8bc38b87a07796c1","Properties":{"ElapsedMilliseconds":0.8852,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CM:00000001","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CM"}}
{"Timestamp":"2025-09-18T18:46:12.8135835+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"12c31e4d9f67eee84041a12c650d7c26","SpanId":"e5bf79d5b22b3fe2","Properties":{"Protocol":"HTTP/1.1","Method":"POST","ContentType":"application/json","ContentLength":54,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CM:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CM"}}
{"Timestamp":"2025-09-18T18:46:12.8139643+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"12c31e4d9f67eee84041a12c650d7c26","SpanId":"e5bf79d5b22b3fe2","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CM:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CM"}}
{"Timestamp":"2025-09-18T18:46:12.8141711+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"12c31e4d9f67eee84041a12c650d7c26","SpanId":"e5bf79d5b22b3fe2","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CM:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CM"}}
{"Timestamp":"2025-09-18T18:46:12.8143790+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"12c31e4d9f67eee84041a12c650d7c26","SpanId":"e5bf79d5b22b3fe2","Properties":{"RouteData":"{action = \"Register\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MessagingApp.Models.User]] Register(MessagingApp.DTO.AuthDTO)","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CM:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CM"}}
{"Timestamp":"2025-09-18T18:46:12.8151874+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"12c31e4d9f67eee84041a12c650d7c26","SpanId":"e5bf79d5b22b3fe2","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"asdfasdfsadfa","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CM:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CM","Scope":["Username:asdfasdfsadfa"]}}
{"Timestamp":"2025-09-18T18:46:12.8154994+03:00","Level":"Information","MessageTemplate":"Initiated user registration by ","TraceId":"12c31e4d9f67eee84041a12c650d7c26","SpanId":"e5bf79d5b22b3fe2","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"asdfasdfsadfa","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CM:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CM","Scope":["Username:asdfasdfsadfa"]}}
{"Timestamp":"2025-09-18T18:46:12.8157875+03:00","Level":"Information","MessageTemplate":"Adding user to DB","TraceId":"12c31e4d9f67eee84041a12c650d7c26","SpanId":"e5bf79d5b22b3fe2","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"asdfasdfsadfa","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CM:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CM","Scope":["Username:asdfasdfsadfa"]}}
{"Timestamp":"2025-09-18T18:46:12.8159840+03:00","Level":"Information","MessageTemplate":"Creating new user","TraceId":"12c31e4d9f67eee84041a12c650d7c26","SpanId":"e5bf79d5b22b3fe2","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"asdfasdfsadfa","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CM:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CM","Scope":["Username:asdfasdfsadfa"]}}
{"Timestamp":"2025-09-18T18:46:12.8161185+03:00","Level":"Information","MessageTemplate":"Composing new user object","TraceId":"12c31e4d9f67eee84041a12c650d7c26","SpanId":"e5bf79d5b22b3fe2","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"asdfasdfsadfa","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CM:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CM","Scope":["Username:asdfasdfsadfa"]}}
{"Timestamp":"2025-09-18T18:46:12.8162778+03:00","Level":"Information","MessageTemplate":"Generating password hash","TraceId":"12c31e4d9f67eee84041a12c650d7c26","SpanId":"e5bf79d5b22b3fe2","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"asdfasdfsadfa","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CM:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CM","Scope":["Username:asdfasdfsadfa"]}}
{"Timestamp":"2025-09-18T18:46:12.8810780+03:00","Level":"Information","MessageTemplate":"Saving new user...","TraceId":"12c31e4d9f67eee84041a12c650d7c26","SpanId":"e5bf79d5b22b3fe2","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"asdfasdfsadfa","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CM:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CM","Scope":["Username:asdfasdfsadfa"]}}
{"Timestamp":"2025-09-18T18:46:12.8844021+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"12c31e4d9f67eee84041a12c650d7c26","SpanId":"e5bf79d5b22b3fe2","Properties":{"elapsed":"2","parameters":"@p0='?', @p1='?' (DbType = Int32), @p2='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"INSERT INTO \"Users\" (\"PasswordHash\", \"Role\", \"Username\")\nVALUES (@p0, @p1, @p2)\nRETURNING \"ID\";","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"asdfasdfsadfa","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CM:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CM","Scope":["Username:asdfasdfsadfa"]}}
{"Timestamp":"2025-09-18T18:46:12.8849563+03:00","Level":"Information","MessageTemplate":"User successfully created, returning HTTP OK","TraceId":"12c31e4d9f67eee84041a12c650d7c26","SpanId":"e5bf79d5b22b3fe2","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"asdfasdfsadfa","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CM:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CM","Scope":["Username:asdfasdfsadfa"]}}
{"Timestamp":"2025-09-18T18:46:12.8851776+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"12c31e4d9f67eee84041a12c650d7c26","SpanId":"e5bf79d5b22b3fe2","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CM:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CM"}}
{"Timestamp":"2025-09-18T18:46:12.8854953+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"12c31e4d9f67eee84041a12c650d7c26","SpanId":"e5bf79d5b22b3fe2","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","ElapsedMilliseconds":70.9277,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CM:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CM"}}
{"Timestamp":"2025-09-18T18:46:12.8856864+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"12c31e4d9f67eee84041a12c650d7c26","SpanId":"e5bf79d5b22b3fe2","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CM:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CM"}}
{"Timestamp":"2025-09-18T18:46:12.8859130+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"12c31e4d9f67eee84041a12c650d7c26","SpanId":"e5bf79d5b22b3fe2","Properties":{"ElapsedMilliseconds":72.3452,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"POST","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CM:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CM"}}
{"Timestamp":"2025-09-18T18:46:14.5191851+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"7448fb8b36d0b3ce63647ffbcbf11703","SpanId":"79542bd12e5142b9","Properties":{"Protocol":"HTTP/1.1","Method":"POST","ContentType":"application/json","ContentLength":54,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CM:00000003","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CM"}}
{"Timestamp":"2025-09-18T18:46:14.5196540+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"7448fb8b36d0b3ce63647ffbcbf11703","SpanId":"79542bd12e5142b9","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CM:00000003","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CM"}}
{"Timestamp":"2025-09-18T18:46:14.5199431+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"7448fb8b36d0b3ce63647ffbcbf11703","SpanId":"79542bd12e5142b9","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CM:00000003","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CM"}}
{"Timestamp":"2025-09-18T18:46:14.5202569+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"7448fb8b36d0b3ce63647ffbcbf11703","SpanId":"79542bd12e5142b9","Properties":{"RouteData":"{action = \"Register\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MessagingApp.Models.User]] Register(MessagingApp.DTO.AuthDTO)","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CM:00000003","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CM"}}
{"Timestamp":"2025-09-18T18:46:14.5208880+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"7448fb8b36d0b3ce63647ffbcbf11703","SpanId":"79542bd12e5142b9","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"asdfasdfsadfa","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CM:00000003","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CM","Scope":["Username:asdfasdfsadfa"]}}
{"Timestamp":"2025-09-18T18:46:14.5210693+03:00","Level":"Information","MessageTemplate":"Initiated user registration by ","TraceId":"7448fb8b36d0b3ce63647ffbcbf11703","SpanId":"79542bd12e5142b9","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"asdfasdfsadfa","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CM:00000003","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CM","Scope":["Username:asdfasdfsadfa"]}}
{"Timestamp":"2025-09-18T18:46:14.5212410+03:00","Level":"Information","MessageTemplate":"Adding user to DB","TraceId":"7448fb8b36d0b3ce63647ffbcbf11703","SpanId":"79542bd12e5142b9","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"asdfasdfsadfa","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CM:00000003","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CM","Scope":["Username:asdfasdfsadfa"]}}
{"Timestamp":"2025-09-18T18:46:14.5214326+03:00","Level":"Information","MessageTemplate":"Creating new user","TraceId":"7448fb8b36d0b3ce63647ffbcbf11703","SpanId":"79542bd12e5142b9","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"asdfasdfsadfa","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CM:00000003","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CM","Scope":["Username:asdfasdfsadfa"]}}
{"Timestamp":"2025-09-18T18:46:14.5215890+03:00","Level":"Information","MessageTemplate":"Composing new user object","TraceId":"7448fb8b36d0b3ce63647ffbcbf11703","SpanId":"79542bd12e5142b9","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"asdfasdfsadfa","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CM:00000003","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CM","Scope":["Username:asdfasdfsadfa"]}}
{"Timestamp":"2025-09-18T18:46:14.5217116+03:00","Level":"Information","MessageTemplate":"Generating password hash","TraceId":"7448fb8b36d0b3ce63647ffbcbf11703","SpanId":"79542bd12e5142b9","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"asdfasdfsadfa","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CM:00000003","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CM","Scope":["Username:asdfasdfsadfa"]}}
{"Timestamp":"2025-09-18T18:46:14.5867825+03:00","Level":"Information","MessageTemplate":"Saving new user...","TraceId":"7448fb8b36d0b3ce63647ffbcbf11703","SpanId":"79542bd12e5142b9","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"asdfasdfsadfa","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CM:00000003","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CM","Scope":["Username:asdfasdfsadfa"]}}
{"Timestamp":"2025-09-18T18:46:14.5902039+03:00","Level":"Error","MessageTemplate":"Failed executing DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"7448fb8b36d0b3ce63647ffbcbf11703","SpanId":"79542bd12e5142b9","Properties":{"elapsed":"2","parameters":"@p0='?', @p1='?' (DbType = Int32), @p2='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"INSERT INTO \"Users\" (\"PasswordHash\", \"Role\", \"Username\")\nVALUES (@p0, @p1, @p2)\nRETURNING \"ID\";","EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"asdfasdfsadfa","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CM:00000003","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CM","Scope":["Username:asdfasdfsadfa"]}}
{"Timestamp":"2025-09-18T18:46:14.5921639+03:00","Level":"Error","MessageTemplate":"An exception occurred in the database while saving changes for context type '{contextType}'.{newline}{error}","TraceId":"7448fb8b36d0b3ce63647ffbcbf11703","SpanId":"79542bd12e5142b9","Exception":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint \"AK_Users_Username\"\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23505\n    MessageText: duplicate key value violates unique constraint \"AK_Users_Username\"\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: Users\n    ConstraintName: AK_Users_Username\n    File: nbtinsert.c\n    Line: 666\n    Routine: _bt_check_unique\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","Properties":{"contextType":"DataContext","newline":"\n","error":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint \"AK_Users_Username\"\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23505\n    MessageText: duplicate key value violates unique constraint \"AK_Users_Username\"\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: Users\n    ConstraintName: AK_Users_Username\n    File: nbtinsert.c\n    Line: 666\n    Routine: _bt_check_unique\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","username":"asdfasdfsadfa","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CM:00000003","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CM","Scope":["Username:asdfasdfsadfa"]}}
{"Timestamp":"2025-09-18T18:46:14.5950231+03:00","Level":"Warning","MessageTemplate":"User with such username already exists","TraceId":"7448fb8b36d0b3ce63647ffbcbf11703","SpanId":"79542bd12e5142b9","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"asdfasdfsadfa","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CM:00000003","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CM","Scope":["Username:asdfasdfsadfa"]}}
{"Timestamp":"2025-09-18T18:46:14.5951948+03:00","Level":"Warning","MessageTemplate":"A user with such username already exists.","TraceId":"7448fb8b36d0b3ce63647ffbcbf11703","SpanId":"79542bd12e5142b9","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"asdfasdfsadfa","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CM:00000003","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CM","Scope":["Username:asdfasdfsadfa"]}}
{"Timestamp":"2025-09-18T18:46:14.5955361+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"7448fb8b36d0b3ce63647ffbcbf11703","SpanId":"79542bd12e5142b9","Properties":{"ObjectResultType":"ObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CM:00000003","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CM"}}
{"Timestamp":"2025-09-18T18:46:14.5958129+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"7448fb8b36d0b3ce63647ffbcbf11703","SpanId":"79542bd12e5142b9","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","ElapsedMilliseconds":75.2666,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CM:00000003","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CM"}}
{"Timestamp":"2025-09-18T18:46:14.5960457+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"7448fb8b36d0b3ce63647ffbcbf11703","SpanId":"79542bd12e5142b9","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CM:00000003","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CM"}}
{"Timestamp":"2025-09-18T18:46:14.5963956+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"7448fb8b36d0b3ce63647ffbcbf11703","SpanId":"79542bd12e5142b9","Properties":{"ElapsedMilliseconds":77.2131,"StatusCode":409,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"POST","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CM:00000003","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CM"}}
{"Timestamp":"2025-09-18T18:49:07.5040821+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"6f1aab7543d18d983bbd238c53a0aa99","SpanId":"ba0f74bad9ee51e2","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CN:00000001","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN"}}
{"Timestamp":"2025-09-18T18:49:07.5462185+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"6f1aab7543d18d983bbd238c53a0aa99","SpanId":"ba0f74bad9ee51e2","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CN:00000001","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN"}}
{"Timestamp":"2025-09-18T18:49:07.5479340+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"6f1aab7543d18d983bbd238c53a0aa99","SpanId":"ba0f74bad9ee51e2","Properties":{"ElapsedMilliseconds":53.7811,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CN:00000001","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN"}}
{"Timestamp":"2025-09-18T18:49:07.5512156+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"b493fa81cf716018272cef461acea8ea","SpanId":"12205d037d100fb3","Properties":{"Protocol":"HTTP/1.1","Method":"POST","ContentType":"application/json","ContentLength":53,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CN:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN"}}
{"Timestamp":"2025-09-18T18:49:07.5517804+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"b493fa81cf716018272cef461acea8ea","SpanId":"12205d037d100fb3","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CN:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN"}}
{"Timestamp":"2025-09-18T18:49:07.5553266+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"b493fa81cf716018272cef461acea8ea","SpanId":"12205d037d100fb3","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CN:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN"}}
{"Timestamp":"2025-09-18T18:49:07.5566419+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"b493fa81cf716018272cef461acea8ea","SpanId":"12205d037d100fb3","Properties":{"RouteData":"{action = \"Register\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MessagingApp.Models.User]] Register(MessagingApp.DTO.AuthDTO)","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CN:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN"}}
{"Timestamp":"2025-09-18T18:49:07.5694732+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"b493fa81cf716018272cef461acea8ea","SpanId":"12205d037d100fb3","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"asdfasdfadsf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CN:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN","Scope":["Username:asdfasdfadsf"]}}
{"Timestamp":"2025-09-18T18:49:07.5697056+03:00","Level":"Information","MessageTemplate":"Initiated user registration by ","TraceId":"b493fa81cf716018272cef461acea8ea","SpanId":"12205d037d100fb3","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"asdfasdfadsf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CN:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN","Scope":["Username:asdfasdfadsf"]}}
{"Timestamp":"2025-09-18T18:49:07.5699638+03:00","Level":"Information","MessageTemplate":"Adding user to DB","TraceId":"b493fa81cf716018272cef461acea8ea","SpanId":"12205d037d100fb3","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"asdfasdfadsf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CN:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN","Scope":["Username:asdfasdfadsf"]}}
{"Timestamp":"2025-09-18T18:49:07.5701344+03:00","Level":"Information","MessageTemplate":"Creating new user","TraceId":"b493fa81cf716018272cef461acea8ea","SpanId":"12205d037d100fb3","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"asdfasdfadsf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CN:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN","Scope":["Username:asdfasdfadsf"]}}
{"Timestamp":"2025-09-18T18:49:07.5703697+03:00","Level":"Information","MessageTemplate":"Composing new user object","TraceId":"b493fa81cf716018272cef461acea8ea","SpanId":"12205d037d100fb3","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"asdfasdfadsf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CN:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN","Scope":["Username:asdfasdfadsf"]}}
{"Timestamp":"2025-09-18T18:49:07.5705335+03:00","Level":"Information","MessageTemplate":"Generating password hash","TraceId":"b493fa81cf716018272cef461acea8ea","SpanId":"12205d037d100fb3","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"asdfasdfadsf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CN:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN","Scope":["Username:asdfasdfadsf"]}}
{"Timestamp":"2025-09-18T18:49:07.6403454+03:00","Level":"Information","MessageTemplate":"Saving new user...","TraceId":"b493fa81cf716018272cef461acea8ea","SpanId":"12205d037d100fb3","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"asdfasdfadsf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CN:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN","Scope":["Username:asdfasdfadsf"]}}
{"Timestamp":"2025-09-18T18:49:07.6714302+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"b493fa81cf716018272cef461acea8ea","SpanId":"12205d037d100fb3","Properties":{"elapsed":"21","parameters":"@p0='?', @p1='?' (DbType = Int32), @p2='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"INSERT INTO \"Users\" (\"PasswordHash\", \"Role\", \"Username\")\nVALUES (@p0, @p1, @p2)\nRETURNING \"ID\";","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"asdfasdfadsf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CN:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN","Scope":["Username:asdfasdfadsf"]}}
{"Timestamp":"2025-09-18T18:49:07.6966259+03:00","Level":"Information","MessageTemplate":"User successfully created, returning HTTP OK","TraceId":"b493fa81cf716018272cef461acea8ea","SpanId":"12205d037d100fb3","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"asdfasdfadsf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CN:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN","Scope":["Username:asdfasdfadsf"]}}
{"Timestamp":"2025-09-18T18:49:07.6972941+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"b493fa81cf716018272cef461acea8ea","SpanId":"12205d037d100fb3","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CN:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN"}}
{"Timestamp":"2025-09-18T18:49:07.6978588+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"b493fa81cf716018272cef461acea8ea","SpanId":"12205d037d100fb3","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","ElapsedMilliseconds":140.8629,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CN:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN"}}
{"Timestamp":"2025-09-18T18:49:07.6981362+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"b493fa81cf716018272cef461acea8ea","SpanId":"12205d037d100fb3","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CN:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN"}}
{"Timestamp":"2025-09-18T18:49:07.6985433+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"b493fa81cf716018272cef461acea8ea","SpanId":"12205d037d100fb3","Properties":{"ElapsedMilliseconds":147.306,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"POST","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CN:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN"}}
{"Timestamp":"2025-09-18T18:49:15.1198776+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"c1df70716e1b56a003427bb2d2548b5e","SpanId":"b71b7e955d77e774","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CN:00000003","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN"}}
{"Timestamp":"2025-09-18T18:49:15.1202630+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"c1df70716e1b56a003427bb2d2548b5e","SpanId":"b71b7e955d77e774","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CN:00000003","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN"}}
{"Timestamp":"2025-09-18T18:49:15.1205627+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"c1df70716e1b56a003427bb2d2548b5e","SpanId":"b71b7e955d77e774","Properties":{"ElapsedMilliseconds":0.6905,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CN:00000003","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN"}}
{"Timestamp":"2025-09-18T18:49:15.1231844+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"3dcc7182f05898b8b4bd6b34ba52695d","SpanId":"f6c7937b9821f0a8","Properties":{"Protocol":"HTTP/1.1","Method":"POST","ContentType":"application/json","ContentLength":53,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CN:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN"}}
{"Timestamp":"2025-09-18T18:49:15.1235990+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"3dcc7182f05898b8b4bd6b34ba52695d","SpanId":"f6c7937b9821f0a8","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CN:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN"}}
{"Timestamp":"2025-09-18T18:49:15.1270079+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"3dcc7182f05898b8b4bd6b34ba52695d","SpanId":"f6c7937b9821f0a8","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CN:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN"}}
{"Timestamp":"2025-09-18T18:49:15.1276057+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"3dcc7182f05898b8b4bd6b34ba52695d","SpanId":"f6c7937b9821f0a8","Properties":{"RouteData":"{action = \"Register\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MessagingApp.Models.User]] Register(MessagingApp.DTO.AuthDTO)","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CN:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN"}}
{"Timestamp":"2025-09-18T18:49:15.1286054+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"3dcc7182f05898b8b4bd6b34ba52695d","SpanId":"f6c7937b9821f0a8","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"asdfasdfadsf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CN:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN","Scope":["Username:asdfasdfadsf"]}}
{"Timestamp":"2025-09-18T18:49:15.1287590+03:00","Level":"Information","MessageTemplate":"Initiated user registration by ","TraceId":"3dcc7182f05898b8b4bd6b34ba52695d","SpanId":"f6c7937b9821f0a8","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"asdfasdfadsf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CN:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN","Scope":["Username:asdfasdfadsf"]}}
{"Timestamp":"2025-09-18T18:49:15.1289179+03:00","Level":"Information","MessageTemplate":"Adding user to DB","TraceId":"3dcc7182f05898b8b4bd6b34ba52695d","SpanId":"f6c7937b9821f0a8","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"asdfasdfadsf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CN:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN","Scope":["Username:asdfasdfadsf"]}}
{"Timestamp":"2025-09-18T18:49:15.1290608+03:00","Level":"Information","MessageTemplate":"Creating new user","TraceId":"3dcc7182f05898b8b4bd6b34ba52695d","SpanId":"f6c7937b9821f0a8","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"asdfasdfadsf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CN:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN","Scope":["Username:asdfasdfadsf"]}}
{"Timestamp":"2025-09-18T18:49:15.1292745+03:00","Level":"Information","MessageTemplate":"Composing new user object","TraceId":"3dcc7182f05898b8b4bd6b34ba52695d","SpanId":"f6c7937b9821f0a8","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"asdfasdfadsf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CN:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN","Scope":["Username:asdfasdfadsf"]}}
{"Timestamp":"2025-09-18T18:49:15.1294954+03:00","Level":"Information","MessageTemplate":"Generating password hash","TraceId":"3dcc7182f05898b8b4bd6b34ba52695d","SpanId":"f6c7937b9821f0a8","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"asdfasdfadsf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CN:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN","Scope":["Username:asdfasdfadsf"]}}
{"Timestamp":"2025-09-18T18:49:15.1945302+03:00","Level":"Information","MessageTemplate":"Saving new user...","TraceId":"3dcc7182f05898b8b4bd6b34ba52695d","SpanId":"f6c7937b9821f0a8","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"asdfasdfadsf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CN:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN","Scope":["Username:asdfasdfadsf"]}}
{"Timestamp":"2025-09-18T18:49:15.2200186+03:00","Level":"Error","MessageTemplate":"Failed executing DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3dcc7182f05898b8b4bd6b34ba52695d","SpanId":"f6c7937b9821f0a8","Properties":{"elapsed":"3","parameters":"@p0='?', @p1='?' (DbType = Int32), @p2='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"INSERT INTO \"Users\" (\"PasswordHash\", \"Role\", \"Username\")\nVALUES (@p0, @p1, @p2)\nRETURNING \"ID\";","EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"asdfasdfadsf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CN:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN","Scope":["Username:asdfasdfadsf"]}}
{"Timestamp":"2025-09-18T18:49:15.2237058+03:00","Level":"Error","MessageTemplate":"An exception occurred in the database while saving changes for context type '{contextType}'.{newline}{error}","TraceId":"3dcc7182f05898b8b4bd6b34ba52695d","SpanId":"f6c7937b9821f0a8","Exception":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint \"AK_Users_Username\"\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23505\n    MessageText: duplicate key value violates unique constraint \"AK_Users_Username\"\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: Users\n    ConstraintName: AK_Users_Username\n    File: nbtinsert.c\n    Line: 666\n    Routine: _bt_check_unique\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","Properties":{"contextType":"DataContext","newline":"\n","error":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint \"AK_Users_Username\"\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23505\n    MessageText: duplicate key value violates unique constraint \"AK_Users_Username\"\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: Users\n    ConstraintName: AK_Users_Username\n    File: nbtinsert.c\n    Line: 666\n    Routine: _bt_check_unique\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","username":"asdfasdfadsf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CN:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN","Scope":["Username:asdfasdfadsf"]}}
{"Timestamp":"2025-09-18T18:49:15.2273521+03:00","Level":"Warning","MessageTemplate":"User with such username already exists","TraceId":"3dcc7182f05898b8b4bd6b34ba52695d","SpanId":"f6c7937b9821f0a8","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"asdfasdfadsf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CN:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN","Scope":["Username:asdfasdfadsf"]}}
{"Timestamp":"2025-09-18T18:49:15.2275491+03:00","Level":"Warning","MessageTemplate":"A user with such username already exists.","TraceId":"3dcc7182f05898b8b4bd6b34ba52695d","SpanId":"f6c7937b9821f0a8","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"asdfasdfadsf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CN:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN","Scope":["Username:asdfasdfadsf"]}}
{"Timestamp":"2025-09-18T18:49:15.2278199+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"3dcc7182f05898b8b4bd6b34ba52695d","SpanId":"f6c7937b9821f0a8","Properties":{"ObjectResultType":"ObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CN:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN"}}
{"Timestamp":"2025-09-18T18:49:15.2281096+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"3dcc7182f05898b8b4bd6b34ba52695d","SpanId":"f6c7937b9821f0a8","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","ElapsedMilliseconds":99.9555,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CN:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN"}}
{"Timestamp":"2025-09-18T18:49:15.2283377+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"3dcc7182f05898b8b4bd6b34ba52695d","SpanId":"f6c7937b9821f0a8","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CN:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN"}}
{"Timestamp":"2025-09-18T18:49:15.2285985+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"3dcc7182f05898b8b4bd6b34ba52695d","SpanId":"f6c7937b9821f0a8","Properties":{"ElapsedMilliseconds":105.4063,"StatusCode":409,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"POST","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CN:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN"}}
{"Timestamp":"2025-09-18T18:50:27.3248421+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"27231d5347f9538e6d5ca2485f54e373","SpanId":"55b395ce4c931b03","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/login","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CN:00000005","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CN"}}
{"Timestamp":"2025-09-18T18:50:27.4269954+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"27231d5347f9538e6d5ca2485f54e373","SpanId":"55b395ce4c931b03","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CN:00000005","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CN"}}
{"Timestamp":"2025-09-18T18:50:27.4273458+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"27231d5347f9538e6d5ca2485f54e373","SpanId":"55b395ce4c931b03","Properties":{"ElapsedMilliseconds":102.5188,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/login","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CN:00000005","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CN"}}
{"Timestamp":"2025-09-18T18:50:27.4306795+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"b49a43fdf5f4911fec32ca5daa222866","SpanId":"62e3ae314c2aca28","Properties":{"Protocol":"HTTP/1.1","Method":"POST","ContentType":"application/json","ContentLength":81,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/login","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CN:00000006","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CN"}}
{"Timestamp":"2025-09-18T18:50:27.4311313+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"b49a43fdf5f4911fec32ca5daa222866","SpanId":"62e3ae314c2aca28","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CN:00000006","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CN"}}
{"Timestamp":"2025-09-18T18:50:27.4314036+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"b49a43fdf5f4911fec32ca5daa222866","SpanId":"62e3ae314c2aca28","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CN:00000006","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CN"}}
{"Timestamp":"2025-09-18T18:50:27.4316276+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"b49a43fdf5f4911fec32ca5daa222866","SpanId":"62e3ae314c2aca28","Properties":{"RouteData":"{action = \"Login\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] Login(MessagingApp.DTO.AuthDTO)","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CN:00000006","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CN"}}
{"Timestamp":"2025-09-18T18:50:27.4324545+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"b49a43fdf5f4911fec32ca5daa222866","SpanId":"62e3ae314c2aca28","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"фівощафщзіва","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CN:00000006","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CN","Scope":["Username:фівощафщзіва"]}}
{"Timestamp":"2025-09-18T18:50:27.4326303+03:00","Level":"Information","MessageTemplate":"Initiated login","TraceId":"b49a43fdf5f4911fec32ca5daa222866","SpanId":"62e3ae314c2aca28","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"фівощафщзіва","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CN:00000006","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CN","Scope":["Username:фівощафщзіва"]}}
{"Timestamp":"2025-09-18T18:50:27.4329060+03:00","Level":"Information","MessageTemplate":"Authenticating user","TraceId":"b49a43fdf5f4911fec32ca5daa222866","SpanId":"62e3ae314c2aca28","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"фівощафщзіва","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CN:00000006","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CN","Scope":["Username:фівощафщзіва"]}}
{"Timestamp":"2025-09-18T18:50:27.4888533+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"b49a43fdf5f4911fec32ca5daa222866","SpanId":"62e3ae314c2aca28","Properties":{"elapsed":"8","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"фівощафщзіва","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CN:00000006","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CN","Scope":["Username:фівощафщзіва"]}}
{"Timestamp":"2025-09-18T18:50:27.5020787+03:00","Level":"Warning","MessageTemplate":"Couldn't authenticate, no such user","TraceId":"b49a43fdf5f4911fec32ca5daa222866","SpanId":"62e3ae314c2aca28","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"фівощафщзіва","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CN:00000006","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CN","Scope":["Username:фівощафщзіва"]}}
{"Timestamp":"2025-09-18T18:50:27.5152894+03:00","Level":"Warning","MessageTemplate":"No such user for auth","TraceId":"b49a43fdf5f4911fec32ca5daa222866","SpanId":"62e3ae314c2aca28","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"фівощафщзіва","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CN:00000006","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CN","Scope":["Username:фівощафщзіва"]}}
{"Timestamp":"2025-09-18T18:50:27.5178250+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"b49a43fdf5f4911fec32ca5daa222866","SpanId":"62e3ae314c2aca28","Properties":{"ObjectResultType":"ObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CN:00000006","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CN"}}
{"Timestamp":"2025-09-18T18:50:27.5367579+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"b49a43fdf5f4911fec32ca5daa222866","SpanId":"62e3ae314c2aca28","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","ElapsedMilliseconds":104.9166,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CN:00000006","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CN"}}
{"Timestamp":"2025-09-18T18:50:27.5379209+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"b49a43fdf5f4911fec32ca5daa222866","SpanId":"62e3ae314c2aca28","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CN:00000006","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CN"}}
{"Timestamp":"2025-09-18T18:50:27.5382560+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"b49a43fdf5f4911fec32ca5daa222866","SpanId":"62e3ae314c2aca28","Properties":{"ElapsedMilliseconds":107.5846,"StatusCode":404,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"POST","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/login","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CN:00000006","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CN"}}
{"Timestamp":"2025-09-18T18:50:34.9606452+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"fae6afd0db6eda39dce47d9daaf18fc8","SpanId":"def725f2cd26e470","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CN:00000007","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN"}}
{"Timestamp":"2025-09-18T18:50:34.9665706+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"fae6afd0db6eda39dce47d9daaf18fc8","SpanId":"def725f2cd26e470","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CN:00000007","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN"}}
{"Timestamp":"2025-09-18T18:50:35.0785124+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"fae6afd0db6eda39dce47d9daaf18fc8","SpanId":"def725f2cd26e470","Properties":{"ElapsedMilliseconds":117.8046,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CN:00000007","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN"}}
{"Timestamp":"2025-09-18T18:50:35.0824541+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"a8280f58a89ffe1d90dac2ee9b00d04d","SpanId":"6997bb5d685b391d","Properties":{"Protocol":"HTTP/1.1","Method":"POST","ContentType":"application/json","ContentLength":89,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CN:00000008","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN"}}
{"Timestamp":"2025-09-18T18:50:35.0828567+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"a8280f58a89ffe1d90dac2ee9b00d04d","SpanId":"6997bb5d685b391d","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CN:00000008","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN"}}
{"Timestamp":"2025-09-18T18:50:35.0831181+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"a8280f58a89ffe1d90dac2ee9b00d04d","SpanId":"6997bb5d685b391d","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CN:00000008","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN"}}
{"Timestamp":"2025-09-18T18:50:35.0854415+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"a8280f58a89ffe1d90dac2ee9b00d04d","SpanId":"6997bb5d685b391d","Properties":{"RouteData":"{action = \"Register\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MessagingApp.Models.User]] Register(MessagingApp.DTO.AuthDTO)","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CN:00000008","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN"}}
{"Timestamp":"2025-09-18T18:50:35.0861631+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"a8280f58a89ffe1d90dac2ee9b00d04d","SpanId":"6997bb5d685b391d","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"фівафізщваофів","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CN:00000008","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN","Scope":["Username:фівафізщваофів"]}}
{"Timestamp":"2025-09-18T18:50:35.0863052+03:00","Level":"Information","MessageTemplate":"Initiated user registration by ","TraceId":"a8280f58a89ffe1d90dac2ee9b00d04d","SpanId":"6997bb5d685b391d","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"фівафізщваофів","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CN:00000008","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN","Scope":["Username:фівафізщваофів"]}}
{"Timestamp":"2025-09-18T18:50:35.0870635+03:00","Level":"Information","MessageTemplate":"Adding user to DB","TraceId":"a8280f58a89ffe1d90dac2ee9b00d04d","SpanId":"6997bb5d685b391d","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"фівафізщваофів","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CN:00000008","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN","Scope":["Username:фівафізщваофів"]}}
{"Timestamp":"2025-09-18T18:50:35.0872703+03:00","Level":"Information","MessageTemplate":"Creating new user","TraceId":"a8280f58a89ffe1d90dac2ee9b00d04d","SpanId":"6997bb5d685b391d","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"фівафізщваофів","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CN:00000008","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN","Scope":["Username:фівафізщваофів"]}}
{"Timestamp":"2025-09-18T18:50:35.0874801+03:00","Level":"Information","MessageTemplate":"Composing new user object","TraceId":"a8280f58a89ffe1d90dac2ee9b00d04d","SpanId":"6997bb5d685b391d","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"фівафізщваофів","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CN:00000008","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN","Scope":["Username:фівафізщваофів"]}}
{"Timestamp":"2025-09-18T18:50:35.0876857+03:00","Level":"Information","MessageTemplate":"Generating password hash","TraceId":"a8280f58a89ffe1d90dac2ee9b00d04d","SpanId":"6997bb5d685b391d","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"фівафізщваофів","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CN:00000008","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN","Scope":["Username:фівафізщваофів"]}}
{"Timestamp":"2025-09-18T18:50:35.1604872+03:00","Level":"Information","MessageTemplate":"Saving new user...","TraceId":"a8280f58a89ffe1d90dac2ee9b00d04d","SpanId":"6997bb5d685b391d","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"фівафізщваофів","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CN:00000008","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN","Scope":["Username:фівафізщваофів"]}}
{"Timestamp":"2025-09-18T18:50:35.1645063+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"a8280f58a89ffe1d90dac2ee9b00d04d","SpanId":"6997bb5d685b391d","Properties":{"elapsed":"3","parameters":"@p0='?', @p1='?' (DbType = Int32), @p2='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"INSERT INTO \"Users\" (\"PasswordHash\", \"Role\", \"Username\")\nVALUES (@p0, @p1, @p2)\nRETURNING \"ID\";","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"фівафізщваофів","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CN:00000008","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN","Scope":["Username:фівафізщваофів"]}}
{"Timestamp":"2025-09-18T18:50:35.1650330+03:00","Level":"Information","MessageTemplate":"User successfully created, returning HTTP OK","TraceId":"a8280f58a89ffe1d90dac2ee9b00d04d","SpanId":"6997bb5d685b391d","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"фівафізщваофів","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CN:00000008","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN","Scope":["Username:фівафізщваофів"]}}
{"Timestamp":"2025-09-18T18:50:35.1653998+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"a8280f58a89ffe1d90dac2ee9b00d04d","SpanId":"6997bb5d685b391d","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CN:00000008","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN"}}
{"Timestamp":"2025-09-18T18:50:35.1658953+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"a8280f58a89ffe1d90dac2ee9b00d04d","SpanId":"6997bb5d685b391d","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","ElapsedMilliseconds":80.1277,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CN:00000008","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN"}}
{"Timestamp":"2025-09-18T18:50:35.1660862+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"a8280f58a89ffe1d90dac2ee9b00d04d","SpanId":"6997bb5d685b391d","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CN:00000008","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN"}}
{"Timestamp":"2025-09-18T18:50:35.1662884+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"a8280f58a89ffe1d90dac2ee9b00d04d","SpanId":"6997bb5d685b391d","Properties":{"ElapsedMilliseconds":83.8376,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"POST","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CN:00000008","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CN"}}
{"Timestamp":"2025-09-18T18:53:38.7496715+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"7629a1d821115078fd12120907fd5db2","SpanId":"689c62ab57433445","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:00000001","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:53:38.9604758+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"7629a1d821115078fd12120907fd5db2","SpanId":"689c62ab57433445","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CO:00000001","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:53:38.9612846+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"7629a1d821115078fd12120907fd5db2","SpanId":"689c62ab57433445","Properties":{"ElapsedMilliseconds":215.7762,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:00000001","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:53:38.9640792+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"26a85a3a6c85ae2d3b89361982ddfd90","SpanId":"a476d7b7df217b89","Properties":{"Protocol":"HTTP/1.1","Method":"POST","ContentType":"application/json","ContentLength":60,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:53:38.9789530+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"26a85a3a6c85ae2d3b89361982ddfd90","SpanId":"a476d7b7df217b89","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CO:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:53:38.9803507+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"26a85a3a6c85ae2d3b89361982ddfd90","SpanId":"a476d7b7df217b89","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CO:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:53:38.9894456+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"26a85a3a6c85ae2d3b89361982ddfd90","SpanId":"a476d7b7df217b89","Properties":{"RouteData":"{action = \"Register\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MessagingApp.Models.User]] Register(MessagingApp.DTO.AuthDTO)","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:53:39.0115714+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"26a85a3a6c85ae2d3b89361982ddfd90","SpanId":"a476d7b7df217b89","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"aksjdfasjdnfoasidf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:aksjdfasjdnfoasidf"]}}
{"Timestamp":"2025-09-18T18:53:39.0119765+03:00","Level":"Information","MessageTemplate":"Initiated user registration by ","TraceId":"26a85a3a6c85ae2d3b89361982ddfd90","SpanId":"a476d7b7df217b89","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"aksjdfasjdnfoasidf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:aksjdfasjdnfoasidf"]}}
{"Timestamp":"2025-09-18T18:53:39.0123548+03:00","Level":"Information","MessageTemplate":"Adding user to DB","TraceId":"26a85a3a6c85ae2d3b89361982ddfd90","SpanId":"a476d7b7df217b89","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"aksjdfasjdnfoasidf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:aksjdfasjdnfoasidf"]}}
{"Timestamp":"2025-09-18T18:53:39.0125149+03:00","Level":"Information","MessageTemplate":"Creating new user","TraceId":"26a85a3a6c85ae2d3b89361982ddfd90","SpanId":"a476d7b7df217b89","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"aksjdfasjdnfoasidf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:aksjdfasjdnfoasidf"]}}
{"Timestamp":"2025-09-18T18:53:39.0127356+03:00","Level":"Information","MessageTemplate":"Composing new user object","TraceId":"26a85a3a6c85ae2d3b89361982ddfd90","SpanId":"a476d7b7df217b89","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"aksjdfasjdnfoasidf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:aksjdfasjdnfoasidf"]}}
{"Timestamp":"2025-09-18T18:53:39.0128756+03:00","Level":"Information","MessageTemplate":"Generating password hash","TraceId":"26a85a3a6c85ae2d3b89361982ddfd90","SpanId":"a476d7b7df217b89","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"aksjdfasjdnfoasidf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:aksjdfasjdnfoasidf"]}}
{"Timestamp":"2025-09-18T18:53:39.0814081+03:00","Level":"Information","MessageTemplate":"Saving new user...","TraceId":"26a85a3a6c85ae2d3b89361982ddfd90","SpanId":"a476d7b7df217b89","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"aksjdfasjdnfoasidf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:aksjdfasjdnfoasidf"]}}
{"Timestamp":"2025-09-18T18:53:39.1051170+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"26a85a3a6c85ae2d3b89361982ddfd90","SpanId":"a476d7b7df217b89","Properties":{"elapsed":"5","parameters":"@p0='?', @p1='?' (DbType = Int32), @p2='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"INSERT INTO \"Users\" (\"PasswordHash\", \"Role\", \"Username\")\nVALUES (@p0, @p1, @p2)\nRETURNING \"ID\";","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"aksjdfasjdnfoasidf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:aksjdfasjdnfoasidf"]}}
{"Timestamp":"2025-09-18T18:53:39.1120509+03:00","Level":"Information","MessageTemplate":"User successfully created, returning HTTP OK","TraceId":"26a85a3a6c85ae2d3b89361982ddfd90","SpanId":"a476d7b7df217b89","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"aksjdfasjdnfoasidf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:aksjdfasjdnfoasidf"]}}
{"Timestamp":"2025-09-18T18:53:39.1124834+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"26a85a3a6c85ae2d3b89361982ddfd90","SpanId":"a476d7b7df217b89","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:53:39.1128052+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"26a85a3a6c85ae2d3b89361982ddfd90","SpanId":"a476d7b7df217b89","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","ElapsedMilliseconds":123.1065,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CO:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:53:39.1129846+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"26a85a3a6c85ae2d3b89361982ddfd90","SpanId":"a476d7b7df217b89","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CO:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:53:39.1132098+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"26a85a3a6c85ae2d3b89361982ddfd90","SpanId":"a476d7b7df217b89","Properties":{"ElapsedMilliseconds":149.1349,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"POST","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:54:06.5931511+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"6b6a3045acda690f1b84f7ffb0db85bd","SpanId":"01ed7e1aeb53bab1","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:00000003","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:54:06.5937509+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"6b6a3045acda690f1b84f7ffb0db85bd","SpanId":"01ed7e1aeb53bab1","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CO:00000003","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:54:06.5942891+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"6b6a3045acda690f1b84f7ffb0db85bd","SpanId":"01ed7e1aeb53bab1","Properties":{"ElapsedMilliseconds":1.0492,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:00000003","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:54:06.5970011+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"2a2c59ca9f49ce999abc9f35f949909e","SpanId":"295bd7256a463b65","Properties":{"Protocol":"HTTP/1.1","Method":"POST","ContentType":"application/json","ContentLength":59,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:54:06.5974863+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"2a2c59ca9f49ce999abc9f35f949909e","SpanId":"295bd7256a463b65","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CO:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:54:06.5977286+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"2a2c59ca9f49ce999abc9f35f949909e","SpanId":"295bd7256a463b65","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CO:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:54:06.5979416+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"2a2c59ca9f49ce999abc9f35f949909e","SpanId":"295bd7256a463b65","Properties":{"RouteData":"{action = \"Register\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MessagingApp.Models.User]] Register(MessagingApp.DTO.AuthDTO)","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:54:06.5986993+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"2a2c59ca9f49ce999abc9f35f949909e","SpanId":"295bd7256a463b65","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"asdfasdfasdfadf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdfasdfasdfadf"]}}
{"Timestamp":"2025-09-18T18:54:06.5988714+03:00","Level":"Information","MessageTemplate":"Initiated user registration by ","TraceId":"2a2c59ca9f49ce999abc9f35f949909e","SpanId":"295bd7256a463b65","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"asdfasdfasdfadf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdfasdfasdfadf"]}}
{"Timestamp":"2025-09-18T18:54:06.5990196+03:00","Level":"Information","MessageTemplate":"Adding user to DB","TraceId":"2a2c59ca9f49ce999abc9f35f949909e","SpanId":"295bd7256a463b65","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"asdfasdfasdfadf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdfasdfasdfadf"]}}
{"Timestamp":"2025-09-18T18:54:06.5992181+03:00","Level":"Information","MessageTemplate":"Creating new user","TraceId":"2a2c59ca9f49ce999abc9f35f949909e","SpanId":"295bd7256a463b65","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"asdfasdfasdfadf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdfasdfasdfadf"]}}
{"Timestamp":"2025-09-18T18:54:06.5993663+03:00","Level":"Information","MessageTemplate":"Composing new user object","TraceId":"2a2c59ca9f49ce999abc9f35f949909e","SpanId":"295bd7256a463b65","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"asdfasdfasdfadf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdfasdfasdfadf"]}}
{"Timestamp":"2025-09-18T18:54:06.5994976+03:00","Level":"Information","MessageTemplate":"Generating password hash","TraceId":"2a2c59ca9f49ce999abc9f35f949909e","SpanId":"295bd7256a463b65","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"asdfasdfasdfadf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdfasdfasdfadf"]}}
{"Timestamp":"2025-09-18T18:54:06.6679267+03:00","Level":"Information","MessageTemplate":"Saving new user...","TraceId":"2a2c59ca9f49ce999abc9f35f949909e","SpanId":"295bd7256a463b65","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"asdfasdfasdfadf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdfasdfasdfadf"]}}
{"Timestamp":"2025-09-18T18:54:06.6766438+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"2a2c59ca9f49ce999abc9f35f949909e","SpanId":"295bd7256a463b65","Properties":{"elapsed":"8","parameters":"@p0='?', @p1='?' (DbType = Int32), @p2='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"INSERT INTO \"Users\" (\"PasswordHash\", \"Role\", \"Username\")\nVALUES (@p0, @p1, @p2)\nRETURNING \"ID\";","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"asdfasdfasdfadf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdfasdfasdfadf"]}}
{"Timestamp":"2025-09-18T18:54:06.8098927+03:00","Level":"Information","MessageTemplate":"User successfully created, returning HTTP OK","TraceId":"2a2c59ca9f49ce999abc9f35f949909e","SpanId":"295bd7256a463b65","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"asdfasdfasdfadf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdfasdfasdfadf"]}}
{"Timestamp":"2025-09-18T18:54:06.8108513+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"2a2c59ca9f49ce999abc9f35f949909e","SpanId":"295bd7256a463b65","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:54:06.8112171+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"2a2c59ca9f49ce999abc9f35f949909e","SpanId":"295bd7256a463b65","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","ElapsedMilliseconds":213.0387,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CO:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:54:06.8114437+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"2a2c59ca9f49ce999abc9f35f949909e","SpanId":"295bd7256a463b65","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CO:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:54:06.8116917+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"2a2c59ca9f49ce999abc9f35f949909e","SpanId":"295bd7256a463b65","Properties":{"ElapsedMilliseconds":214.6886,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"POST","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:54:22.0921577+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"65c9d31bc6ec039030ba6af7b7f88cf2","SpanId":"cdba3cc2e8fd12aa","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:00000005","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:54:22.0925771+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"65c9d31bc6ec039030ba6af7b7f88cf2","SpanId":"cdba3cc2e8fd12aa","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CO:00000005","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:54:22.0928527+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"65c9d31bc6ec039030ba6af7b7f88cf2","SpanId":"cdba3cc2e8fd12aa","Properties":{"ElapsedMilliseconds":0.6919,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:00000005","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:54:22.0955777+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"40d468bc2262edd66da4b67b7c797782","SpanId":"49a8fda727dba4ef","Properties":{"Protocol":"HTTP/1.1","Method":"POST","ContentType":"application/json","ContentLength":59,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:00000006","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:54:22.0959547+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"40d468bc2262edd66da4b67b7c797782","SpanId":"49a8fda727dba4ef","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CO:00000006","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:54:22.0961839+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"40d468bc2262edd66da4b67b7c797782","SpanId":"49a8fda727dba4ef","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CO:00000006","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:54:22.0963923+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"40d468bc2262edd66da4b67b7c797782","SpanId":"49a8fda727dba4ef","Properties":{"RouteData":"{action = \"Register\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MessagingApp.Models.User]] Register(MessagingApp.DTO.AuthDTO)","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000006","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:54:22.0971874+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"40d468bc2262edd66da4b67b7c797782","SpanId":"49a8fda727dba4ef","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"asdfasdfasdfadf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000006","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdfasdfasdfadf"]}}
{"Timestamp":"2025-09-18T18:54:22.0973824+03:00","Level":"Information","MessageTemplate":"Initiated user registration by ","TraceId":"40d468bc2262edd66da4b67b7c797782","SpanId":"49a8fda727dba4ef","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"asdfasdfasdfadf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000006","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdfasdfasdfadf"]}}
{"Timestamp":"2025-09-18T18:54:22.0975374+03:00","Level":"Information","MessageTemplate":"Adding user to DB","TraceId":"40d468bc2262edd66da4b67b7c797782","SpanId":"49a8fda727dba4ef","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"asdfasdfasdfadf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000006","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdfasdfasdfadf"]}}
{"Timestamp":"2025-09-18T18:54:22.0977113+03:00","Level":"Information","MessageTemplate":"Creating new user","TraceId":"40d468bc2262edd66da4b67b7c797782","SpanId":"49a8fda727dba4ef","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"asdfasdfasdfadf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000006","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdfasdfasdfadf"]}}
{"Timestamp":"2025-09-18T18:54:22.0978434+03:00","Level":"Information","MessageTemplate":"Composing new user object","TraceId":"40d468bc2262edd66da4b67b7c797782","SpanId":"49a8fda727dba4ef","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"asdfasdfasdfadf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000006","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdfasdfasdfadf"]}}
{"Timestamp":"2025-09-18T18:54:22.0979646+03:00","Level":"Information","MessageTemplate":"Generating password hash","TraceId":"40d468bc2262edd66da4b67b7c797782","SpanId":"49a8fda727dba4ef","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"asdfasdfasdfadf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000006","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdfasdfasdfadf"]}}
{"Timestamp":"2025-09-18T18:54:22.1626887+03:00","Level":"Information","MessageTemplate":"Saving new user...","TraceId":"40d468bc2262edd66da4b67b7c797782","SpanId":"49a8fda727dba4ef","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"asdfasdfasdfadf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000006","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdfasdfasdfadf"]}}
{"Timestamp":"2025-09-18T18:54:22.1870533+03:00","Level":"Error","MessageTemplate":"Failed executing DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"40d468bc2262edd66da4b67b7c797782","SpanId":"49a8fda727dba4ef","Properties":{"elapsed":"4","parameters":"@p0='?', @p1='?' (DbType = Int32), @p2='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"INSERT INTO \"Users\" (\"PasswordHash\", \"Role\", \"Username\")\nVALUES (@p0, @p1, @p2)\nRETURNING \"ID\";","EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"asdfasdfasdfadf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000006","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdfasdfasdfadf"]}}
{"Timestamp":"2025-09-18T18:54:22.5530976+03:00","Level":"Error","MessageTemplate":"An exception occurred in the database while saving changes for context type '{contextType}'.{newline}{error}","TraceId":"40d468bc2262edd66da4b67b7c797782","SpanId":"49a8fda727dba4ef","Exception":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint \"AK_Users_Username\"\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23505\n    MessageText: duplicate key value violates unique constraint \"AK_Users_Username\"\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: Users\n    ConstraintName: AK_Users_Username\n    File: nbtinsert.c\n    Line: 666\n    Routine: _bt_check_unique\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","Properties":{"contextType":"DataContext","newline":"\n","error":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint \"AK_Users_Username\"\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23505\n    MessageText: duplicate key value violates unique constraint \"AK_Users_Username\"\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: Users\n    ConstraintName: AK_Users_Username\n    File: nbtinsert.c\n    Line: 666\n    Routine: _bt_check_unique\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","username":"asdfasdfasdfadf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000006","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdfasdfasdfadf"]}}
{"Timestamp":"2025-09-18T18:54:22.6118479+03:00","Level":"Warning","MessageTemplate":"User with such username already exists","TraceId":"40d468bc2262edd66da4b67b7c797782","SpanId":"49a8fda727dba4ef","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"asdfasdfasdfadf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000006","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdfasdfasdfadf"]}}
{"Timestamp":"2025-09-18T18:54:22.6120399+03:00","Level":"Warning","MessageTemplate":"A user with such username already exists.","TraceId":"40d468bc2262edd66da4b67b7c797782","SpanId":"49a8fda727dba4ef","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"asdfasdfasdfadf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000006","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdfasdfasdfadf"]}}
{"Timestamp":"2025-09-18T18:54:22.6122309+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"40d468bc2262edd66da4b67b7c797782","SpanId":"49a8fda727dba4ef","Properties":{"ObjectResultType":"ObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000006","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:54:22.6125159+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"40d468bc2262edd66da4b67b7c797782","SpanId":"49a8fda727dba4ef","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","ElapsedMilliseconds":515.8708,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CO:00000006","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:54:22.6127268+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"40d468bc2262edd66da4b67b7c797782","SpanId":"49a8fda727dba4ef","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CO:00000006","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:54:22.6130852+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"40d468bc2262edd66da4b67b7c797782","SpanId":"49a8fda727dba4ef","Properties":{"ElapsedMilliseconds":517.5006,"StatusCode":409,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"POST","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:00000006","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:54:24.7088731+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"6afb98cae93ed1deb750cc4c9686f568","SpanId":"f6fc06e86acdfcd8","Properties":{"Protocol":"HTTP/1.1","Method":"POST","ContentType":"application/json","ContentLength":59,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:00000007","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:54:24.7093578+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"6afb98cae93ed1deb750cc4c9686f568","SpanId":"f6fc06e86acdfcd8","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CO:00000007","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:54:24.7096110+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"6afb98cae93ed1deb750cc4c9686f568","SpanId":"f6fc06e86acdfcd8","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CO:00000007","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:54:24.7098806+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"6afb98cae93ed1deb750cc4c9686f568","SpanId":"f6fc06e86acdfcd8","Properties":{"RouteData":"{action = \"Register\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MessagingApp.Models.User]] Register(MessagingApp.DTO.AuthDTO)","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000007","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:54:24.7106045+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"6afb98cae93ed1deb750cc4c9686f568","SpanId":"f6fc06e86acdfcd8","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"asdfasdfasdfadf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000007","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdfasdfasdfadf"]}}
{"Timestamp":"2025-09-18T18:54:24.7107699+03:00","Level":"Information","MessageTemplate":"Initiated user registration by ","TraceId":"6afb98cae93ed1deb750cc4c9686f568","SpanId":"f6fc06e86acdfcd8","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"asdfasdfasdfadf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000007","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdfasdfasdfadf"]}}
{"Timestamp":"2025-09-18T18:54:24.7109300+03:00","Level":"Information","MessageTemplate":"Adding user to DB","TraceId":"6afb98cae93ed1deb750cc4c9686f568","SpanId":"f6fc06e86acdfcd8","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"asdfasdfasdfadf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000007","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdfasdfasdfadf"]}}
{"Timestamp":"2025-09-18T18:54:24.7110505+03:00","Level":"Information","MessageTemplate":"Creating new user","TraceId":"6afb98cae93ed1deb750cc4c9686f568","SpanId":"f6fc06e86acdfcd8","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"asdfasdfasdfadf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000007","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdfasdfasdfadf"]}}
{"Timestamp":"2025-09-18T18:54:24.7112203+03:00","Level":"Information","MessageTemplate":"Composing new user object","TraceId":"6afb98cae93ed1deb750cc4c9686f568","SpanId":"f6fc06e86acdfcd8","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"asdfasdfasdfadf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000007","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdfasdfasdfadf"]}}
{"Timestamp":"2025-09-18T18:54:24.7113562+03:00","Level":"Information","MessageTemplate":"Generating password hash","TraceId":"6afb98cae93ed1deb750cc4c9686f568","SpanId":"f6fc06e86acdfcd8","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"asdfasdfasdfadf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000007","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdfasdfasdfadf"]}}
{"Timestamp":"2025-09-18T18:54:24.7765810+03:00","Level":"Information","MessageTemplate":"Saving new user...","TraceId":"6afb98cae93ed1deb750cc4c9686f568","SpanId":"f6fc06e86acdfcd8","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"asdfasdfasdfadf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000007","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdfasdfasdfadf"]}}
{"Timestamp":"2025-09-18T18:54:24.8232804+03:00","Level":"Error","MessageTemplate":"Failed executing DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"6afb98cae93ed1deb750cc4c9686f568","SpanId":"f6fc06e86acdfcd8","Properties":{"elapsed":"2","parameters":"@p0='?', @p1='?' (DbType = Int32), @p2='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"INSERT INTO \"Users\" (\"PasswordHash\", \"Role\", \"Username\")\nVALUES (@p0, @p1, @p2)\nRETURNING \"ID\";","EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"asdfasdfasdfadf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000007","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdfasdfasdfadf"]}}
{"Timestamp":"2025-09-18T18:54:24.8247880+03:00","Level":"Error","MessageTemplate":"An exception occurred in the database while saving changes for context type '{contextType}'.{newline}{error}","TraceId":"6afb98cae93ed1deb750cc4c9686f568","SpanId":"f6fc06e86acdfcd8","Exception":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint \"AK_Users_Username\"\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23505\n    MessageText: duplicate key value violates unique constraint \"AK_Users_Username\"\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: Users\n    ConstraintName: AK_Users_Username\n    File: nbtinsert.c\n    Line: 666\n    Routine: _bt_check_unique\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","Properties":{"contextType":"DataContext","newline":"\n","error":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint \"AK_Users_Username\"\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23505\n    MessageText: duplicate key value violates unique constraint \"AK_Users_Username\"\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: Users\n    ConstraintName: AK_Users_Username\n    File: nbtinsert.c\n    Line: 666\n    Routine: _bt_check_unique\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","username":"asdfasdfasdfadf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000007","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdfasdfasdfadf"]}}
{"Timestamp":"2025-09-18T18:54:24.8273987+03:00","Level":"Warning","MessageTemplate":"User with such username already exists","TraceId":"6afb98cae93ed1deb750cc4c9686f568","SpanId":"f6fc06e86acdfcd8","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"asdfasdfasdfadf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000007","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdfasdfasdfadf"]}}
{"Timestamp":"2025-09-18T18:54:24.8275567+03:00","Level":"Warning","MessageTemplate":"A user with such username already exists.","TraceId":"6afb98cae93ed1deb750cc4c9686f568","SpanId":"f6fc06e86acdfcd8","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"asdfasdfasdfadf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000007","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdfasdfasdfadf"]}}
{"Timestamp":"2025-09-18T18:54:24.8277856+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"6afb98cae93ed1deb750cc4c9686f568","SpanId":"f6fc06e86acdfcd8","Properties":{"ObjectResultType":"ObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000007","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:54:24.8279957+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"6afb98cae93ed1deb750cc4c9686f568","SpanId":"f6fc06e86acdfcd8","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","ElapsedMilliseconds":117.8696,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CO:00000007","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:54:24.8281525+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"6afb98cae93ed1deb750cc4c9686f568","SpanId":"f6fc06e86acdfcd8","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CO:00000007","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:54:24.8283720+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"6afb98cae93ed1deb750cc4c9686f568","SpanId":"f6fc06e86acdfcd8","Properties":{"ElapsedMilliseconds":119.5039,"StatusCode":409,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"POST","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:00000007","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:17.9817975+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"8f379a6c079ec496402558627afd2d5f","SpanId":"a4f9993623228827","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/login","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:00000008","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:18.0689911+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"8f379a6c079ec496402558627afd2d5f","SpanId":"a4f9993623228827","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CO:00000008","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:18.0698321+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"8f379a6c079ec496402558627afd2d5f","SpanId":"a4f9993623228827","Properties":{"ElapsedMilliseconds":88.0217,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/login","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:00000008","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:18.0726447+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"4311fd7798ca2b78df74b09861e52df6","SpanId":"90bf3bb5b340fb83","Properties":{"Protocol":"HTTP/1.1","Method":"POST","ContentType":"application/json","ContentLength":55,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/login","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:00000009","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:18.0730538+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"4311fd7798ca2b78df74b09861e52df6","SpanId":"90bf3bb5b340fb83","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CO:00000009","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:18.0733014+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"4311fd7798ca2b78df74b09861e52df6","SpanId":"90bf3bb5b340fb83","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CO:00000009","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:18.0735390+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"4311fd7798ca2b78df74b09861e52df6","SpanId":"90bf3bb5b340fb83","Properties":{"RouteData":"{action = \"Login\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] Login(MessagingApp.DTO.AuthDTO)","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000009","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:18.0741534+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"4311fd7798ca2b78df74b09861e52df6","SpanId":"90bf3bb5b340fb83","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"asdojf[sjodfo","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000009","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdojf[sjodfo"]}}
{"Timestamp":"2025-09-18T18:56:18.0743424+03:00","Level":"Information","MessageTemplate":"Initiated login","TraceId":"4311fd7798ca2b78df74b09861e52df6","SpanId":"90bf3bb5b340fb83","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"asdojf[sjodfo","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000009","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdojf[sjodfo"]}}
{"Timestamp":"2025-09-18T18:56:18.0745321+03:00","Level":"Information","MessageTemplate":"Authenticating user","TraceId":"4311fd7798ca2b78df74b09861e52df6","SpanId":"90bf3bb5b340fb83","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"asdojf[sjodfo","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000009","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdojf[sjodfo"]}}
{"Timestamp":"2025-09-18T18:56:18.0902706+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"4311fd7798ca2b78df74b09861e52df6","SpanId":"90bf3bb5b340fb83","Properties":{"elapsed":"9","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"asdojf[sjodfo","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000009","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdojf[sjodfo"]}}
{"Timestamp":"2025-09-18T18:56:18.1127681+03:00","Level":"Warning","MessageTemplate":"Couldn't authenticate, no such user","TraceId":"4311fd7798ca2b78df74b09861e52df6","SpanId":"90bf3bb5b340fb83","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"asdojf[sjodfo","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000009","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdojf[sjodfo"]}}
{"Timestamp":"2025-09-18T18:56:18.1133517+03:00","Level":"Warning","MessageTemplate":"No such user for auth","TraceId":"4311fd7798ca2b78df74b09861e52df6","SpanId":"90bf3bb5b340fb83","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"asdojf[sjodfo","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000009","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdojf[sjodfo"]}}
{"Timestamp":"2025-09-18T18:56:18.1137817+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"4311fd7798ca2b78df74b09861e52df6","SpanId":"90bf3bb5b340fb83","Properties":{"ObjectResultType":"ObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000009","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:18.1140618+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"4311fd7798ca2b78df74b09861e52df6","SpanId":"90bf3bb5b340fb83","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","ElapsedMilliseconds":40.3118,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CO:00000009","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:18.1142457+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"4311fd7798ca2b78df74b09861e52df6","SpanId":"90bf3bb5b340fb83","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CO:00000009","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:18.1146068+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"4311fd7798ca2b78df74b09861e52df6","SpanId":"90bf3bb5b340fb83","Properties":{"ElapsedMilliseconds":41.9597,"StatusCode":404,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"POST","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/login","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:00000009","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:21.3156216+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"c21b6a800f0492fa54a5693e43d5bca8","SpanId":"11bf3e786a9944d2","Properties":{"Protocol":"HTTP/1.1","Method":"POST","ContentType":"application/json","ContentLength":55,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/login","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:0000000A","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:21.3160047+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"c21b6a800f0492fa54a5693e43d5bca8","SpanId":"11bf3e786a9944d2","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CO:0000000A","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:21.3163775+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"c21b6a800f0492fa54a5693e43d5bca8","SpanId":"11bf3e786a9944d2","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CO:0000000A","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:21.3166301+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"c21b6a800f0492fa54a5693e43d5bca8","SpanId":"11bf3e786a9944d2","Properties":{"RouteData":"{action = \"Login\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] Login(MessagingApp.DTO.AuthDTO)","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000000A","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:21.3173263+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"c21b6a800f0492fa54a5693e43d5bca8","SpanId":"11bf3e786a9944d2","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"asdojf[sjodfo","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000000A","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdojf[sjodfo"]}}
{"Timestamp":"2025-09-18T18:56:21.3175475+03:00","Level":"Information","MessageTemplate":"Initiated login","TraceId":"c21b6a800f0492fa54a5693e43d5bca8","SpanId":"11bf3e786a9944d2","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"asdojf[sjodfo","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000000A","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdojf[sjodfo"]}}
{"Timestamp":"2025-09-18T18:56:21.3176914+03:00","Level":"Information","MessageTemplate":"Authenticating user","TraceId":"c21b6a800f0492fa54a5693e43d5bca8","SpanId":"11bf3e786a9944d2","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"asdojf[sjodfo","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000000A","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdojf[sjodfo"]}}
{"Timestamp":"2025-09-18T18:56:21.3191889+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c21b6a800f0492fa54a5693e43d5bca8","SpanId":"11bf3e786a9944d2","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"asdojf[sjodfo","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000000A","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdojf[sjodfo"]}}
{"Timestamp":"2025-09-18T18:56:21.3195876+03:00","Level":"Warning","MessageTemplate":"Couldn't authenticate, no such user","TraceId":"c21b6a800f0492fa54a5693e43d5bca8","SpanId":"11bf3e786a9944d2","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"asdojf[sjodfo","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000000A","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdojf[sjodfo"]}}
{"Timestamp":"2025-09-18T18:56:21.3197856+03:00","Level":"Warning","MessageTemplate":"No such user for auth","TraceId":"c21b6a800f0492fa54a5693e43d5bca8","SpanId":"11bf3e786a9944d2","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"asdojf[sjodfo","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000000A","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdojf[sjodfo"]}}
{"Timestamp":"2025-09-18T18:56:21.3199683+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"c21b6a800f0492fa54a5693e43d5bca8","SpanId":"11bf3e786a9944d2","Properties":{"ObjectResultType":"ObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000000A","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:21.3202250+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"c21b6a800f0492fa54a5693e43d5bca8","SpanId":"11bf3e786a9944d2","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","ElapsedMilliseconds":3.3204,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CO:0000000A","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:21.3204549+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"c21b6a800f0492fa54a5693e43d5bca8","SpanId":"11bf3e786a9944d2","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CO:0000000A","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:21.3206889+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"c21b6a800f0492fa54a5693e43d5bca8","SpanId":"11bf3e786a9944d2","Properties":{"ElapsedMilliseconds":5.0707,"StatusCode":404,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"POST","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/login","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:0000000A","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:22.7764970+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"5716413b6b08985f71ee709196dfa8e7","SpanId":"08a37d495cbbfb3e","Properties":{"Protocol":"HTTP/1.1","Method":"POST","ContentType":"application/json","ContentLength":55,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/login","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:0000000B","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:22.7768767+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"5716413b6b08985f71ee709196dfa8e7","SpanId":"08a37d495cbbfb3e","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CO:0000000B","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:22.7771221+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"5716413b6b08985f71ee709196dfa8e7","SpanId":"08a37d495cbbfb3e","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CO:0000000B","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:22.7773317+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"5716413b6b08985f71ee709196dfa8e7","SpanId":"08a37d495cbbfb3e","Properties":{"RouteData":"{action = \"Login\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] Login(MessagingApp.DTO.AuthDTO)","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000000B","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:22.7779494+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"5716413b6b08985f71ee709196dfa8e7","SpanId":"08a37d495cbbfb3e","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"asdojf[sjodfo","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000000B","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdojf[sjodfo"]}}
{"Timestamp":"2025-09-18T18:56:22.7781329+03:00","Level":"Information","MessageTemplate":"Initiated login","TraceId":"5716413b6b08985f71ee709196dfa8e7","SpanId":"08a37d495cbbfb3e","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"asdojf[sjodfo","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000000B","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdojf[sjodfo"]}}
{"Timestamp":"2025-09-18T18:56:22.7782748+03:00","Level":"Information","MessageTemplate":"Authenticating user","TraceId":"5716413b6b08985f71ee709196dfa8e7","SpanId":"08a37d495cbbfb3e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"asdojf[sjodfo","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000000B","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdojf[sjodfo"]}}
{"Timestamp":"2025-09-18T18:56:22.7796528+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"5716413b6b08985f71ee709196dfa8e7","SpanId":"08a37d495cbbfb3e","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"asdojf[sjodfo","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000000B","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdojf[sjodfo"]}}
{"Timestamp":"2025-09-18T18:56:22.7800576+03:00","Level":"Warning","MessageTemplate":"Couldn't authenticate, no such user","TraceId":"5716413b6b08985f71ee709196dfa8e7","SpanId":"08a37d495cbbfb3e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"asdojf[sjodfo","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000000B","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdojf[sjodfo"]}}
{"Timestamp":"2025-09-18T18:56:22.7803291+03:00","Level":"Warning","MessageTemplate":"No such user for auth","TraceId":"5716413b6b08985f71ee709196dfa8e7","SpanId":"08a37d495cbbfb3e","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"asdojf[sjodfo","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000000B","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:asdojf[sjodfo"]}}
{"Timestamp":"2025-09-18T18:56:22.7805910+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"5716413b6b08985f71ee709196dfa8e7","SpanId":"08a37d495cbbfb3e","Properties":{"ObjectResultType":"ObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000000B","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:22.7808343+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"5716413b6b08985f71ee709196dfa8e7","SpanId":"08a37d495cbbfb3e","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","ElapsedMilliseconds":3.2181,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CO:0000000B","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:22.7810327+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"5716413b6b08985f71ee709196dfa8e7","SpanId":"08a37d495cbbfb3e","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CO:0000000B","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:22.7812511+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"5716413b6b08985f71ee709196dfa8e7","SpanId":"08a37d495cbbfb3e","Properties":{"ElapsedMilliseconds":4.7522,"StatusCode":404,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"POST","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/login","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:0000000B","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:28.8757002+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"d029355843ebf1e3bbe2ab5116771300","SpanId":"45c49d0f37a8125a","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:0000000C","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:28.8761022+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"d029355843ebf1e3bbe2ab5116771300","SpanId":"45c49d0f37a8125a","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CO:0000000C","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:28.8763827+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"d029355843ebf1e3bbe2ab5116771300","SpanId":"45c49d0f37a8125a","Properties":{"ElapsedMilliseconds":0.6842,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:0000000C","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:28.8790131+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"10efd04a6d7f8e28baf311d6470cbe43","SpanId":"570cfc894369d141","Properties":{"Protocol":"HTTP/1.1","Method":"POST","ContentType":"application/json","ContentLength":60,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:0000000D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:28.8794784+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"10efd04a6d7f8e28baf311d6470cbe43","SpanId":"570cfc894369d141","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CO:0000000D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:28.8798274+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"10efd04a6d7f8e28baf311d6470cbe43","SpanId":"570cfc894369d141","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CO:0000000D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:28.8800459+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"10efd04a6d7f8e28baf311d6470cbe43","SpanId":"570cfc894369d141","Properties":{"RouteData":"{action = \"Register\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MessagingApp.Models.User]] Register(MessagingApp.DTO.AuthDTO)","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000000D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:28.8807622+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"10efd04a6d7f8e28baf311d6470cbe43","SpanId":"570cfc894369d141","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"irgiojioerjitoiewr","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000000D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:irgiojioerjitoiewr"]}}
{"Timestamp":"2025-09-18T18:56:28.8809916+03:00","Level":"Information","MessageTemplate":"Initiated user registration by ","TraceId":"10efd04a6d7f8e28baf311d6470cbe43","SpanId":"570cfc894369d141","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"irgiojioerjitoiewr","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000000D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:irgiojioerjitoiewr"]}}
{"Timestamp":"2025-09-18T18:56:28.8811392+03:00","Level":"Information","MessageTemplate":"Adding user to DB","TraceId":"10efd04a6d7f8e28baf311d6470cbe43","SpanId":"570cfc894369d141","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"irgiojioerjitoiewr","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000000D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:irgiojioerjitoiewr"]}}
{"Timestamp":"2025-09-18T18:56:28.8813896+03:00","Level":"Information","MessageTemplate":"Creating new user","TraceId":"10efd04a6d7f8e28baf311d6470cbe43","SpanId":"570cfc894369d141","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"irgiojioerjitoiewr","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000000D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:irgiojioerjitoiewr"]}}
{"Timestamp":"2025-09-18T18:56:28.8815999+03:00","Level":"Information","MessageTemplate":"Composing new user object","TraceId":"10efd04a6d7f8e28baf311d6470cbe43","SpanId":"570cfc894369d141","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"irgiojioerjitoiewr","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000000D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:irgiojioerjitoiewr"]}}
{"Timestamp":"2025-09-18T18:56:28.8817147+03:00","Level":"Information","MessageTemplate":"Generating password hash","TraceId":"10efd04a6d7f8e28baf311d6470cbe43","SpanId":"570cfc894369d141","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"irgiojioerjitoiewr","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000000D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:irgiojioerjitoiewr"]}}
{"Timestamp":"2025-09-18T18:56:28.9552712+03:00","Level":"Information","MessageTemplate":"Saving new user...","TraceId":"10efd04a6d7f8e28baf311d6470cbe43","SpanId":"570cfc894369d141","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"irgiojioerjitoiewr","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000000D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:irgiojioerjitoiewr"]}}
{"Timestamp":"2025-09-18T18:56:28.9593418+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"10efd04a6d7f8e28baf311d6470cbe43","SpanId":"570cfc894369d141","Properties":{"elapsed":"3","parameters":"@p0='?', @p1='?' (DbType = Int32), @p2='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"INSERT INTO \"Users\" (\"PasswordHash\", \"Role\", \"Username\")\nVALUES (@p0, @p1, @p2)\nRETURNING \"ID\";","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"irgiojioerjitoiewr","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000000D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:irgiojioerjitoiewr"]}}
{"Timestamp":"2025-09-18T18:56:28.9599289+03:00","Level":"Information","MessageTemplate":"User successfully created, returning HTTP OK","TraceId":"10efd04a6d7f8e28baf311d6470cbe43","SpanId":"570cfc894369d141","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"irgiojioerjitoiewr","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000000D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:irgiojioerjitoiewr"]}}
{"Timestamp":"2025-09-18T18:56:28.9602132+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"10efd04a6d7f8e28baf311d6470cbe43","SpanId":"570cfc894369d141","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000000D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:28.9604790+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"10efd04a6d7f8e28baf311d6470cbe43","SpanId":"570cfc894369d141","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","ElapsedMilliseconds":80.178,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CO:0000000D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:28.9607814+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"10efd04a6d7f8e28baf311d6470cbe43","SpanId":"570cfc894369d141","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CO:0000000D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:28.9611545+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"10efd04a6d7f8e28baf311d6470cbe43","SpanId":"570cfc894369d141","Properties":{"ElapsedMilliseconds":82.1352,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"POST","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:0000000D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:49.4001818+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"7c896490babdad08667787e6bbeef190","SpanId":"7c40931b9d2e21dd","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:0000000E","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:49.4007504+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"7c896490babdad08667787e6bbeef190","SpanId":"7c40931b9d2e21dd","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CO:0000000E","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:49.4011950+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"7c896490babdad08667787e6bbeef190","SpanId":"7c40931b9d2e21dd","Properties":{"ElapsedMilliseconds":1.0071,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:0000000E","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:49.4040562+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"823b985b84d358106ad28fef7e5c2a4d","SpanId":"2e001e7fe0b1fbe1","Properties":{"Protocol":"HTTP/1.1","Method":"POST","ContentType":"application/json","ContentLength":59,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:0000000F","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:49.4044144+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"823b985b84d358106ad28fef7e5c2a4d","SpanId":"2e001e7fe0b1fbe1","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CO:0000000F","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:49.4046550+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"823b985b84d358106ad28fef7e5c2a4d","SpanId":"2e001e7fe0b1fbe1","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CO:0000000F","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:49.4048480+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"823b985b84d358106ad28fef7e5c2a4d","SpanId":"2e001e7fe0b1fbe1","Properties":{"RouteData":"{action = \"Register\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MessagingApp.Models.User]] Register(MessagingApp.DTO.AuthDTO)","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000000F","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:49.4055423+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"823b985b84d358106ad28fef7e5c2a4d","SpanId":"2e001e7fe0b1fbe1","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"aslnkdnfinasdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000000F","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:aslnkdnfinasdf"]}}
{"Timestamp":"2025-09-18T18:56:49.4057532+03:00","Level":"Information","MessageTemplate":"Initiated user registration by ","TraceId":"823b985b84d358106ad28fef7e5c2a4d","SpanId":"2e001e7fe0b1fbe1","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"aslnkdnfinasdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000000F","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:aslnkdnfinasdf"]}}
{"Timestamp":"2025-09-18T18:56:49.4059804+03:00","Level":"Information","MessageTemplate":"Adding user to DB","TraceId":"823b985b84d358106ad28fef7e5c2a4d","SpanId":"2e001e7fe0b1fbe1","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"aslnkdnfinasdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000000F","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:aslnkdnfinasdf"]}}
{"Timestamp":"2025-09-18T18:56:49.4061344+03:00","Level":"Information","MessageTemplate":"Creating new user","TraceId":"823b985b84d358106ad28fef7e5c2a4d","SpanId":"2e001e7fe0b1fbe1","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"aslnkdnfinasdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000000F","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:aslnkdnfinasdf"]}}
{"Timestamp":"2025-09-18T18:56:49.4062470+03:00","Level":"Information","MessageTemplate":"Composing new user object","TraceId":"823b985b84d358106ad28fef7e5c2a4d","SpanId":"2e001e7fe0b1fbe1","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"aslnkdnfinasdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000000F","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:aslnkdnfinasdf"]}}
{"Timestamp":"2025-09-18T18:56:49.4063734+03:00","Level":"Information","MessageTemplate":"Generating password hash","TraceId":"823b985b84d358106ad28fef7e5c2a4d","SpanId":"2e001e7fe0b1fbe1","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"aslnkdnfinasdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000000F","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:aslnkdnfinasdf"]}}
{"Timestamp":"2025-09-18T18:56:49.4733653+03:00","Level":"Information","MessageTemplate":"Saving new user...","TraceId":"823b985b84d358106ad28fef7e5c2a4d","SpanId":"2e001e7fe0b1fbe1","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"aslnkdnfinasdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000000F","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:aslnkdnfinasdf"]}}
{"Timestamp":"2025-09-18T18:56:49.4792494+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"823b985b84d358106ad28fef7e5c2a4d","SpanId":"2e001e7fe0b1fbe1","Properties":{"elapsed":"5","parameters":"@p0='?', @p1='?' (DbType = Int32), @p2='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"INSERT INTO \"Users\" (\"PasswordHash\", \"Role\", \"Username\")\nVALUES (@p0, @p1, @p2)\nRETURNING \"ID\";","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"aslnkdnfinasdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000000F","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:aslnkdnfinasdf"]}}
{"Timestamp":"2025-09-18T18:56:49.4798100+03:00","Level":"Information","MessageTemplate":"User successfully created, returning HTTP OK","TraceId":"823b985b84d358106ad28fef7e5c2a4d","SpanId":"2e001e7fe0b1fbe1","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"aslnkdnfinasdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000000F","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:aslnkdnfinasdf"]}}
{"Timestamp":"2025-09-18T18:56:49.4801020+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"823b985b84d358106ad28fef7e5c2a4d","SpanId":"2e001e7fe0b1fbe1","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000000F","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:49.4803820+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"823b985b84d358106ad28fef7e5c2a4d","SpanId":"2e001e7fe0b1fbe1","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","ElapsedMilliseconds":75.32,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CO:0000000F","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:49.4805656+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"823b985b84d358106ad28fef7e5c2a4d","SpanId":"2e001e7fe0b1fbe1","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CO:0000000F","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:56:49.4808237+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"823b985b84d358106ad28fef7e5c2a4d","SpanId":"2e001e7fe0b1fbe1","Properties":{"ElapsedMilliseconds":76.7727,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"POST","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:0000000F","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:12.6975214+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"37b9c9fd18306eea894e1f369c12d1cd","SpanId":"d826dee788a9cd95","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:00000010","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:12.7935333+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"37b9c9fd18306eea894e1f369c12d1cd","SpanId":"d826dee788a9cd95","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CO:00000010","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:12.7939942+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"37b9c9fd18306eea894e1f369c12d1cd","SpanId":"d826dee788a9cd95","Properties":{"ElapsedMilliseconds":96.466,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:00000010","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:12.7970481+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"3e7c70afeb96b00adf3b3b9578b69ead","SpanId":"d24d64365362383c","Properties":{"Protocol":"HTTP/1.1","Method":"POST","ContentType":"application/json","ContentLength":62,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:00000011","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:12.7974714+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"3e7c70afeb96b00adf3b3b9578b69ead","SpanId":"d24d64365362383c","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CO:00000011","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:12.7976958+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"3e7c70afeb96b00adf3b3b9578b69ead","SpanId":"d24d64365362383c","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CO:00000011","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:12.7979152+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"3e7c70afeb96b00adf3b3b9578b69ead","SpanId":"d24d64365362383c","Properties":{"RouteData":"{action = \"Register\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MessagingApp.Models.User]] Register(MessagingApp.DTO.AuthDTO)","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000011","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:12.8011975+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"3e7c70afeb96b00adf3b3b9578b69ead","SpanId":"d24d64365362383c","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"paosfopajsdpfazv","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000011","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:paosfopajsdpfazv"]}}
{"Timestamp":"2025-09-18T18:58:12.8015440+03:00","Level":"Information","MessageTemplate":"Initiated user registration by ","TraceId":"3e7c70afeb96b00adf3b3b9578b69ead","SpanId":"d24d64365362383c","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"paosfopajsdpfazv","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000011","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:paosfopajsdpfazv"]}}
{"Timestamp":"2025-09-18T18:58:12.8019673+03:00","Level":"Information","MessageTemplate":"Adding user to DB","TraceId":"3e7c70afeb96b00adf3b3b9578b69ead","SpanId":"d24d64365362383c","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"paosfopajsdpfazv","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000011","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:paosfopajsdpfazv"]}}
{"Timestamp":"2025-09-18T18:58:12.8024386+03:00","Level":"Information","MessageTemplate":"Creating new user","TraceId":"3e7c70afeb96b00adf3b3b9578b69ead","SpanId":"d24d64365362383c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"paosfopajsdpfazv","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000011","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:paosfopajsdpfazv"]}}
{"Timestamp":"2025-09-18T18:58:12.8028248+03:00","Level":"Information","MessageTemplate":"Composing new user object","TraceId":"3e7c70afeb96b00adf3b3b9578b69ead","SpanId":"d24d64365362383c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"paosfopajsdpfazv","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000011","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:paosfopajsdpfazv"]}}
{"Timestamp":"2025-09-18T18:58:12.8029564+03:00","Level":"Information","MessageTemplate":"Generating password hash","TraceId":"3e7c70afeb96b00adf3b3b9578b69ead","SpanId":"d24d64365362383c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"paosfopajsdpfazv","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000011","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:paosfopajsdpfazv"]}}
{"Timestamp":"2025-09-18T18:58:12.8678526+03:00","Level":"Information","MessageTemplate":"Saving new user...","TraceId":"3e7c70afeb96b00adf3b3b9578b69ead","SpanId":"d24d64365362383c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"paosfopajsdpfazv","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000011","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:paosfopajsdpfazv"]}}
{"Timestamp":"2025-09-18T18:58:12.8748453+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3e7c70afeb96b00adf3b3b9578b69ead","SpanId":"d24d64365362383c","Properties":{"elapsed":"3","parameters":"@p0='?', @p1='?' (DbType = Int32), @p2='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"INSERT INTO \"Users\" (\"PasswordHash\", \"Role\", \"Username\")\nVALUES (@p0, @p1, @p2)\nRETURNING \"ID\";","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"paosfopajsdpfazv","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000011","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:paosfopajsdpfazv"]}}
{"Timestamp":"2025-09-18T18:58:12.8807654+03:00","Level":"Information","MessageTemplate":"User successfully created, returning HTTP OK","TraceId":"3e7c70afeb96b00adf3b3b9578b69ead","SpanId":"d24d64365362383c","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"paosfopajsdpfazv","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000011","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:paosfopajsdpfazv"]}}
{"Timestamp":"2025-09-18T18:58:12.8811074+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"3e7c70afeb96b00adf3b3b9578b69ead","SpanId":"d24d64365362383c","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000011","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:12.8815698+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"3e7c70afeb96b00adf3b3b9578b69ead","SpanId":"d24d64365362383c","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","ElapsedMilliseconds":83.4489,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CO:00000011","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:12.8820272+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"3e7c70afeb96b00adf3b3b9578b69ead","SpanId":"d24d64365362383c","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CO:00000011","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:12.8822762+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"3e7c70afeb96b00adf3b3b9578b69ead","SpanId":"d24d64365362383c","Properties":{"ElapsedMilliseconds":85.2288,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"POST","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:00000011","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:33.7568951+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"7d063a8ee980e0183e652b09be2fb249","SpanId":"2d5b8382b1e77451","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:00000012","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:33.7576230+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"7d063a8ee980e0183e652b09be2fb249","SpanId":"2d5b8382b1e77451","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CO:00000012","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:33.7580174+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"7d063a8ee980e0183e652b09be2fb249","SpanId":"2d5b8382b1e77451","Properties":{"ElapsedMilliseconds":1.1161,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:00000012","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:33.7614137+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"4fa67f6388aa9cd9298d1f1b1b6e7abf","SpanId":"a1e8deaf9de798e3","Properties":{"Protocol":"HTTP/1.1","Method":"POST","ContentType":"application/json","ContentLength":49,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:00000013","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:33.7618642+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"4fa67f6388aa9cd9298d1f1b1b6e7abf","SpanId":"a1e8deaf9de798e3","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CO:00000013","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:33.7622253+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"4fa67f6388aa9cd9298d1f1b1b6e7abf","SpanId":"a1e8deaf9de798e3","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CO:00000013","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:33.7624998+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"4fa67f6388aa9cd9298d1f1b1b6e7abf","SpanId":"a1e8deaf9de798e3","Properties":{"RouteData":"{action = \"Register\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MessagingApp.Models.User]] Register(MessagingApp.DTO.AuthDTO)","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000013","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:33.7644008+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"4fa67f6388aa9cd9298d1f1b1b6e7abf","SpanId":"a1e8deaf9de798e3","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000013","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:33.7646000+03:00","Level":"Information","MessageTemplate":"Initiated user registration by ","TraceId":"4fa67f6388aa9cd9298d1f1b1b6e7abf","SpanId":"a1e8deaf9de798e3","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000013","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:33.7647951+03:00","Level":"Information","MessageTemplate":"Adding user to DB","TraceId":"4fa67f6388aa9cd9298d1f1b1b6e7abf","SpanId":"a1e8deaf9de798e3","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000013","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:33.7649324+03:00","Level":"Information","MessageTemplate":"Creating new user","TraceId":"4fa67f6388aa9cd9298d1f1b1b6e7abf","SpanId":"a1e8deaf9de798e3","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000013","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:33.7650889+03:00","Level":"Information","MessageTemplate":"Composing new user object","TraceId":"4fa67f6388aa9cd9298d1f1b1b6e7abf","SpanId":"a1e8deaf9de798e3","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000013","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:33.7652245+03:00","Level":"Information","MessageTemplate":"Generating password hash","TraceId":"4fa67f6388aa9cd9298d1f1b1b6e7abf","SpanId":"a1e8deaf9de798e3","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000013","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:33.8390009+03:00","Level":"Information","MessageTemplate":"Saving new user...","TraceId":"4fa67f6388aa9cd9298d1f1b1b6e7abf","SpanId":"a1e8deaf9de798e3","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000013","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:33.8954201+03:00","Level":"Error","MessageTemplate":"Failed executing DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"4fa67f6388aa9cd9298d1f1b1b6e7abf","SpanId":"a1e8deaf9de798e3","Properties":{"elapsed":"31","parameters":"@p0='?', @p1='?' (DbType = Int32), @p2='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"INSERT INTO \"Users\" (\"PasswordHash\", \"Role\", \"Username\")\nVALUES (@p0, @p1, @p2)\nRETURNING \"ID\";","EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000013","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:33.9739419+03:00","Level":"Error","MessageTemplate":"An exception occurred in the database while saving changes for context type '{contextType}'.{newline}{error}","TraceId":"4fa67f6388aa9cd9298d1f1b1b6e7abf","SpanId":"a1e8deaf9de798e3","Exception":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint \"AK_Users_Username\"\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23505\n    MessageText: duplicate key value violates unique constraint \"AK_Users_Username\"\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: Users\n    ConstraintName: AK_Users_Username\n    File: nbtinsert.c\n    Line: 666\n    Routine: _bt_check_unique\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","Properties":{"contextType":"DataContext","newline":"\n","error":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint \"AK_Users_Username\"\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23505\n    MessageText: duplicate key value violates unique constraint \"AK_Users_Username\"\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: Users\n    ConstraintName: AK_Users_Username\n    File: nbtinsert.c\n    Line: 666\n    Routine: _bt_check_unique\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000013","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:33.9777760+03:00","Level":"Warning","MessageTemplate":"User with such username already exists","TraceId":"4fa67f6388aa9cd9298d1f1b1b6e7abf","SpanId":"a1e8deaf9de798e3","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000013","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:33.9779469+03:00","Level":"Warning","MessageTemplate":"A user with such username already exists.","TraceId":"4fa67f6388aa9cd9298d1f1b1b6e7abf","SpanId":"a1e8deaf9de798e3","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000013","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:33.9781927+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"4fa67f6388aa9cd9298d1f1b1b6e7abf","SpanId":"a1e8deaf9de798e3","Properties":{"ObjectResultType":"ObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000013","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:33.9784852+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"4fa67f6388aa9cd9298d1f1b1b6e7abf","SpanId":"a1e8deaf9de798e3","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","ElapsedMilliseconds":215.7844,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CO:00000013","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:33.9786893+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"4fa67f6388aa9cd9298d1f1b1b6e7abf","SpanId":"a1e8deaf9de798e3","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CO:00000013","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:33.9789543+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"4fa67f6388aa9cd9298d1f1b1b6e7abf","SpanId":"a1e8deaf9de798e3","Properties":{"ElapsedMilliseconds":217.5453,"StatusCode":409,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"POST","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:00000013","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:35.2163636+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"27728104d7f89dc63924dfbe67d78448","SpanId":"662f4d8445bdaddd","Properties":{"Protocol":"HTTP/1.1","Method":"POST","ContentType":"application/json","ContentLength":49,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:00000014","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:35.2168675+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"27728104d7f89dc63924dfbe67d78448","SpanId":"662f4d8445bdaddd","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CO:00000014","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:35.2172682+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"27728104d7f89dc63924dfbe67d78448","SpanId":"662f4d8445bdaddd","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CO:00000014","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:35.2174991+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"27728104d7f89dc63924dfbe67d78448","SpanId":"662f4d8445bdaddd","Properties":{"RouteData":"{action = \"Register\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MessagingApp.Models.User]] Register(MessagingApp.DTO.AuthDTO)","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000014","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:35.2187239+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"27728104d7f89dc63924dfbe67d78448","SpanId":"662f4d8445bdaddd","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000014","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:35.2188725+03:00","Level":"Information","MessageTemplate":"Initiated user registration by ","TraceId":"27728104d7f89dc63924dfbe67d78448","SpanId":"662f4d8445bdaddd","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000014","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:35.2191311+03:00","Level":"Information","MessageTemplate":"Adding user to DB","TraceId":"27728104d7f89dc63924dfbe67d78448","SpanId":"662f4d8445bdaddd","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000014","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:35.2193031+03:00","Level":"Information","MessageTemplate":"Creating new user","TraceId":"27728104d7f89dc63924dfbe67d78448","SpanId":"662f4d8445bdaddd","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000014","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:35.2194528+03:00","Level":"Information","MessageTemplate":"Composing new user object","TraceId":"27728104d7f89dc63924dfbe67d78448","SpanId":"662f4d8445bdaddd","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000014","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:35.2196135+03:00","Level":"Information","MessageTemplate":"Generating password hash","TraceId":"27728104d7f89dc63924dfbe67d78448","SpanId":"662f4d8445bdaddd","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000014","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:35.2856803+03:00","Level":"Information","MessageTemplate":"Saving new user...","TraceId":"27728104d7f89dc63924dfbe67d78448","SpanId":"662f4d8445bdaddd","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000014","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:35.2882587+03:00","Level":"Error","MessageTemplate":"Failed executing DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"27728104d7f89dc63924dfbe67d78448","SpanId":"662f4d8445bdaddd","Properties":{"elapsed":"1","parameters":"@p0='?', @p1='?' (DbType = Int32), @p2='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"INSERT INTO \"Users\" (\"PasswordHash\", \"Role\", \"Username\")\nVALUES (@p0, @p1, @p2)\nRETURNING \"ID\";","EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000014","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:35.2900932+03:00","Level":"Error","MessageTemplate":"An exception occurred in the database while saving changes for context type '{contextType}'.{newline}{error}","TraceId":"27728104d7f89dc63924dfbe67d78448","SpanId":"662f4d8445bdaddd","Exception":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint \"AK_Users_Username\"\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23505\n    MessageText: duplicate key value violates unique constraint \"AK_Users_Username\"\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: Users\n    ConstraintName: AK_Users_Username\n    File: nbtinsert.c\n    Line: 666\n    Routine: _bt_check_unique\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","Properties":{"contextType":"DataContext","newline":"\n","error":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint \"AK_Users_Username\"\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23505\n    MessageText: duplicate key value violates unique constraint \"AK_Users_Username\"\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: Users\n    ConstraintName: AK_Users_Username\n    File: nbtinsert.c\n    Line: 666\n    Routine: _bt_check_unique\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000014","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:35.2935235+03:00","Level":"Warning","MessageTemplate":"User with such username already exists","TraceId":"27728104d7f89dc63924dfbe67d78448","SpanId":"662f4d8445bdaddd","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000014","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:35.2937400+03:00","Level":"Warning","MessageTemplate":"A user with such username already exists.","TraceId":"27728104d7f89dc63924dfbe67d78448","SpanId":"662f4d8445bdaddd","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000014","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:35.2939369+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"27728104d7f89dc63924dfbe67d78448","SpanId":"662f4d8445bdaddd","Properties":{"ObjectResultType":"ObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000014","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:35.2941463+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"27728104d7f89dc63924dfbe67d78448","SpanId":"662f4d8445bdaddd","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","ElapsedMilliseconds":76.4599,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CO:00000014","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:35.2943496+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"27728104d7f89dc63924dfbe67d78448","SpanId":"662f4d8445bdaddd","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CO:00000014","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:35.2945552+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"27728104d7f89dc63924dfbe67d78448","SpanId":"662f4d8445bdaddd","Properties":{"ElapsedMilliseconds":78.2318,"StatusCode":409,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"POST","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:00000014","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:35.6146526+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"de2e5263fc599d20a9d6a9cadc02bd00","SpanId":"65262fe61c4c1655","Properties":{"Protocol":"HTTP/1.1","Method":"POST","ContentType":"application/json","ContentLength":49,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:00000015","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:35.6151124+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"de2e5263fc599d20a9d6a9cadc02bd00","SpanId":"65262fe61c4c1655","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CO:00000015","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:35.6154960+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"de2e5263fc599d20a9d6a9cadc02bd00","SpanId":"65262fe61c4c1655","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CO:00000015","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:35.6156871+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"de2e5263fc599d20a9d6a9cadc02bd00","SpanId":"65262fe61c4c1655","Properties":{"RouteData":"{action = \"Register\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MessagingApp.Models.User]] Register(MessagingApp.DTO.AuthDTO)","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000015","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:35.6162796+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"de2e5263fc599d20a9d6a9cadc02bd00","SpanId":"65262fe61c4c1655","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000015","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:35.6164246+03:00","Level":"Information","MessageTemplate":"Initiated user registration by ","TraceId":"de2e5263fc599d20a9d6a9cadc02bd00","SpanId":"65262fe61c4c1655","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000015","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:35.6165434+03:00","Level":"Information","MessageTemplate":"Adding user to DB","TraceId":"de2e5263fc599d20a9d6a9cadc02bd00","SpanId":"65262fe61c4c1655","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000015","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:35.6166732+03:00","Level":"Information","MessageTemplate":"Creating new user","TraceId":"de2e5263fc599d20a9d6a9cadc02bd00","SpanId":"65262fe61c4c1655","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000015","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:35.6168753+03:00","Level":"Information","MessageTemplate":"Composing new user object","TraceId":"de2e5263fc599d20a9d6a9cadc02bd00","SpanId":"65262fe61c4c1655","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000015","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:35.6169816+03:00","Level":"Information","MessageTemplate":"Generating password hash","TraceId":"de2e5263fc599d20a9d6a9cadc02bd00","SpanId":"65262fe61c4c1655","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000015","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:35.6816282+03:00","Level":"Information","MessageTemplate":"Saving new user...","TraceId":"de2e5263fc599d20a9d6a9cadc02bd00","SpanId":"65262fe61c4c1655","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000015","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:35.7188038+03:00","Level":"Error","MessageTemplate":"Failed executing DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"de2e5263fc599d20a9d6a9cadc02bd00","SpanId":"65262fe61c4c1655","Properties":{"elapsed":"3","parameters":"@p0='?', @p1='?' (DbType = Int32), @p2='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"INSERT INTO \"Users\" (\"PasswordHash\", \"Role\", \"Username\")\nVALUES (@p0, @p1, @p2)\nRETURNING \"ID\";","EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000015","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:35.7363014+03:00","Level":"Error","MessageTemplate":"An exception occurred in the database while saving changes for context type '{contextType}'.{newline}{error}","TraceId":"de2e5263fc599d20a9d6a9cadc02bd00","SpanId":"65262fe61c4c1655","Exception":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint \"AK_Users_Username\"\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23505\n    MessageText: duplicate key value violates unique constraint \"AK_Users_Username\"\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: Users\n    ConstraintName: AK_Users_Username\n    File: nbtinsert.c\n    Line: 666\n    Routine: _bt_check_unique\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","Properties":{"contextType":"DataContext","newline":"\n","error":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint \"AK_Users_Username\"\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23505\n    MessageText: duplicate key value violates unique constraint \"AK_Users_Username\"\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: Users\n    ConstraintName: AK_Users_Username\n    File: nbtinsert.c\n    Line: 666\n    Routine: _bt_check_unique\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000015","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:35.7515479+03:00","Level":"Warning","MessageTemplate":"User with such username already exists","TraceId":"de2e5263fc599d20a9d6a9cadc02bd00","SpanId":"65262fe61c4c1655","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000015","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:35.7520314+03:00","Level":"Warning","MessageTemplate":"A user with such username already exists.","TraceId":"de2e5263fc599d20a9d6a9cadc02bd00","SpanId":"65262fe61c4c1655","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000015","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:35.7523969+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"de2e5263fc599d20a9d6a9cadc02bd00","SpanId":"65262fe61c4c1655","Properties":{"ObjectResultType":"ObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000015","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:35.7526246+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"de2e5263fc599d20a9d6a9cadc02bd00","SpanId":"65262fe61c4c1655","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","ElapsedMilliseconds":136.747,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CO:00000015","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:35.7527920+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"de2e5263fc599d20a9d6a9cadc02bd00","SpanId":"65262fe61c4c1655","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CO:00000015","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:35.7530222+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"de2e5263fc599d20a9d6a9cadc02bd00","SpanId":"65262fe61c4c1655","Properties":{"ElapsedMilliseconds":138.3724,"StatusCode":409,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"POST","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:00000015","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:35.7587491+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"8f55f1d4e45830362eabcb2c217d8de0","SpanId":"309d75d5e02b8a35","Properties":{"Protocol":"HTTP/1.1","Method":"POST","ContentType":"application/json","ContentLength":49,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:00000016","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:35.7591457+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"8f55f1d4e45830362eabcb2c217d8de0","SpanId":"309d75d5e02b8a35","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CO:00000016","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:35.7595788+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"8f55f1d4e45830362eabcb2c217d8de0","SpanId":"309d75d5e02b8a35","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CO:00000016","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:35.7598825+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"8f55f1d4e45830362eabcb2c217d8de0","SpanId":"309d75d5e02b8a35","Properties":{"RouteData":"{action = \"Register\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MessagingApp.Models.User]] Register(MessagingApp.DTO.AuthDTO)","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000016","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:35.7606705+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"8f55f1d4e45830362eabcb2c217d8de0","SpanId":"309d75d5e02b8a35","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000016","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:35.7608537+03:00","Level":"Information","MessageTemplate":"Initiated user registration by ","TraceId":"8f55f1d4e45830362eabcb2c217d8de0","SpanId":"309d75d5e02b8a35","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000016","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:35.7609858+03:00","Level":"Information","MessageTemplate":"Adding user to DB","TraceId":"8f55f1d4e45830362eabcb2c217d8de0","SpanId":"309d75d5e02b8a35","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000016","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:35.7611528+03:00","Level":"Information","MessageTemplate":"Creating new user","TraceId":"8f55f1d4e45830362eabcb2c217d8de0","SpanId":"309d75d5e02b8a35","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000016","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:35.7612730+03:00","Level":"Information","MessageTemplate":"Composing new user object","TraceId":"8f55f1d4e45830362eabcb2c217d8de0","SpanId":"309d75d5e02b8a35","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000016","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:35.7614149+03:00","Level":"Information","MessageTemplate":"Generating password hash","TraceId":"8f55f1d4e45830362eabcb2c217d8de0","SpanId":"309d75d5e02b8a35","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000016","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:35.8299415+03:00","Level":"Information","MessageTemplate":"Saving new user...","TraceId":"8f55f1d4e45830362eabcb2c217d8de0","SpanId":"309d75d5e02b8a35","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000016","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:35.8320650+03:00","Level":"Error","MessageTemplate":"Failed executing DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"8f55f1d4e45830362eabcb2c217d8de0","SpanId":"309d75d5e02b8a35","Properties":{"elapsed":"1","parameters":"@p0='?', @p1='?' (DbType = Int32), @p2='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"INSERT INTO \"Users\" (\"PasswordHash\", \"Role\", \"Username\")\nVALUES (@p0, @p1, @p2)\nRETURNING \"ID\";","EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000016","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:35.8341384+03:00","Level":"Error","MessageTemplate":"An exception occurred in the database while saving changes for context type '{contextType}'.{newline}{error}","TraceId":"8f55f1d4e45830362eabcb2c217d8de0","SpanId":"309d75d5e02b8a35","Exception":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint \"AK_Users_Username\"\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23505\n    MessageText: duplicate key value violates unique constraint \"AK_Users_Username\"\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: Users\n    ConstraintName: AK_Users_Username\n    File: nbtinsert.c\n    Line: 666\n    Routine: _bt_check_unique\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","Properties":{"contextType":"DataContext","newline":"\n","error":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint \"AK_Users_Username\"\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23505\n    MessageText: duplicate key value violates unique constraint \"AK_Users_Username\"\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: Users\n    ConstraintName: AK_Users_Username\n    File: nbtinsert.c\n    Line: 666\n    Routine: _bt_check_unique\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000016","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:35.8372964+03:00","Level":"Warning","MessageTemplate":"User with such username already exists","TraceId":"8f55f1d4e45830362eabcb2c217d8de0","SpanId":"309d75d5e02b8a35","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000016","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:35.8375118+03:00","Level":"Warning","MessageTemplate":"A user with such username already exists.","TraceId":"8f55f1d4e45830362eabcb2c217d8de0","SpanId":"309d75d5e02b8a35","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000016","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:35.8377105+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"8f55f1d4e45830362eabcb2c217d8de0","SpanId":"309d75d5e02b8a35","Properties":{"ObjectResultType":"ObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000016","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:35.8379828+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"8f55f1d4e45830362eabcb2c217d8de0","SpanId":"309d75d5e02b8a35","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","ElapsedMilliseconds":77.8651,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CO:00000016","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:35.8382012+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"8f55f1d4e45830362eabcb2c217d8de0","SpanId":"309d75d5e02b8a35","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CO:00000016","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:35.8385072+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"8f55f1d4e45830362eabcb2c217d8de0","SpanId":"309d75d5e02b8a35","Properties":{"ElapsedMilliseconds":79.7644,"StatusCode":409,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"POST","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:00000016","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:35.8817742+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"e8e466a78b160aca3098201593814eb6","SpanId":"390171eda2d1ee7e","Properties":{"Protocol":"HTTP/1.1","Method":"POST","ContentType":"application/json","ContentLength":49,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:00000017","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:35.9256012+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"e8e466a78b160aca3098201593814eb6","SpanId":"390171eda2d1ee7e","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CO:00000017","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:35.9260287+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"e8e466a78b160aca3098201593814eb6","SpanId":"390171eda2d1ee7e","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CO:00000017","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:35.9264172+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"e8e466a78b160aca3098201593814eb6","SpanId":"390171eda2d1ee7e","Properties":{"RouteData":"{action = \"Register\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MessagingApp.Models.User]] Register(MessagingApp.DTO.AuthDTO)","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000017","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:35.9274827+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"e8e466a78b160aca3098201593814eb6","SpanId":"390171eda2d1ee7e","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000017","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:35.9276136+03:00","Level":"Information","MessageTemplate":"Initiated user registration by ","TraceId":"e8e466a78b160aca3098201593814eb6","SpanId":"390171eda2d1ee7e","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000017","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:35.9277213+03:00","Level":"Information","MessageTemplate":"Adding user to DB","TraceId":"e8e466a78b160aca3098201593814eb6","SpanId":"390171eda2d1ee7e","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000017","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:35.9278478+03:00","Level":"Information","MessageTemplate":"Creating new user","TraceId":"e8e466a78b160aca3098201593814eb6","SpanId":"390171eda2d1ee7e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000017","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:35.9279539+03:00","Level":"Information","MessageTemplate":"Composing new user object","TraceId":"e8e466a78b160aca3098201593814eb6","SpanId":"390171eda2d1ee7e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000017","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:35.9280650+03:00","Level":"Information","MessageTemplate":"Generating password hash","TraceId":"e8e466a78b160aca3098201593814eb6","SpanId":"390171eda2d1ee7e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000017","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:35.9926414+03:00","Level":"Information","MessageTemplate":"Saving new user...","TraceId":"e8e466a78b160aca3098201593814eb6","SpanId":"390171eda2d1ee7e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000017","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:35.9945427+03:00","Level":"Error","MessageTemplate":"Failed executing DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"e8e466a78b160aca3098201593814eb6","SpanId":"390171eda2d1ee7e","Properties":{"elapsed":"1","parameters":"@p0='?', @p1='?' (DbType = Int32), @p2='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"INSERT INTO \"Users\" (\"PasswordHash\", \"Role\", \"Username\")\nVALUES (@p0, @p1, @p2)\nRETURNING \"ID\";","EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000017","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:35.9963971+03:00","Level":"Error","MessageTemplate":"An exception occurred in the database while saving changes for context type '{contextType}'.{newline}{error}","TraceId":"e8e466a78b160aca3098201593814eb6","SpanId":"390171eda2d1ee7e","Exception":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint \"AK_Users_Username\"\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23505\n    MessageText: duplicate key value violates unique constraint \"AK_Users_Username\"\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: Users\n    ConstraintName: AK_Users_Username\n    File: nbtinsert.c\n    Line: 666\n    Routine: _bt_check_unique\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","Properties":{"contextType":"DataContext","newline":"\n","error":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint \"AK_Users_Username\"\n\nDETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)\n   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)\n   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n  Exception data:\n    Severity: ERROR\n    SqlState: 23505\n    MessageText: duplicate key value violates unique constraint \"AK_Users_Username\"\n    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.\n    SchemaName: public\n    TableName: Users\n    ConstraintName: AK_Users_Username\n    File: nbtinsert.c\n    Line: 666\n    Routine: _bt_check_unique\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000017","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:35.9994445+03:00","Level":"Warning","MessageTemplate":"User with such username already exists","TraceId":"e8e466a78b160aca3098201593814eb6","SpanId":"390171eda2d1ee7e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000017","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:35.9996091+03:00","Level":"Warning","MessageTemplate":"A user with such username already exists.","TraceId":"e8e466a78b160aca3098201593814eb6","SpanId":"390171eda2d1ee7e","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000017","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T18:58:35.9997997+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"e8e466a78b160aca3098201593814eb6","SpanId":"390171eda2d1ee7e","Properties":{"ObjectResultType":"ObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000017","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:36.0000160+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"e8e466a78b160aca3098201593814eb6","SpanId":"390171eda2d1ee7e","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","ElapsedMilliseconds":73.0999,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CO:00000017","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:36.0001660+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"e8e466a78b160aca3098201593814eb6","SpanId":"390171eda2d1ee7e","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CO:00000017","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:36.0004185+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"e8e466a78b160aca3098201593814eb6","SpanId":"390171eda2d1ee7e","Properties":{"ElapsedMilliseconds":118.6496,"StatusCode":409,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"POST","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:00000017","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:41.4669204+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"151aaf3a0113a2b4a81153c627bbd051","SpanId":"e056ab5eff293367","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:00000018","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:41.4675885+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"151aaf3a0113a2b4a81153c627bbd051","SpanId":"e056ab5eff293367","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CO:00000018","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:41.4679965+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"151aaf3a0113a2b4a81153c627bbd051","SpanId":"e056ab5eff293367","Properties":{"ElapsedMilliseconds":1.0741,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:00000018","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:41.4716509+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"67c5c99a9778d9ab5d21a84051f8484c","SpanId":"42496cd84bdbc81e","Properties":{"Protocol":"HTTP/1.1","Method":"POST","ContentType":"application/json","ContentLength":51,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:00000019","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:41.4723859+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"67c5c99a9778d9ab5d21a84051f8484c","SpanId":"42496cd84bdbc81e","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CO:00000019","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:41.4726161+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"67c5c99a9778d9ab5d21a84051f8484c","SpanId":"42496cd84bdbc81e","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CO:00000019","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:41.4728681+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"67c5c99a9778d9ab5d21a84051f8484c","SpanId":"42496cd84bdbc81e","Properties":{"RouteData":"{action = \"Register\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MessagingApp.Models.User]] Register(MessagingApp.DTO.AuthDTO)","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000019","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:41.4739962+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"67c5c99a9778d9ab5d21a84051f8484c","SpanId":"42496cd84bdbc81e","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"12345678901","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000019","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:12345678901"]}}
{"Timestamp":"2025-09-18T18:58:41.4744561+03:00","Level":"Information","MessageTemplate":"Initiated user registration by ","TraceId":"67c5c99a9778d9ab5d21a84051f8484c","SpanId":"42496cd84bdbc81e","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"12345678901","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000019","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:12345678901"]}}
{"Timestamp":"2025-09-18T18:58:41.4747164+03:00","Level":"Information","MessageTemplate":"Adding user to DB","TraceId":"67c5c99a9778d9ab5d21a84051f8484c","SpanId":"42496cd84bdbc81e","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"12345678901","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000019","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:12345678901"]}}
{"Timestamp":"2025-09-18T18:58:41.4751877+03:00","Level":"Information","MessageTemplate":"Creating new user","TraceId":"67c5c99a9778d9ab5d21a84051f8484c","SpanId":"42496cd84bdbc81e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"12345678901","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000019","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:12345678901"]}}
{"Timestamp":"2025-09-18T18:58:41.4756559+03:00","Level":"Information","MessageTemplate":"Composing new user object","TraceId":"67c5c99a9778d9ab5d21a84051f8484c","SpanId":"42496cd84bdbc81e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"12345678901","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000019","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:12345678901"]}}
{"Timestamp":"2025-09-18T18:58:41.4761307+03:00","Level":"Information","MessageTemplate":"Generating password hash","TraceId":"67c5c99a9778d9ab5d21a84051f8484c","SpanId":"42496cd84bdbc81e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"12345678901","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000019","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:12345678901"]}}
{"Timestamp":"2025-09-18T18:58:41.5500578+03:00","Level":"Information","MessageTemplate":"Saving new user...","TraceId":"67c5c99a9778d9ab5d21a84051f8484c","SpanId":"42496cd84bdbc81e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"12345678901","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000019","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:12345678901"]}}
{"Timestamp":"2025-09-18T18:58:41.5535936+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"67c5c99a9778d9ab5d21a84051f8484c","SpanId":"42496cd84bdbc81e","Properties":{"elapsed":"2","parameters":"@p0='?', @p1='?' (DbType = Int32), @p2='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"INSERT INTO \"Users\" (\"PasswordHash\", \"Role\", \"Username\")\nVALUES (@p0, @p1, @p2)\nRETURNING \"ID\";","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"12345678901","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000019","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:12345678901"]}}
{"Timestamp":"2025-09-18T18:58:41.5542270+03:00","Level":"Information","MessageTemplate":"User successfully created, returning HTTP OK","TraceId":"67c5c99a9778d9ab5d21a84051f8484c","SpanId":"42496cd84bdbc81e","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"12345678901","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000019","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:12345678901"]}}
{"Timestamp":"2025-09-18T18:58:41.5546855+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"67c5c99a9778d9ab5d21a84051f8484c","SpanId":"42496cd84bdbc81e","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000019","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:41.5549453+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"67c5c99a9778d9ab5d21a84051f8484c","SpanId":"42496cd84bdbc81e","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","ElapsedMilliseconds":81.7752,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CO:00000019","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:41.5551309+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"67c5c99a9778d9ab5d21a84051f8484c","SpanId":"42496cd84bdbc81e","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CO:00000019","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:58:41.5554558+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"67c5c99a9778d9ab5d21a84051f8484c","SpanId":"42496cd84bdbc81e","Properties":{"ElapsedMilliseconds":83.7809,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"POST","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:00000019","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:59:08.4964042+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"c51d8267a2936041a9e1c8b30d234043","SpanId":"fbf18461e03ec54a","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:0000001A","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:59:08.6161547+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"c51d8267a2936041a9e1c8b30d234043","SpanId":"fbf18461e03ec54a","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CO:0000001A","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:59:08.6166287+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"c51d8267a2936041a9e1c8b30d234043","SpanId":"fbf18461e03ec54a","Properties":{"ElapsedMilliseconds":120.144,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:0000001A","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:59:08.6192827+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"f6566d397b994fee079f5339973ce4e9","SpanId":"65c1f137a791c494","Properties":{"Protocol":"HTTP/1.1","Method":"POST","ContentType":"application/json","ContentLength":58,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:0000001B","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:59:08.6196564+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"f6566d397b994fee079f5339973ce4e9","SpanId":"65c1f137a791c494","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CO:0000001B","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:59:08.6199383+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"f6566d397b994fee079f5339973ce4e9","SpanId":"65c1f137a791c494","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CO:0000001B","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:59:08.6202175+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"f6566d397b994fee079f5339973ce4e9","SpanId":"65c1f137a791c494","Properties":{"RouteData":"{action = \"Register\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MessagingApp.Models.User]] Register(MessagingApp.DTO.AuthDTO)","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000001B","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:59:08.6214467+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"f6566d397b994fee079f5339973ce4e9","SpanId":"65c1f137a791c494","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"qijwjrewprwe","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000001B","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:qijwjrewprwe"]}}
{"Timestamp":"2025-09-18T18:59:08.6216168+03:00","Level":"Information","MessageTemplate":"Initiated user registration by ","TraceId":"f6566d397b994fee079f5339973ce4e9","SpanId":"65c1f137a791c494","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"qijwjrewprwe","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000001B","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:qijwjrewprwe"]}}
{"Timestamp":"2025-09-18T18:59:08.6217432+03:00","Level":"Information","MessageTemplate":"Adding user to DB","TraceId":"f6566d397b994fee079f5339973ce4e9","SpanId":"65c1f137a791c494","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"qijwjrewprwe","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000001B","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:qijwjrewprwe"]}}
{"Timestamp":"2025-09-18T18:59:08.6218949+03:00","Level":"Information","MessageTemplate":"Creating new user","TraceId":"f6566d397b994fee079f5339973ce4e9","SpanId":"65c1f137a791c494","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"qijwjrewprwe","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000001B","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:qijwjrewprwe"]}}
{"Timestamp":"2025-09-18T18:59:08.6220085+03:00","Level":"Information","MessageTemplate":"Composing new user object","TraceId":"f6566d397b994fee079f5339973ce4e9","SpanId":"65c1f137a791c494","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"qijwjrewprwe","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000001B","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:qijwjrewprwe"]}}
{"Timestamp":"2025-09-18T18:59:08.6221578+03:00","Level":"Information","MessageTemplate":"Generating password hash","TraceId":"f6566d397b994fee079f5339973ce4e9","SpanId":"65c1f137a791c494","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"qijwjrewprwe","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000001B","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:qijwjrewprwe"]}}
{"Timestamp":"2025-09-18T18:59:08.6885000+03:00","Level":"Information","MessageTemplate":"Saving new user...","TraceId":"f6566d397b994fee079f5339973ce4e9","SpanId":"65c1f137a791c494","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"qijwjrewprwe","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000001B","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:qijwjrewprwe"]}}
{"Timestamp":"2025-09-18T18:59:08.6922581+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"f6566d397b994fee079f5339973ce4e9","SpanId":"65c1f137a791c494","Properties":{"elapsed":"3","parameters":"@p0='?', @p1='?' (DbType = Int32), @p2='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"INSERT INTO \"Users\" (\"PasswordHash\", \"Role\", \"Username\")\nVALUES (@p0, @p1, @p2)\nRETURNING \"ID\";","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"qijwjrewprwe","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000001B","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:qijwjrewprwe"]}}
{"Timestamp":"2025-09-18T18:59:08.6927427+03:00","Level":"Information","MessageTemplate":"User successfully created, returning HTTP OK","TraceId":"f6566d397b994fee079f5339973ce4e9","SpanId":"65c1f137a791c494","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"qijwjrewprwe","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000001B","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:qijwjrewprwe"]}}
{"Timestamp":"2025-09-18T18:59:08.6929044+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"f6566d397b994fee079f5339973ce4e9","SpanId":"65c1f137a791c494","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000001B","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:59:08.6931421+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"f6566d397b994fee079f5339973ce4e9","SpanId":"65c1f137a791c494","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","ElapsedMilliseconds":72.6531,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CO:0000001B","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:59:08.6933194+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"f6566d397b994fee079f5339973ce4e9","SpanId":"65c1f137a791c494","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CO:0000001B","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T18:59:08.6935559+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"f6566d397b994fee079f5339973ce4e9","SpanId":"65c1f137a791c494","Properties":{"ElapsedMilliseconds":74.2821,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"POST","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:0000001B","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T19:00:01.5124355+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"890663cecec2f20028f4cbe471fa538f","SpanId":"fc62cd06f84622d3","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:0000001C","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T19:00:01.6123710+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"890663cecec2f20028f4cbe471fa538f","SpanId":"fc62cd06f84622d3","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CO:0000001C","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T19:00:01.6126577+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"890663cecec2f20028f4cbe471fa538f","SpanId":"fc62cd06f84622d3","Properties":{"ElapsedMilliseconds":100.2185,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:0000001C","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T19:00:01.6207840+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"3291c06b65fa249acabc9c15b655796d","SpanId":"3c8c3f820e64ff7b","Properties":{"Protocol":"HTTP/1.1","Method":"POST","ContentType":"application/json","ContentLength":51,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:0000001D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T19:00:01.6212903+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"3291c06b65fa249acabc9c15b655796d","SpanId":"3c8c3f820e64ff7b","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CO:0000001D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T19:00:01.6216270+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"3291c06b65fa249acabc9c15b655796d","SpanId":"3c8c3f820e64ff7b","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CO:0000001D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T19:00:01.6218543+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"3291c06b65fa249acabc9c15b655796d","SpanId":"3c8c3f820e64ff7b","Properties":{"RouteData":"{action = \"Register\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MessagingApp.Models.User]] Register(MessagingApp.DTO.AuthDTO)","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000001D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T19:00:01.6248168+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"3291c06b65fa249acabc9c15b655796d","SpanId":"3c8c3f820e64ff7b","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"apsdfpaskdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000001D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:apsdfpaskdf"]}}
{"Timestamp":"2025-09-18T19:00:01.6250095+03:00","Level":"Information","MessageTemplate":"Initiated user registration by ","TraceId":"3291c06b65fa249acabc9c15b655796d","SpanId":"3c8c3f820e64ff7b","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"apsdfpaskdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000001D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:apsdfpaskdf"]}}
{"Timestamp":"2025-09-18T19:00:01.6251359+03:00","Level":"Information","MessageTemplate":"Adding user to DB","TraceId":"3291c06b65fa249acabc9c15b655796d","SpanId":"3c8c3f820e64ff7b","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"apsdfpaskdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000001D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:apsdfpaskdf"]}}
{"Timestamp":"2025-09-18T19:00:01.6252828+03:00","Level":"Information","MessageTemplate":"Creating new user","TraceId":"3291c06b65fa249acabc9c15b655796d","SpanId":"3c8c3f820e64ff7b","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"apsdfpaskdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000001D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:apsdfpaskdf"]}}
{"Timestamp":"2025-09-18T19:00:01.6254205+03:00","Level":"Information","MessageTemplate":"Composing new user object","TraceId":"3291c06b65fa249acabc9c15b655796d","SpanId":"3c8c3f820e64ff7b","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"apsdfpaskdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000001D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:apsdfpaskdf"]}}
{"Timestamp":"2025-09-18T19:00:01.6255954+03:00","Level":"Information","MessageTemplate":"Generating password hash","TraceId":"3291c06b65fa249acabc9c15b655796d","SpanId":"3c8c3f820e64ff7b","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"apsdfpaskdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000001D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:apsdfpaskdf"]}}
{"Timestamp":"2025-09-18T19:00:01.6914719+03:00","Level":"Information","MessageTemplate":"Saving new user...","TraceId":"3291c06b65fa249acabc9c15b655796d","SpanId":"3c8c3f820e64ff7b","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"apsdfpaskdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000001D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:apsdfpaskdf"]}}
{"Timestamp":"2025-09-18T19:00:01.7190001+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3291c06b65fa249acabc9c15b655796d","SpanId":"3c8c3f820e64ff7b","Properties":{"elapsed":"3","parameters":"@p0='?', @p1='?' (DbType = Int32), @p2='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"INSERT INTO \"Users\" (\"PasswordHash\", \"Role\", \"Username\")\nVALUES (@p0, @p1, @p2)\nRETURNING \"ID\";","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"apsdfpaskdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000001D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:apsdfpaskdf"]}}
{"Timestamp":"2025-09-18T19:00:01.7196238+03:00","Level":"Information","MessageTemplate":"User successfully created, returning HTTP OK","TraceId":"3291c06b65fa249acabc9c15b655796d","SpanId":"3c8c3f820e64ff7b","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"apsdfpaskdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000001D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:apsdfpaskdf"]}}
{"Timestamp":"2025-09-18T19:00:01.7198657+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"3291c06b65fa249acabc9c15b655796d","SpanId":"3c8c3f820e64ff7b","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000001D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T19:00:01.7201119+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"3291c06b65fa249acabc9c15b655796d","SpanId":"3c8c3f820e64ff7b","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","ElapsedMilliseconds":97.9404,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CO:0000001D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T19:00:01.7203832+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"3291c06b65fa249acabc9c15b655796d","SpanId":"3c8c3f820e64ff7b","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CO:0000001D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T19:00:01.7206324+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"3291c06b65fa249acabc9c15b655796d","SpanId":"3c8c3f820e64ff7b","Properties":{"ElapsedMilliseconds":99.8541,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"POST","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:0000001D","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T19:00:20.6313330+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"d3a432f9a49c9b4b186acb0f5dea645c","SpanId":"1849fe826f60c64a","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:0000001E","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T19:00:20.6317482+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"d3a432f9a49c9b4b186acb0f5dea645c","SpanId":"1849fe826f60c64a","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CO:0000001E","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T19:00:20.6319715+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"d3a432f9a49c9b4b186acb0f5dea645c","SpanId":"1849fe826f60c64a","Properties":{"ElapsedMilliseconds":0.6577,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:0000001E","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T19:00:20.6348863+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"f5d5e78bf28591cc05cda9e7c7487a8a","SpanId":"015576d2dc88c9de","Properties":{"Protocol":"HTTP/1.1","Method":"POST","ContentType":"application/json","ContentLength":57,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:0000001F","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T19:00:20.6355220+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"f5d5e78bf28591cc05cda9e7c7487a8a","SpanId":"015576d2dc88c9de","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CO:0000001F","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T19:00:20.6359089+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"f5d5e78bf28591cc05cda9e7c7487a8a","SpanId":"015576d2dc88c9de","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CO:0000001F","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T19:00:20.6361804+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"f5d5e78bf28591cc05cda9e7c7487a8a","SpanId":"015576d2dc88c9de","Properties":{"RouteData":"{action = \"Register\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MessagingApp.Models.User]] Register(MessagingApp.DTO.AuthDTO)","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000001F","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T19:00:20.6367462+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"f5d5e78bf28591cc05cda9e7c7487a8a","SpanId":"015576d2dc88c9de","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"apsodmxcvkmssd","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000001F","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:apsodmxcvkmssd"]}}
{"Timestamp":"2025-09-18T19:00:20.6370636+03:00","Level":"Information","MessageTemplate":"Initiated user registration by ","TraceId":"f5d5e78bf28591cc05cda9e7c7487a8a","SpanId":"015576d2dc88c9de","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"apsodmxcvkmssd","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000001F","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:apsodmxcvkmssd"]}}
{"Timestamp":"2025-09-18T19:00:20.6372521+03:00","Level":"Information","MessageTemplate":"Adding user to DB","TraceId":"f5d5e78bf28591cc05cda9e7c7487a8a","SpanId":"015576d2dc88c9de","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"apsodmxcvkmssd","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000001F","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:apsodmxcvkmssd"]}}
{"Timestamp":"2025-09-18T19:00:20.6376467+03:00","Level":"Information","MessageTemplate":"Creating new user","TraceId":"f5d5e78bf28591cc05cda9e7c7487a8a","SpanId":"015576d2dc88c9de","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"apsodmxcvkmssd","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000001F","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:apsodmxcvkmssd"]}}
{"Timestamp":"2025-09-18T19:00:20.6378857+03:00","Level":"Information","MessageTemplate":"Composing new user object","TraceId":"f5d5e78bf28591cc05cda9e7c7487a8a","SpanId":"015576d2dc88c9de","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"apsodmxcvkmssd","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000001F","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:apsodmxcvkmssd"]}}
{"Timestamp":"2025-09-18T19:00:20.6380982+03:00","Level":"Information","MessageTemplate":"Generating password hash","TraceId":"f5d5e78bf28591cc05cda9e7c7487a8a","SpanId":"015576d2dc88c9de","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"apsodmxcvkmssd","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000001F","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:apsodmxcvkmssd"]}}
{"Timestamp":"2025-09-18T19:00:20.7082645+03:00","Level":"Information","MessageTemplate":"Saving new user...","TraceId":"f5d5e78bf28591cc05cda9e7c7487a8a","SpanId":"015576d2dc88c9de","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"apsodmxcvkmssd","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000001F","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:apsodmxcvkmssd"]}}
{"Timestamp":"2025-09-18T19:00:20.7116377+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"f5d5e78bf28591cc05cda9e7c7487a8a","SpanId":"015576d2dc88c9de","Properties":{"elapsed":"2","parameters":"@p0='?', @p1='?' (DbType = Int32), @p2='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"INSERT INTO \"Users\" (\"PasswordHash\", \"Role\", \"Username\")\nVALUES (@p0, @p1, @p2)\nRETURNING \"ID\";","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"apsodmxcvkmssd","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000001F","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:apsodmxcvkmssd"]}}
{"Timestamp":"2025-09-18T19:00:20.7121256+03:00","Level":"Information","MessageTemplate":"User successfully created, returning HTTP OK","TraceId":"f5d5e78bf28591cc05cda9e7c7487a8a","SpanId":"015576d2dc88c9de","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"apsodmxcvkmssd","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000001F","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:apsodmxcvkmssd"]}}
{"Timestamp":"2025-09-18T19:00:20.7123542+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"f5d5e78bf28591cc05cda9e7c7487a8a","SpanId":"015576d2dc88c9de","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:0000001F","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T19:00:20.7126123+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"f5d5e78bf28591cc05cda9e7c7487a8a","SpanId":"015576d2dc88c9de","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","ElapsedMilliseconds":76.1868,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CO:0000001F","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T19:00:20.7128507+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"f5d5e78bf28591cc05cda9e7c7487a8a","SpanId":"015576d2dc88c9de","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CO:0000001F","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T19:00:20.7130810+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"f5d5e78bf28591cc05cda9e7c7487a8a","SpanId":"015576d2dc88c9de","Properties":{"ElapsedMilliseconds":78.1988,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"POST","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:0000001F","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T19:01:25.0574570+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"3834b3973ce2746d21614a9cd852b9d5","SpanId":"70819b6b0486b57c","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:00000020","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T19:01:25.2188229+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"3834b3973ce2746d21614a9cd852b9d5","SpanId":"70819b6b0486b57c","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CO:00000020","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T19:01:25.2193439+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"3834b3973ce2746d21614a9cd852b9d5","SpanId":"70819b6b0486b57c","Properties":{"ElapsedMilliseconds":161.8534,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:00000020","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T19:01:25.2222357+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"485fee70e123f052a6ecd8a831fb98f2","SpanId":"72b9bb02d902f7ea","Properties":{"Protocol":"HTTP/1.1","Method":"POST","ContentType":"application/json","ContentLength":46,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:00000021","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T19:01:25.2225745+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"485fee70e123f052a6ecd8a831fb98f2","SpanId":"72b9bb02d902f7ea","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CO:00000021","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T19:01:25.2228683+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"485fee70e123f052a6ecd8a831fb98f2","SpanId":"72b9bb02d902f7ea","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CO:00000021","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T19:01:25.2231314+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"485fee70e123f052a6ecd8a831fb98f2","SpanId":"72b9bb02d902f7ea","Properties":{"RouteData":"{action = \"Register\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MessagingApp.Models.User]] Register(MessagingApp.DTO.AuthDTO)","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000021","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T19:01:25.2237250+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"485fee70e123f052a6ecd8a831fb98f2","SpanId":"72b9bb02d902f7ea","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"vnfjvnd","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000021","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:vnfjvnd"]}}
{"Timestamp":"2025-09-18T19:01:25.2239024+03:00","Level":"Information","MessageTemplate":"Initiated user registration by ","TraceId":"485fee70e123f052a6ecd8a831fb98f2","SpanId":"72b9bb02d902f7ea","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"vnfjvnd","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000021","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:vnfjvnd"]}}
{"Timestamp":"2025-09-18T19:01:25.2240417+03:00","Level":"Information","MessageTemplate":"Adding user to DB","TraceId":"485fee70e123f052a6ecd8a831fb98f2","SpanId":"72b9bb02d902f7ea","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"vnfjvnd","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000021","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:vnfjvnd"]}}
{"Timestamp":"2025-09-18T19:01:25.2242218+03:00","Level":"Information","MessageTemplate":"Creating new user","TraceId":"485fee70e123f052a6ecd8a831fb98f2","SpanId":"72b9bb02d902f7ea","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"vnfjvnd","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000021","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:vnfjvnd"]}}
{"Timestamp":"2025-09-18T19:01:25.2244341+03:00","Level":"Information","MessageTemplate":"Composing new user object","TraceId":"485fee70e123f052a6ecd8a831fb98f2","SpanId":"72b9bb02d902f7ea","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"vnfjvnd","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000021","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:vnfjvnd"]}}
{"Timestamp":"2025-09-18T19:01:25.2247528+03:00","Level":"Information","MessageTemplate":"Generating password hash","TraceId":"485fee70e123f052a6ecd8a831fb98f2","SpanId":"72b9bb02d902f7ea","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"vnfjvnd","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000021","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:vnfjvnd"]}}
{"Timestamp":"2025-09-18T19:01:25.3019440+03:00","Level":"Information","MessageTemplate":"Saving new user...","TraceId":"485fee70e123f052a6ecd8a831fb98f2","SpanId":"72b9bb02d902f7ea","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"vnfjvnd","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000021","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:vnfjvnd"]}}
{"Timestamp":"2025-09-18T19:01:25.3724806+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"485fee70e123f052a6ecd8a831fb98f2","SpanId":"72b9bb02d902f7ea","Properties":{"elapsed":"8","parameters":"@p0='?', @p1='?' (DbType = Int32), @p2='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"INSERT INTO \"Users\" (\"PasswordHash\", \"Role\", \"Username\")\nVALUES (@p0, @p1, @p2)\nRETURNING \"ID\";","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"vnfjvnd","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000021","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:vnfjvnd"]}}
{"Timestamp":"2025-09-18T19:01:25.3729984+03:00","Level":"Information","MessageTemplate":"User successfully created, returning HTTP OK","TraceId":"485fee70e123f052a6ecd8a831fb98f2","SpanId":"72b9bb02d902f7ea","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"vnfjvnd","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000021","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO","Scope":["Username:vnfjvnd"]}}
{"Timestamp":"2025-09-18T19:01:25.3732177+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"485fee70e123f052a6ecd8a831fb98f2","SpanId":"72b9bb02d902f7ea","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CO:00000021","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T19:01:25.3734584+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"485fee70e123f052a6ecd8a831fb98f2","SpanId":"72b9bb02d902f7ea","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","ElapsedMilliseconds":150.0911,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CO:00000021","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T19:01:25.3737122+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"485fee70e123f052a6ecd8a831fb98f2","SpanId":"72b9bb02d902f7ea","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CO:00000021","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T19:01:25.3739253+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"485fee70e123f052a6ecd8a831fb98f2","SpanId":"72b9bb02d902f7ea","Properties":{"ElapsedMilliseconds":151.6908,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"POST","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CO:00000021","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CO"}}
{"Timestamp":"2025-09-18T19:05:56.2827263+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"4d0ed66badec61b3441c14b89f2ae6ac","SpanId":"166370e040ab177f","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/login","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CP:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CP"}}
{"Timestamp":"2025-09-18T19:05:56.3879560+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"4d0ed66badec61b3441c14b89f2ae6ac","SpanId":"166370e040ab177f","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CP:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CP"}}
{"Timestamp":"2025-09-18T19:05:56.3882573+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"4d0ed66badec61b3441c14b89f2ae6ac","SpanId":"166370e040ab177f","Properties":{"ElapsedMilliseconds":105.5078,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/login","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CP:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CP"}}
{"Timestamp":"2025-09-18T19:05:56.3907747+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"a9c77e7ee441487a6cf4118c947c06b0","SpanId":"f44407d8dd000ff2","Properties":{"Protocol":"HTTP/1.1","Method":"POST","ContentType":"application/json","ContentLength":59,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/login","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CP:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CP"}}
{"Timestamp":"2025-09-18T19:05:56.3911402+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"a9c77e7ee441487a6cf4118c947c06b0","SpanId":"f44407d8dd000ff2","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CP:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CP"}}
{"Timestamp":"2025-09-18T19:05:56.3913232+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"a9c77e7ee441487a6cf4118c947c06b0","SpanId":"f44407d8dd000ff2","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CP:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CP"}}
{"Timestamp":"2025-09-18T19:05:56.3916027+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"a9c77e7ee441487a6cf4118c947c06b0","SpanId":"f44407d8dd000ff2","Properties":{"RouteData":"{action = \"Login\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] Login(MessagingApp.DTO.AuthDTO)","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CP:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CP"}}
{"Timestamp":"2025-09-18T19:05:56.3922375+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"a9c77e7ee441487a6cf4118c947c06b0","SpanId":"f44407d8dd000ff2","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"sadoifhasoidf","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CP:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CP","Scope":["Username:sadoifhasoidf"]}}
{"Timestamp":"2025-09-18T19:05:56.3923963+03:00","Level":"Information","MessageTemplate":"Initiated login","TraceId":"a9c77e7ee441487a6cf4118c947c06b0","SpanId":"f44407d8dd000ff2","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"sadoifhasoidf","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CP:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CP","Scope":["Username:sadoifhasoidf"]}}
{"Timestamp":"2025-09-18T19:05:56.3925295+03:00","Level":"Information","MessageTemplate":"Authenticating user","TraceId":"a9c77e7ee441487a6cf4118c947c06b0","SpanId":"f44407d8dd000ff2","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"sadoifhasoidf","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CP:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CP","Scope":["Username:sadoifhasoidf"]}}
{"Timestamp":"2025-09-18T19:05:56.4799515+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"a9c77e7ee441487a6cf4118c947c06b0","SpanId":"f44407d8dd000ff2","Properties":{"elapsed":"4","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"sadoifhasoidf","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CP:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CP","Scope":["Username:sadoifhasoidf"]}}
{"Timestamp":"2025-09-18T19:05:56.4921035+03:00","Level":"Warning","MessageTemplate":"Couldn't authenticate, no such user","TraceId":"a9c77e7ee441487a6cf4118c947c06b0","SpanId":"f44407d8dd000ff2","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"sadoifhasoidf","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CP:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CP","Scope":["Username:sadoifhasoidf"]}}
{"Timestamp":"2025-09-18T19:05:56.5100773+03:00","Level":"Warning","MessageTemplate":"No such user for auth","TraceId":"a9c77e7ee441487a6cf4118c947c06b0","SpanId":"f44407d8dd000ff2","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"sadoifhasoidf","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CP:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CP","Scope":["Username:sadoifhasoidf"]}}
{"Timestamp":"2025-09-18T19:05:56.5113407+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"a9c77e7ee441487a6cf4118c947c06b0","SpanId":"f44407d8dd000ff2","Properties":{"ObjectResultType":"ObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CP:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CP"}}
{"Timestamp":"2025-09-18T19:05:56.5115701+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"a9c77e7ee441487a6cf4118c947c06b0","SpanId":"f44407d8dd000ff2","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","ElapsedMilliseconds":119.7192,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CP:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CP"}}
{"Timestamp":"2025-09-18T19:05:56.5117303+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"a9c77e7ee441487a6cf4118c947c06b0","SpanId":"f44407d8dd000ff2","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CP:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CP"}}
{"Timestamp":"2025-09-18T19:05:56.5119357+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"a9c77e7ee441487a6cf4118c947c06b0","SpanId":"f44407d8dd000ff2","Properties":{"ElapsedMilliseconds":121.1602,"StatusCode":404,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"POST","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/login","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CP:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CP"}}
{"Timestamp":"2025-09-18T19:06:02.4261783+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"6a2749c27fe3cc9fde000755b1ff325c","SpanId":"1f651bdb56a9e203","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CP:00000003","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CP"}}
{"Timestamp":"2025-09-18T19:06:02.4269692+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"6a2749c27fe3cc9fde000755b1ff325c","SpanId":"1f651bdb56a9e203","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CP:00000003","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CP"}}
{"Timestamp":"2025-09-18T19:06:02.4272247+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"6a2749c27fe3cc9fde000755b1ff325c","SpanId":"1f651bdb56a9e203","Properties":{"ElapsedMilliseconds":1.0779,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CP:00000003","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CP"}}
{"Timestamp":"2025-09-18T19:06:02.4302928+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"805dae11701053d328744c43d56b66d5","SpanId":"76ac81224eb88f5d","Properties":{"Protocol":"HTTP/1.1","Method":"POST","ContentType":"application/json","ContentLength":59,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CP:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CP"}}
{"Timestamp":"2025-09-18T19:06:02.4306343+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"805dae11701053d328744c43d56b66d5","SpanId":"76ac81224eb88f5d","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CP:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CP"}}
{"Timestamp":"2025-09-18T19:06:02.4308280+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"805dae11701053d328744c43d56b66d5","SpanId":"76ac81224eb88f5d","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CP:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CP"}}
{"Timestamp":"2025-09-18T19:06:02.4310224+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"805dae11701053d328744c43d56b66d5","SpanId":"76ac81224eb88f5d","Properties":{"RouteData":"{action = \"Register\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MessagingApp.Models.User]] Register(MessagingApp.DTO.AuthDTO)","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CP:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CP"}}
{"Timestamp":"2025-09-18T19:06:02.4315251+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"805dae11701053d328744c43d56b66d5","SpanId":"76ac81224eb88f5d","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"aspodfjaskdpfo","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CP:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CP","Scope":["Username:aspodfjaskdpfo"]}}
{"Timestamp":"2025-09-18T19:06:02.4316627+03:00","Level":"Information","MessageTemplate":"Initiated user registration by ","TraceId":"805dae11701053d328744c43d56b66d5","SpanId":"76ac81224eb88f5d","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"aspodfjaskdpfo","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CP:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CP","Scope":["Username:aspodfjaskdpfo"]}}
{"Timestamp":"2025-09-18T19:06:02.4318061+03:00","Level":"Information","MessageTemplate":"Adding user to DB","TraceId":"805dae11701053d328744c43d56b66d5","SpanId":"76ac81224eb88f5d","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"aspodfjaskdpfo","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CP:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CP","Scope":["Username:aspodfjaskdpfo"]}}
{"Timestamp":"2025-09-18T19:06:02.4319402+03:00","Level":"Information","MessageTemplate":"Creating new user","TraceId":"805dae11701053d328744c43d56b66d5","SpanId":"76ac81224eb88f5d","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"aspodfjaskdpfo","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CP:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CP","Scope":["Username:aspodfjaskdpfo"]}}
{"Timestamp":"2025-09-18T19:06:02.4320746+03:00","Level":"Information","MessageTemplate":"Composing new user object","TraceId":"805dae11701053d328744c43d56b66d5","SpanId":"76ac81224eb88f5d","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"aspodfjaskdpfo","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CP:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CP","Scope":["Username:aspodfjaskdpfo"]}}
{"Timestamp":"2025-09-18T19:06:02.4322061+03:00","Level":"Information","MessageTemplate":"Generating password hash","TraceId":"805dae11701053d328744c43d56b66d5","SpanId":"76ac81224eb88f5d","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"aspodfjaskdpfo","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CP:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CP","Scope":["Username:aspodfjaskdpfo"]}}
{"Timestamp":"2025-09-18T19:06:02.4996679+03:00","Level":"Information","MessageTemplate":"Saving new user...","TraceId":"805dae11701053d328744c43d56b66d5","SpanId":"76ac81224eb88f5d","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"aspodfjaskdpfo","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CP:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CP","Scope":["Username:aspodfjaskdpfo"]}}
{"Timestamp":"2025-09-18T19:06:02.5034834+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"805dae11701053d328744c43d56b66d5","SpanId":"76ac81224eb88f5d","Properties":{"elapsed":"3","parameters":"@p0='?', @p1='?' (DbType = Int32), @p2='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"INSERT INTO \"Users\" (\"PasswordHash\", \"Role\", \"Username\")\nVALUES (@p0, @p1, @p2)\nRETURNING \"ID\";","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"aspodfjaskdpfo","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CP:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CP","Scope":["Username:aspodfjaskdpfo"]}}
{"Timestamp":"2025-09-18T19:06:02.6329175+03:00","Level":"Information","MessageTemplate":"User successfully created, returning HTTP OK","TraceId":"805dae11701053d328744c43d56b66d5","SpanId":"76ac81224eb88f5d","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"aspodfjaskdpfo","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CP:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CP","Scope":["Username:aspodfjaskdpfo"]}}
{"Timestamp":"2025-09-18T19:06:02.6532559+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"805dae11701053d328744c43d56b66d5","SpanId":"76ac81224eb88f5d","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CP:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CP"}}
{"Timestamp":"2025-09-18T19:06:02.6538085+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"805dae11701053d328744c43d56b66d5","SpanId":"76ac81224eb88f5d","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","ElapsedMilliseconds":222.5395,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CP:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CP"}}
{"Timestamp":"2025-09-18T19:06:02.6542920+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"805dae11701053d328744c43d56b66d5","SpanId":"76ac81224eb88f5d","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CP:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CP"}}
{"Timestamp":"2025-09-18T19:06:02.6545214+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"805dae11701053d328744c43d56b66d5","SpanId":"76ac81224eb88f5d","Properties":{"ElapsedMilliseconds":224.2509,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"POST","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CP:00000004","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CP"}}
{"Timestamp":"2025-09-18T19:10:00.5953533+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"26ecd4beef1752e70d4677b5701cb5a2","SpanId":"17799bc4c826db37","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CQ:00000001","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:10:00.6978260+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"26ecd4beef1752e70d4677b5701cb5a2","SpanId":"17799bc4c826db37","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CQ:00000001","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:10:00.6987205+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"26ecd4beef1752e70d4677b5701cb5a2","SpanId":"17799bc4c826db37","Properties":{"ElapsedMilliseconds":103.5913,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CQ:00000001","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:10:00.7018576+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"e667a6c50b598ed5eb882ff76bdcbb96","SpanId":"a76d9bdec62cc66a","Properties":{"Protocol":"HTTP/1.1","Method":"POST","ContentType":"application/json","ContentLength":58,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CQ:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:10:00.7023745+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"e667a6c50b598ed5eb882ff76bdcbb96","SpanId":"a76d9bdec62cc66a","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CQ:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:10:00.7067574+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"e667a6c50b598ed5eb882ff76bdcbb96","SpanId":"a76d9bdec62cc66a","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CQ:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:10:00.7080446+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"e667a6c50b598ed5eb882ff76bdcbb96","SpanId":"a76d9bdec62cc66a","Properties":{"RouteData":"{action = \"Register\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MessagingApp.Models.User]] Register(MessagingApp.DTO.AuthDTO)","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:10:00.7307892+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"e667a6c50b598ed5eb882ff76bdcbb96","SpanId":"a76d9bdec62cc66a","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"aoijsdjfasdipf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ","Scope":["Username:aoijsdjfasdipf"]}}
{"Timestamp":"2025-09-18T19:10:00.7310893+03:00","Level":"Information","MessageTemplate":"Initiated user registration by ","TraceId":"e667a6c50b598ed5eb882ff76bdcbb96","SpanId":"a76d9bdec62cc66a","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"aoijsdjfasdipf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ","Scope":["Username:aoijsdjfasdipf"]}}
{"Timestamp":"2025-09-18T19:10:00.7313204+03:00","Level":"Information","MessageTemplate":"Adding user to DB","TraceId":"e667a6c50b598ed5eb882ff76bdcbb96","SpanId":"a76d9bdec62cc66a","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"aoijsdjfasdipf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ","Scope":["Username:aoijsdjfasdipf"]}}
{"Timestamp":"2025-09-18T19:10:00.7315439+03:00","Level":"Information","MessageTemplate":"Creating new user","TraceId":"e667a6c50b598ed5eb882ff76bdcbb96","SpanId":"a76d9bdec62cc66a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"aoijsdjfasdipf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ","Scope":["Username:aoijsdjfasdipf"]}}
{"Timestamp":"2025-09-18T19:10:00.7326461+03:00","Level":"Information","MessageTemplate":"Composing new user object","TraceId":"e667a6c50b598ed5eb882ff76bdcbb96","SpanId":"a76d9bdec62cc66a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"aoijsdjfasdipf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ","Scope":["Username:aoijsdjfasdipf"]}}
{"Timestamp":"2025-09-18T19:10:00.7328067+03:00","Level":"Information","MessageTemplate":"Generating password hash","TraceId":"e667a6c50b598ed5eb882ff76bdcbb96","SpanId":"a76d9bdec62cc66a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"aoijsdjfasdipf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ","Scope":["Username:aoijsdjfasdipf"]}}
{"Timestamp":"2025-09-18T19:10:00.8087705+03:00","Level":"Information","MessageTemplate":"Saving new user...","TraceId":"e667a6c50b598ed5eb882ff76bdcbb96","SpanId":"a76d9bdec62cc66a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"aoijsdjfasdipf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ","Scope":["Username:aoijsdjfasdipf"]}}
{"Timestamp":"2025-09-18T19:10:00.8565609+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"e667a6c50b598ed5eb882ff76bdcbb96","SpanId":"a76d9bdec62cc66a","Properties":{"elapsed":"31","parameters":"@p0='?', @p1='?' (DbType = Int32), @p2='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"INSERT INTO \"Users\" (\"PasswordHash\", \"Role\", \"Username\")\nVALUES (@p0, @p1, @p2)\nRETURNING \"ID\";","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"aoijsdjfasdipf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ","Scope":["Username:aoijsdjfasdipf"]}}
{"Timestamp":"2025-09-18T19:10:00.8657998+03:00","Level":"Information","MessageTemplate":"User successfully created, returning HTTP OK","TraceId":"e667a6c50b598ed5eb882ff76bdcbb96","SpanId":"a76d9bdec62cc66a","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"aoijsdjfasdipf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ","Scope":["Username:aoijsdjfasdipf"]}}
{"Timestamp":"2025-09-18T19:10:00.8664972+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"e667a6c50b598ed5eb882ff76bdcbb96","SpanId":"a76d9bdec62cc66a","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:10:00.8764745+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"e667a6c50b598ed5eb882ff76bdcbb96","SpanId":"a76d9bdec62cc66a","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","ElapsedMilliseconds":167.9691,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CQ:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:10:00.8859248+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"e667a6c50b598ed5eb882ff76bdcbb96","SpanId":"a76d9bdec62cc66a","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CQ:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:10:00.8880191+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"e667a6c50b598ed5eb882ff76bdcbb96","SpanId":"a76d9bdec62cc66a","Properties":{"ElapsedMilliseconds":186.1626,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"POST","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CQ:00000002","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:10:42.3581981+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"27cbe8d89b475bdb84cf55d7492b3fcc","SpanId":"b4d140a7512d77ae","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/login","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CQ:00000003","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:10:42.4537165+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"27cbe8d89b475bdb84cf55d7492b3fcc","SpanId":"b4d140a7512d77ae","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CQ:00000003","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:10:42.4540125+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"27cbe8d89b475bdb84cf55d7492b3fcc","SpanId":"b4d140a7512d77ae","Properties":{"ElapsedMilliseconds":95.8223,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/login","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CQ:00000003","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:10:42.4570320+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"ec57aabc740e7810a524100a41815a16","SpanId":"c369520659eea86d","Properties":{"Protocol":"HTTP/1.1","Method":"POST","ContentType":"application/json","ContentLength":62,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/login","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CQ:00000004","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:10:42.4574273+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"ec57aabc740e7810a524100a41815a16","SpanId":"c369520659eea86d","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CQ:00000004","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:10:42.4576920+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"ec57aabc740e7810a524100a41815a16","SpanId":"c369520659eea86d","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CQ:00000004","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:10:42.4578800+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"ec57aabc740e7810a524100a41815a16","SpanId":"c369520659eea86d","Properties":{"RouteData":"{action = \"Login\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] Login(MessagingApp.DTO.AuthDTO)","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:00000004","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:10:42.4584690+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"ec57aabc740e7810a524100a41815a16","SpanId":"c369520659eea86d","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"aosdfmasdpfapdsf","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:00000004","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CQ","Scope":["Username:aosdfmasdpfapdsf"]}}
{"Timestamp":"2025-09-18T19:10:42.4585992+03:00","Level":"Information","MessageTemplate":"Initiated login","TraceId":"ec57aabc740e7810a524100a41815a16","SpanId":"c369520659eea86d","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"aosdfmasdpfapdsf","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:00000004","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CQ","Scope":["Username:aosdfmasdpfapdsf"]}}
{"Timestamp":"2025-09-18T19:10:42.4587132+03:00","Level":"Information","MessageTemplate":"Authenticating user","TraceId":"ec57aabc740e7810a524100a41815a16","SpanId":"c369520659eea86d","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"aosdfmasdpfapdsf","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:00000004","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CQ","Scope":["Username:aosdfmasdpfapdsf"]}}
{"Timestamp":"2025-09-18T19:10:42.4685222+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"ec57aabc740e7810a524100a41815a16","SpanId":"c369520659eea86d","Properties":{"elapsed":"3","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"aosdfmasdpfapdsf","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:00000004","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CQ","Scope":["Username:aosdfmasdpfapdsf"]}}
{"Timestamp":"2025-09-18T19:10:42.4859813+03:00","Level":"Warning","MessageTemplate":"Couldn't authenticate, no such user","TraceId":"ec57aabc740e7810a524100a41815a16","SpanId":"c369520659eea86d","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"aosdfmasdpfapdsf","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:00000004","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CQ","Scope":["Username:aosdfmasdpfapdsf"]}}
{"Timestamp":"2025-09-18T19:10:42.4868369+03:00","Level":"Warning","MessageTemplate":"No such user for auth","TraceId":"ec57aabc740e7810a524100a41815a16","SpanId":"c369520659eea86d","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"aosdfmasdpfapdsf","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:00000004","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CQ","Scope":["Username:aosdfmasdpfapdsf"]}}
{"Timestamp":"2025-09-18T19:10:42.4870921+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"ec57aabc740e7810a524100a41815a16","SpanId":"c369520659eea86d","Properties":{"ObjectResultType":"ObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:00000004","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:10:42.4873031+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"ec57aabc740e7810a524100a41815a16","SpanId":"c369520659eea86d","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","ElapsedMilliseconds":29.1842,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CQ:00000004","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:10:42.4874886+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"ec57aabc740e7810a524100a41815a16","SpanId":"c369520659eea86d","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CQ:00000004","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:10:42.4876903+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"ec57aabc740e7810a524100a41815a16","SpanId":"c369520659eea86d","Properties":{"ElapsedMilliseconds":30.6385,"StatusCode":404,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"POST","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/login","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CQ:00000004","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:10:48.3916247+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"cb4f16f8667b95da297cdfbb54fb274a","SpanId":"19cbb424e9079417","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CQ:00000005","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:10:48.3919460+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"cb4f16f8667b95da297cdfbb54fb274a","SpanId":"19cbb424e9079417","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CQ:00000005","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:10:48.3922613+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"cb4f16f8667b95da297cdfbb54fb274a","SpanId":"19cbb424e9079417","Properties":{"ElapsedMilliseconds":0.6487,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CQ:00000005","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:10:48.3951135+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"12da04c0342550279364f3b60c6b93c6","SpanId":"65396fae31e86919","Properties":{"Protocol":"HTTP/1.1","Method":"POST","ContentType":"application/json","ContentLength":67,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CQ:00000006","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:10:48.3955529+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"12da04c0342550279364f3b60c6b93c6","SpanId":"65396fae31e86919","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CQ:00000006","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:10:48.3968350+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"12da04c0342550279364f3b60c6b93c6","SpanId":"65396fae31e86919","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CQ:00000006","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:10:48.3970718+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"12da04c0342550279364f3b60c6b93c6","SpanId":"65396fae31e86919","Properties":{"RouteData":"{action = \"Register\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MessagingApp.Models.User]] Register(MessagingApp.DTO.AuthDTO)","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:00000006","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:10:48.3975353+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"12da04c0342550279364f3b60c6b93c6","SpanId":"65396fae31e86919","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"asndnfaospdfmioasdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:00000006","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ","Scope":["Username:asndnfaospdfmioasdf"]}}
{"Timestamp":"2025-09-18T19:10:48.3976796+03:00","Level":"Information","MessageTemplate":"Initiated user registration by ","TraceId":"12da04c0342550279364f3b60c6b93c6","SpanId":"65396fae31e86919","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"asndnfaospdfmioasdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:00000006","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ","Scope":["Username:asndnfaospdfmioasdf"]}}
{"Timestamp":"2025-09-18T19:10:48.3978687+03:00","Level":"Information","MessageTemplate":"Adding user to DB","TraceId":"12da04c0342550279364f3b60c6b93c6","SpanId":"65396fae31e86919","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"asndnfaospdfmioasdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:00000006","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ","Scope":["Username:asndnfaospdfmioasdf"]}}
{"Timestamp":"2025-09-18T19:10:48.3980024+03:00","Level":"Information","MessageTemplate":"Creating new user","TraceId":"12da04c0342550279364f3b60c6b93c6","SpanId":"65396fae31e86919","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"asndnfaospdfmioasdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:00000006","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ","Scope":["Username:asndnfaospdfmioasdf"]}}
{"Timestamp":"2025-09-18T19:10:48.3981225+03:00","Level":"Information","MessageTemplate":"Composing new user object","TraceId":"12da04c0342550279364f3b60c6b93c6","SpanId":"65396fae31e86919","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"asndnfaospdfmioasdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:00000006","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ","Scope":["Username:asndnfaospdfmioasdf"]}}
{"Timestamp":"2025-09-18T19:10:48.3982501+03:00","Level":"Information","MessageTemplate":"Generating password hash","TraceId":"12da04c0342550279364f3b60c6b93c6","SpanId":"65396fae31e86919","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"asndnfaospdfmioasdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:00000006","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ","Scope":["Username:asndnfaospdfmioasdf"]}}
{"Timestamp":"2025-09-18T19:10:48.4653237+03:00","Level":"Information","MessageTemplate":"Saving new user...","TraceId":"12da04c0342550279364f3b60c6b93c6","SpanId":"65396fae31e86919","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"asndnfaospdfmioasdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:00000006","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ","Scope":["Username:asndnfaospdfmioasdf"]}}
{"Timestamp":"2025-09-18T19:10:48.4725995+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"12da04c0342550279364f3b60c6b93c6","SpanId":"65396fae31e86919","Properties":{"elapsed":"6","parameters":"@p0='?', @p1='?' (DbType = Int32), @p2='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"INSERT INTO \"Users\" (\"PasswordHash\", \"Role\", \"Username\")\nVALUES (@p0, @p1, @p2)\nRETURNING \"ID\";","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"asndnfaospdfmioasdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:00000006","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ","Scope":["Username:asndnfaospdfmioasdf"]}}
{"Timestamp":"2025-09-18T19:10:48.4731247+03:00","Level":"Information","MessageTemplate":"User successfully created, returning HTTP OK","TraceId":"12da04c0342550279364f3b60c6b93c6","SpanId":"65396fae31e86919","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"asndnfaospdfmioasdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:00000006","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ","Scope":["Username:asndnfaospdfmioasdf"]}}
{"Timestamp":"2025-09-18T19:10:48.4732973+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"12da04c0342550279364f3b60c6b93c6","SpanId":"65396fae31e86919","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:00000006","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:10:48.4734914+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"12da04c0342550279364f3b60c6b93c6","SpanId":"65396fae31e86919","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","ElapsedMilliseconds":76.2108,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CQ:00000006","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:10:48.4736697+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"12da04c0342550279364f3b60c6b93c6","SpanId":"65396fae31e86919","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CQ:00000006","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:10:48.4738525+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"12da04c0342550279364f3b60c6b93c6","SpanId":"65396fae31e86919","Properties":{"ElapsedMilliseconds":78.7436,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"POST","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CQ:00000006","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:11:22.0531827+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"d509faf8c88bb0a25458aa5d16251f48","SpanId":"97df3d65a672dc3f","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CQ:00000007","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:11:22.0539601+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"d509faf8c88bb0a25458aa5d16251f48","SpanId":"97df3d65a672dc3f","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CQ:00000007","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:11:22.0545039+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"d509faf8c88bb0a25458aa5d16251f48","SpanId":"97df3d65a672dc3f","Properties":{"ElapsedMilliseconds":1.3178,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CQ:00000007","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:11:22.0570537+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"3061c2624eb4af08e99980cfa4a7261d","SpanId":"4d909ee83410f123","Properties":{"Protocol":"HTTP/1.1","Method":"POST","ContentType":"application/json","ContentLength":53,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CQ:00000008","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:11:22.0573909+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"3061c2624eb4af08e99980cfa4a7261d","SpanId":"4d909ee83410f123","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CQ:00000008","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:11:22.0575575+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"3061c2624eb4af08e99980cfa4a7261d","SpanId":"4d909ee83410f123","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CQ:00000008","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:11:22.0577312+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"3061c2624eb4af08e99980cfa4a7261d","SpanId":"4d909ee83410f123","Properties":{"RouteData":"{action = \"Register\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MessagingApp.Models.User]] Register(MessagingApp.DTO.AuthDTO)","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:00000008","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:11:22.0581721+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"3061c2624eb4af08e99980cfa4a7261d","SpanId":"4d909ee83410f123","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"mckvmkmsdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:00000008","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ","Scope":["Username:mckvmkmsdf"]}}
{"Timestamp":"2025-09-18T19:11:22.0583625+03:00","Level":"Information","MessageTemplate":"Initiated user registration by ","TraceId":"3061c2624eb4af08e99980cfa4a7261d","SpanId":"4d909ee83410f123","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"mckvmkmsdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:00000008","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ","Scope":["Username:mckvmkmsdf"]}}
{"Timestamp":"2025-09-18T19:11:22.0584996+03:00","Level":"Information","MessageTemplate":"Adding user to DB","TraceId":"3061c2624eb4af08e99980cfa4a7261d","SpanId":"4d909ee83410f123","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"mckvmkmsdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:00000008","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ","Scope":["Username:mckvmkmsdf"]}}
{"Timestamp":"2025-09-18T19:11:22.0586346+03:00","Level":"Information","MessageTemplate":"Creating new user","TraceId":"3061c2624eb4af08e99980cfa4a7261d","SpanId":"4d909ee83410f123","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"mckvmkmsdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:00000008","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ","Scope":["Username:mckvmkmsdf"]}}
{"Timestamp":"2025-09-18T19:11:22.0587605+03:00","Level":"Information","MessageTemplate":"Composing new user object","TraceId":"3061c2624eb4af08e99980cfa4a7261d","SpanId":"4d909ee83410f123","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"mckvmkmsdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:00000008","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ","Scope":["Username:mckvmkmsdf"]}}
{"Timestamp":"2025-09-18T19:11:22.0588775+03:00","Level":"Information","MessageTemplate":"Generating password hash","TraceId":"3061c2624eb4af08e99980cfa4a7261d","SpanId":"4d909ee83410f123","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"mckvmkmsdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:00000008","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ","Scope":["Username:mckvmkmsdf"]}}
{"Timestamp":"2025-09-18T19:11:22.1236502+03:00","Level":"Information","MessageTemplate":"Saving new user...","TraceId":"3061c2624eb4af08e99980cfa4a7261d","SpanId":"4d909ee83410f123","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"mckvmkmsdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:00000008","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ","Scope":["Username:mckvmkmsdf"]}}
{"Timestamp":"2025-09-18T19:11:22.1506661+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3061c2624eb4af08e99980cfa4a7261d","SpanId":"4d909ee83410f123","Properties":{"elapsed":"3","parameters":"@p0='?', @p1='?' (DbType = Int32), @p2='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"INSERT INTO \"Users\" (\"PasswordHash\", \"Role\", \"Username\")\nVALUES (@p0, @p1, @p2)\nRETURNING \"ID\";","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"mckvmkmsdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:00000008","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ","Scope":["Username:mckvmkmsdf"]}}
{"Timestamp":"2025-09-18T19:11:22.4549241+03:00","Level":"Information","MessageTemplate":"User successfully created, returning HTTP OK","TraceId":"3061c2624eb4af08e99980cfa4a7261d","SpanId":"4d909ee83410f123","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"mckvmkmsdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:00000008","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ","Scope":["Username:mckvmkmsdf"]}}
{"Timestamp":"2025-09-18T19:11:22.4552560+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"3061c2624eb4af08e99980cfa4a7261d","SpanId":"4d909ee83410f123","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:00000008","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:11:22.4555638+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"3061c2624eb4af08e99980cfa4a7261d","SpanId":"4d909ee83410f123","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","ElapsedMilliseconds":397.6191,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CQ:00000008","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:11:22.4558661+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"3061c2624eb4af08e99980cfa4a7261d","SpanId":"4d909ee83410f123","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CQ:00000008","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:11:22.4563337+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"3061c2624eb4af08e99980cfa4a7261d","SpanId":"4d909ee83410f123","Properties":{"ElapsedMilliseconds":399.2545,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"POST","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CQ:00000008","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:13:12.4993713+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"0be3cac17b4e815aaa6bad4b3f6004ec","SpanId":"b3929d7c15484eb7","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CQ:00000009","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:13:12.8090595+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"0be3cac17b4e815aaa6bad4b3f6004ec","SpanId":"b3929d7c15484eb7","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CQ:00000009","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:13:12.8175211+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"0be3cac17b4e815aaa6bad4b3f6004ec","SpanId":"b3929d7c15484eb7","Properties":{"ElapsedMilliseconds":318.1679,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CQ:00000009","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:13:12.8203698+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"fed2ea265603b9e5fdbef11f71bcb9ba","SpanId":"98e88f9d4ad6ecae","Properties":{"Protocol":"HTTP/1.1","Method":"POST","ContentType":"application/json","ContentLength":56,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CQ:0000000A","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:13:12.8206457+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"fed2ea265603b9e5fdbef11f71bcb9ba","SpanId":"98e88f9d4ad6ecae","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CQ:0000000A","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:13:12.8218474+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"fed2ea265603b9e5fdbef11f71bcb9ba","SpanId":"98e88f9d4ad6ecae","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CQ:0000000A","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:13:12.8397638+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"fed2ea265603b9e5fdbef11f71bcb9ba","SpanId":"98e88f9d4ad6ecae","Properties":{"RouteData":"{action = \"Register\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MessagingApp.Models.User]] Register(MessagingApp.DTO.AuthDTO)","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:0000000A","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:13:12.8450166+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"fed2ea265603b9e5fdbef11f71bcb9ba","SpanId":"98e88f9d4ad6ecae","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"masdf;asdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:0000000A","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ","Scope":["Username:masdf;asdf"]}}
{"Timestamp":"2025-09-18T19:13:12.8452982+03:00","Level":"Information","MessageTemplate":"Initiated user registration by ","TraceId":"fed2ea265603b9e5fdbef11f71bcb9ba","SpanId":"98e88f9d4ad6ecae","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"masdf;asdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:0000000A","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ","Scope":["Username:masdf;asdf"]}}
{"Timestamp":"2025-09-18T19:13:12.8455520+03:00","Level":"Information","MessageTemplate":"Adding user to DB","TraceId":"fed2ea265603b9e5fdbef11f71bcb9ba","SpanId":"98e88f9d4ad6ecae","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"masdf;asdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:0000000A","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ","Scope":["Username:masdf;asdf"]}}
{"Timestamp":"2025-09-18T19:13:12.8457749+03:00","Level":"Information","MessageTemplate":"Creating new user","TraceId":"fed2ea265603b9e5fdbef11f71bcb9ba","SpanId":"98e88f9d4ad6ecae","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"masdf;asdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:0000000A","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ","Scope":["Username:masdf;asdf"]}}
{"Timestamp":"2025-09-18T19:13:12.8475024+03:00","Level":"Information","MessageTemplate":"Composing new user object","TraceId":"fed2ea265603b9e5fdbef11f71bcb9ba","SpanId":"98e88f9d4ad6ecae","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"masdf;asdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:0000000A","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ","Scope":["Username:masdf;asdf"]}}
{"Timestamp":"2025-09-18T19:13:12.8476268+03:00","Level":"Information","MessageTemplate":"Generating password hash","TraceId":"fed2ea265603b9e5fdbef11f71bcb9ba","SpanId":"98e88f9d4ad6ecae","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"masdf;asdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:0000000A","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ","Scope":["Username:masdf;asdf"]}}
{"Timestamp":"2025-09-18T19:13:12.9199020+03:00","Level":"Information","MessageTemplate":"Saving new user...","TraceId":"fed2ea265603b9e5fdbef11f71bcb9ba","SpanId":"98e88f9d4ad6ecae","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"masdf;asdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:0000000A","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ","Scope":["Username:masdf;asdf"]}}
{"Timestamp":"2025-09-18T19:13:12.9454111+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"fed2ea265603b9e5fdbef11f71bcb9ba","SpanId":"98e88f9d4ad6ecae","Properties":{"elapsed":"19","parameters":"@p0='?', @p1='?' (DbType = Int32), @p2='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"INSERT INTO \"Users\" (\"PasswordHash\", \"Role\", \"Username\")\nVALUES (@p0, @p1, @p2)\nRETURNING \"ID\";","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"masdf;asdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:0000000A","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ","Scope":["Username:masdf;asdf"]}}
{"Timestamp":"2025-09-18T19:13:12.9478976+03:00","Level":"Information","MessageTemplate":"User successfully created, returning HTTP OK","TraceId":"fed2ea265603b9e5fdbef11f71bcb9ba","SpanId":"98e88f9d4ad6ecae","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"masdf;asdf","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:0000000A","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ","Scope":["Username:masdf;asdf"]}}
{"Timestamp":"2025-09-18T19:13:12.9484784+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"fed2ea265603b9e5fdbef11f71bcb9ba","SpanId":"98e88f9d4ad6ecae","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"7bf1b95d-56aa-4cfc-b644-0501242d1ec2","ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","RequestId":"0HNFMP8PQI2CQ:0000000A","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:13:12.9597123+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"fed2ea265603b9e5fdbef11f71bcb9ba","SpanId":"98e88f9d4ad6ecae","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","ElapsedMilliseconds":119.2696,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CQ:0000000A","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:13:12.9601651+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"fed2ea265603b9e5fdbef11f71bcb9ba","SpanId":"98e88f9d4ad6ecae","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Register (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CQ:0000000A","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:13:12.9607279+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"fed2ea265603b9e5fdbef11f71bcb9ba","SpanId":"98e88f9d4ad6ecae","Properties":{"ElapsedMilliseconds":140.3704,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"POST","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/register","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CQ:0000000A","RequestPath":"/api/auth/register","ConnectionId":"0HNFMP8PQI2CQ"}}
{"Timestamp":"2025-09-18T19:35:03.7003723+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"d7e5f0869784a27ecb431cf6e0314833","SpanId":"aab4933dde3158a8","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/login","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CR:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:35:03.8202570+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"d7e5f0869784a27ecb431cf6e0314833","SpanId":"aab4933dde3158a8","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CR:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:35:03.8208525+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"d7e5f0869784a27ecb431cf6e0314833","SpanId":"aab4933dde3158a8","Properties":{"ElapsedMilliseconds":120.5288,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/login","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CR:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:35:03.8280119+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"6dfbb8b75346a8a390015ee1e810bd05","SpanId":"c883f1434a8a95c1","Properties":{"Protocol":"HTTP/1.1","Method":"POST","ContentType":"application/json","ContentLength":49,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/login","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CR:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:35:03.8284297+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"6dfbb8b75346a8a390015ee1e810bd05","SpanId":"c883f1434a8a95c1","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CR:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:35:03.8300526+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"6dfbb8b75346a8a390015ee1e810bd05","SpanId":"c883f1434a8a95c1","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CR:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:35:03.8376706+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"6dfbb8b75346a8a390015ee1e810bd05","SpanId":"c883f1434a8a95c1","Properties":{"RouteData":"{action = \"Login\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.String]] Login(MessagingApp.DTO.AuthDTO)","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:35:03.8438418+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"6dfbb8b75346a8a390015ee1e810bd05","SpanId":"c883f1434a8a95c1","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CR","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:35:03.8442276+03:00","Level":"Information","MessageTemplate":"Initiated login","TraceId":"6dfbb8b75346a8a390015ee1e810bd05","SpanId":"c883f1434a8a95c1","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CR","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:35:03.8445492+03:00","Level":"Information","MessageTemplate":"Authenticating user","TraceId":"6dfbb8b75346a8a390015ee1e810bd05","SpanId":"c883f1434a8a95c1","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CR","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:35:03.8960894+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"6dfbb8b75346a8a390015ee1e810bd05","SpanId":"c883f1434a8a95c1","Properties":{"elapsed":"4","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CR","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:35:03.9815985+03:00","Level":"Information","MessageTemplate":"Successfully authorized","TraceId":"6dfbb8b75346a8a390015ee1e810bd05","SpanId":"c883f1434a8a95c1","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CR","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:35:03.9820228+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"6dfbb8b75346a8a390015ee1e810bd05","SpanId":"c883f1434a8a95c1","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CR","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:35:03.9832354+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"6dfbb8b75346a8a390015ee1e810bd05","SpanId":"c883f1434a8a95c1","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CR","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:35:03.9843948+03:00","Level":"Information","MessageTemplate":"Generating token pair","TraceId":"6dfbb8b75346a8a390015ee1e810bd05","SpanId":"c883f1434a8a95c1","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CR","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:35:03.9847262+03:00","Level":"Information","MessageTemplate":"Obtaining private signing key","TraceId":"6dfbb8b75346a8a390015ee1e810bd05","SpanId":"c883f1434a8a95c1","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CR","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:35:03.9848949+03:00","Level":"Information","MessageTemplate":"Instantiating token descriptor","TraceId":"6dfbb8b75346a8a390015ee1e810bd05","SpanId":"c883f1434a8a95c1","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CR","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:35:03.9850683+03:00","Level":"Information","MessageTemplate":"Generating claims for 1234567890","TraceId":"6dfbb8b75346a8a390015ee1e810bd05","SpanId":"c883f1434a8a95c1","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CR","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:35:03.9861477+03:00","Level":"Information","MessageTemplate":"Creating access token","TraceId":"6dfbb8b75346a8a390015ee1e810bd05","SpanId":"c883f1434a8a95c1","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CR","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:35:04.0016420+03:00","Level":"Information","MessageTemplate":"Creating refresh token","TraceId":"6dfbb8b75346a8a390015ee1e810bd05","SpanId":"c883f1434a8a95c1","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CR","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:35:04.0057094+03:00","Level":"Information","MessageTemplate":"Obtaining all refresh tokens owned by the user","TraceId":"6dfbb8b75346a8a390015ee1e810bd05","SpanId":"c883f1434a8a95c1","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CR","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:35:04.0103047+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"6dfbb8b75346a8a390015ee1e810bd05","SpanId":"c883f1434a8a95c1","Properties":{"elapsed":"1","parameters":"@__user_ID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"ExpiresAt\", r.\"IssuedAt\", r.\"Token\", r.\"UserID\"\nFROM \"RefreshTokens\" AS r\nWHERE r.\"UserID\" = @__user_ID_0","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CR","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:35:04.0138675+03:00","Level":"Information","MessageTemplate":"Saving tokens, sending response.","TraceId":"6dfbb8b75346a8a390015ee1e810bd05","SpanId":"c883f1434a8a95c1","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CR","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:35:04.0197616+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"6dfbb8b75346a8a390015ee1e810bd05","SpanId":"c883f1434a8a95c1","Properties":{"elapsed":"3","parameters":"@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"INSERT INTO \"RefreshTokens\" (\"ExpiresAt\", \"IssuedAt\", \"Token\", \"UserID\")\nVALUES (@p0, @p1, @p2, @p3)\nRETURNING \"ID\";","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CR","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:35:04.0207155+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"6dfbb8b75346a8a390015ee1e810bd05","SpanId":"c883f1434a8a95c1","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"6741b99a-9273-4cd3-a255-58a889351602","ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:35:04.0214208+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"6dfbb8b75346a8a390015ee1e810bd05","SpanId":"c883f1434a8a95c1","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","ElapsedMilliseconds":183.4471,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CR:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:35:04.0216988+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"6dfbb8b75346a8a390015ee1e810bd05","SpanId":"c883f1434a8a95c1","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.Login (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CR:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:35:04.0219529+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"6dfbb8b75346a8a390015ee1e810bd05","SpanId":"c883f1434a8a95c1","Properties":{"ElapsedMilliseconds":193.9537,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"POST","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth/login","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CR:00000002","RequestPath":"/api/auth/login","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:35:04.0301427+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"22360c74f9d8f8b92b2613210628c8cc","SpanId":"b63740e68dec9a22","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CR:00000003","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:35:04.0391184+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"22360c74f9d8f8b92b2613210628c8cc","SpanId":"b63740e68dec9a22","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CR:00000003","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:35:04.0398655+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"22360c74f9d8f8b92b2613210628c8cc","SpanId":"b63740e68dec9a22","Properties":{"ElapsedMilliseconds":9.719,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CR:00000003","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:35:04.0527631+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"9d222045e3c6d75746e7aea00008e56f","SpanId":"4b0cb245a76b8205","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CR:00000004","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:35:04.0531009+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"9d222045e3c6d75746e7aea00008e56f","SpanId":"4b0cb245a76b8205","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CR:00000004","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:35:04.1232233+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"9d222045e3c6d75746e7aea00008e56f","SpanId":"4b0cb245a76b8205","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CR:00000004","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:35:04.1254612+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"9d222045e3c6d75746e7aea00008e56f","SpanId":"4b0cb245a76b8205","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.AuthTest (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CR:00000004","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:35:04.1257252+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"9d222045e3c6d75746e7aea00008e56f","SpanId":"4b0cb245a76b8205","Properties":{"RouteData":"{action = \"AuthTest\", controller = \"Auth\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[MessagingApp.DTO.AuthDTO]] AuthTest()","Controller":"MessagingApp.Controllers.AuthController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"37384c53-ad91-4e52-9ac7-73a6d3f796c5","ActionName":"MessagingApp.Controllers.AuthController.AuthTest (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000004","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:35:04.1260594+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"9d222045e3c6d75746e7aea00008e56f","SpanId":"4b0cb245a76b8205","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"37384c53-ad91-4e52-9ac7-73a6d3f796c5","ActionName":"MessagingApp.Controllers.AuthController.AuthTest (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000004","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:35:04.1273539+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"9d222045e3c6d75746e7aea00008e56f","SpanId":"4b0cb245a76b8205","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"37384c53-ad91-4e52-9ac7-73a6d3f796c5","ActionName":"MessagingApp.Controllers.AuthController.AuthTest (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000004","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:35:04.1282854+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"9d222045e3c6d75746e7aea00008e56f","SpanId":"4b0cb245a76b8205","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"37384c53-ad91-4e52-9ac7-73a6d3f796c5","ActionName":"MessagingApp.Controllers.AuthController.AuthTest (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000004","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:35:04.1287908+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"9d222045e3c6d75746e7aea00008e56f","SpanId":"4b0cb245a76b8205","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"37384c53-ad91-4e52-9ac7-73a6d3f796c5","ActionName":"MessagingApp.Controllers.AuthController.AuthTest (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000004","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CR","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:35:04.1289145+03:00","Level":"Information","MessageTemplate":"Initiated test auth","TraceId":"9d222045e3c6d75746e7aea00008e56f","SpanId":"4b0cb245a76b8205","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"37384c53-ad91-4e52-9ac7-73a6d3f796c5","ActionName":"MessagingApp.Controllers.AuthController.AuthTest (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000004","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CR","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:35:04.1290281+03:00","Level":"Information","MessageTemplate":"Successfully authorized","TraceId":"9d222045e3c6d75746e7aea00008e56f","SpanId":"4b0cb245a76b8205","Properties":{"SourceContext":"MessagingApp.Controllers.AuthController","username":"1234567890","ActionId":"37384c53-ad91-4e52-9ac7-73a6d3f796c5","ActionName":"MessagingApp.Controllers.AuthController.AuthTest (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000004","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CR","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:35:04.1296034+03:00","Level":"Information","MessageTemplate":"Executing StatusCodeResult, setting HTTP status code {StatusCode}","TraceId":"9d222045e3c6d75746e7aea00008e56f","SpanId":"4b0cb245a76b8205","Properties":{"StatusCode":200,"EventId":{"Id":1,"Name":"HttpStatusCodeResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.StatusCodeResult","ActionId":"37384c53-ad91-4e52-9ac7-73a6d3f796c5","ActionName":"MessagingApp.Controllers.AuthController.AuthTest (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000004","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:35:04.1297454+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"9d222045e3c6d75746e7aea00008e56f","SpanId":"4b0cb245a76b8205","Properties":{"ActionName":"MessagingApp.Controllers.AuthController.AuthTest (MessagingApp)","ElapsedMilliseconds":3.8034,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CR:00000004","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:35:04.1299112+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"9d222045e3c6d75746e7aea00008e56f","SpanId":"4b0cb245a76b8205","Properties":{"EndpointName":"MessagingApp.Controllers.AuthController.AuthTest (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CR:00000004","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:35:04.1300783+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"9d222045e3c6d75746e7aea00008e56f","SpanId":"4b0cb245a76b8205","Properties":{"ElapsedMilliseconds":77.3213,"StatusCode":200,"ContentType":null,"ContentLength":0,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/auth","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CR:00000004","RequestPath":"/api/auth","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:35:04.1442880+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"61f885c406a2f30af38ae3b34933c29f","SpanId":"1cf50bddaa352d2f","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/myChats","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CR:00000005","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:35:04.1448272+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"61f885c406a2f30af38ae3b34933c29f","SpanId":"1cf50bddaa352d2f","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CR:00000005","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:35:04.1450273+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"61f885c406a2f30af38ae3b34933c29f","SpanId":"1cf50bddaa352d2f","Properties":{"ElapsedMilliseconds":0.7569,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/myChats","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CR:00000005","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:35:04.1506981+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"c954a695277ffe509b1f92c3d947d660","SpanId":"5c2d58d514992403","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/myChats","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CR:00000006","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:35:04.1512254+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"c954a695277ffe509b1f92c3d947d660","SpanId":"5c2d58d514992403","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CR:00000006","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:35:04.1530603+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c954a695277ffe509b1f92c3d947d660","SpanId":"5c2d58d514992403","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CR:00000006","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:35:04.1536357+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"c954a695277ffe509b1f92c3d947d660","SpanId":"5c2d58d514992403","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.GetUserChatsAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CR:00000006","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:35:04.1538990+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"c954a695277ffe509b1f92c3d947d660","SpanId":"5c2d58d514992403","Properties":{"RouteData":"{action = \"GetUserChats\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.Dictionary`2[System.String,System.Int64]]] GetUserChatsAsync()","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"8c1175a5-2cba-4c13-80b3-ce99b434026c","ActionName":"MessagingApp.Controllers.ChatController.GetUserChatsAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000006","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:35:04.1548719+03:00","Level":"Information","MessageTemplate":"Initiated chats retrieval by 192.168.31.243:6865","TraceId":"c954a695277ffe509b1f92c3d947d660","SpanId":"5c2d58d514992403","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"8c1175a5-2cba-4c13-80b3-ce99b434026c","ActionName":"MessagingApp.Controllers.ChatController.GetUserChatsAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000006","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:35:04.1550827+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"c954a695277ffe509b1f92c3d947d660","SpanId":"5c2d58d514992403","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"8c1175a5-2cba-4c13-80b3-ce99b434026c","ActionName":"MessagingApp.Controllers.ChatController.GetUserChatsAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000006","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:35:04.1552572+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"c954a695277ffe509b1f92c3d947d660","SpanId":"5c2d58d514992403","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"8c1175a5-2cba-4c13-80b3-ce99b434026c","ActionName":"MessagingApp.Controllers.ChatController.GetUserChatsAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000006","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:35:04.1567074+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c954a695277ffe509b1f92c3d947d660","SpanId":"5c2d58d514992403","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"8c1175a5-2cba-4c13-80b3-ce99b434026c","ActionName":"MessagingApp.Controllers.ChatController.GetUserChatsAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000006","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:35:04.1574370+03:00","Level":"Information","MessageTemplate":"Getting available chats of user","TraceId":"c954a695277ffe509b1f92c3d947d660","SpanId":"5c2d58d514992403","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","ActionId":"8c1175a5-2cba-4c13-80b3-ce99b434026c","ActionName":"MessagingApp.Controllers.ChatController.GetUserChatsAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000006","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:35:04.1609978+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c954a695277ffe509b1f92c3d947d660","SpanId":"5c2d58d514992403","Properties":{"elapsed":"2","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u1.\"ID\", u1.\"PasswordHash\", u1.\"Role\", u1.\"Username\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"Name\", s.\"OwnerID\"\nFROM (\n    SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\n    FROM \"Users\" AS u\n    WHERE u.\"ID\" = @__UserID_0\n    LIMIT 1\n) AS u1\nLEFT JOIN (\n    SELECT u0.\"ChatID\", u0.\"UserID\", c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"UserChatJoinTable\" AS u0\n    INNER JOIN \"Chats\" AS c ON u0.\"ChatID\" = c.\"ID\"\n) AS s ON u1.\"ID\" = s.\"UserID\"\nORDER BY u1.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"8c1175a5-2cba-4c13-80b3-ce99b434026c","ActionName":"MessagingApp.Controllers.ChatController.GetUserChatsAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000006","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:35:04.1622136+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"c954a695277ffe509b1f92c3d947d660","SpanId":"5c2d58d514992403","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.UserChatsDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"8c1175a5-2cba-4c13-80b3-ce99b434026c","ActionName":"MessagingApp.Controllers.ChatController.GetUserChatsAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000006","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:35:04.1628236+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"c954a695277ffe509b1f92c3d947d660","SpanId":"5c2d58d514992403","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.GetUserChatsAsync (MessagingApp)","ElapsedMilliseconds":8.7076,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CR:00000006","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:35:04.1630831+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"c954a695277ffe509b1f92c3d947d660","SpanId":"5c2d58d514992403","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.GetUserChatsAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CR:00000006","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:35:04.1633735+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"c954a695277ffe509b1f92c3d947d660","SpanId":"5c2d58d514992403","Properties":{"ElapsedMilliseconds":12.6708,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/myChats","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CR:00000006","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:00.1952670+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"7335edac3f4620369cf51c35ef14da07","SpanId":"a0262ecd2694c198","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/newChat","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CR:00000007","RequestPath":"/api/chats/newChat","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:00.5521340+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"7335edac3f4620369cf51c35ef14da07","SpanId":"a0262ecd2694c198","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CR:00000007","RequestPath":"/api/chats/newChat","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:00.5527817+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"7335edac3f4620369cf51c35ef14da07","SpanId":"a0262ecd2694c198","Properties":{"ElapsedMilliseconds":357.5372,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/newChat","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CR:00000007","RequestPath":"/api/chats/newChat","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:00.5555220+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"b7ab185c2be0de5b3c0b962de0b3aca2","SpanId":"81c0f8cce3c378d7","Properties":{"Protocol":"HTTP/1.1","Method":"POST","ContentType":"application/json","ContentLength":27,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/newChat","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CR:00000008","RequestPath":"/api/chats/newChat","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:00.5659167+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"b7ab185c2be0de5b3c0b962de0b3aca2","SpanId":"81c0f8cce3c378d7","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CR:00000008","RequestPath":"/api/chats/newChat","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:00.6231655+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"b7ab185c2be0de5b3c0b962de0b3aca2","SpanId":"81c0f8cce3c378d7","Properties":{"elapsed":"26","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CR:00000008","RequestPath":"/api/chats/newChat","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:00.6401219+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"b7ab185c2be0de5b3c0b962de0b3aca2","SpanId":"81c0f8cce3c378d7","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.NewChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CR:00000008","RequestPath":"/api/chats/newChat","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:00.6881611+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"b7ab185c2be0de5b3c0b962de0b3aca2","SpanId":"81c0f8cce3c378d7","Properties":{"RouteData":"{action = \"NewChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] NewChatAsync(MessagingApp.DTO.ChatDescDTO)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"cd69ca56-568e-4ca7-8d8a-23e480df9d2e","ActionName":"MessagingApp.Controllers.ChatController.NewChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000008","RequestPath":"/api/chats/newChat","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:00.7025195+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"b7ab185c2be0de5b3c0b962de0b3aca2","SpanId":"81c0f8cce3c378d7","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"cd69ca56-568e-4ca7-8d8a-23e480df9d2e","ActionName":"MessagingApp.Controllers.ChatController.NewChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000008","RequestPath":"/api/chats/newChat","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:00.7027946+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"b7ab185c2be0de5b3c0b962de0b3aca2","SpanId":"81c0f8cce3c378d7","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"cd69ca56-568e-4ca7-8d8a-23e480df9d2e","ActionName":"MessagingApp.Controllers.ChatController.NewChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000008","RequestPath":"/api/chats/newChat","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:00.7038497+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"b7ab185c2be0de5b3c0b962de0b3aca2","SpanId":"81c0f8cce3c378d7","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"cd69ca56-568e-4ca7-8d8a-23e480df9d2e","ActionName":"MessagingApp.Controllers.ChatController.NewChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000008","RequestPath":"/api/chats/newChat","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:00.7044989+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"b7ab185c2be0de5b3c0b962de0b3aca2","SpanId":"81c0f8cce3c378d7","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"cd69ca56-568e-4ca7-8d8a-23e480df9d2e","ActionName":"MessagingApp.Controllers.ChatController.NewChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000008","RequestPath":"/api/chats/newChat","ConnectionId":"0HNFMP8PQI2CR","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:00.7047690+03:00","Level":"Information","MessageTemplate":"Attempting to create a chat named \"121\"","TraceId":"b7ab185c2be0de5b3c0b962de0b3aca2","SpanId":"81c0f8cce3c378d7","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"cd69ca56-568e-4ca7-8d8a-23e480df9d2e","ActionName":"MessagingApp.Controllers.ChatController.NewChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000008","RequestPath":"/api/chats/newChat","ConnectionId":"0HNFMP8PQI2CR","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:00.7079127+03:00","Level":"Information","MessageTemplate":"Creating new chat","TraceId":"b7ab185c2be0de5b3c0b962de0b3aca2","SpanId":"81c0f8cce3c378d7","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"cd69ca56-568e-4ca7-8d8a-23e480df9d2e","ActionName":"MessagingApp.Controllers.ChatController.NewChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000008","RequestPath":"/api/chats/newChat","ConnectionId":"0HNFMP8PQI2CR","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:00.7623739+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"b7ab185c2be0de5b3c0b962de0b3aca2","SpanId":"81c0f8cce3c378d7","Properties":{"elapsed":"1","parameters":"@__chatName_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\nFROM \"Chats\" AS c\nWHERE c.\"Name\" = @__chatName_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"cd69ca56-568e-4ca7-8d8a-23e480df9d2e","ActionName":"MessagingApp.Controllers.ChatController.NewChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000008","RequestPath":"/api/chats/newChat","ConnectionId":"0HNFMP8PQI2CR","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:00.7634041+03:00","Level":"Information","MessageTemplate":"No chat with the same name, proceeding...","TraceId":"b7ab185c2be0de5b3c0b962de0b3aca2","SpanId":"81c0f8cce3c378d7","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"cd69ca56-568e-4ca7-8d8a-23e480df9d2e","ActionName":"MessagingApp.Controllers.ChatController.NewChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000008","RequestPath":"/api/chats/newChat","ConnectionId":"0HNFMP8PQI2CR","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:00.7640146+03:00","Level":"Information","MessageTemplate":"Adding owner of the chat","TraceId":"b7ab185c2be0de5b3c0b962de0b3aca2","SpanId":"81c0f8cce3c378d7","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"cd69ca56-568e-4ca7-8d8a-23e480df9d2e","ActionName":"MessagingApp.Controllers.ChatController.NewChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000008","RequestPath":"/api/chats/newChat","ConnectionId":"0HNFMP8PQI2CR","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:00.7642203+03:00","Level":"Information","MessageTemplate":"Persisting changes","TraceId":"b7ab185c2be0de5b3c0b962de0b3aca2","SpanId":"81c0f8cce3c378d7","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"cd69ca56-568e-4ca7-8d8a-23e480df9d2e","ActionName":"MessagingApp.Controllers.ChatController.NewChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000008","RequestPath":"/api/chats/newChat","ConnectionId":"0HNFMP8PQI2CR","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:00.8111807+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"b7ab185c2be0de5b3c0b962de0b3aca2","SpanId":"81c0f8cce3c378d7","Properties":{"elapsed":"1","parameters":"@p0='?', @p1='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"INSERT INTO \"Chats\" (\"Name\", \"OwnerID\")\nVALUES (@p0, @p1)\nRETURNING \"ID\";","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"cd69ca56-568e-4ca7-8d8a-23e480df9d2e","ActionName":"MessagingApp.Controllers.ChatController.NewChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000008","RequestPath":"/api/chats/newChat","ConnectionId":"0HNFMP8PQI2CR","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:00.8280546+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"b7ab185c2be0de5b3c0b962de0b3aca2","SpanId":"81c0f8cce3c378d7","Properties":{"elapsed":"1","parameters":"@p2='?' (DbType = Int64), @p3='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"INSERT INTO \"UserChatJoinTable\" (\"ChatID\", \"UserID\")\nVALUES (@p2, @p3);","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"cd69ca56-568e-4ca7-8d8a-23e480df9d2e","ActionName":"MessagingApp.Controllers.ChatController.NewChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000008","RequestPath":"/api/chats/newChat","ConnectionId":"0HNFMP8PQI2CR","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:00.8305378+03:00","Level":"Information","MessageTemplate":"Successfully created chat \"121\"","TraceId":"b7ab185c2be0de5b3c0b962de0b3aca2","SpanId":"81c0f8cce3c378d7","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"cd69ca56-568e-4ca7-8d8a-23e480df9d2e","ActionName":"MessagingApp.Controllers.ChatController.NewChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000008","RequestPath":"/api/chats/newChat","ConnectionId":"0HNFMP8PQI2CR","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:00.8314097+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"b7ab185c2be0de5b3c0b962de0b3aca2","SpanId":"81c0f8cce3c378d7","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"cd69ca56-568e-4ca7-8d8a-23e480df9d2e","ActionName":"MessagingApp.Controllers.ChatController.NewChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CR:00000008","RequestPath":"/api/chats/newChat","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:00.8316500+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"b7ab185c2be0de5b3c0b962de0b3aca2","SpanId":"81c0f8cce3c378d7","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.NewChatAsync (MessagingApp)","ElapsedMilliseconds":143.1403,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CR:00000008","RequestPath":"/api/chats/newChat","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:00.8318206+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"b7ab185c2be0de5b3c0b962de0b3aca2","SpanId":"81c0f8cce3c378d7","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.NewChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CR:00000008","RequestPath":"/api/chats/newChat","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:00.8321078+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"b7ab185c2be0de5b3c0b962de0b3aca2","SpanId":"81c0f8cce3c378d7","Properties":{"ElapsedMilliseconds":276.5812,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"POST","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/newChat","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CR:00000008","RequestPath":"/api/chats/newChat","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:00.8361028+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"0b8092511471414f337e3f000a8fb68a","SpanId":"2f051262fa76ddeb","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/myChats","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CR:00000009","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:00.8364471+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"0b8092511471414f337e3f000a8fb68a","SpanId":"2f051262fa76ddeb","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CR:00000009","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:00.8366369+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"0b8092511471414f337e3f000a8fb68a","SpanId":"2f051262fa76ddeb","Properties":{"ElapsedMilliseconds":0.5201,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/myChats","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CR:00000009","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:00.8393938+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"c4f9a79fca6e8217a0d0d2fb8fa60c4a","SpanId":"07dd7f6a7f8d0628","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/myChats","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CR:0000000A","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:00.8397396+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"c4f9a79fca6e8217a0d0d2fb8fa60c4a","SpanId":"07dd7f6a7f8d0628","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CR:0000000A","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:00.8413880+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c4f9a79fca6e8217a0d0d2fb8fa60c4a","SpanId":"07dd7f6a7f8d0628","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CR:0000000A","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:00.8418283+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"c4f9a79fca6e8217a0d0d2fb8fa60c4a","SpanId":"07dd7f6a7f8d0628","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.GetUserChatsAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CR:0000000A","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:00.8419995+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"c4f9a79fca6e8217a0d0d2fb8fa60c4a","SpanId":"07dd7f6a7f8d0628","Properties":{"RouteData":"{action = \"GetUserChats\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.Dictionary`2[System.String,System.Int64]]] GetUserChatsAsync()","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"8c1175a5-2cba-4c13-80b3-ce99b434026c","ActionName":"MessagingApp.Controllers.ChatController.GetUserChatsAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CR:0000000A","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:00.8422335+03:00","Level":"Information","MessageTemplate":"Initiated chats retrieval by 192.168.31.243:6865","TraceId":"c4f9a79fca6e8217a0d0d2fb8fa60c4a","SpanId":"07dd7f6a7f8d0628","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"8c1175a5-2cba-4c13-80b3-ce99b434026c","ActionName":"MessagingApp.Controllers.ChatController.GetUserChatsAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CR:0000000A","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:00.8423418+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"c4f9a79fca6e8217a0d0d2fb8fa60c4a","SpanId":"07dd7f6a7f8d0628","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"8c1175a5-2cba-4c13-80b3-ce99b434026c","ActionName":"MessagingApp.Controllers.ChatController.GetUserChatsAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CR:0000000A","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:00.8424645+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"c4f9a79fca6e8217a0d0d2fb8fa60c4a","SpanId":"07dd7f6a7f8d0628","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"8c1175a5-2cba-4c13-80b3-ce99b434026c","ActionName":"MessagingApp.Controllers.ChatController.GetUserChatsAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CR:0000000A","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:00.8432223+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c4f9a79fca6e8217a0d0d2fb8fa60c4a","SpanId":"07dd7f6a7f8d0628","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"8c1175a5-2cba-4c13-80b3-ce99b434026c","ActionName":"MessagingApp.Controllers.ChatController.GetUserChatsAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CR:0000000A","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:00.8436140+03:00","Level":"Information","MessageTemplate":"Getting available chats of user","TraceId":"c4f9a79fca6e8217a0d0d2fb8fa60c4a","SpanId":"07dd7f6a7f8d0628","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","ActionId":"8c1175a5-2cba-4c13-80b3-ce99b434026c","ActionName":"MessagingApp.Controllers.ChatController.GetUserChatsAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CR:0000000A","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:00.8446424+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c4f9a79fca6e8217a0d0d2fb8fa60c4a","SpanId":"07dd7f6a7f8d0628","Properties":{"elapsed":"1","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u1.\"ID\", u1.\"PasswordHash\", u1.\"Role\", u1.\"Username\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"Name\", s.\"OwnerID\"\nFROM (\n    SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\n    FROM \"Users\" AS u\n    WHERE u.\"ID\" = @__UserID_0\n    LIMIT 1\n) AS u1\nLEFT JOIN (\n    SELECT u0.\"ChatID\", u0.\"UserID\", c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"UserChatJoinTable\" AS u0\n    INNER JOIN \"Chats\" AS c ON u0.\"ChatID\" = c.\"ID\"\n) AS s ON u1.\"ID\" = s.\"UserID\"\nORDER BY u1.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"8c1175a5-2cba-4c13-80b3-ce99b434026c","ActionName":"MessagingApp.Controllers.ChatController.GetUserChatsAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CR:0000000A","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:00.9017953+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"c4f9a79fca6e8217a0d0d2fb8fa60c4a","SpanId":"07dd7f6a7f8d0628","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.UserChatsDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"8c1175a5-2cba-4c13-80b3-ce99b434026c","ActionName":"MessagingApp.Controllers.ChatController.GetUserChatsAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CR:0000000A","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:00.9041353+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"c4f9a79fca6e8217a0d0d2fb8fa60c4a","SpanId":"07dd7f6a7f8d0628","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.GetUserChatsAsync (MessagingApp)","ElapsedMilliseconds":61.9556,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CR:0000000A","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:00.9043511+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"c4f9a79fca6e8217a0d0d2fb8fa60c4a","SpanId":"07dd7f6a7f8d0628","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.GetUserChatsAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CR:0000000A","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:00.9045783+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"c4f9a79fca6e8217a0d0d2fb8fa60c4a","SpanId":"07dd7f6a7f8d0628","Properties":{"ElapsedMilliseconds":65.1855,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/myChats","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CR:0000000A","RequestPath":"/api/chats/myChats","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:02.0146848+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"ab13652ce82c2e82192e4faaf4be420c","SpanId":"a86bb03bed9dca77","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/memberList","QueryString":"?chatID=1","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CR:0000000B","RequestPath":"/api/chats/memberList","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:02.0150231+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"ab13652ce82c2e82192e4faaf4be420c","SpanId":"a86bb03bed9dca77","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CR:0000000B","RequestPath":"/api/chats/memberList","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:02.0155623+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"ab13652ce82c2e82192e4faaf4be420c","SpanId":"a86bb03bed9dca77","Properties":{"ElapsedMilliseconds":0.8685,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/memberList","QueryString":"?chatID=1","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CR:0000000B","RequestPath":"/api/chats/memberList","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:02.0183024+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"2f5e40490e64051ce8cb38dc47adad72","SpanId":"af923906ebb5e826","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/memberList","QueryString":"?chatID=1","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CR:0000000C","RequestPath":"/api/chats/memberList","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:02.0186923+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"2f5e40490e64051ce8cb38dc47adad72","SpanId":"af923906ebb5e826","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CR:0000000C","RequestPath":"/api/chats/memberList","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:02.0204329+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"2f5e40490e64051ce8cb38dc47adad72","SpanId":"af923906ebb5e826","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CR:0000000C","RequestPath":"/api/chats/memberList","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:02.0209044+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"2f5e40490e64051ce8cb38dc47adad72","SpanId":"af923906ebb5e826","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.getChatMemebersAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CR:0000000C","RequestPath":"/api/chats/memberList","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:02.0254912+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"6d92eba68de341c47ddfcf057a0716fc","SpanId":"3b7cc29cc46f0df7","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=false","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CS:00000001","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CS"}}
{"Timestamp":"2025-09-18T19:36:02.0254912+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"886ce1081de06d73bb71c14bf03adce5","SpanId":"3b98131c2d21bff0","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:00000001","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:02.0256300+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"2f5e40490e64051ce8cb38dc47adad72","SpanId":"af923906ebb5e826","Properties":{"RouteData":"{action = \"getChatMemebers\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[System.String]]] getChatMemebersAsync(System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"cb8e396a-2ec8-4d3f-ac7b-731c738f8b27","ActionName":"MessagingApp.Controllers.ChatController.getChatMemebersAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CR:0000000C","RequestPath":"/api/chats/memberList","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:02.0258409+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"6d92eba68de341c47ddfcf057a0716fc","SpanId":"3b7cc29cc46f0df7","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CS:00000001","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CS"}}
{"Timestamp":"2025-09-18T19:36:02.0260448+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"886ce1081de06d73bb71c14bf03adce5","SpanId":"3b98131c2d21bff0","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CT:00000001","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:02.0263830+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"6d92eba68de341c47ddfcf057a0716fc","SpanId":"3b7cc29cc46f0df7","Properties":{"ElapsedMilliseconds":0.8767,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=false","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CS:00000001","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CS"}}
{"Timestamp":"2025-09-18T19:36:02.0265099+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"886ce1081de06d73bb71c14bf03adce5","SpanId":"3b98131c2d21bff0","Properties":{"ElapsedMilliseconds":1.025,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:00000001","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:02.0316441+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"3119f837bd00e0200f0f537ff0225de9","SpanId":"1de2c3a89130a31b","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=false","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:02.0316540+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"17b5fd9a6b9050e98cf09e68c39caacd","SpanId":"eb32247236971791","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CS:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CS"}}
{"Timestamp":"2025-09-18T19:36:02.0324754+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"17b5fd9a6b9050e98cf09e68c39caacd","SpanId":"eb32247236971791","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CS:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CS"}}
{"Timestamp":"2025-09-18T19:36:02.0324712+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"3119f837bd00e0200f0f537ff0225de9","SpanId":"1de2c3a89130a31b","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CT:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:02.0338642+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"2f5e40490e64051ce8cb38dc47adad72","SpanId":"af923906ebb5e826","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"cb8e396a-2ec8-4d3f-ac7b-731c738f8b27","ActionName":"MessagingApp.Controllers.ChatController.getChatMemebersAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CR:0000000C","RequestPath":"/api/chats/memberList","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:02.0340852+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"2f5e40490e64051ce8cb38dc47adad72","SpanId":"af923906ebb5e826","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"cb8e396a-2ec8-4d3f-ac7b-731c738f8b27","ActionName":"MessagingApp.Controllers.ChatController.getChatMemebersAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CR:0000000C","RequestPath":"/api/chats/memberList","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:02.0341304+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"17b5fd9a6b9050e98cf09e68c39caacd","SpanId":"eb32247236971791","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CS:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CS"}}
{"Timestamp":"2025-09-18T19:36:02.0346114+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"17b5fd9a6b9050e98cf09e68c39caacd","SpanId":"eb32247236971791","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CS:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CS"}}
{"Timestamp":"2025-09-18T19:36:02.0350312+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"2f5e40490e64051ce8cb38dc47adad72","SpanId":"af923906ebb5e826","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"cb8e396a-2ec8-4d3f-ac7b-731c738f8b27","ActionName":"MessagingApp.Controllers.ChatController.getChatMemebersAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CR:0000000C","RequestPath":"/api/chats/memberList","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:02.0355829+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"2f5e40490e64051ce8cb38dc47adad72","SpanId":"af923906ebb5e826","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"cb8e396a-2ec8-4d3f-ac7b-731c738f8b27","ActionName":"MessagingApp.Controllers.ChatController.getChatMemebersAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CR:0000000C","RequestPath":"/api/chats/memberList","ConnectionId":"0HNFMP8PQI2CR","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:02.0358500+03:00","Level":"Information","MessageTemplate":"Attempting to get chat members","TraceId":"2f5e40490e64051ce8cb38dc47adad72","SpanId":"af923906ebb5e826","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"cb8e396a-2ec8-4d3f-ac7b-731c738f8b27","ActionName":"MessagingApp.Controllers.ChatController.getChatMemebersAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CR:0000000C","RequestPath":"/api/chats/memberList","ConnectionId":"0HNFMP8PQI2CR","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:02.0370276+03:00","Level":"Information","MessageTemplate":"Getting the chat members","TraceId":"2f5e40490e64051ce8cb38dc47adad72","SpanId":"af923906ebb5e826","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"cb8e396a-2ec8-4d3f-ac7b-731c738f8b27","ActionName":"MessagingApp.Controllers.ChatController.getChatMemebersAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CR:0000000C","RequestPath":"/api/chats/memberList","ConnectionId":"0HNFMP8PQI2CR","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:02.0392281+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"17b5fd9a6b9050e98cf09e68c39caacd","SpanId":"eb32247236971791","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CS:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CS"}}
{"Timestamp":"2025-09-18T19:36:02.0418064+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"17b5fd9a6b9050e98cf09e68c39caacd","SpanId":"eb32247236971791","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CS:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CS"}}
{"Timestamp":"2025-09-18T19:36:02.0420671+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"17b5fd9a6b9050e98cf09e68c39caacd","SpanId":"eb32247236971791","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CS:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CS"}}
{"Timestamp":"2025-09-18T19:36:02.0422358+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"17b5fd9a6b9050e98cf09e68c39caacd","SpanId":"eb32247236971791","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CS:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CS"}}
{"Timestamp":"2025-09-18T19:36:02.0431787+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"17b5fd9a6b9050e98cf09e68c39caacd","SpanId":"eb32247236971791","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CS:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CS"}}
{"Timestamp":"2025-09-18T19:36:02.0436568+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"17b5fd9a6b9050e98cf09e68c39caacd","SpanId":"eb32247236971791","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CS:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CS","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:02.0467866+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"17b5fd9a6b9050e98cf09e68c39caacd","SpanId":"eb32247236971791","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CS:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CS","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:02.0509430+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3119f837bd00e0200f0f537ff0225de9","SpanId":"1de2c3a89130a31b","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CT:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:02.0514918+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"3119f837bd00e0200f0f537ff0225de9","SpanId":"1de2c3a89130a31b","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CT:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:02.0517009+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"3119f837bd00e0200f0f537ff0225de9","SpanId":"1de2c3a89130a31b","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:02.0521646+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"3119f837bd00e0200f0f537ff0225de9","SpanId":"1de2c3a89130a31b","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:02.0523392+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"3119f837bd00e0200f0f537ff0225de9","SpanId":"1de2c3a89130a31b","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:02.0524731+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"3119f837bd00e0200f0f537ff0225de9","SpanId":"1de2c3a89130a31b","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:02.0533560+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3119f837bd00e0200f0f537ff0225de9","SpanId":"1de2c3a89130a31b","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:02.0537872+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"3119f837bd00e0200f0f537ff0225de9","SpanId":"1de2c3a89130a31b","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:02.0540795+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:False, unreadNotRead:)","TraceId":"3119f837bd00e0200f0f537ff0225de9","SpanId":"1de2c3a89130a31b","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:02.0600118+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"2f5e40490e64051ce8cb38dc47adad72","SpanId":"af923906ebb5e826","Properties":{"elapsed":"2","parameters":"@__chatId_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__chatId_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"cb8e396a-2ec8-4d3f-ac7b-731c738f8b27","ActionName":"MessagingApp.Controllers.ChatController.getChatMemebersAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CR:0000000C","RequestPath":"/api/chats/memberList","ConnectionId":"0HNFMP8PQI2CR","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:02.0630222+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"17b5fd9a6b9050e98cf09e68c39caacd","SpanId":"eb32247236971791","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CS:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CS","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:02.0645634+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"2f5e40490e64051ce8cb38dc47adad72","SpanId":"af923906ebb5e826","Properties":{"ObjectResultType":"ObjectResult","Type":"System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"cb8e396a-2ec8-4d3f-ac7b-731c738f8b27","ActionName":"MessagingApp.Controllers.ChatController.getChatMemebersAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CR:0000000C","RequestPath":"/api/chats/memberList","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:02.0651676+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"2f5e40490e64051ce8cb38dc47adad72","SpanId":"af923906ebb5e826","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.getChatMemebersAsync (MessagingApp)","ElapsedMilliseconds":39.0468,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CR:0000000C","RequestPath":"/api/chats/memberList","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:02.0654180+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"2f5e40490e64051ce8cb38dc47adad72","SpanId":"af923906ebb5e826","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.getChatMemebersAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CR:0000000C","RequestPath":"/api/chats/memberList","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:02.0656643+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"2f5e40490e64051ce8cb38dc47adad72","SpanId":"af923906ebb5e826","Properties":{"ElapsedMilliseconds":47.3617,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/memberList","QueryString":"?chatID=1","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CR:0000000C","RequestPath":"/api/chats/memberList","ConnectionId":"0HNFMP8PQI2CR"}}
{"Timestamp":"2025-09-18T19:36:02.0699151+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3119f837bd00e0200f0f537ff0225de9","SpanId":"1de2c3a89130a31b","Properties":{"elapsed":"2","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:02.0712077+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"17b5fd9a6b9050e98cf09e68c39caacd","SpanId":"eb32247236971791","Properties":{"elapsed":"1","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CS:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CS","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:02.0712144+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3119f837bd00e0200f0f537ff0225de9","SpanId":"1de2c3a89130a31b","Properties":{"elapsed":"1","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:02.2276668+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3119f837bd00e0200f0f537ff0225de9","SpanId":"1de2c3a89130a31b","Properties":{"elapsed":"5","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:02.2276807+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"17b5fd9a6b9050e98cf09e68c39caacd","SpanId":"eb32247236971791","Properties":{"elapsed":"5","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CS:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CS","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:02.2291141+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"3119f837bd00e0200f0f537ff0225de9","SpanId":"1de2c3a89130a31b","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:02.2292340+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"17b5fd9a6b9050e98cf09e68c39caacd","SpanId":"eb32247236971791","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CS:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CS","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:02.2293878+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"3119f837bd00e0200f0f537ff0225de9","SpanId":"1de2c3a89130a31b","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:02.2295573+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"17b5fd9a6b9050e98cf09e68c39caacd","SpanId":"eb32247236971791","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CS:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CS","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:02.2296683+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"3119f837bd00e0200f0f537ff0225de9","SpanId":"1de2c3a89130a31b","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:02.2297665+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"17b5fd9a6b9050e98cf09e68c39caacd","SpanId":"eb32247236971791","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CS:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CS","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:02.2301343+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"17b5fd9a6b9050e98cf09e68c39caacd","SpanId":"eb32247236971791","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CS:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CS"}}
{"Timestamp":"2025-09-18T19:36:02.2301343+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"3119f837bd00e0200f0f537ff0225de9","SpanId":"1de2c3a89130a31b","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:02.2365929+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"3119f837bd00e0200f0f537ff0225de9","SpanId":"1de2c3a89130a31b","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":184.6344,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CT:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:02.2365882+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"17b5fd9a6b9050e98cf09e68c39caacd","SpanId":"eb32247236971791","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":197.0754,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CS:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CS"}}
{"Timestamp":"2025-09-18T19:36:02.2369547+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"3119f837bd00e0200f0f537ff0225de9","SpanId":"1de2c3a89130a31b","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CT:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:02.2370835+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"17b5fd9a6b9050e98cf09e68c39caacd","SpanId":"eb32247236971791","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CS:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CS"}}
{"Timestamp":"2025-09-18T19:36:02.2373647+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"3119f837bd00e0200f0f537ff0225de9","SpanId":"1de2c3a89130a31b","Properties":{"ElapsedMilliseconds":205.7304,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=false","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:02.2375308+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"17b5fd9a6b9050e98cf09e68c39caacd","SpanId":"eb32247236971791","Properties":{"ElapsedMilliseconds":205.8923,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CS:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CS"}}
{"Timestamp":"2025-09-18T19:36:05.0207310+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"fe94f44cb5b276e32ed7f75ea5424010","SpanId":"1ac205e68eec24e7","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:00000003","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:05.0211229+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"fe94f44cb5b276e32ed7f75ea5424010","SpanId":"1ac205e68eec24e7","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CT:00000003","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:05.0225392+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"fe94f44cb5b276e32ed7f75ea5424010","SpanId":"1ac205e68eec24e7","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CT:00000003","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:05.0229983+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"fe94f44cb5b276e32ed7f75ea5424010","SpanId":"1ac205e68eec24e7","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CT:00000003","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:05.0231773+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"fe94f44cb5b276e32ed7f75ea5424010","SpanId":"1ac205e68eec24e7","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000003","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:05.0236047+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"fe94f44cb5b276e32ed7f75ea5424010","SpanId":"1ac205e68eec24e7","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000003","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:05.0237521+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"fe94f44cb5b276e32ed7f75ea5424010","SpanId":"1ac205e68eec24e7","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000003","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:05.0238928+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"fe94f44cb5b276e32ed7f75ea5424010","SpanId":"1ac205e68eec24e7","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000003","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:05.0246679+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"fe94f44cb5b276e32ed7f75ea5424010","SpanId":"1ac205e68eec24e7","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000003","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:05.0250512+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"fe94f44cb5b276e32ed7f75ea5424010","SpanId":"1ac205e68eec24e7","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000003","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:05.0251786+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"fe94f44cb5b276e32ed7f75ea5424010","SpanId":"1ac205e68eec24e7","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000003","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:05.0262022+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"fe94f44cb5b276e32ed7f75ea5424010","SpanId":"1ac205e68eec24e7","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000003","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:05.0273831+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"fe94f44cb5b276e32ed7f75ea5424010","SpanId":"1ac205e68eec24e7","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000003","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:05.0287386+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"fe94f44cb5b276e32ed7f75ea5424010","SpanId":"1ac205e68eec24e7","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000003","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:05.0290771+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"fe94f44cb5b276e32ed7f75ea5424010","SpanId":"1ac205e68eec24e7","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000003","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:05.0292053+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"fe94f44cb5b276e32ed7f75ea5424010","SpanId":"1ac205e68eec24e7","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000003","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:05.0293297+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"fe94f44cb5b276e32ed7f75ea5424010","SpanId":"1ac205e68eec24e7","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000003","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:05.0296049+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"fe94f44cb5b276e32ed7f75ea5424010","SpanId":"1ac205e68eec24e7","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000003","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:05.0298808+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"fe94f44cb5b276e32ed7f75ea5424010","SpanId":"1ac205e68eec24e7","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.4993,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CT:00000003","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:05.0300437+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"fe94f44cb5b276e32ed7f75ea5424010","SpanId":"1ac205e68eec24e7","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CT:00000003","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:05.0302132+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"fe94f44cb5b276e32ed7f75ea5424010","SpanId":"1ac205e68eec24e7","Properties":{"ElapsedMilliseconds":9.4835,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:00000003","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:08.0207976+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"879b31d3eceddc70ff44566ff7be7399","SpanId":"990c5423b73ec66c","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:00000004","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:08.0211385+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"879b31d3eceddc70ff44566ff7be7399","SpanId":"990c5423b73ec66c","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CT:00000004","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:08.0213303+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"879b31d3eceddc70ff44566ff7be7399","SpanId":"990c5423b73ec66c","Properties":{"ElapsedMilliseconds":0.5822,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:00000004","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:08.0237724+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"c3317938edde25ff14104199941ea169","SpanId":"873f8b6b16005773","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:00000005","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:08.0240745+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"c3317938edde25ff14104199941ea169","SpanId":"873f8b6b16005773","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CT:00000005","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:08.0345140+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c3317938edde25ff14104199941ea169","SpanId":"873f8b6b16005773","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CT:00000005","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:08.0349407+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"c3317938edde25ff14104199941ea169","SpanId":"873f8b6b16005773","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CT:00000005","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:08.0351450+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"c3317938edde25ff14104199941ea169","SpanId":"873f8b6b16005773","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000005","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:08.0355982+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"c3317938edde25ff14104199941ea169","SpanId":"873f8b6b16005773","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000005","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:08.0358265+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"c3317938edde25ff14104199941ea169","SpanId":"873f8b6b16005773","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000005","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:08.0359691+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"c3317938edde25ff14104199941ea169","SpanId":"873f8b6b16005773","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000005","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:08.0367881+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c3317938edde25ff14104199941ea169","SpanId":"873f8b6b16005773","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000005","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:08.0372035+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"c3317938edde25ff14104199941ea169","SpanId":"873f8b6b16005773","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000005","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:08.0373792+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"c3317938edde25ff14104199941ea169","SpanId":"873f8b6b16005773","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000005","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:08.0385195+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c3317938edde25ff14104199941ea169","SpanId":"873f8b6b16005773","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000005","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:08.0399411+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c3317938edde25ff14104199941ea169","SpanId":"873f8b6b16005773","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000005","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:08.0420725+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c3317938edde25ff14104199941ea169","SpanId":"873f8b6b16005773","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000005","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:08.0424417+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"c3317938edde25ff14104199941ea169","SpanId":"873f8b6b16005773","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000005","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:08.0426393+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"c3317938edde25ff14104199941ea169","SpanId":"873f8b6b16005773","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000005","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:08.0427604+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"c3317938edde25ff14104199941ea169","SpanId":"873f8b6b16005773","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000005","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:08.0430218+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"c3317938edde25ff14104199941ea169","SpanId":"873f8b6b16005773","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000005","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:08.0432697+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"c3317938edde25ff14104199941ea169","SpanId":"873f8b6b16005773","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":7.877,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CT:00000005","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:08.0434614+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"c3317938edde25ff14104199941ea169","SpanId":"873f8b6b16005773","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CT:00000005","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:08.0439197+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"c3317938edde25ff14104199941ea169","SpanId":"873f8b6b16005773","Properties":{"ElapsedMilliseconds":20.1627,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:00000005","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:11.0203460+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"2950c200f550d536280d1db0d39a9aaa","SpanId":"647ca95faadb949a","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:00000006","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:11.0214152+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"2950c200f550d536280d1db0d39a9aaa","SpanId":"647ca95faadb949a","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CT:00000006","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:11.0230832+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"2950c200f550d536280d1db0d39a9aaa","SpanId":"647ca95faadb949a","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CT:00000006","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:11.0234655+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"2950c200f550d536280d1db0d39a9aaa","SpanId":"647ca95faadb949a","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CT:00000006","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:11.0236626+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"2950c200f550d536280d1db0d39a9aaa","SpanId":"647ca95faadb949a","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000006","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:11.0240911+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"2950c200f550d536280d1db0d39a9aaa","SpanId":"647ca95faadb949a","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000006","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:11.0242656+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"2950c200f550d536280d1db0d39a9aaa","SpanId":"647ca95faadb949a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000006","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:11.0244186+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"2950c200f550d536280d1db0d39a9aaa","SpanId":"647ca95faadb949a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000006","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:11.0252411+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"2950c200f550d536280d1db0d39a9aaa","SpanId":"647ca95faadb949a","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000006","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:11.0256175+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"2950c200f550d536280d1db0d39a9aaa","SpanId":"647ca95faadb949a","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000006","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:11.0257557+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"2950c200f550d536280d1db0d39a9aaa","SpanId":"647ca95faadb949a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000006","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:11.0268931+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"2950c200f550d536280d1db0d39a9aaa","SpanId":"647ca95faadb949a","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000006","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:11.0296720+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"2950c200f550d536280d1db0d39a9aaa","SpanId":"647ca95faadb949a","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000006","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:11.0311826+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"2950c200f550d536280d1db0d39a9aaa","SpanId":"647ca95faadb949a","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000006","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:11.0316557+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"2950c200f550d536280d1db0d39a9aaa","SpanId":"647ca95faadb949a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000006","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:11.0319136+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"2950c200f550d536280d1db0d39a9aaa","SpanId":"647ca95faadb949a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000006","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:11.0321065+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"2950c200f550d536280d1db0d39a9aaa","SpanId":"647ca95faadb949a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000006","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:11.0324356+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"2950c200f550d536280d1db0d39a9aaa","SpanId":"647ca95faadb949a","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000006","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:11.0326894+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"2950c200f550d536280d1db0d39a9aaa","SpanId":"647ca95faadb949a","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":8.833,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CT:00000006","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:11.0328710+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"2950c200f550d536280d1db0d39a9aaa","SpanId":"647ca95faadb949a","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CT:00000006","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:11.0330695+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"2950c200f550d536280d1db0d39a9aaa","SpanId":"647ca95faadb949a","Properties":{"ElapsedMilliseconds":12.7248,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:00000006","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:14.0206428+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"d4708830cba54a752fcfa7ae69a50c32","SpanId":"8c628533f6815aae","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:00000007","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:14.0210172+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"d4708830cba54a752fcfa7ae69a50c32","SpanId":"8c628533f6815aae","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CT:00000007","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:14.0213520+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"d4708830cba54a752fcfa7ae69a50c32","SpanId":"8c628533f6815aae","Properties":{"ElapsedMilliseconds":0.701,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:00000007","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:14.0240933+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"7e96dc296d47dd349e3f9b704754e515","SpanId":"f673de8b9c54eb84","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:00000008","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:14.0245397+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"7e96dc296d47dd349e3f9b704754e515","SpanId":"f673de8b9c54eb84","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CT:00000008","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:14.0266335+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"7e96dc296d47dd349e3f9b704754e515","SpanId":"f673de8b9c54eb84","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CT:00000008","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:14.0270789+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"7e96dc296d47dd349e3f9b704754e515","SpanId":"f673de8b9c54eb84","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CT:00000008","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:14.0272747+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"7e96dc296d47dd349e3f9b704754e515","SpanId":"f673de8b9c54eb84","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000008","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:14.0277220+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"7e96dc296d47dd349e3f9b704754e515","SpanId":"f673de8b9c54eb84","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000008","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:14.0279161+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"7e96dc296d47dd349e3f9b704754e515","SpanId":"f673de8b9c54eb84","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000008","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:14.0281041+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"7e96dc296d47dd349e3f9b704754e515","SpanId":"f673de8b9c54eb84","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000008","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:14.0290032+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"7e96dc296d47dd349e3f9b704754e515","SpanId":"f673de8b9c54eb84","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000008","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:14.0296559+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"7e96dc296d47dd349e3f9b704754e515","SpanId":"f673de8b9c54eb84","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000008","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:14.0298165+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"7e96dc296d47dd349e3f9b704754e515","SpanId":"f673de8b9c54eb84","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000008","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:14.0309702+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"7e96dc296d47dd349e3f9b704754e515","SpanId":"f673de8b9c54eb84","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000008","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:14.0321552+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"7e96dc296d47dd349e3f9b704754e515","SpanId":"f673de8b9c54eb84","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000008","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:14.0337478+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"7e96dc296d47dd349e3f9b704754e515","SpanId":"f673de8b9c54eb84","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000008","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:14.0341101+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"7e96dc296d47dd349e3f9b704754e515","SpanId":"f673de8b9c54eb84","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000008","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:14.0343005+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"7e96dc296d47dd349e3f9b704754e515","SpanId":"f673de8b9c54eb84","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000008","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:14.0344542+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"7e96dc296d47dd349e3f9b704754e515","SpanId":"f673de8b9c54eb84","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000008","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:14.0347249+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"7e96dc296d47dd349e3f9b704754e515","SpanId":"f673de8b9c54eb84","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000008","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:14.0350126+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"7e96dc296d47dd349e3f9b704754e515","SpanId":"f673de8b9c54eb84","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":7.5043,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CT:00000008","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:14.0351557+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"7e96dc296d47dd349e3f9b704754e515","SpanId":"f673de8b9c54eb84","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CT:00000008","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:14.0353322+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"7e96dc296d47dd349e3f9b704754e515","SpanId":"f673de8b9c54eb84","Properties":{"ElapsedMilliseconds":11.2264,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:00000008","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:17.0203334+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"3e1ab78f9bc6c176442844998fda2141","SpanId":"66b783bccab9b5f2","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:00000009","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:17.0208732+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"3e1ab78f9bc6c176442844998fda2141","SpanId":"66b783bccab9b5f2","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CT:00000009","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:17.0227949+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3e1ab78f9bc6c176442844998fda2141","SpanId":"66b783bccab9b5f2","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CT:00000009","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:17.0231908+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"3e1ab78f9bc6c176442844998fda2141","SpanId":"66b783bccab9b5f2","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CT:00000009","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:17.0233798+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"3e1ab78f9bc6c176442844998fda2141","SpanId":"66b783bccab9b5f2","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000009","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:17.0237325+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"3e1ab78f9bc6c176442844998fda2141","SpanId":"66b783bccab9b5f2","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000009","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:17.0238461+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"3e1ab78f9bc6c176442844998fda2141","SpanId":"66b783bccab9b5f2","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000009","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:17.0239729+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"3e1ab78f9bc6c176442844998fda2141","SpanId":"66b783bccab9b5f2","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000009","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:17.0247008+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3e1ab78f9bc6c176442844998fda2141","SpanId":"66b783bccab9b5f2","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000009","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:17.0250809+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"3e1ab78f9bc6c176442844998fda2141","SpanId":"66b783bccab9b5f2","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000009","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:17.0252313+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"3e1ab78f9bc6c176442844998fda2141","SpanId":"66b783bccab9b5f2","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000009","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:17.0261614+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3e1ab78f9bc6c176442844998fda2141","SpanId":"66b783bccab9b5f2","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000009","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:17.0271934+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3e1ab78f9bc6c176442844998fda2141","SpanId":"66b783bccab9b5f2","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000009","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:17.0285674+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3e1ab78f9bc6c176442844998fda2141","SpanId":"66b783bccab9b5f2","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000009","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:17.0288928+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"3e1ab78f9bc6c176442844998fda2141","SpanId":"66b783bccab9b5f2","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000009","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:17.0290102+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"3e1ab78f9bc6c176442844998fda2141","SpanId":"66b783bccab9b5f2","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000009","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:17.0291101+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"3e1ab78f9bc6c176442844998fda2141","SpanId":"66b783bccab9b5f2","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000009","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:17.0293507+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"3e1ab78f9bc6c176442844998fda2141","SpanId":"66b783bccab9b5f2","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000009","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:17.0295955+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"3e1ab78f9bc6c176442844998fda2141","SpanId":"66b783bccab9b5f2","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.03,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CT:00000009","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:17.0297502+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"3e1ab78f9bc6c176442844998fda2141","SpanId":"66b783bccab9b5f2","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CT:00000009","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:17.0299270+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"3e1ab78f9bc6c176442844998fda2141","SpanId":"66b783bccab9b5f2","Properties":{"ElapsedMilliseconds":9.6155,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:00000009","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:20.0200927+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"1cfa7ab58bb2f6fca3d180f2327b0637","SpanId":"42cf7343d649f13a","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:0000000A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:20.0205030+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"1cfa7ab58bb2f6fca3d180f2327b0637","SpanId":"42cf7343d649f13a","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CT:0000000A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:20.0207207+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"1cfa7ab58bb2f6fca3d180f2327b0637","SpanId":"42cf7343d649f13a","Properties":{"ElapsedMilliseconds":0.6294,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:0000000A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:20.0232060+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"325f10671488947ef77a07fb1fc17f1d","SpanId":"379b37e7bfadcb27","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:0000000B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:20.0234971+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"325f10671488947ef77a07fb1fc17f1d","SpanId":"379b37e7bfadcb27","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CT:0000000B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:20.0251624+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"325f10671488947ef77a07fb1fc17f1d","SpanId":"379b37e7bfadcb27","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CT:0000000B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:20.0255348+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"325f10671488947ef77a07fb1fc17f1d","SpanId":"379b37e7bfadcb27","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CT:0000000B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:20.0257111+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"325f10671488947ef77a07fb1fc17f1d","SpanId":"379b37e7bfadcb27","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:20.0261426+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"325f10671488947ef77a07fb1fc17f1d","SpanId":"379b37e7bfadcb27","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:20.0262647+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"325f10671488947ef77a07fb1fc17f1d","SpanId":"379b37e7bfadcb27","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:20.0264094+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"325f10671488947ef77a07fb1fc17f1d","SpanId":"379b37e7bfadcb27","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:20.0271585+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"325f10671488947ef77a07fb1fc17f1d","SpanId":"379b37e7bfadcb27","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:20.0275330+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"325f10671488947ef77a07fb1fc17f1d","SpanId":"379b37e7bfadcb27","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:20.0276757+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"325f10671488947ef77a07fb1fc17f1d","SpanId":"379b37e7bfadcb27","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:20.0287799+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"325f10671488947ef77a07fb1fc17f1d","SpanId":"379b37e7bfadcb27","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:20.0299409+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"325f10671488947ef77a07fb1fc17f1d","SpanId":"379b37e7bfadcb27","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:20.0314986+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"325f10671488947ef77a07fb1fc17f1d","SpanId":"379b37e7bfadcb27","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:20.0319237+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"325f10671488947ef77a07fb1fc17f1d","SpanId":"379b37e7bfadcb27","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:20.0320553+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"325f10671488947ef77a07fb1fc17f1d","SpanId":"379b37e7bfadcb27","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:20.0321745+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"325f10671488947ef77a07fb1fc17f1d","SpanId":"379b37e7bfadcb27","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:20.0324241+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"325f10671488947ef77a07fb1fc17f1d","SpanId":"379b37e7bfadcb27","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:20.0326352+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"325f10671488947ef77a07fb1fc17f1d","SpanId":"379b37e7bfadcb27","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.6632,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CT:0000000B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:20.0327798+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"325f10671488947ef77a07fb1fc17f1d","SpanId":"379b37e7bfadcb27","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CT:0000000B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:20.0329539+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"325f10671488947ef77a07fb1fc17f1d","SpanId":"379b37e7bfadcb27","Properties":{"ElapsedMilliseconds":9.7353,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:0000000B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:23.0203058+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"cc6694a7a91e8b3c086589bd80f9c3c5","SpanId":"a8e633af066a90cf","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:0000000C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:23.0207584+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"cc6694a7a91e8b3c086589bd80f9c3c5","SpanId":"a8e633af066a90cf","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CT:0000000C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:23.0225535+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"cc6694a7a91e8b3c086589bd80f9c3c5","SpanId":"a8e633af066a90cf","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CT:0000000C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:23.0230785+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"cc6694a7a91e8b3c086589bd80f9c3c5","SpanId":"a8e633af066a90cf","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CT:0000000C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:23.0232521+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"cc6694a7a91e8b3c086589bd80f9c3c5","SpanId":"a8e633af066a90cf","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:23.0237093+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"cc6694a7a91e8b3c086589bd80f9c3c5","SpanId":"a8e633af066a90cf","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:23.0238327+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"cc6694a7a91e8b3c086589bd80f9c3c5","SpanId":"a8e633af066a90cf","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:23.0239469+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"cc6694a7a91e8b3c086589bd80f9c3c5","SpanId":"a8e633af066a90cf","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:23.0247290+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"cc6694a7a91e8b3c086589bd80f9c3c5","SpanId":"a8e633af066a90cf","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:23.0250498+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"cc6694a7a91e8b3c086589bd80f9c3c5","SpanId":"a8e633af066a90cf","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:23.0251683+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"cc6694a7a91e8b3c086589bd80f9c3c5","SpanId":"a8e633af066a90cf","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:23.3726387+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"cc6694a7a91e8b3c086589bd80f9c3c5","SpanId":"a8e633af066a90cf","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:23.3738496+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"cc6694a7a91e8b3c086589bd80f9c3c5","SpanId":"a8e633af066a90cf","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:23.3750301+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"cc6694a7a91e8b3c086589bd80f9c3c5","SpanId":"a8e633af066a90cf","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:23.3753613+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"cc6694a7a91e8b3c086589bd80f9c3c5","SpanId":"a8e633af066a90cf","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:23.3754911+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"cc6694a7a91e8b3c086589bd80f9c3c5","SpanId":"a8e633af066a90cf","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:23.3756120+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"cc6694a7a91e8b3c086589bd80f9c3c5","SpanId":"a8e633af066a90cf","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:23.3759183+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"cc6694a7a91e8b3c086589bd80f9c3c5","SpanId":"a8e633af066a90cf","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:23.3761524+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"cc6694a7a91e8b3c086589bd80f9c3c5","SpanId":"a8e633af066a90cf","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":352.6485,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CT:0000000C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:23.3763443+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"cc6694a7a91e8b3c086589bd80f9c3c5","SpanId":"a8e633af066a90cf","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CT:0000000C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:23.3765419+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"cc6694a7a91e8b3c086589bd80f9c3c5","SpanId":"a8e633af066a90cf","Properties":{"ElapsedMilliseconds":356.2382,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:0000000C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:26.0201809+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"1155a11e10c1013f1834c61c0ccb8e89","SpanId":"d706de2c80138092","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:0000000D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:26.0206421+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"1155a11e10c1013f1834c61c0ccb8e89","SpanId":"d706de2c80138092","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CT:0000000D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:26.0208562+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"1155a11e10c1013f1834c61c0ccb8e89","SpanId":"d706de2c80138092","Properties":{"ElapsedMilliseconds":0.6757,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:0000000D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:26.0233846+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"3b374d9fd68680a9db4a48843d410aff","SpanId":"16e2da1ee4d60e8c","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:0000000E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:26.0237043+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"3b374d9fd68680a9db4a48843d410aff","SpanId":"16e2da1ee4d60e8c","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CT:0000000E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:26.0249526+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3b374d9fd68680a9db4a48843d410aff","SpanId":"16e2da1ee4d60e8c","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CT:0000000E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:26.0253607+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"3b374d9fd68680a9db4a48843d410aff","SpanId":"16e2da1ee4d60e8c","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CT:0000000E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:26.0255249+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"3b374d9fd68680a9db4a48843d410aff","SpanId":"16e2da1ee4d60e8c","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:26.0258804+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"3b374d9fd68680a9db4a48843d410aff","SpanId":"16e2da1ee4d60e8c","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:26.0260152+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"3b374d9fd68680a9db4a48843d410aff","SpanId":"16e2da1ee4d60e8c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:26.0280205+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"3b374d9fd68680a9db4a48843d410aff","SpanId":"16e2da1ee4d60e8c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:26.0292654+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3b374d9fd68680a9db4a48843d410aff","SpanId":"16e2da1ee4d60e8c","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:26.0299102+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"3b374d9fd68680a9db4a48843d410aff","SpanId":"16e2da1ee4d60e8c","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:26.0300314+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"3b374d9fd68680a9db4a48843d410aff","SpanId":"16e2da1ee4d60e8c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:26.0311426+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3b374d9fd68680a9db4a48843d410aff","SpanId":"16e2da1ee4d60e8c","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:26.0321575+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3b374d9fd68680a9db4a48843d410aff","SpanId":"16e2da1ee4d60e8c","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:26.0338185+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3b374d9fd68680a9db4a48843d410aff","SpanId":"16e2da1ee4d60e8c","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:26.0356025+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"3b374d9fd68680a9db4a48843d410aff","SpanId":"16e2da1ee4d60e8c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:26.0358255+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"3b374d9fd68680a9db4a48843d410aff","SpanId":"16e2da1ee4d60e8c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:26.0359700+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"3b374d9fd68680a9db4a48843d410aff","SpanId":"16e2da1ee4d60e8c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:26.0362468+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"3b374d9fd68680a9db4a48843d410aff","SpanId":"16e2da1ee4d60e8c","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:26.0670923+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"3b374d9fd68680a9db4a48843d410aff","SpanId":"16e2da1ee4d60e8c","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":41.3597,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CT:0000000E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:26.0674183+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"3b374d9fd68680a9db4a48843d410aff","SpanId":"16e2da1ee4d60e8c","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CT:0000000E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:26.0677584+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"3b374d9fd68680a9db4a48843d410aff","SpanId":"16e2da1ee4d60e8c","Properties":{"ElapsedMilliseconds":44.3693,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:0000000E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:29.0204349+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"5ece3a9f060d2940a317f62953c55289","SpanId":"a82ea6db025e2b77","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:0000000F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:29.0210059+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"5ece3a9f060d2940a317f62953c55289","SpanId":"a82ea6db025e2b77","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CT:0000000F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:29.0225254+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"5ece3a9f060d2940a317f62953c55289","SpanId":"a82ea6db025e2b77","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CT:0000000F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:29.0228986+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"5ece3a9f060d2940a317f62953c55289","SpanId":"a82ea6db025e2b77","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CT:0000000F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:29.0231054+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"5ece3a9f060d2940a317f62953c55289","SpanId":"a82ea6db025e2b77","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:29.0234513+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"5ece3a9f060d2940a317f62953c55289","SpanId":"a82ea6db025e2b77","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:29.0235738+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"5ece3a9f060d2940a317f62953c55289","SpanId":"a82ea6db025e2b77","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:29.0236938+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"5ece3a9f060d2940a317f62953c55289","SpanId":"a82ea6db025e2b77","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:29.0244009+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"5ece3a9f060d2940a317f62953c55289","SpanId":"a82ea6db025e2b77","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:29.0247377+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"5ece3a9f060d2940a317f62953c55289","SpanId":"a82ea6db025e2b77","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:29.0248771+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"5ece3a9f060d2940a317f62953c55289","SpanId":"a82ea6db025e2b77","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:29.0258195+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"5ece3a9f060d2940a317f62953c55289","SpanId":"a82ea6db025e2b77","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:29.0268004+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"5ece3a9f060d2940a317f62953c55289","SpanId":"a82ea6db025e2b77","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:29.0280836+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"5ece3a9f060d2940a317f62953c55289","SpanId":"a82ea6db025e2b77","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:29.0283951+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"5ece3a9f060d2940a317f62953c55289","SpanId":"a82ea6db025e2b77","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:29.0285118+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"5ece3a9f060d2940a317f62953c55289","SpanId":"a82ea6db025e2b77","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:29.0286301+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"5ece3a9f060d2940a317f62953c55289","SpanId":"a82ea6db025e2b77","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:29.0288659+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"5ece3a9f060d2940a317f62953c55289","SpanId":"a82ea6db025e2b77","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000000F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:29.0290767+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"5ece3a9f060d2940a317f62953c55289","SpanId":"a82ea6db025e2b77","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.7873,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CT:0000000F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:29.0292338+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"5ece3a9f060d2940a317f62953c55289","SpanId":"a82ea6db025e2b77","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CT:0000000F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:29.0294141+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"5ece3a9f060d2940a317f62953c55289","SpanId":"a82ea6db025e2b77","Properties":{"ElapsedMilliseconds":8.9848,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:0000000F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:32.0208786+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"62b8b67f287cf24044a3ab51bfad17eb","SpanId":"0b649ad11f92c0b6","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:00000010","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:32.0212904+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"62b8b67f287cf24044a3ab51bfad17eb","SpanId":"0b649ad11f92c0b6","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CT:00000010","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:32.0215471+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"62b8b67f287cf24044a3ab51bfad17eb","SpanId":"0b649ad11f92c0b6","Properties":{"ElapsedMilliseconds":0.6871,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:00000010","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:32.0242769+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"4e35286488333783bae492ed35984330","SpanId":"774dc2a65eeaf617","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:00000011","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:32.0247009+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"4e35286488333783bae492ed35984330","SpanId":"774dc2a65eeaf617","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CT:00000011","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:32.0269923+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"4e35286488333783bae492ed35984330","SpanId":"774dc2a65eeaf617","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CT:00000011","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:32.0275498+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"4e35286488333783bae492ed35984330","SpanId":"774dc2a65eeaf617","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CT:00000011","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:32.0277583+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"4e35286488333783bae492ed35984330","SpanId":"774dc2a65eeaf617","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000011","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:32.0282745+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"4e35286488333783bae492ed35984330","SpanId":"774dc2a65eeaf617","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000011","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:32.0284585+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"4e35286488333783bae492ed35984330","SpanId":"774dc2a65eeaf617","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000011","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:32.0285958+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"4e35286488333783bae492ed35984330","SpanId":"774dc2a65eeaf617","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000011","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:32.0294883+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"4e35286488333783bae492ed35984330","SpanId":"774dc2a65eeaf617","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000011","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:32.0298680+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"4e35286488333783bae492ed35984330","SpanId":"774dc2a65eeaf617","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000011","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:32.0300168+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"4e35286488333783bae492ed35984330","SpanId":"774dc2a65eeaf617","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000011","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:32.0310937+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"4e35286488333783bae492ed35984330","SpanId":"774dc2a65eeaf617","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000011","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:32.0322829+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"4e35286488333783bae492ed35984330","SpanId":"774dc2a65eeaf617","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000011","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:32.0337377+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"4e35286488333783bae492ed35984330","SpanId":"774dc2a65eeaf617","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000011","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:32.0341112+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"4e35286488333783bae492ed35984330","SpanId":"774dc2a65eeaf617","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000011","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:32.0342462+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"4e35286488333783bae492ed35984330","SpanId":"774dc2a65eeaf617","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000011","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:32.0343620+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"4e35286488333783bae492ed35984330","SpanId":"774dc2a65eeaf617","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000011","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:32.0346273+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"4e35286488333783bae492ed35984330","SpanId":"774dc2a65eeaf617","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000011","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:32.0348618+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"4e35286488333783bae492ed35984330","SpanId":"774dc2a65eeaf617","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.7759,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CT:00000011","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:32.0350330+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"4e35286488333783bae492ed35984330","SpanId":"774dc2a65eeaf617","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CT:00000011","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:32.0353698+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"4e35286488333783bae492ed35984330","SpanId":"774dc2a65eeaf617","Properties":{"ElapsedMilliseconds":11.0984,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:00000011","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:35.0205649+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"2799edc248e62df9453b4f2aa37e6bdf","SpanId":"2268a6d1f962d7cf","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:00000012","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:35.0210041+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"2799edc248e62df9453b4f2aa37e6bdf","SpanId":"2268a6d1f962d7cf","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CT:00000012","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:35.0222755+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"2799edc248e62df9453b4f2aa37e6bdf","SpanId":"2268a6d1f962d7cf","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CT:00000012","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:35.0226441+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"2799edc248e62df9453b4f2aa37e6bdf","SpanId":"2268a6d1f962d7cf","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CT:00000012","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:35.0228440+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"2799edc248e62df9453b4f2aa37e6bdf","SpanId":"2268a6d1f962d7cf","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000012","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:35.0232248+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"2799edc248e62df9453b4f2aa37e6bdf","SpanId":"2268a6d1f962d7cf","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000012","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:35.0233611+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"2799edc248e62df9453b4f2aa37e6bdf","SpanId":"2268a6d1f962d7cf","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000012","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:35.0234940+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"2799edc248e62df9453b4f2aa37e6bdf","SpanId":"2268a6d1f962d7cf","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000012","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:35.0242931+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"2799edc248e62df9453b4f2aa37e6bdf","SpanId":"2268a6d1f962d7cf","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000012","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:35.0246730+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"2799edc248e62df9453b4f2aa37e6bdf","SpanId":"2268a6d1f962d7cf","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000012","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:35.0248973+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"2799edc248e62df9453b4f2aa37e6bdf","SpanId":"2268a6d1f962d7cf","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000012","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:35.0259519+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"2799edc248e62df9453b4f2aa37e6bdf","SpanId":"2268a6d1f962d7cf","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000012","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:35.0269679+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"2799edc248e62df9453b4f2aa37e6bdf","SpanId":"2268a6d1f962d7cf","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000012","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:35.0282399+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"2799edc248e62df9453b4f2aa37e6bdf","SpanId":"2268a6d1f962d7cf","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000012","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:35.0286059+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"2799edc248e62df9453b4f2aa37e6bdf","SpanId":"2268a6d1f962d7cf","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000012","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:35.0287408+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"2799edc248e62df9453b4f2aa37e6bdf","SpanId":"2268a6d1f962d7cf","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000012","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:35.0288689+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"2799edc248e62df9453b4f2aa37e6bdf","SpanId":"2268a6d1f962d7cf","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000012","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:35.0292013+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"2799edc248e62df9453b4f2aa37e6bdf","SpanId":"2268a6d1f962d7cf","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000012","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:35.0294802+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"2799edc248e62df9453b4f2aa37e6bdf","SpanId":"2268a6d1f962d7cf","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.3941,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CT:00000012","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:35.0296519+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"2799edc248e62df9453b4f2aa37e6bdf","SpanId":"2268a6d1f962d7cf","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CT:00000012","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:35.0299049+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"2799edc248e62df9453b4f2aa37e6bdf","SpanId":"2268a6d1f962d7cf","Properties":{"ElapsedMilliseconds":9.3409,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:00000012","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:38.0205248+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"943628f283ad46b79c9fda8018f9ef9a","SpanId":"4bcfc865300bbce4","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:00000013","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:38.0210372+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"943628f283ad46b79c9fda8018f9ef9a","SpanId":"4bcfc865300bbce4","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CT:00000013","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:38.0213719+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"943628f283ad46b79c9fda8018f9ef9a","SpanId":"4bcfc865300bbce4","Properties":{"ElapsedMilliseconds":0.8721,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:00000013","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:38.0240420+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"172036b062a0a9c936bd94863d723f9d","SpanId":"ed27bedc83bc7d48","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:00000014","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:38.0245583+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"172036b062a0a9c936bd94863d723f9d","SpanId":"ed27bedc83bc7d48","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CT:00000014","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:38.0261434+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"172036b062a0a9c936bd94863d723f9d","SpanId":"ed27bedc83bc7d48","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CT:00000014","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:38.0266254+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"172036b062a0a9c936bd94863d723f9d","SpanId":"ed27bedc83bc7d48","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CT:00000014","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:38.0268408+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"172036b062a0a9c936bd94863d723f9d","SpanId":"ed27bedc83bc7d48","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000014","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:38.0273060+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"172036b062a0a9c936bd94863d723f9d","SpanId":"ed27bedc83bc7d48","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000014","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:38.0274990+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"172036b062a0a9c936bd94863d723f9d","SpanId":"ed27bedc83bc7d48","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000014","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:38.0276471+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"172036b062a0a9c936bd94863d723f9d","SpanId":"ed27bedc83bc7d48","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000014","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:38.0285540+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"172036b062a0a9c936bd94863d723f9d","SpanId":"ed27bedc83bc7d48","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000014","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:38.0289967+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"172036b062a0a9c936bd94863d723f9d","SpanId":"ed27bedc83bc7d48","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000014","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:38.0291486+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"172036b062a0a9c936bd94863d723f9d","SpanId":"ed27bedc83bc7d48","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000014","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:38.0301609+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"172036b062a0a9c936bd94863d723f9d","SpanId":"ed27bedc83bc7d48","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000014","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:38.0339026+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"172036b062a0a9c936bd94863d723f9d","SpanId":"ed27bedc83bc7d48","Properties":{"elapsed":"3","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000014","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:38.0360825+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"172036b062a0a9c936bd94863d723f9d","SpanId":"ed27bedc83bc7d48","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000014","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:38.0363779+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"172036b062a0a9c936bd94863d723f9d","SpanId":"ed27bedc83bc7d48","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000014","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:38.0365278+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"172036b062a0a9c936bd94863d723f9d","SpanId":"ed27bedc83bc7d48","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000014","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:38.0366794+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"172036b062a0a9c936bd94863d723f9d","SpanId":"ed27bedc83bc7d48","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000014","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:38.0370021+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"172036b062a0a9c936bd94863d723f9d","SpanId":"ed27bedc83bc7d48","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000014","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:38.0372252+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"172036b062a0a9c936bd94863d723f9d","SpanId":"ed27bedc83bc7d48","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":10.129,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CT:00000014","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:38.0374048+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"172036b062a0a9c936bd94863d723f9d","SpanId":"ed27bedc83bc7d48","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CT:00000014","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:38.0375962+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"172036b062a0a9c936bd94863d723f9d","SpanId":"ed27bedc83bc7d48","Properties":{"ElapsedMilliseconds":13.5598,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:00000014","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:41.0198350+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"67ed08572327a5ed94cc49e5a8bb3d40","SpanId":"3e6892de99be5841","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:00000015","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:41.0201733+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"67ed08572327a5ed94cc49e5a8bb3d40","SpanId":"3e6892de99be5841","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CT:00000015","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:41.0214926+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"67ed08572327a5ed94cc49e5a8bb3d40","SpanId":"3e6892de99be5841","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CT:00000015","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:41.0218321+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"67ed08572327a5ed94cc49e5a8bb3d40","SpanId":"3e6892de99be5841","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CT:00000015","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:41.0219948+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"67ed08572327a5ed94cc49e5a8bb3d40","SpanId":"3e6892de99be5841","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000015","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:41.0224269+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"67ed08572327a5ed94cc49e5a8bb3d40","SpanId":"3e6892de99be5841","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000015","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:41.0225534+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"67ed08572327a5ed94cc49e5a8bb3d40","SpanId":"3e6892de99be5841","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000015","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:41.0226683+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"67ed08572327a5ed94cc49e5a8bb3d40","SpanId":"3e6892de99be5841","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000015","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:41.0234355+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"67ed08572327a5ed94cc49e5a8bb3d40","SpanId":"3e6892de99be5841","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000015","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:41.0237877+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"67ed08572327a5ed94cc49e5a8bb3d40","SpanId":"3e6892de99be5841","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000015","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:41.0239394+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"67ed08572327a5ed94cc49e5a8bb3d40","SpanId":"3e6892de99be5841","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000015","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:41.0249772+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"67ed08572327a5ed94cc49e5a8bb3d40","SpanId":"3e6892de99be5841","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000015","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:41.0261827+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"67ed08572327a5ed94cc49e5a8bb3d40","SpanId":"3e6892de99be5841","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000015","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:41.0276063+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"67ed08572327a5ed94cc49e5a8bb3d40","SpanId":"3e6892de99be5841","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000015","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:41.0278974+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"67ed08572327a5ed94cc49e5a8bb3d40","SpanId":"3e6892de99be5841","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000015","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:41.0280283+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"67ed08572327a5ed94cc49e5a8bb3d40","SpanId":"3e6892de99be5841","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000015","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:41.0281980+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"67ed08572327a5ed94cc49e5a8bb3d40","SpanId":"3e6892de99be5841","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000015","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:41.0285599+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"67ed08572327a5ed94cc49e5a8bb3d40","SpanId":"3e6892de99be5841","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000015","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:41.0288218+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"67ed08572327a5ed94cc49e5a8bb3d40","SpanId":"3e6892de99be5841","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.6499,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CT:00000015","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:41.0290291+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"67ed08572327a5ed94cc49e5a8bb3d40","SpanId":"3e6892de99be5841","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CT:00000015","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:41.0292388+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"67ed08572327a5ed94cc49e5a8bb3d40","SpanId":"3e6892de99be5841","Properties":{"ElapsedMilliseconds":9.4039,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:00000015","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:44.0201827+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"2bb6d678d0689e8d625d03d56faddf18","SpanId":"9cd261adc0734dc7","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:00000016","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:44.0205134+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"2bb6d678d0689e8d625d03d56faddf18","SpanId":"9cd261adc0734dc7","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CT:00000016","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:44.0208508+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"2bb6d678d0689e8d625d03d56faddf18","SpanId":"9cd261adc0734dc7","Properties":{"ElapsedMilliseconds":0.667,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:00000016","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:44.0234404+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"263a927e5d6809a2cae59f0577b0f486","SpanId":"8a23f169efac6f1d","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:00000017","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:44.0239253+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"263a927e5d6809a2cae59f0577b0f486","SpanId":"8a23f169efac6f1d","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CT:00000017","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:44.0253402+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"263a927e5d6809a2cae59f0577b0f486","SpanId":"8a23f169efac6f1d","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CT:00000017","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:44.3558223+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"263a927e5d6809a2cae59f0577b0f486","SpanId":"8a23f169efac6f1d","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CT:00000017","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:44.3561954+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"263a927e5d6809a2cae59f0577b0f486","SpanId":"8a23f169efac6f1d","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000017","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:44.3590589+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"263a927e5d6809a2cae59f0577b0f486","SpanId":"8a23f169efac6f1d","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000017","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:44.3592986+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"263a927e5d6809a2cae59f0577b0f486","SpanId":"8a23f169efac6f1d","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000017","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:44.3594732+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"263a927e5d6809a2cae59f0577b0f486","SpanId":"8a23f169efac6f1d","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000017","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:44.3604950+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"263a927e5d6809a2cae59f0577b0f486","SpanId":"8a23f169efac6f1d","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000017","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:44.3608701+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"263a927e5d6809a2cae59f0577b0f486","SpanId":"8a23f169efac6f1d","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000017","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:44.3610156+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"263a927e5d6809a2cae59f0577b0f486","SpanId":"8a23f169efac6f1d","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000017","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:44.3620879+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"263a927e5d6809a2cae59f0577b0f486","SpanId":"8a23f169efac6f1d","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000017","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:44.3631572+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"263a927e5d6809a2cae59f0577b0f486","SpanId":"8a23f169efac6f1d","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000017","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:44.3646643+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"263a927e5d6809a2cae59f0577b0f486","SpanId":"8a23f169efac6f1d","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000017","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:44.3650164+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"263a927e5d6809a2cae59f0577b0f486","SpanId":"8a23f169efac6f1d","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000017","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:44.3651346+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"263a927e5d6809a2cae59f0577b0f486","SpanId":"8a23f169efac6f1d","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000017","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:44.3652468+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"263a927e5d6809a2cae59f0577b0f486","SpanId":"8a23f169efac6f1d","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000017","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:44.3655150+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"263a927e5d6809a2cae59f0577b0f486","SpanId":"8a23f169efac6f1d","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000017","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:44.3657223+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"263a927e5d6809a2cae59f0577b0f486","SpanId":"8a23f169efac6f1d","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":9.195,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CT:00000017","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:44.3659161+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"263a927e5d6809a2cae59f0577b0f486","SpanId":"8a23f169efac6f1d","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CT:00000017","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:44.3661793+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"263a927e5d6809a2cae59f0577b0f486","SpanId":"8a23f169efac6f1d","Properties":{"ElapsedMilliseconds":342.7349,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:00000017","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:47.0202006+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"48ce9084eef478a25fe00c498798a045","SpanId":"029f9bb9101f494c","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:00000018","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:47.0205423+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"48ce9084eef478a25fe00c498798a045","SpanId":"029f9bb9101f494c","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CT:00000018","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:47.0219373+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"48ce9084eef478a25fe00c498798a045","SpanId":"029f9bb9101f494c","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CT:00000018","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:47.0223785+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"48ce9084eef478a25fe00c498798a045","SpanId":"029f9bb9101f494c","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CT:00000018","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:47.1219969+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"48ce9084eef478a25fe00c498798a045","SpanId":"029f9bb9101f494c","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000018","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:47.1228727+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"48ce9084eef478a25fe00c498798a045","SpanId":"029f9bb9101f494c","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000018","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:47.1235909+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"48ce9084eef478a25fe00c498798a045","SpanId":"029f9bb9101f494c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000018","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:47.1238011+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"48ce9084eef478a25fe00c498798a045","SpanId":"029f9bb9101f494c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000018","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:47.1247147+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"48ce9084eef478a25fe00c498798a045","SpanId":"029f9bb9101f494c","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000018","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:47.1251770+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"48ce9084eef478a25fe00c498798a045","SpanId":"029f9bb9101f494c","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000018","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:47.1253548+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"48ce9084eef478a25fe00c498798a045","SpanId":"029f9bb9101f494c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000018","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:47.1263441+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"48ce9084eef478a25fe00c498798a045","SpanId":"029f9bb9101f494c","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000018","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:47.1271645+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"48ce9084eef478a25fe00c498798a045","SpanId":"029f9bb9101f494c","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000018","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:47.1282727+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"48ce9084eef478a25fe00c498798a045","SpanId":"029f9bb9101f494c","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000018","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:47.1286020+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"48ce9084eef478a25fe00c498798a045","SpanId":"029f9bb9101f494c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000018","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:47.1287280+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"48ce9084eef478a25fe00c498798a045","SpanId":"029f9bb9101f494c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000018","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:47.1288682+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"48ce9084eef478a25fe00c498798a045","SpanId":"029f9bb9101f494c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000018","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:47.1290688+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"48ce9084eef478a25fe00c498798a045","SpanId":"029f9bb9101f494c","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:00000018","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:47.1292840+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"48ce9084eef478a25fe00c498798a045","SpanId":"029f9bb9101f494c","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.6443,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CT:00000018","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:47.1294487+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"48ce9084eef478a25fe00c498798a045","SpanId":"029f9bb9101f494c","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CT:00000018","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:47.1296842+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"48ce9084eef478a25fe00c498798a045","SpanId":"029f9bb9101f494c","Properties":{"ElapsedMilliseconds":109.4839,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:00000018","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:50.0204185+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"bc08bf34c7a6918999be3383c330c196","SpanId":"eaa4a359f333bd06","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:00000019","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:50.0209754+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"bc08bf34c7a6918999be3383c330c196","SpanId":"eaa4a359f333bd06","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CT:00000019","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:50.0213462+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"bc08bf34c7a6918999be3383c330c196","SpanId":"eaa4a359f333bd06","Properties":{"ElapsedMilliseconds":0.9286,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:00000019","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:50.0239316+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"a064ff4c0b32eb2888a86b111db5a91e","SpanId":"78c39d003359a92c","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:0000001A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:50.0242467+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"a064ff4c0b32eb2888a86b111db5a91e","SpanId":"78c39d003359a92c","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CT:0000001A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:50.0257439+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"a064ff4c0b32eb2888a86b111db5a91e","SpanId":"78c39d003359a92c","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CT:0000001A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:50.0260813+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"a064ff4c0b32eb2888a86b111db5a91e","SpanId":"78c39d003359a92c","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CT:0000001A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:50.0262453+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"a064ff4c0b32eb2888a86b111db5a91e","SpanId":"78c39d003359a92c","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:50.0265753+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"a064ff4c0b32eb2888a86b111db5a91e","SpanId":"78c39d003359a92c","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:50.0267090+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"a064ff4c0b32eb2888a86b111db5a91e","SpanId":"78c39d003359a92c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:50.0268263+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"a064ff4c0b32eb2888a86b111db5a91e","SpanId":"78c39d003359a92c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:50.0275713+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"a064ff4c0b32eb2888a86b111db5a91e","SpanId":"78c39d003359a92c","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:50.0279306+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"a064ff4c0b32eb2888a86b111db5a91e","SpanId":"78c39d003359a92c","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:50.0280664+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"a064ff4c0b32eb2888a86b111db5a91e","SpanId":"78c39d003359a92c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:50.0289537+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"a064ff4c0b32eb2888a86b111db5a91e","SpanId":"78c39d003359a92c","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:50.0298756+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"a064ff4c0b32eb2888a86b111db5a91e","SpanId":"78c39d003359a92c","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:50.0310624+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"a064ff4c0b32eb2888a86b111db5a91e","SpanId":"78c39d003359a92c","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:50.0314163+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"a064ff4c0b32eb2888a86b111db5a91e","SpanId":"78c39d003359a92c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:50.0315417+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"a064ff4c0b32eb2888a86b111db5a91e","SpanId":"78c39d003359a92c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:50.0316521+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"a064ff4c0b32eb2888a86b111db5a91e","SpanId":"78c39d003359a92c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:50.0319146+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"a064ff4c0b32eb2888a86b111db5a91e","SpanId":"78c39d003359a92c","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:50.0321007+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"a064ff4c0b32eb2888a86b111db5a91e","SpanId":"78c39d003359a92c","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.6628,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CT:0000001A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:50.0322614+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"a064ff4c0b32eb2888a86b111db5a91e","SpanId":"78c39d003359a92c","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CT:0000001A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:50.0324428+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"a064ff4c0b32eb2888a86b111db5a91e","SpanId":"78c39d003359a92c","Properties":{"ElapsedMilliseconds":8.5101,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:0000001A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:53.0202509+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"9ffcb07794c1345a3c055ad2d56e6075","SpanId":"354812d26e5a559e","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:0000001B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:53.0206337+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"9ffcb07794c1345a3c055ad2d56e6075","SpanId":"354812d26e5a559e","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CT:0000001B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:53.0220026+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"9ffcb07794c1345a3c055ad2d56e6075","SpanId":"354812d26e5a559e","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CT:0000001B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:53.0223673+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"9ffcb07794c1345a3c055ad2d56e6075","SpanId":"354812d26e5a559e","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CT:0000001B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:53.0225300+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"9ffcb07794c1345a3c055ad2d56e6075","SpanId":"354812d26e5a559e","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:53.0228654+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"9ffcb07794c1345a3c055ad2d56e6075","SpanId":"354812d26e5a559e","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:53.0230048+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"9ffcb07794c1345a3c055ad2d56e6075","SpanId":"354812d26e5a559e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:53.0231268+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"9ffcb07794c1345a3c055ad2d56e6075","SpanId":"354812d26e5a559e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:53.0238461+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"9ffcb07794c1345a3c055ad2d56e6075","SpanId":"354812d26e5a559e","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:53.0241776+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"9ffcb07794c1345a3c055ad2d56e6075","SpanId":"354812d26e5a559e","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:53.0242998+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"9ffcb07794c1345a3c055ad2d56e6075","SpanId":"354812d26e5a559e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:53.0251435+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"9ffcb07794c1345a3c055ad2d56e6075","SpanId":"354812d26e5a559e","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:53.0260387+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"9ffcb07794c1345a3c055ad2d56e6075","SpanId":"354812d26e5a559e","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:53.0272105+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"9ffcb07794c1345a3c055ad2d56e6075","SpanId":"354812d26e5a559e","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:53.0286648+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"9ffcb07794c1345a3c055ad2d56e6075","SpanId":"354812d26e5a559e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:53.0287906+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"9ffcb07794c1345a3c055ad2d56e6075","SpanId":"354812d26e5a559e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:53.0289611+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"9ffcb07794c1345a3c055ad2d56e6075","SpanId":"354812d26e5a559e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:53.0291781+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"9ffcb07794c1345a3c055ad2d56e6075","SpanId":"354812d26e5a559e","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:53.0294139+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"9ffcb07794c1345a3c055ad2d56e6075","SpanId":"354812d26e5a559e","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.6997,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CT:0000001B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:53.0295689+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"9ffcb07794c1345a3c055ad2d56e6075","SpanId":"354812d26e5a559e","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CT:0000001B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:53.0297423+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"9ffcb07794c1345a3c055ad2d56e6075","SpanId":"354812d26e5a559e","Properties":{"ElapsedMilliseconds":9.4946,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:0000001B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:56.0206311+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"6a134f9391c39138fe19a5c05f62a71a","SpanId":"0afba7e4386dd902","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:0000001C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:56.0209789+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"6a134f9391c39138fe19a5c05f62a71a","SpanId":"0afba7e4386dd902","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CT:0000001C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:56.0212814+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"6a134f9391c39138fe19a5c05f62a71a","SpanId":"0afba7e4386dd902","Properties":{"ElapsedMilliseconds":0.653,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:0000001C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:56.0237825+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"8b4e4837fa663e56b0cd6ad3830aed19","SpanId":"4560227c7020ab3e","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:0000001D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:56.0240482+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"8b4e4837fa663e56b0cd6ad3830aed19","SpanId":"4560227c7020ab3e","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CT:0000001D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:56.0255074+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"8b4e4837fa663e56b0cd6ad3830aed19","SpanId":"4560227c7020ab3e","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CT:0000001D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:56.0258283+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"8b4e4837fa663e56b0cd6ad3830aed19","SpanId":"4560227c7020ab3e","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CT:0000001D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:56.0259894+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"8b4e4837fa663e56b0cd6ad3830aed19","SpanId":"4560227c7020ab3e","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:56.0263745+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"8b4e4837fa663e56b0cd6ad3830aed19","SpanId":"4560227c7020ab3e","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:56.0265061+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"8b4e4837fa663e56b0cd6ad3830aed19","SpanId":"4560227c7020ab3e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:56.0266490+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"8b4e4837fa663e56b0cd6ad3830aed19","SpanId":"4560227c7020ab3e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:56.0273554+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"8b4e4837fa663e56b0cd6ad3830aed19","SpanId":"4560227c7020ab3e","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:56.0276460+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"8b4e4837fa663e56b0cd6ad3830aed19","SpanId":"4560227c7020ab3e","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:56.0277719+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"8b4e4837fa663e56b0cd6ad3830aed19","SpanId":"4560227c7020ab3e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:56.0286364+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"8b4e4837fa663e56b0cd6ad3830aed19","SpanId":"4560227c7020ab3e","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:56.0294353+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"8b4e4837fa663e56b0cd6ad3830aed19","SpanId":"4560227c7020ab3e","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:56.0306949+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"8b4e4837fa663e56b0cd6ad3830aed19","SpanId":"4560227c7020ab3e","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:56.0310228+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"8b4e4837fa663e56b0cd6ad3830aed19","SpanId":"4560227c7020ab3e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:56.0311403+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"8b4e4837fa663e56b0cd6ad3830aed19","SpanId":"4560227c7020ab3e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:56.0312625+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"8b4e4837fa663e56b0cd6ad3830aed19","SpanId":"4560227c7020ab3e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:56.0314690+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"8b4e4837fa663e56b0cd6ad3830aed19","SpanId":"4560227c7020ab3e","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:56.0316780+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"8b4e4837fa663e56b0cd6ad3830aed19","SpanId":"4560227c7020ab3e","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.4805,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CT:0000001D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:56.0318576+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"8b4e4837fa663e56b0cd6ad3830aed19","SpanId":"4560227c7020ab3e","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CT:0000001D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:56.0320923+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"8b4e4837fa663e56b0cd6ad3830aed19","SpanId":"4560227c7020ab3e","Properties":{"ElapsedMilliseconds":8.3092,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:0000001D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:59.0205904+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"136c5db11615553ee8c7a1d0070cfa43","SpanId":"dcb131b10dc429c9","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:0000001E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:59.0209846+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"136c5db11615553ee8c7a1d0070cfa43","SpanId":"dcb131b10dc429c9","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CT:0000001E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:59.0226782+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"136c5db11615553ee8c7a1d0070cfa43","SpanId":"dcb131b10dc429c9","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CT:0000001E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:59.0231282+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"136c5db11615553ee8c7a1d0070cfa43","SpanId":"dcb131b10dc429c9","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CT:0000001E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:59.0233213+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"136c5db11615553ee8c7a1d0070cfa43","SpanId":"dcb131b10dc429c9","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:59.0237643+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"136c5db11615553ee8c7a1d0070cfa43","SpanId":"dcb131b10dc429c9","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:59.0239135+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"136c5db11615553ee8c7a1d0070cfa43","SpanId":"dcb131b10dc429c9","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:59.0240486+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"136c5db11615553ee8c7a1d0070cfa43","SpanId":"dcb131b10dc429c9","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:59.0249443+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"136c5db11615553ee8c7a1d0070cfa43","SpanId":"dcb131b10dc429c9","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:59.0252989+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"136c5db11615553ee8c7a1d0070cfa43","SpanId":"dcb131b10dc429c9","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:59.0254715+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"136c5db11615553ee8c7a1d0070cfa43","SpanId":"dcb131b10dc429c9","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:59.0266454+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"136c5db11615553ee8c7a1d0070cfa43","SpanId":"dcb131b10dc429c9","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:59.0278490+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"136c5db11615553ee8c7a1d0070cfa43","SpanId":"dcb131b10dc429c9","Properties":{"elapsed":"1","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:59.1244516+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"136c5db11615553ee8c7a1d0070cfa43","SpanId":"dcb131b10dc429c9","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:59.1248460+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"136c5db11615553ee8c7a1d0070cfa43","SpanId":"dcb131b10dc429c9","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:59.1251920+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"136c5db11615553ee8c7a1d0070cfa43","SpanId":"dcb131b10dc429c9","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:59.1253416+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"136c5db11615553ee8c7a1d0070cfa43","SpanId":"dcb131b10dc429c9","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:36:59.1255524+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"136c5db11615553ee8c7a1d0070cfa43","SpanId":"dcb131b10dc429c9","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CT:0000001E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:59.1257920+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"136c5db11615553ee8c7a1d0070cfa43","SpanId":"dcb131b10dc429c9","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":102.2046,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CT:0000001E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:59.1496786+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"136c5db11615553ee8c7a1d0070cfa43","SpanId":"dcb131b10dc429c9","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CT:0000001E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:36:59.1502915+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"136c5db11615553ee8c7a1d0070cfa43","SpanId":"dcb131b10dc429c9","Properties":{"ElapsedMilliseconds":129.6792,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CT:0000001E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CT"}}
{"Timestamp":"2025-09-18T19:37:02.0285192+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"119b6c6137ece054ebb46fbb358497cd","SpanId":"5429bdf7223c7626","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000001","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:02.0288432+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"119b6c6137ece054ebb46fbb358497cd","SpanId":"5429bdf7223c7626","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000001","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:02.0290962+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"119b6c6137ece054ebb46fbb358497cd","SpanId":"5429bdf7223c7626","Properties":{"ElapsedMilliseconds":0.5674,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000001","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:02.0316768+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"c3036ea940f1c9bb8d342c993a902103","SpanId":"fb4640fe7077f85d","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:02.0320446+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"c3036ea940f1c9bb8d342c993a902103","SpanId":"fb4640fe7077f85d","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:02.0333399+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c3036ea940f1c9bb8d342c993a902103","SpanId":"fb4640fe7077f85d","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:02.0337626+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"c3036ea940f1c9bb8d342c993a902103","SpanId":"fb4640fe7077f85d","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:02.0339410+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"c3036ea940f1c9bb8d342c993a902103","SpanId":"fb4640fe7077f85d","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:02.0343434+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"c3036ea940f1c9bb8d342c993a902103","SpanId":"fb4640fe7077f85d","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:02.0345013+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"c3036ea940f1c9bb8d342c993a902103","SpanId":"fb4640fe7077f85d","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:02.0346878+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"c3036ea940f1c9bb8d342c993a902103","SpanId":"fb4640fe7077f85d","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:02.0355641+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c3036ea940f1c9bb8d342c993a902103","SpanId":"fb4640fe7077f85d","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:02.0359210+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"c3036ea940f1c9bb8d342c993a902103","SpanId":"fb4640fe7077f85d","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:02.0361024+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"c3036ea940f1c9bb8d342c993a902103","SpanId":"fb4640fe7077f85d","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:02.0371675+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c3036ea940f1c9bb8d342c993a902103","SpanId":"fb4640fe7077f85d","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:02.0382991+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c3036ea940f1c9bb8d342c993a902103","SpanId":"fb4640fe7077f85d","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:02.0397576+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c3036ea940f1c9bb8d342c993a902103","SpanId":"fb4640fe7077f85d","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:02.0400789+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"c3036ea940f1c9bb8d342c993a902103","SpanId":"fb4640fe7077f85d","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:02.0402599+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"c3036ea940f1c9bb8d342c993a902103","SpanId":"fb4640fe7077f85d","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:02.0404708+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"c3036ea940f1c9bb8d342c993a902103","SpanId":"fb4640fe7077f85d","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:02.0407400+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"c3036ea940f1c9bb8d342c993a902103","SpanId":"fb4640fe7077f85d","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:02.0410073+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"c3036ea940f1c9bb8d342c993a902103","SpanId":"fb4640fe7077f85d","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.8349,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:02.0412001+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"c3036ea940f1c9bb8d342c993a902103","SpanId":"fb4640fe7077f85d","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:02.0414320+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"c3036ea940f1c9bb8d342c993a902103","SpanId":"fb4640fe7077f85d","Properties":{"ElapsedMilliseconds":9.7551,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000002","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:05.0205943+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"62df710f0647e2e78541f66306b91658","SpanId":"f7e1108a44797a06","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000003","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:05.0210258+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"62df710f0647e2e78541f66306b91658","SpanId":"f7e1108a44797a06","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000003","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:05.0225130+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"62df710f0647e2e78541f66306b91658","SpanId":"f7e1108a44797a06","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000003","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:05.0232037+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"62df710f0647e2e78541f66306b91658","SpanId":"f7e1108a44797a06","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000003","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:05.0234079+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"62df710f0647e2e78541f66306b91658","SpanId":"f7e1108a44797a06","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000003","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:05.0237370+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"62df710f0647e2e78541f66306b91658","SpanId":"f7e1108a44797a06","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000003","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:05.0238614+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"62df710f0647e2e78541f66306b91658","SpanId":"f7e1108a44797a06","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000003","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:05.0239934+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"62df710f0647e2e78541f66306b91658","SpanId":"f7e1108a44797a06","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000003","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:05.0248322+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"62df710f0647e2e78541f66306b91658","SpanId":"f7e1108a44797a06","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000003","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:05.0251748+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"62df710f0647e2e78541f66306b91658","SpanId":"f7e1108a44797a06","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000003","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:05.0253463+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"62df710f0647e2e78541f66306b91658","SpanId":"f7e1108a44797a06","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000003","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:05.0263536+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"62df710f0647e2e78541f66306b91658","SpanId":"f7e1108a44797a06","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000003","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:05.0274711+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"62df710f0647e2e78541f66306b91658","SpanId":"f7e1108a44797a06","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000003","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:05.0288253+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"62df710f0647e2e78541f66306b91658","SpanId":"f7e1108a44797a06","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000003","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:05.0291202+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"62df710f0647e2e78541f66306b91658","SpanId":"f7e1108a44797a06","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000003","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:05.0292335+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"62df710f0647e2e78541f66306b91658","SpanId":"f7e1108a44797a06","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000003","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:05.0312650+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"62df710f0647e2e78541f66306b91658","SpanId":"f7e1108a44797a06","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000003","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:05.0315100+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"62df710f0647e2e78541f66306b91658","SpanId":"f7e1108a44797a06","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000003","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:05.0317234+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"62df710f0647e2e78541f66306b91658","SpanId":"f7e1108a44797a06","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":8.1316,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000003","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:05.0318819+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"62df710f0647e2e78541f66306b91658","SpanId":"f7e1108a44797a06","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000003","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:05.0322076+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"62df710f0647e2e78541f66306b91658","SpanId":"f7e1108a44797a06","Properties":{"ElapsedMilliseconds":11.606,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000003","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:08.0204139+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"b6db2d7456daa9d2559e1810cee539d3","SpanId":"36b5c48bf00471c3","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000004","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:08.0209622+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"b6db2d7456daa9d2559e1810cee539d3","SpanId":"36b5c48bf00471c3","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000004","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:08.0212079+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"b6db2d7456daa9d2559e1810cee539d3","SpanId":"36b5c48bf00471c3","Properties":{"ElapsedMilliseconds":0.8446,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000004","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:08.0235857+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"aba8cc9455cf6d052fded8dc0a9635d0","SpanId":"c3982a1c1be2ac91","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000005","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:08.0238552+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"aba8cc9455cf6d052fded8dc0a9635d0","SpanId":"c3982a1c1be2ac91","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000005","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:08.0255531+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"aba8cc9455cf6d052fded8dc0a9635d0","SpanId":"c3982a1c1be2ac91","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000005","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:08.0259783+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"aba8cc9455cf6d052fded8dc0a9635d0","SpanId":"c3982a1c1be2ac91","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000005","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:08.0261499+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"aba8cc9455cf6d052fded8dc0a9635d0","SpanId":"c3982a1c1be2ac91","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000005","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:08.0265314+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"aba8cc9455cf6d052fded8dc0a9635d0","SpanId":"c3982a1c1be2ac91","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000005","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:08.0266684+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"aba8cc9455cf6d052fded8dc0a9635d0","SpanId":"c3982a1c1be2ac91","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000005","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:08.0267919+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"aba8cc9455cf6d052fded8dc0a9635d0","SpanId":"c3982a1c1be2ac91","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000005","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:08.0275688+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"aba8cc9455cf6d052fded8dc0a9635d0","SpanId":"c3982a1c1be2ac91","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000005","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:08.0279281+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"aba8cc9455cf6d052fded8dc0a9635d0","SpanId":"c3982a1c1be2ac91","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000005","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:08.0281094+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"aba8cc9455cf6d052fded8dc0a9635d0","SpanId":"c3982a1c1be2ac91","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000005","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:08.0291168+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"aba8cc9455cf6d052fded8dc0a9635d0","SpanId":"c3982a1c1be2ac91","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000005","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:08.0301504+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"aba8cc9455cf6d052fded8dc0a9635d0","SpanId":"c3982a1c1be2ac91","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000005","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:08.0313675+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"aba8cc9455cf6d052fded8dc0a9635d0","SpanId":"c3982a1c1be2ac91","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000005","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:08.0317062+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"aba8cc9455cf6d052fded8dc0a9635d0","SpanId":"c3982a1c1be2ac91","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000005","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:08.0318149+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"aba8cc9455cf6d052fded8dc0a9635d0","SpanId":"c3982a1c1be2ac91","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000005","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:08.0319258+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"aba8cc9455cf6d052fded8dc0a9635d0","SpanId":"c3982a1c1be2ac91","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000005","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:08.0321359+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"aba8cc9455cf6d052fded8dc0a9635d0","SpanId":"c3982a1c1be2ac91","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000005","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:08.0323573+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"aba8cc9455cf6d052fded8dc0a9635d0","SpanId":"c3982a1c1be2ac91","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.9678,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000005","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:08.0325503+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"aba8cc9455cf6d052fded8dc0a9635d0","SpanId":"c3982a1c1be2ac91","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000005","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:08.0327788+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"aba8cc9455cf6d052fded8dc0a9635d0","SpanId":"c3982a1c1be2ac91","Properties":{"ElapsedMilliseconds":9.1854,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000005","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:11.0210733+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"f135b3034fb6cd1ca70f5df11abc14c1","SpanId":"aa6985f72c75a269","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000006","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:11.0214510+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"f135b3034fb6cd1ca70f5df11abc14c1","SpanId":"aa6985f72c75a269","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000006","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:11.0227991+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"f135b3034fb6cd1ca70f5df11abc14c1","SpanId":"aa6985f72c75a269","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000006","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:11.0232484+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"f135b3034fb6cd1ca70f5df11abc14c1","SpanId":"aa6985f72c75a269","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000006","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:11.0234305+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"f135b3034fb6cd1ca70f5df11abc14c1","SpanId":"aa6985f72c75a269","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000006","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:11.0238332+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"f135b3034fb6cd1ca70f5df11abc14c1","SpanId":"aa6985f72c75a269","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000006","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:11.0239706+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"f135b3034fb6cd1ca70f5df11abc14c1","SpanId":"aa6985f72c75a269","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000006","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:11.0240941+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"f135b3034fb6cd1ca70f5df11abc14c1","SpanId":"aa6985f72c75a269","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000006","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:11.0248806+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"f135b3034fb6cd1ca70f5df11abc14c1","SpanId":"aa6985f72c75a269","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000006","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:11.0252069+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"f135b3034fb6cd1ca70f5df11abc14c1","SpanId":"aa6985f72c75a269","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000006","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:11.0254161+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"f135b3034fb6cd1ca70f5df11abc14c1","SpanId":"aa6985f72c75a269","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000006","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:11.0264091+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"f135b3034fb6cd1ca70f5df11abc14c1","SpanId":"aa6985f72c75a269","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000006","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:11.0276259+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"f135b3034fb6cd1ca70f5df11abc14c1","SpanId":"aa6985f72c75a269","Properties":{"elapsed":"1","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000006","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:11.0290059+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"f135b3034fb6cd1ca70f5df11abc14c1","SpanId":"aa6985f72c75a269","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000006","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:11.0293784+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"f135b3034fb6cd1ca70f5df11abc14c1","SpanId":"aa6985f72c75a269","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000006","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:11.0295142+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"f135b3034fb6cd1ca70f5df11abc14c1","SpanId":"aa6985f72c75a269","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000006","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:11.0296663+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"f135b3034fb6cd1ca70f5df11abc14c1","SpanId":"aa6985f72c75a269","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000006","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:11.0299011+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"f135b3034fb6cd1ca70f5df11abc14c1","SpanId":"aa6985f72c75a269","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000006","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:11.0301540+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"f135b3034fb6cd1ca70f5df11abc14c1","SpanId":"aa6985f72c75a269","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.4709,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000006","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:11.0305875+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"f135b3034fb6cd1ca70f5df11abc14c1","SpanId":"aa6985f72c75a269","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000006","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:11.0308785+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"f135b3034fb6cd1ca70f5df11abc14c1","SpanId":"aa6985f72c75a269","Properties":{"ElapsedMilliseconds":9.8056,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000006","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:14.0207195+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"d6d461ba2b1b6b1f8b070b37cc425d60","SpanId":"a7ae6ca2ffebf21e","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000007","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:14.0211157+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"d6d461ba2b1b6b1f8b070b37cc425d60","SpanId":"a7ae6ca2ffebf21e","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000007","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:14.0213561+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"d6d461ba2b1b6b1f8b070b37cc425d60","SpanId":"a7ae6ca2ffebf21e","Properties":{"ElapsedMilliseconds":0.6532,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000007","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:14.0238397+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"55f0eb4f4e272ddd1c26878cde8dbb36","SpanId":"1c3e7ddcfe23b409","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000008","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:14.0241428+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"55f0eb4f4e272ddd1c26878cde8dbb36","SpanId":"1c3e7ddcfe23b409","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000008","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:14.0280443+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"55f0eb4f4e272ddd1c26878cde8dbb36","SpanId":"1c3e7ddcfe23b409","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000008","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:14.0284073+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"55f0eb4f4e272ddd1c26878cde8dbb36","SpanId":"1c3e7ddcfe23b409","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000008","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:14.0285851+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"55f0eb4f4e272ddd1c26878cde8dbb36","SpanId":"1c3e7ddcfe23b409","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000008","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:14.0289247+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"55f0eb4f4e272ddd1c26878cde8dbb36","SpanId":"1c3e7ddcfe23b409","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000008","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:14.0290619+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"55f0eb4f4e272ddd1c26878cde8dbb36","SpanId":"1c3e7ddcfe23b409","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000008","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:14.0292287+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"55f0eb4f4e272ddd1c26878cde8dbb36","SpanId":"1c3e7ddcfe23b409","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000008","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:14.0300765+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"55f0eb4f4e272ddd1c26878cde8dbb36","SpanId":"1c3e7ddcfe23b409","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000008","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:14.0304784+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"55f0eb4f4e272ddd1c26878cde8dbb36","SpanId":"1c3e7ddcfe23b409","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000008","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:14.0306010+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"55f0eb4f4e272ddd1c26878cde8dbb36","SpanId":"1c3e7ddcfe23b409","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000008","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:14.0315815+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"55f0eb4f4e272ddd1c26878cde8dbb36","SpanId":"1c3e7ddcfe23b409","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000008","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:14.0327072+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"55f0eb4f4e272ddd1c26878cde8dbb36","SpanId":"1c3e7ddcfe23b409","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000008","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:14.0340134+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"55f0eb4f4e272ddd1c26878cde8dbb36","SpanId":"1c3e7ddcfe23b409","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000008","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:14.0343222+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"55f0eb4f4e272ddd1c26878cde8dbb36","SpanId":"1c3e7ddcfe23b409","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000008","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:14.0344439+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"55f0eb4f4e272ddd1c26878cde8dbb36","SpanId":"1c3e7ddcfe23b409","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000008","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:14.0346213+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"55f0eb4f4e272ddd1c26878cde8dbb36","SpanId":"1c3e7ddcfe23b409","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000008","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:14.0348873+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"55f0eb4f4e272ddd1c26878cde8dbb36","SpanId":"1c3e7ddcfe23b409","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000008","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:14.0365579+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"55f0eb4f4e272ddd1c26878cde8dbb36","SpanId":"1c3e7ddcfe23b409","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":7.7609,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000008","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:14.0367400+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"55f0eb4f4e272ddd1c26878cde8dbb36","SpanId":"1c3e7ddcfe23b409","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000008","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:14.0369551+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"55f0eb4f4e272ddd1c26878cde8dbb36","SpanId":"1c3e7ddcfe23b409","Properties":{"ElapsedMilliseconds":13.1077,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000008","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:17.0207065+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"71abfe02595e4a5ed21b08cd5a7e5a73","SpanId":"e3dde36d68f55d81","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000009","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:17.0212968+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"71abfe02595e4a5ed21b08cd5a7e5a73","SpanId":"e3dde36d68f55d81","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000009","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:17.0228251+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"71abfe02595e4a5ed21b08cd5a7e5a73","SpanId":"e3dde36d68f55d81","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000009","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:17.0232074+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"71abfe02595e4a5ed21b08cd5a7e5a73","SpanId":"e3dde36d68f55d81","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000009","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:17.0233799+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"71abfe02595e4a5ed21b08cd5a7e5a73","SpanId":"e3dde36d68f55d81","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000009","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:17.0236942+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"71abfe02595e4a5ed21b08cd5a7e5a73","SpanId":"e3dde36d68f55d81","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000009","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:17.0238401+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"71abfe02595e4a5ed21b08cd5a7e5a73","SpanId":"e3dde36d68f55d81","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000009","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:17.0240190+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"71abfe02595e4a5ed21b08cd5a7e5a73","SpanId":"e3dde36d68f55d81","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000009","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:17.0247437+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"71abfe02595e4a5ed21b08cd5a7e5a73","SpanId":"e3dde36d68f55d81","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000009","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:17.0252023+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"71abfe02595e4a5ed21b08cd5a7e5a73","SpanId":"e3dde36d68f55d81","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000009","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:17.0253499+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"71abfe02595e4a5ed21b08cd5a7e5a73","SpanId":"e3dde36d68f55d81","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000009","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:17.0262684+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"71abfe02595e4a5ed21b08cd5a7e5a73","SpanId":"e3dde36d68f55d81","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000009","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:17.0274123+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"71abfe02595e4a5ed21b08cd5a7e5a73","SpanId":"e3dde36d68f55d81","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000009","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:17.0286811+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"71abfe02595e4a5ed21b08cd5a7e5a73","SpanId":"e3dde36d68f55d81","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000009","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:17.0300234+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"71abfe02595e4a5ed21b08cd5a7e5a73","SpanId":"e3dde36d68f55d81","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000009","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:17.0301709+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"71abfe02595e4a5ed21b08cd5a7e5a73","SpanId":"e3dde36d68f55d81","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000009","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:17.0303656+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"71abfe02595e4a5ed21b08cd5a7e5a73","SpanId":"e3dde36d68f55d81","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000009","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:17.0306156+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"71abfe02595e4a5ed21b08cd5a7e5a73","SpanId":"e3dde36d68f55d81","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000009","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:17.0308307+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"71abfe02595e4a5ed21b08cd5a7e5a73","SpanId":"e3dde36d68f55d81","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":7.2629,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000009","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:17.0309931+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"71abfe02595e4a5ed21b08cd5a7e5a73","SpanId":"e3dde36d68f55d81","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000009","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:17.0311864+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"71abfe02595e4a5ed21b08cd5a7e5a73","SpanId":"e3dde36d68f55d81","Properties":{"ElapsedMilliseconds":10.483,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000009","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:20.0206660+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"f800dd529794d223f2767b8c3662e9ce","SpanId":"544b294b8cc0082e","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000000A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:20.0210565+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"f800dd529794d223f2767b8c3662e9ce","SpanId":"544b294b8cc0082e","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000000A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:20.0213622+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"f800dd529794d223f2767b8c3662e9ce","SpanId":"544b294b8cc0082e","Properties":{"ElapsedMilliseconds":0.6924,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000000A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:20.0236401+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"025369be64e81cdaa1053ea88a6fb7ec","SpanId":"25523011c1172ec7","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000000B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:20.0238988+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"025369be64e81cdaa1053ea88a6fb7ec","SpanId":"25523011c1172ec7","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000000B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:20.0252176+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"025369be64e81cdaa1053ea88a6fb7ec","SpanId":"25523011c1172ec7","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:0000000B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:20.0256940+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"025369be64e81cdaa1053ea88a6fb7ec","SpanId":"25523011c1172ec7","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000000B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:20.0260069+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"025369be64e81cdaa1053ea88a6fb7ec","SpanId":"25523011c1172ec7","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:20.0263280+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"025369be64e81cdaa1053ea88a6fb7ec","SpanId":"25523011c1172ec7","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:20.0264532+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"025369be64e81cdaa1053ea88a6fb7ec","SpanId":"25523011c1172ec7","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:20.0265803+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"025369be64e81cdaa1053ea88a6fb7ec","SpanId":"25523011c1172ec7","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:20.0273434+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"025369be64e81cdaa1053ea88a6fb7ec","SpanId":"25523011c1172ec7","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:20.0276516+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"025369be64e81cdaa1053ea88a6fb7ec","SpanId":"25523011c1172ec7","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:20.0278370+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"025369be64e81cdaa1053ea88a6fb7ec","SpanId":"25523011c1172ec7","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:20.0287636+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"025369be64e81cdaa1053ea88a6fb7ec","SpanId":"25523011c1172ec7","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:20.0298782+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"025369be64e81cdaa1053ea88a6fb7ec","SpanId":"25523011c1172ec7","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:20.0311171+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"025369be64e81cdaa1053ea88a6fb7ec","SpanId":"25523011c1172ec7","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:20.0315388+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"025369be64e81cdaa1053ea88a6fb7ec","SpanId":"25523011c1172ec7","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:20.0316500+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"025369be64e81cdaa1053ea88a6fb7ec","SpanId":"25523011c1172ec7","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:20.0317522+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"025369be64e81cdaa1053ea88a6fb7ec","SpanId":"25523011c1172ec7","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:20.0320529+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"025369be64e81cdaa1053ea88a6fb7ec","SpanId":"25523011c1172ec7","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:20.0322746+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"025369be64e81cdaa1053ea88a6fb7ec","SpanId":"25523011c1172ec7","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.0751,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:0000000B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:20.0324908+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"025369be64e81cdaa1053ea88a6fb7ec","SpanId":"25523011c1172ec7","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000000B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:20.0326540+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"025369be64e81cdaa1053ea88a6fb7ec","SpanId":"25523011c1172ec7","Properties":{"ElapsedMilliseconds":9.0101,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000000B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:23.0204035+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"5e1a46741e9d7a6054b003b5621f0cda","SpanId":"b36cf50c0cee631b","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000000C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:23.0207791+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"5e1a46741e9d7a6054b003b5621f0cda","SpanId":"b36cf50c0cee631b","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000000C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:23.0220375+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"5e1a46741e9d7a6054b003b5621f0cda","SpanId":"b36cf50c0cee631b","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:0000000C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:23.0223860+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"5e1a46741e9d7a6054b003b5621f0cda","SpanId":"b36cf50c0cee631b","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000000C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:23.0226425+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"5e1a46741e9d7a6054b003b5621f0cda","SpanId":"b36cf50c0cee631b","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:23.0229890+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"5e1a46741e9d7a6054b003b5621f0cda","SpanId":"b36cf50c0cee631b","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:23.0231149+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"5e1a46741e9d7a6054b003b5621f0cda","SpanId":"b36cf50c0cee631b","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:23.0232534+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"5e1a46741e9d7a6054b003b5621f0cda","SpanId":"b36cf50c0cee631b","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:23.0240469+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"5e1a46741e9d7a6054b003b5621f0cda","SpanId":"b36cf50c0cee631b","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:23.0243871+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"5e1a46741e9d7a6054b003b5621f0cda","SpanId":"b36cf50c0cee631b","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:23.0245559+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"5e1a46741e9d7a6054b003b5621f0cda","SpanId":"b36cf50c0cee631b","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:23.0254688+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"5e1a46741e9d7a6054b003b5621f0cda","SpanId":"b36cf50c0cee631b","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:23.0268221+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"5e1a46741e9d7a6054b003b5621f0cda","SpanId":"b36cf50c0cee631b","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:23.0282672+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"5e1a46741e9d7a6054b003b5621f0cda","SpanId":"b36cf50c0cee631b","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:23.0286556+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"5e1a46741e9d7a6054b003b5621f0cda","SpanId":"b36cf50c0cee631b","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:23.0288029+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"5e1a46741e9d7a6054b003b5621f0cda","SpanId":"b36cf50c0cee631b","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:23.0289346+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"5e1a46741e9d7a6054b003b5621f0cda","SpanId":"b36cf50c0cee631b","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:23.0291748+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"5e1a46741e9d7a6054b003b5621f0cda","SpanId":"b36cf50c0cee631b","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:23.0293925+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"5e1a46741e9d7a6054b003b5621f0cda","SpanId":"b36cf50c0cee631b","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.5579,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:0000000C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:23.0295986+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"5e1a46741e9d7a6054b003b5621f0cda","SpanId":"b36cf50c0cee631b","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000000C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:23.0297763+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"5e1a46741e9d7a6054b003b5621f0cda","SpanId":"b36cf50c0cee631b","Properties":{"ElapsedMilliseconds":9.3742,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000000C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:26.0208473+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"9cb4efcf82cc4095ff836e8229704606","SpanId":"1d21d5637be61ca5","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000000D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:26.0211946+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"9cb4efcf82cc4095ff836e8229704606","SpanId":"1d21d5637be61ca5","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000000D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:26.0215434+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"9cb4efcf82cc4095ff836e8229704606","SpanId":"1d21d5637be61ca5","Properties":{"ElapsedMilliseconds":0.6514,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000000D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:26.0243872+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"fe20ef1e37a4d167c98c74e276cf1de7","SpanId":"b0ac92b1d1e3671e","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000000E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:26.0249474+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"fe20ef1e37a4d167c98c74e276cf1de7","SpanId":"b0ac92b1d1e3671e","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000000E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:26.0267027+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"fe20ef1e37a4d167c98c74e276cf1de7","SpanId":"b0ac92b1d1e3671e","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:0000000E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:26.0270623+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"fe20ef1e37a4d167c98c74e276cf1de7","SpanId":"b0ac92b1d1e3671e","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000000E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:26.0272511+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"fe20ef1e37a4d167c98c74e276cf1de7","SpanId":"b0ac92b1d1e3671e","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:26.0276533+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"fe20ef1e37a4d167c98c74e276cf1de7","SpanId":"b0ac92b1d1e3671e","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:26.0277807+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"fe20ef1e37a4d167c98c74e276cf1de7","SpanId":"b0ac92b1d1e3671e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:26.0279534+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"fe20ef1e37a4d167c98c74e276cf1de7","SpanId":"b0ac92b1d1e3671e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:26.0287541+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"fe20ef1e37a4d167c98c74e276cf1de7","SpanId":"b0ac92b1d1e3671e","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:26.0290737+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"fe20ef1e37a4d167c98c74e276cf1de7","SpanId":"b0ac92b1d1e3671e","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:26.0292334+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"fe20ef1e37a4d167c98c74e276cf1de7","SpanId":"b0ac92b1d1e3671e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:26.0302379+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"fe20ef1e37a4d167c98c74e276cf1de7","SpanId":"b0ac92b1d1e3671e","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:26.0312558+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"fe20ef1e37a4d167c98c74e276cf1de7","SpanId":"b0ac92b1d1e3671e","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:26.0325504+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"fe20ef1e37a4d167c98c74e276cf1de7","SpanId":"b0ac92b1d1e3671e","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:26.0328287+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"fe20ef1e37a4d167c98c74e276cf1de7","SpanId":"b0ac92b1d1e3671e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:26.0329949+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"fe20ef1e37a4d167c98c74e276cf1de7","SpanId":"b0ac92b1d1e3671e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:26.0331194+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"fe20ef1e37a4d167c98c74e276cf1de7","SpanId":"b0ac92b1d1e3671e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:26.0333307+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"fe20ef1e37a4d167c98c74e276cf1de7","SpanId":"b0ac92b1d1e3671e","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:26.0335285+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"fe20ef1e37a4d167c98c74e276cf1de7","SpanId":"b0ac92b1d1e3671e","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.0617,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:0000000E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:26.0336770+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"fe20ef1e37a4d167c98c74e276cf1de7","SpanId":"b0ac92b1d1e3671e","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000000E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:26.0338438+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"fe20ef1e37a4d167c98c74e276cf1de7","SpanId":"b0ac92b1d1e3671e","Properties":{"ElapsedMilliseconds":9.4534,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000000E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:29.0208648+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"890aeece6e262880603a96b3310c681a","SpanId":"71988c9f2584cc2a","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000000F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:29.0213008+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"890aeece6e262880603a96b3310c681a","SpanId":"71988c9f2584cc2a","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000000F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:29.0225105+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"890aeece6e262880603a96b3310c681a","SpanId":"71988c9f2584cc2a","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:0000000F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:29.0228769+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"890aeece6e262880603a96b3310c681a","SpanId":"71988c9f2584cc2a","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000000F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:29.0230621+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"890aeece6e262880603a96b3310c681a","SpanId":"71988c9f2584cc2a","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:29.0233958+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"890aeece6e262880603a96b3310c681a","SpanId":"71988c9f2584cc2a","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:29.0235226+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"890aeece6e262880603a96b3310c681a","SpanId":"71988c9f2584cc2a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:29.0237005+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"890aeece6e262880603a96b3310c681a","SpanId":"71988c9f2584cc2a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:29.0244312+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"890aeece6e262880603a96b3310c681a","SpanId":"71988c9f2584cc2a","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:29.0247579+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"890aeece6e262880603a96b3310c681a","SpanId":"71988c9f2584cc2a","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:29.0248849+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"890aeece6e262880603a96b3310c681a","SpanId":"71988c9f2584cc2a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:29.0257729+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"890aeece6e262880603a96b3310c681a","SpanId":"71988c9f2584cc2a","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:29.0267484+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"890aeece6e262880603a96b3310c681a","SpanId":"71988c9f2584cc2a","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:29.0279654+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"890aeece6e262880603a96b3310c681a","SpanId":"71988c9f2584cc2a","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:29.0282656+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"890aeece6e262880603a96b3310c681a","SpanId":"71988c9f2584cc2a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:29.0284610+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"890aeece6e262880603a96b3310c681a","SpanId":"71988c9f2584cc2a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:29.0285810+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"890aeece6e262880603a96b3310c681a","SpanId":"71988c9f2584cc2a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:29.0287790+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"890aeece6e262880603a96b3310c681a","SpanId":"71988c9f2584cc2a","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000000F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:29.0289687+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"890aeece6e262880603a96b3310c681a","SpanId":"71988c9f2584cc2a","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.7171,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:0000000F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:29.0291286+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"890aeece6e262880603a96b3310c681a","SpanId":"71988c9f2584cc2a","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000000F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:29.0293240+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"890aeece6e262880603a96b3310c681a","SpanId":"71988c9f2584cc2a","Properties":{"ElapsedMilliseconds":8.4359,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000000F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:32.0205501+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"d1867855561b9b18ab2bfc711eb59798","SpanId":"f894afe517049bd9","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000010","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:32.1217581+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"d1867855561b9b18ab2bfc711eb59798","SpanId":"f894afe517049bd9","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000010","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:32.1220290+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"d1867855561b9b18ab2bfc711eb59798","SpanId":"f894afe517049bd9","Properties":{"ElapsedMilliseconds":101.4631,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000010","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:32.1244248+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"3a680daad094b8f3eaa82102673ca15e","SpanId":"e2e95a1e995d0459","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000011","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:32.1246870+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"3a680daad094b8f3eaa82102673ca15e","SpanId":"e2e95a1e995d0459","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000011","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:32.1260212+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3a680daad094b8f3eaa82102673ca15e","SpanId":"e2e95a1e995d0459","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000011","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:32.1265528+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"3a680daad094b8f3eaa82102673ca15e","SpanId":"e2e95a1e995d0459","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000011","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:32.1267896+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"3a680daad094b8f3eaa82102673ca15e","SpanId":"e2e95a1e995d0459","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000011","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:32.1279057+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"3a680daad094b8f3eaa82102673ca15e","SpanId":"e2e95a1e995d0459","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000011","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:32.1280684+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"3a680daad094b8f3eaa82102673ca15e","SpanId":"e2e95a1e995d0459","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000011","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:32.1282289+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"3a680daad094b8f3eaa82102673ca15e","SpanId":"e2e95a1e995d0459","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000011","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:32.1289985+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3a680daad094b8f3eaa82102673ca15e","SpanId":"e2e95a1e995d0459","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000011","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:32.1294492+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"3a680daad094b8f3eaa82102673ca15e","SpanId":"e2e95a1e995d0459","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000011","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:32.1296134+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"3a680daad094b8f3eaa82102673ca15e","SpanId":"e2e95a1e995d0459","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000011","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:32.1305581+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3a680daad094b8f3eaa82102673ca15e","SpanId":"e2e95a1e995d0459","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000011","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:32.2022140+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3a680daad094b8f3eaa82102673ca15e","SpanId":"e2e95a1e995d0459","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000011","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:32.2077041+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3a680daad094b8f3eaa82102673ca15e","SpanId":"e2e95a1e995d0459","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000011","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:32.2080903+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"3a680daad094b8f3eaa82102673ca15e","SpanId":"e2e95a1e995d0459","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000011","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:32.2081991+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"3a680daad094b8f3eaa82102673ca15e","SpanId":"e2e95a1e995d0459","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000011","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:32.2083053+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"3a680daad094b8f3eaa82102673ca15e","SpanId":"e2e95a1e995d0459","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000011","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:32.2085281+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"3a680daad094b8f3eaa82102673ca15e","SpanId":"e2e95a1e995d0459","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000011","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:32.2087777+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"3a680daad094b8f3eaa82102673ca15e","SpanId":"e2e95a1e995d0459","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":81.7916,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000011","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:32.2089412+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"3a680daad094b8f3eaa82102673ca15e","SpanId":"e2e95a1e995d0459","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000011","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:32.2091419+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"3a680daad094b8f3eaa82102673ca15e","SpanId":"e2e95a1e995d0459","Properties":{"ElapsedMilliseconds":84.714,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000011","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:35.0200836+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"713372527d498fe23239ff6e6fc7c901","SpanId":"57d40da9dedf71f5","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000012","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:35.0204669+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"713372527d498fe23239ff6e6fc7c901","SpanId":"57d40da9dedf71f5","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000012","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:35.0217768+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"713372527d498fe23239ff6e6fc7c901","SpanId":"57d40da9dedf71f5","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000012","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:35.0221961+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"713372527d498fe23239ff6e6fc7c901","SpanId":"57d40da9dedf71f5","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000012","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:35.0224197+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"713372527d498fe23239ff6e6fc7c901","SpanId":"57d40da9dedf71f5","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000012","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:35.0227460+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"713372527d498fe23239ff6e6fc7c901","SpanId":"57d40da9dedf71f5","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000012","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:35.0228634+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"713372527d498fe23239ff6e6fc7c901","SpanId":"57d40da9dedf71f5","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000012","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:35.0229880+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"713372527d498fe23239ff6e6fc7c901","SpanId":"57d40da9dedf71f5","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000012","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:35.0236966+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"713372527d498fe23239ff6e6fc7c901","SpanId":"57d40da9dedf71f5","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000012","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:35.0240625+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"713372527d498fe23239ff6e6fc7c901","SpanId":"57d40da9dedf71f5","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000012","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:35.0241992+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"713372527d498fe23239ff6e6fc7c901","SpanId":"57d40da9dedf71f5","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000012","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:35.0251218+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"713372527d498fe23239ff6e6fc7c901","SpanId":"57d40da9dedf71f5","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000012","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:35.0260615+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"713372527d498fe23239ff6e6fc7c901","SpanId":"57d40da9dedf71f5","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000012","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:35.0272597+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"713372527d498fe23239ff6e6fc7c901","SpanId":"57d40da9dedf71f5","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000012","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:35.0277889+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"713372527d498fe23239ff6e6fc7c901","SpanId":"57d40da9dedf71f5","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000012","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:35.0279367+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"713372527d498fe23239ff6e6fc7c901","SpanId":"57d40da9dedf71f5","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000012","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:35.0280466+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"713372527d498fe23239ff6e6fc7c901","SpanId":"57d40da9dedf71f5","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000012","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:35.0283038+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"713372527d498fe23239ff6e6fc7c901","SpanId":"57d40da9dedf71f5","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000012","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:35.0286459+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"713372527d498fe23239ff6e6fc7c901","SpanId":"57d40da9dedf71f5","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.0408,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000012","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:35.0288425+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"713372527d498fe23239ff6e6fc7c901","SpanId":"57d40da9dedf71f5","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000012","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:35.0290863+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"713372527d498fe23239ff6e6fc7c901","SpanId":"57d40da9dedf71f5","Properties":{"ElapsedMilliseconds":9.0055,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000012","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:38.0204395+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"23111b156be5372bca72313aab54bf33","SpanId":"66d99c1d51488adb","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000013","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:38.0210105+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"23111b156be5372bca72313aab54bf33","SpanId":"66d99c1d51488adb","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000013","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:38.0213516+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"23111b156be5372bca72313aab54bf33","SpanId":"66d99c1d51488adb","Properties":{"ElapsedMilliseconds":0.83,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000013","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:38.0238477+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"3b9c381fc4e334135a0adabe3a2ae267","SpanId":"004b946b3f83fb7c","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000014","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:38.0241834+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"3b9c381fc4e334135a0adabe3a2ae267","SpanId":"004b946b3f83fb7c","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000014","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:38.0258006+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3b9c381fc4e334135a0adabe3a2ae267","SpanId":"004b946b3f83fb7c","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000014","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:38.0261549+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"3b9c381fc4e334135a0adabe3a2ae267","SpanId":"004b946b3f83fb7c","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000014","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:38.0263689+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"3b9c381fc4e334135a0adabe3a2ae267","SpanId":"004b946b3f83fb7c","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000014","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:38.0267485+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"3b9c381fc4e334135a0adabe3a2ae267","SpanId":"004b946b3f83fb7c","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000014","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:38.0269294+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"3b9c381fc4e334135a0adabe3a2ae267","SpanId":"004b946b3f83fb7c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000014","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:38.0270637+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"3b9c381fc4e334135a0adabe3a2ae267","SpanId":"004b946b3f83fb7c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000014","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:38.0278898+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3b9c381fc4e334135a0adabe3a2ae267","SpanId":"004b946b3f83fb7c","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000014","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:38.0282063+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"3b9c381fc4e334135a0adabe3a2ae267","SpanId":"004b946b3f83fb7c","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000014","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:38.0283999+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"3b9c381fc4e334135a0adabe3a2ae267","SpanId":"004b946b3f83fb7c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000014","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:38.0294044+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3b9c381fc4e334135a0adabe3a2ae267","SpanId":"004b946b3f83fb7c","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000014","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:38.0304499+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3b9c381fc4e334135a0adabe3a2ae267","SpanId":"004b946b3f83fb7c","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000014","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:38.0317861+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3b9c381fc4e334135a0adabe3a2ae267","SpanId":"004b946b3f83fb7c","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000014","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:38.0321106+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"3b9c381fc4e334135a0adabe3a2ae267","SpanId":"004b946b3f83fb7c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000014","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:38.0322791+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"3b9c381fc4e334135a0adabe3a2ae267","SpanId":"004b946b3f83fb7c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000014","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:38.0324112+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"3b9c381fc4e334135a0adabe3a2ae267","SpanId":"004b946b3f83fb7c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000014","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:38.0326515+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"3b9c381fc4e334135a0adabe3a2ae267","SpanId":"004b946b3f83fb7c","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000014","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:38.0328688+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"3b9c381fc4e334135a0adabe3a2ae267","SpanId":"004b946b3f83fb7c","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.3012,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000014","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:38.0330860+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"3b9c381fc4e334135a0adabe3a2ae267","SpanId":"004b946b3f83fb7c","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000014","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:38.0332584+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"3b9c381fc4e334135a0adabe3a2ae267","SpanId":"004b946b3f83fb7c","Properties":{"ElapsedMilliseconds":9.4101,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000014","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:41.0202575+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"31d22442ab0df1b8422e95b814651e9b","SpanId":"ee27bdbfa277abf7","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000015","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:41.0208073+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"31d22442ab0df1b8422e95b814651e9b","SpanId":"ee27bdbfa277abf7","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000015","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:41.0225035+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"31d22442ab0df1b8422e95b814651e9b","SpanId":"ee27bdbfa277abf7","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000015","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:41.0228969+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"31d22442ab0df1b8422e95b814651e9b","SpanId":"ee27bdbfa277abf7","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000015","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:41.0230474+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"31d22442ab0df1b8422e95b814651e9b","SpanId":"ee27bdbfa277abf7","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000015","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:41.0234313+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"31d22442ab0df1b8422e95b814651e9b","SpanId":"ee27bdbfa277abf7","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000015","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:41.0236196+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"31d22442ab0df1b8422e95b814651e9b","SpanId":"ee27bdbfa277abf7","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000015","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:41.0237745+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"31d22442ab0df1b8422e95b814651e9b","SpanId":"ee27bdbfa277abf7","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000015","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:41.0244953+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"31d22442ab0df1b8422e95b814651e9b","SpanId":"ee27bdbfa277abf7","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000015","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:41.0248320+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"31d22442ab0df1b8422e95b814651e9b","SpanId":"ee27bdbfa277abf7","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000015","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:41.0249647+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"31d22442ab0df1b8422e95b814651e9b","SpanId":"ee27bdbfa277abf7","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000015","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:41.0259128+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"31d22442ab0df1b8422e95b814651e9b","SpanId":"ee27bdbfa277abf7","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000015","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:41.0269863+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"31d22442ab0df1b8422e95b814651e9b","SpanId":"ee27bdbfa277abf7","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000015","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:41.0282461+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"31d22442ab0df1b8422e95b814651e9b","SpanId":"ee27bdbfa277abf7","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000015","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:41.0285761+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"31d22442ab0df1b8422e95b814651e9b","SpanId":"ee27bdbfa277abf7","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000015","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:41.0288001+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"31d22442ab0df1b8422e95b814651e9b","SpanId":"ee27bdbfa277abf7","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000015","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:41.0289015+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"31d22442ab0df1b8422e95b814651e9b","SpanId":"ee27bdbfa277abf7","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000015","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:41.0291264+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"31d22442ab0df1b8422e95b814651e9b","SpanId":"ee27bdbfa277abf7","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000015","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:41.0293045+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"31d22442ab0df1b8422e95b814651e9b","SpanId":"ee27bdbfa277abf7","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.0598,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000015","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:41.0295459+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"31d22442ab0df1b8422e95b814651e9b","SpanId":"ee27bdbfa277abf7","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000015","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:41.0297674+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"31d22442ab0df1b8422e95b814651e9b","SpanId":"ee27bdbfa277abf7","Properties":{"ElapsedMilliseconds":9.5127,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000015","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.0201113+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"16cfa79e3795ab15b2364a58d76556bc","SpanId":"d782770e4860e5dd","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000016","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.0216967+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"16cfa79e3795ab15b2364a58d76556bc","SpanId":"d782770e4860e5dd","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000016","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.0219276+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"16cfa79e3795ab15b2364a58d76556bc","SpanId":"d782770e4860e5dd","Properties":{"ElapsedMilliseconds":1.8143,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000016","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.0244508+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"ef83a4870c9c6792a2d6a95e24ddfdad","SpanId":"7d21a232af23a062","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000017","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.0247113+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"ef83a4870c9c6792a2d6a95e24ddfdad","SpanId":"7d21a232af23a062","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000017","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.0263513+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"ef83a4870c9c6792a2d6a95e24ddfdad","SpanId":"7d21a232af23a062","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000017","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.0266998+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"ef83a4870c9c6792a2d6a95e24ddfdad","SpanId":"7d21a232af23a062","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000017","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.0268876+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"ef83a4870c9c6792a2d6a95e24ddfdad","SpanId":"7d21a232af23a062","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000017","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.0272497+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"ef83a4870c9c6792a2d6a95e24ddfdad","SpanId":"7d21a232af23a062","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000017","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.0274315+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"ef83a4870c9c6792a2d6a95e24ddfdad","SpanId":"7d21a232af23a062","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000017","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.0275630+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"ef83a4870c9c6792a2d6a95e24ddfdad","SpanId":"7d21a232af23a062","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000017","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.0283347+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"ef83a4870c9c6792a2d6a95e24ddfdad","SpanId":"7d21a232af23a062","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000017","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.0286631+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"ef83a4870c9c6792a2d6a95e24ddfdad","SpanId":"7d21a232af23a062","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000017","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:44.0287789+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"ef83a4870c9c6792a2d6a95e24ddfdad","SpanId":"7d21a232af23a062","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000017","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:44.0296237+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"ef83a4870c9c6792a2d6a95e24ddfdad","SpanId":"7d21a232af23a062","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000017","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:44.0305431+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"ef83a4870c9c6792a2d6a95e24ddfdad","SpanId":"7d21a232af23a062","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000017","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:44.0316126+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"ef83a4870c9c6792a2d6a95e24ddfdad","SpanId":"7d21a232af23a062","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000017","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:44.0319217+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"ef83a4870c9c6792a2d6a95e24ddfdad","SpanId":"7d21a232af23a062","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000017","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:44.0320429+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"ef83a4870c9c6792a2d6a95e24ddfdad","SpanId":"7d21a232af23a062","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000017","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:44.0321518+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"ef83a4870c9c6792a2d6a95e24ddfdad","SpanId":"7d21a232af23a062","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000017","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:44.0323870+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"ef83a4870c9c6792a2d6a95e24ddfdad","SpanId":"7d21a232af23a062","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000017","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.0326161+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"ef83a4870c9c6792a2d6a95e24ddfdad","SpanId":"7d21a232af23a062","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.5358,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000017","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.0327908+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"ef83a4870c9c6792a2d6a95e24ddfdad","SpanId":"7d21a232af23a062","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000017","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.0329523+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"ef83a4870c9c6792a2d6a95e24ddfdad","SpanId":"7d21a232af23a062","Properties":{"ElapsedMilliseconds":8.4975,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000017","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.4493264+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"90423540265b05cf8d5d6404c5f911a6","SpanId":"118722d52b2078b6","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/newMember","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000018","RequestPath":"/api/chats/newMember","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.4501379+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"90423540265b05cf8d5d6404c5f911a6","SpanId":"118722d52b2078b6","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000018","RequestPath":"/api/chats/newMember","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.4504030+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"90423540265b05cf8d5d6404c5f911a6","SpanId":"118722d52b2078b6","Properties":{"ElapsedMilliseconds":1.102,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/newMember","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000018","RequestPath":"/api/chats/newMember","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.4527409+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"fb7e0a2b7720fdf3163222d7e4fba19c","SpanId":"87d9e77a25eeea18","Properties":{"Protocol":"HTTP/1.1","Method":"POST","ContentType":"application/json","ContentLength":60,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/newMember","QueryString":"","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000019","RequestPath":"/api/chats/newMember","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.4530803+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"fb7e0a2b7720fdf3163222d7e4fba19c","SpanId":"87d9e77a25eeea18","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000019","RequestPath":"/api/chats/newMember","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.4543896+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"fb7e0a2b7720fdf3163222d7e4fba19c","SpanId":"87d9e77a25eeea18","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000019","RequestPath":"/api/chats/newMember","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.4548473+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"fb7e0a2b7720fdf3163222d7e4fba19c","SpanId":"87d9e77a25eeea18","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.AddMemberToChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000019","RequestPath":"/api/chats/newMember","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.4646255+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"fb7e0a2b7720fdf3163222d7e4fba19c","SpanId":"87d9e77a25eeea18","Properties":{"RouteData":"{action = \"AddMemberToChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddMemberToChatAsync(MessagingApp.DTO.NewMemberChatDTO)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"6df360da-52df-4afb-be39-83c3737feded","ActionName":"MessagingApp.Controllers.ChatController.AddMemberToChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000019","RequestPath":"/api/chats/newMember","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.4762788+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"fb7e0a2b7720fdf3163222d7e4fba19c","SpanId":"87d9e77a25eeea18","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"6df360da-52df-4afb-be39-83c3737feded","ActionName":"MessagingApp.Controllers.ChatController.AddMemberToChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000019","RequestPath":"/api/chats/newMember","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.4765384+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"fb7e0a2b7720fdf3163222d7e4fba19c","SpanId":"87d9e77a25eeea18","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"6df360da-52df-4afb-be39-83c3737feded","ActionName":"MessagingApp.Controllers.ChatController.AddMemberToChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000019","RequestPath":"/api/chats/newMember","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.4775726+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"fb7e0a2b7720fdf3163222d7e4fba19c","SpanId":"87d9e77a25eeea18","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"6df360da-52df-4afb-be39-83c3737feded","ActionName":"MessagingApp.Controllers.ChatController.AddMemberToChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000019","RequestPath":"/api/chats/newMember","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.4780749+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"fb7e0a2b7720fdf3163222d7e4fba19c","SpanId":"87d9e77a25eeea18","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"6df360da-52df-4afb-be39-83c3737feded","ActionName":"MessagingApp.Controllers.ChatController.AddMemberToChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000019","RequestPath":"/api/chats/newMember","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:44.4783013+03:00","Level":"Information","MessageTemplate":"Attempting to add all the members into chat \"1\"","TraceId":"fb7e0a2b7720fdf3163222d7e4fba19c","SpanId":"87d9e77a25eeea18","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"6df360da-52df-4afb-be39-83c3737feded","ActionName":"MessagingApp.Controllers.ChatController.AddMemberToChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000019","RequestPath":"/api/chats/newMember","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:44.4802288+03:00","Level":"Information","MessageTemplate":"Adding members to the chat","TraceId":"fb7e0a2b7720fdf3163222d7e4fba19c","SpanId":"87d9e77a25eeea18","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"6df360da-52df-4afb-be39-83c3737feded","ActionName":"MessagingApp.Controllers.ChatController.AddMemberToChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000019","RequestPath":"/api/chats/newMember","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:44.4993791+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"fb7e0a2b7720fdf3163222d7e4fba19c","SpanId":"87d9e77a25eeea18","Properties":{"elapsed":"1","parameters":"@__nmcDTO_ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__nmcDTO_ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"6df360da-52df-4afb-be39-83c3737feded","ActionName":"MessagingApp.Controllers.ChatController.AddMemberToChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000019","RequestPath":"/api/chats/newMember","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:44.5171832+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"fb7e0a2b7720fdf3163222d7e4fba19c","SpanId":"87d9e77a25eeea18","Properties":{"elapsed":"1","parameters":"@__username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u1.\"ID\", u1.\"PasswordHash\", u1.\"Role\", u1.\"Username\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"Name\", s.\"OwnerID\"\nFROM (\n    SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\n    FROM \"Users\" AS u\n    WHERE u.\"Username\" = @__username_0\n    LIMIT 1\n) AS u1\nLEFT JOIN (\n    SELECT u0.\"ChatID\", u0.\"UserID\", c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"UserChatJoinTable\" AS u0\n    INNER JOIN \"Chats\" AS c ON u0.\"ChatID\" = c.\"ID\"\n) AS s ON u1.\"ID\" = s.\"UserID\"\nORDER BY u1.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"6df360da-52df-4afb-be39-83c3737feded","ActionName":"MessagingApp.Controllers.ChatController.AddMemberToChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000019","RequestPath":"/api/chats/newMember","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:44.5182812+03:00","Level":"Warning","MessageTemplate":"One of the users couldn't be found or they are already in the chat","TraceId":"fb7e0a2b7720fdf3163222d7e4fba19c","SpanId":"87d9e77a25eeea18","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"6df360da-52df-4afb-be39-83c3737feded","ActionName":"MessagingApp.Controllers.ChatController.AddMemberToChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000019","RequestPath":"/api/chats/newMember","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:44.5184583+03:00","Level":"Information","MessageTemplate":"Appending chat members and persisting changes","TraceId":"fb7e0a2b7720fdf3163222d7e4fba19c","SpanId":"87d9e77a25eeea18","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"6df360da-52df-4afb-be39-83c3737feded","ActionName":"MessagingApp.Controllers.ChatController.AddMemberToChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000019","RequestPath":"/api/chats/newMember","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:44.5190486+03:00","Level":"Warning","MessageTemplate":"Some members may have not been added. Added 0 users","TraceId":"fb7e0a2b7720fdf3163222d7e4fba19c","SpanId":"87d9e77a25eeea18","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"6df360da-52df-4afb-be39-83c3737feded","ActionName":"MessagingApp.Controllers.ChatController.AddMemberToChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000019","RequestPath":"/api/chats/newMember","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:44.5193796+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"fb7e0a2b7720fdf3163222d7e4fba19c","SpanId":"87d9e77a25eeea18","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.String","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"6df360da-52df-4afb-be39-83c3737feded","ActionName":"MessagingApp.Controllers.ChatController.AddMemberToChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000019","RequestPath":"/api/chats/newMember","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.5198027+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"fb7e0a2b7720fdf3163222d7e4fba19c","SpanId":"87d9e77a25eeea18","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.AddMemberToChatAsync (MessagingApp)","ElapsedMilliseconds":54.8352,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000019","RequestPath":"/api/chats/newMember","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.5201422+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"fb7e0a2b7720fdf3163222d7e4fba19c","SpanId":"87d9e77a25eeea18","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.AddMemberToChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000019","RequestPath":"/api/chats/newMember","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.5204628+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"fb7e0a2b7720fdf3163222d7e4fba19c","SpanId":"87d9e77a25eeea18","Properties":{"ElapsedMilliseconds":67.6866,"StatusCode":200,"ContentType":"text/plain; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"POST","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/newMember","QueryString":"","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000019","RequestPath":"/api/chats/newMember","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.5243596+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"c491b4a5f08f086ff550aaa7383ec2be","SpanId":"4e8a98b5147bc72c","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/memberList","QueryString":"?chatID=1","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000001A","RequestPath":"/api/chats/memberList","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.5246545+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"c491b4a5f08f086ff550aaa7383ec2be","SpanId":"4e8a98b5147bc72c","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000001A","RequestPath":"/api/chats/memberList","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.5248611+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"c491b4a5f08f086ff550aaa7383ec2be","SpanId":"4e8a98b5147bc72c","Properties":{"ElapsedMilliseconds":0.4564,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/memberList","QueryString":"?chatID=1","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000001A","RequestPath":"/api/chats/memberList","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.5270361+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"1891603ddfbeb7af61bcec080b8ae82a","SpanId":"e32496f546383d20","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/memberList","QueryString":"?chatID=1","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000001B","RequestPath":"/api/chats/memberList","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.5273347+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"1891603ddfbeb7af61bcec080b8ae82a","SpanId":"e32496f546383d20","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000001B","RequestPath":"/api/chats/memberList","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.5286623+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"1891603ddfbeb7af61bcec080b8ae82a","SpanId":"e32496f546383d20","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:0000001B","RequestPath":"/api/chats/memberList","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.5289935+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"1891603ddfbeb7af61bcec080b8ae82a","SpanId":"e32496f546383d20","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.getChatMemebersAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000001B","RequestPath":"/api/chats/memberList","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.5291901+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"1891603ddfbeb7af61bcec080b8ae82a","SpanId":"e32496f546383d20","Properties":{"RouteData":"{action = \"getChatMemebers\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[System.String]]] getChatMemebersAsync(System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"cb8e396a-2ec8-4d3f-ac7b-731c738f8b27","ActionName":"MessagingApp.Controllers.ChatController.getChatMemebersAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001B","RequestPath":"/api/chats/memberList","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.5295167+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"1891603ddfbeb7af61bcec080b8ae82a","SpanId":"e32496f546383d20","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"cb8e396a-2ec8-4d3f-ac7b-731c738f8b27","ActionName":"MessagingApp.Controllers.ChatController.getChatMemebersAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001B","RequestPath":"/api/chats/memberList","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.5297256+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"1891603ddfbeb7af61bcec080b8ae82a","SpanId":"e32496f546383d20","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"cb8e396a-2ec8-4d3f-ac7b-731c738f8b27","ActionName":"MessagingApp.Controllers.ChatController.getChatMemebersAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001B","RequestPath":"/api/chats/memberList","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.5303697+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"1891603ddfbeb7af61bcec080b8ae82a","SpanId":"e32496f546383d20","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"cb8e396a-2ec8-4d3f-ac7b-731c738f8b27","ActionName":"MessagingApp.Controllers.ChatController.getChatMemebersAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001B","RequestPath":"/api/chats/memberList","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.5306977+03:00","Level":"Information","MessageTemplate":"Scope initiated by 192.168.31.243:6865","TraceId":"1891603ddfbeb7af61bcec080b8ae82a","SpanId":"e32496f546383d20","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"cb8e396a-2ec8-4d3f-ac7b-731c738f8b27","ActionName":"MessagingApp.Controllers.ChatController.getChatMemebersAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001B","RequestPath":"/api/chats/memberList","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:44.5308340+03:00","Level":"Information","MessageTemplate":"Attempting to get chat members","TraceId":"1891603ddfbeb7af61bcec080b8ae82a","SpanId":"e32496f546383d20","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"cb8e396a-2ec8-4d3f-ac7b-731c738f8b27","ActionName":"MessagingApp.Controllers.ChatController.getChatMemebersAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001B","RequestPath":"/api/chats/memberList","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:44.5309915+03:00","Level":"Information","MessageTemplate":"Getting the chat members","TraceId":"1891603ddfbeb7af61bcec080b8ae82a","SpanId":"e32496f546383d20","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"cb8e396a-2ec8-4d3f-ac7b-731c738f8b27","ActionName":"MessagingApp.Controllers.ChatController.getChatMemebersAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001B","RequestPath":"/api/chats/memberList","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:44.5319248+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"1891603ddfbeb7af61bcec080b8ae82a","SpanId":"e32496f546383d20","Properties":{"elapsed":"1","parameters":"@__chatId_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__chatId_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"cb8e396a-2ec8-4d3f-ac7b-731c738f8b27","ActionName":"MessagingApp.Controllers.ChatController.getChatMemebersAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001B","RequestPath":"/api/chats/memberList","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:44.5324960+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"1891603ddfbeb7af61bcec080b8ae82a","SpanId":"e32496f546383d20","Properties":{"ObjectResultType":"ObjectResult","Type":"System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"cb8e396a-2ec8-4d3f-ac7b-731c738f8b27","ActionName":"MessagingApp.Controllers.ChatController.getChatMemebersAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001B","RequestPath":"/api/chats/memberList","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.5327591+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"1891603ddfbeb7af61bcec080b8ae82a","SpanId":"e32496f546383d20","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.getChatMemebersAsync (MessagingApp)","ElapsedMilliseconds":3.3348,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:0000001B","RequestPath":"/api/chats/memberList","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.5329213+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"1891603ddfbeb7af61bcec080b8ae82a","SpanId":"e32496f546383d20","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.getChatMemebersAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000001B","RequestPath":"/api/chats/memberList","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:44.5331237+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"1891603ddfbeb7af61bcec080b8ae82a","SpanId":"e32496f546383d20","Properties":{"ElapsedMilliseconds":6.0827,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/memberList","QueryString":"?chatID=1","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000001B","RequestPath":"/api/chats/memberList","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:47.0251094+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"359bc70ce67a5267bcee07baa8295414","SpanId":"8815e6a65efe81fb","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000001C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:47.0255316+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"359bc70ce67a5267bcee07baa8295414","SpanId":"8815e6a65efe81fb","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000001C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:47.0270373+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"359bc70ce67a5267bcee07baa8295414","SpanId":"8815e6a65efe81fb","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:0000001C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:47.0281787+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"359bc70ce67a5267bcee07baa8295414","SpanId":"8815e6a65efe81fb","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000001C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:47.0283909+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"359bc70ce67a5267bcee07baa8295414","SpanId":"8815e6a65efe81fb","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:47.0297843+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"359bc70ce67a5267bcee07baa8295414","SpanId":"8815e6a65efe81fb","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:47.0300395+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"359bc70ce67a5267bcee07baa8295414","SpanId":"8815e6a65efe81fb","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:47.0302463+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"359bc70ce67a5267bcee07baa8295414","SpanId":"8815e6a65efe81fb","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:47.0312120+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"359bc70ce67a5267bcee07baa8295414","SpanId":"8815e6a65efe81fb","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:47.0316053+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"359bc70ce67a5267bcee07baa8295414","SpanId":"8815e6a65efe81fb","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:47.0317595+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"359bc70ce67a5267bcee07baa8295414","SpanId":"8815e6a65efe81fb","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:47.0330068+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"359bc70ce67a5267bcee07baa8295414","SpanId":"8815e6a65efe81fb","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:47.0340590+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"359bc70ce67a5267bcee07baa8295414","SpanId":"8815e6a65efe81fb","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:47.0352438+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"359bc70ce67a5267bcee07baa8295414","SpanId":"8815e6a65efe81fb","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:47.0355799+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"359bc70ce67a5267bcee07baa8295414","SpanId":"8815e6a65efe81fb","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:47.0357567+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"359bc70ce67a5267bcee07baa8295414","SpanId":"8815e6a65efe81fb","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:47.0359563+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"359bc70ce67a5267bcee07baa8295414","SpanId":"8815e6a65efe81fb","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:47.0362454+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"359bc70ce67a5267bcee07baa8295414","SpanId":"8815e6a65efe81fb","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:47.0364729+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"359bc70ce67a5267bcee07baa8295414","SpanId":"8815e6a65efe81fb","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.8886,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:0000001C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:47.0366788+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"359bc70ce67a5267bcee07baa8295414","SpanId":"8815e6a65efe81fb","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000001C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:47.0377807+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"359bc70ce67a5267bcee07baa8295414","SpanId":"8815e6a65efe81fb","Properties":{"ElapsedMilliseconds":12.7424,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000001C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:50.0207165+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"eb3ab57cdc5964513511bbbe0fdfae08","SpanId":"82771b6fff889e60","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000001D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:50.0216164+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"eb3ab57cdc5964513511bbbe0fdfae08","SpanId":"82771b6fff889e60","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000001D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:50.0219765+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"eb3ab57cdc5964513511bbbe0fdfae08","SpanId":"82771b6fff889e60","Properties":{"ElapsedMilliseconds":1.2237,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000001D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:50.0246925+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"74d2aaaa720fe99f7c1293d533cb9d1e","SpanId":"2513a98398f25a46","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000001E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:50.0250231+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"74d2aaaa720fe99f7c1293d533cb9d1e","SpanId":"2513a98398f25a46","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000001E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:50.0317197+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"74d2aaaa720fe99f7c1293d533cb9d1e","SpanId":"2513a98398f25a46","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:0000001E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:50.0320818+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"74d2aaaa720fe99f7c1293d533cb9d1e","SpanId":"2513a98398f25a46","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000001E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:50.0322854+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"74d2aaaa720fe99f7c1293d533cb9d1e","SpanId":"2513a98398f25a46","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:50.0327071+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"74d2aaaa720fe99f7c1293d533cb9d1e","SpanId":"2513a98398f25a46","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:50.0328296+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"74d2aaaa720fe99f7c1293d533cb9d1e","SpanId":"2513a98398f25a46","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:50.0329422+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"74d2aaaa720fe99f7c1293d533cb9d1e","SpanId":"2513a98398f25a46","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:50.0337277+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"74d2aaaa720fe99f7c1293d533cb9d1e","SpanId":"2513a98398f25a46","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:50.0340386+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"74d2aaaa720fe99f7c1293d533cb9d1e","SpanId":"2513a98398f25a46","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:50.0341986+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"74d2aaaa720fe99f7c1293d533cb9d1e","SpanId":"2513a98398f25a46","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:50.0352850+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"74d2aaaa720fe99f7c1293d533cb9d1e","SpanId":"2513a98398f25a46","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:50.0364334+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"74d2aaaa720fe99f7c1293d533cb9d1e","SpanId":"2513a98398f25a46","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:50.0377605+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"74d2aaaa720fe99f7c1293d533cb9d1e","SpanId":"2513a98398f25a46","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:50.0381058+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"74d2aaaa720fe99f7c1293d533cb9d1e","SpanId":"2513a98398f25a46","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:50.0382251+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"74d2aaaa720fe99f7c1293d533cb9d1e","SpanId":"2513a98398f25a46","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:50.0383306+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"74d2aaaa720fe99f7c1293d533cb9d1e","SpanId":"2513a98398f25a46","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:50.0385279+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"74d2aaaa720fe99f7c1293d533cb9d1e","SpanId":"2513a98398f25a46","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:50.0387194+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"74d2aaaa720fe99f7c1293d533cb9d1e","SpanId":"2513a98398f25a46","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.1654,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:0000001E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:50.0389409+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"74d2aaaa720fe99f7c1293d533cb9d1e","SpanId":"2513a98398f25a46","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000001E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:50.0391257+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"74d2aaaa720fe99f7c1293d533cb9d1e","SpanId":"2513a98398f25a46","Properties":{"ElapsedMilliseconds":14.4359,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000001E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:53.0202585+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"9805118eea84688ae4962c6f7304cc2a","SpanId":"318cc7e2bc526a79","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000001F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:53.0208719+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"9805118eea84688ae4962c6f7304cc2a","SpanId":"318cc7e2bc526a79","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000001F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:53.0221920+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"9805118eea84688ae4962c6f7304cc2a","SpanId":"318cc7e2bc526a79","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:0000001F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:53.0226390+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"9805118eea84688ae4962c6f7304cc2a","SpanId":"318cc7e2bc526a79","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000001F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:53.0228060+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"9805118eea84688ae4962c6f7304cc2a","SpanId":"318cc7e2bc526a79","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:53.0232309+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"9805118eea84688ae4962c6f7304cc2a","SpanId":"318cc7e2bc526a79","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:53.0233876+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"9805118eea84688ae4962c6f7304cc2a","SpanId":"318cc7e2bc526a79","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:53.0235619+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"9805118eea84688ae4962c6f7304cc2a","SpanId":"318cc7e2bc526a79","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:53.0243936+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"9805118eea84688ae4962c6f7304cc2a","SpanId":"318cc7e2bc526a79","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:53.0247712+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"9805118eea84688ae4962c6f7304cc2a","SpanId":"318cc7e2bc526a79","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:53.0249422+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"9805118eea84688ae4962c6f7304cc2a","SpanId":"318cc7e2bc526a79","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:53.0259111+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"9805118eea84688ae4962c6f7304cc2a","SpanId":"318cc7e2bc526a79","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:53.0269218+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"9805118eea84688ae4962c6f7304cc2a","SpanId":"318cc7e2bc526a79","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:53.0281921+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"9805118eea84688ae4962c6f7304cc2a","SpanId":"318cc7e2bc526a79","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:53.0285529+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"9805118eea84688ae4962c6f7304cc2a","SpanId":"318cc7e2bc526a79","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:53.0287032+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"9805118eea84688ae4962c6f7304cc2a","SpanId":"318cc7e2bc526a79","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:53.0288248+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"9805118eea84688ae4962c6f7304cc2a","SpanId":"318cc7e2bc526a79","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:53.0290423+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"9805118eea84688ae4962c6f7304cc2a","SpanId":"318cc7e2bc526a79","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000001F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:53.0292529+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"9805118eea84688ae4962c6f7304cc2a","SpanId":"318cc7e2bc526a79","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.2063,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:0000001F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:53.0295002+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"9805118eea84688ae4962c6f7304cc2a","SpanId":"318cc7e2bc526a79","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000001F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:53.0296644+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"9805118eea84688ae4962c6f7304cc2a","SpanId":"318cc7e2bc526a79","Properties":{"ElapsedMilliseconds":9.4124,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000001F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:56.0200013+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"8ef37d5e264060a073c52f974d3dd3e8","SpanId":"890d34f0efcb3a21","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000020","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:56.0203526+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"8ef37d5e264060a073c52f974d3dd3e8","SpanId":"890d34f0efcb3a21","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000020","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:56.0205468+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"8ef37d5e264060a073c52f974d3dd3e8","SpanId":"890d34f0efcb3a21","Properties":{"ElapsedMilliseconds":0.5464,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000020","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:56.0230636+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"f605cc638e2e52a1fafc7643263c3a07","SpanId":"a8e32fef068ce033","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000021","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:56.0234339+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"f605cc638e2e52a1fafc7643263c3a07","SpanId":"a8e32fef068ce033","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000021","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:56.0249351+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"f605cc638e2e52a1fafc7643263c3a07","SpanId":"a8e32fef068ce033","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000021","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:56.0252744+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"f605cc638e2e52a1fafc7643263c3a07","SpanId":"a8e32fef068ce033","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000021","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:56.0254659+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"f605cc638e2e52a1fafc7643263c3a07","SpanId":"a8e32fef068ce033","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000021","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:56.0257907+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"f605cc638e2e52a1fafc7643263c3a07","SpanId":"a8e32fef068ce033","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000021","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:56.0259127+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"f605cc638e2e52a1fafc7643263c3a07","SpanId":"a8e32fef068ce033","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000021","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:56.0260912+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"f605cc638e2e52a1fafc7643263c3a07","SpanId":"a8e32fef068ce033","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000021","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:56.0268930+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"f605cc638e2e52a1fafc7643263c3a07","SpanId":"a8e32fef068ce033","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000021","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:56.0272054+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"f605cc638e2e52a1fafc7643263c3a07","SpanId":"a8e32fef068ce033","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000021","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:56.0273701+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"f605cc638e2e52a1fafc7643263c3a07","SpanId":"a8e32fef068ce033","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000021","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:56.0283413+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"f605cc638e2e52a1fafc7643263c3a07","SpanId":"a8e32fef068ce033","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000021","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:56.0294588+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"f605cc638e2e52a1fafc7643263c3a07","SpanId":"a8e32fef068ce033","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000021","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:56.0308208+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"f605cc638e2e52a1fafc7643263c3a07","SpanId":"a8e32fef068ce033","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000021","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:56.0311520+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"f605cc638e2e52a1fafc7643263c3a07","SpanId":"a8e32fef068ce033","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000021","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:56.0312622+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"f605cc638e2e52a1fafc7643263c3a07","SpanId":"a8e32fef068ce033","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000021","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:56.0314299+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"f605cc638e2e52a1fafc7643263c3a07","SpanId":"a8e32fef068ce033","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000021","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:56.0316508+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"f605cc638e2e52a1fafc7643263c3a07","SpanId":"a8e32fef068ce033","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000021","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:56.0318354+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"f605cc638e2e52a1fafc7643263c3a07","SpanId":"a8e32fef068ce033","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.187,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000021","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:56.0320249+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"f605cc638e2e52a1fafc7643263c3a07","SpanId":"a8e32fef068ce033","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000021","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:56.0322143+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"f605cc638e2e52a1fafc7643263c3a07","SpanId":"a8e32fef068ce033","Properties":{"ElapsedMilliseconds":9.1521,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000021","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:59.0207327+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"76a39fa0d9455ee93928666243afd75a","SpanId":"5930a452ed32b53d","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000022","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:59.0212471+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"76a39fa0d9455ee93928666243afd75a","SpanId":"5930a452ed32b53d","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000022","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:59.0231386+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"76a39fa0d9455ee93928666243afd75a","SpanId":"5930a452ed32b53d","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000022","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:59.0236533+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"76a39fa0d9455ee93928666243afd75a","SpanId":"5930a452ed32b53d","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000022","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:59.0238622+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"76a39fa0d9455ee93928666243afd75a","SpanId":"5930a452ed32b53d","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000022","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:59.0242402+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"76a39fa0d9455ee93928666243afd75a","SpanId":"5930a452ed32b53d","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000022","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:59.0243933+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"76a39fa0d9455ee93928666243afd75a","SpanId":"5930a452ed32b53d","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000022","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:59.0245934+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"76a39fa0d9455ee93928666243afd75a","SpanId":"5930a452ed32b53d","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000022","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:59.0257382+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"76a39fa0d9455ee93928666243afd75a","SpanId":"5930a452ed32b53d","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000022","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:59.0260586+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"76a39fa0d9455ee93928666243afd75a","SpanId":"5930a452ed32b53d","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000022","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:59.0262162+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"76a39fa0d9455ee93928666243afd75a","SpanId":"5930a452ed32b53d","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000022","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:59.0272202+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"76a39fa0d9455ee93928666243afd75a","SpanId":"5930a452ed32b53d","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000022","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:59.0283253+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"76a39fa0d9455ee93928666243afd75a","SpanId":"5930a452ed32b53d","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000022","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:59.0296900+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"76a39fa0d9455ee93928666243afd75a","SpanId":"5930a452ed32b53d","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000022","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:59.0299750+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"76a39fa0d9455ee93928666243afd75a","SpanId":"5930a452ed32b53d","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000022","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:59.0301035+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"76a39fa0d9455ee93928666243afd75a","SpanId":"5930a452ed32b53d","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000022","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:59.0302940+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"76a39fa0d9455ee93928666243afd75a","SpanId":"5930a452ed32b53d","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000022","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:37:59.0305534+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"76a39fa0d9455ee93928666243afd75a","SpanId":"5930a452ed32b53d","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000022","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:59.0307866+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"76a39fa0d9455ee93928666243afd75a","SpanId":"5930a452ed32b53d","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.7168,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000022","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:59.0309395+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"76a39fa0d9455ee93928666243afd75a","SpanId":"5930a452ed32b53d","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000022","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:37:59.0311228+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"76a39fa0d9455ee93928666243afd75a","SpanId":"5930a452ed32b53d","Properties":{"ElapsedMilliseconds":10.4042,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000022","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:02.0203799+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"d5dde0b8e20886c22e0ce1ade7070650","SpanId":"9b69f0bd51343a02","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000023","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:02.0208339+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"d5dde0b8e20886c22e0ce1ade7070650","SpanId":"9b69f0bd51343a02","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000023","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:02.0211886+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"d5dde0b8e20886c22e0ce1ade7070650","SpanId":"9b69f0bd51343a02","Properties":{"ElapsedMilliseconds":0.8059,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000023","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:02.0237609+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"80c15d72b76d6b68abe5e62ecfe9b3d5","SpanId":"801e07e5d99fbad9","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000024","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:02.0241113+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"80c15d72b76d6b68abe5e62ecfe9b3d5","SpanId":"801e07e5d99fbad9","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000024","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:02.0255418+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"80c15d72b76d6b68abe5e62ecfe9b3d5","SpanId":"801e07e5d99fbad9","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000024","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:02.0258830+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"80c15d72b76d6b68abe5e62ecfe9b3d5","SpanId":"801e07e5d99fbad9","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000024","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:02.0260491+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"80c15d72b76d6b68abe5e62ecfe9b3d5","SpanId":"801e07e5d99fbad9","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000024","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:02.0264288+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"80c15d72b76d6b68abe5e62ecfe9b3d5","SpanId":"801e07e5d99fbad9","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000024","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:02.0265439+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"80c15d72b76d6b68abe5e62ecfe9b3d5","SpanId":"801e07e5d99fbad9","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000024","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:02.0266706+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"80c15d72b76d6b68abe5e62ecfe9b3d5","SpanId":"801e07e5d99fbad9","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000024","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:02.0274514+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"80c15d72b76d6b68abe5e62ecfe9b3d5","SpanId":"801e07e5d99fbad9","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000024","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:02.0277220+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"80c15d72b76d6b68abe5e62ecfe9b3d5","SpanId":"801e07e5d99fbad9","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000024","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:02.0279074+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"80c15d72b76d6b68abe5e62ecfe9b3d5","SpanId":"801e07e5d99fbad9","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000024","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:02.0288536+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"80c15d72b76d6b68abe5e62ecfe9b3d5","SpanId":"801e07e5d99fbad9","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000024","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:02.0298444+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"80c15d72b76d6b68abe5e62ecfe9b3d5","SpanId":"801e07e5d99fbad9","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000024","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:02.0310535+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"80c15d72b76d6b68abe5e62ecfe9b3d5","SpanId":"801e07e5d99fbad9","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000024","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:02.0314398+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"80c15d72b76d6b68abe5e62ecfe9b3d5","SpanId":"801e07e5d99fbad9","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000024","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:02.0315702+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"80c15d72b76d6b68abe5e62ecfe9b3d5","SpanId":"801e07e5d99fbad9","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000024","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:02.0317041+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"80c15d72b76d6b68abe5e62ecfe9b3d5","SpanId":"801e07e5d99fbad9","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000024","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:02.0318983+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"80c15d72b76d6b68abe5e62ecfe9b3d5","SpanId":"801e07e5d99fbad9","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000024","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:02.0320761+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"80c15d72b76d6b68abe5e62ecfe9b3d5","SpanId":"801e07e5d99fbad9","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.8041,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000024","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:02.0322810+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"80c15d72b76d6b68abe5e62ecfe9b3d5","SpanId":"801e07e5d99fbad9","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000024","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:02.0324953+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"80c15d72b76d6b68abe5e62ecfe9b3d5","SpanId":"801e07e5d99fbad9","Properties":{"ElapsedMilliseconds":8.7353,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000024","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:05.0206396+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"919470a518b52696a68b3b700eef2e03","SpanId":"ee60c910dd5bd680","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000025","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:05.0211176+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"919470a518b52696a68b3b700eef2e03","SpanId":"ee60c910dd5bd680","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000025","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:05.0222014+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"919470a518b52696a68b3b700eef2e03","SpanId":"ee60c910dd5bd680","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000025","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:05.0225310+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"919470a518b52696a68b3b700eef2e03","SpanId":"ee60c910dd5bd680","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000025","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:05.0227545+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"919470a518b52696a68b3b700eef2e03","SpanId":"ee60c910dd5bd680","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000025","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:05.0230475+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"919470a518b52696a68b3b700eef2e03","SpanId":"ee60c910dd5bd680","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000025","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:05.0231728+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"919470a518b52696a68b3b700eef2e03","SpanId":"ee60c910dd5bd680","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000025","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:05.0232883+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"919470a518b52696a68b3b700eef2e03","SpanId":"ee60c910dd5bd680","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000025","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:05.0239535+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"919470a518b52696a68b3b700eef2e03","SpanId":"ee60c910dd5bd680","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000025","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:05.0242237+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"919470a518b52696a68b3b700eef2e03","SpanId":"ee60c910dd5bd680","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000025","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:05.0243973+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"919470a518b52696a68b3b700eef2e03","SpanId":"ee60c910dd5bd680","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000025","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:05.0252933+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"919470a518b52696a68b3b700eef2e03","SpanId":"ee60c910dd5bd680","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000025","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:05.0261726+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"919470a518b52696a68b3b700eef2e03","SpanId":"ee60c910dd5bd680","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000025","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:05.0272142+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"919470a518b52696a68b3b700eef2e03","SpanId":"ee60c910dd5bd680","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000025","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:05.0275511+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"919470a518b52696a68b3b700eef2e03","SpanId":"ee60c910dd5bd680","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000025","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:05.0276639+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"919470a518b52696a68b3b700eef2e03","SpanId":"ee60c910dd5bd680","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000025","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:05.0277643+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"919470a518b52696a68b3b700eef2e03","SpanId":"ee60c910dd5bd680","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000025","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:05.0279404+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"919470a518b52696a68b3b700eef2e03","SpanId":"ee60c910dd5bd680","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000025","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:05.0281185+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"919470a518b52696a68b3b700eef2e03","SpanId":"ee60c910dd5bd680","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.1829,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000025","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:05.0283476+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"919470a518b52696a68b3b700eef2e03","SpanId":"ee60c910dd5bd680","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000025","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:05.0285156+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"919470a518b52696a68b3b700eef2e03","SpanId":"ee60c910dd5bd680","Properties":{"ElapsedMilliseconds":7.8816,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000025","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:08.0201743+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"b9cace22f49d2ecc0a9e23b5d8e61808","SpanId":"e9f8c7fd4367997f","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000026","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:08.0207955+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"b9cace22f49d2ecc0a9e23b5d8e61808","SpanId":"e9f8c7fd4367997f","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000026","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:08.0210747+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"b9cace22f49d2ecc0a9e23b5d8e61808","SpanId":"e9f8c7fd4367997f","Properties":{"ElapsedMilliseconds":0.9028,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000026","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:08.0236303+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"6c286f0a86bfd1029bc70028d0c2f1cf","SpanId":"691bcd6ee2dd94c0","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000027","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:08.0239497+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"6c286f0a86bfd1029bc70028d0c2f1cf","SpanId":"691bcd6ee2dd94c0","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000027","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:08.0250736+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"6c286f0a86bfd1029bc70028d0c2f1cf","SpanId":"691bcd6ee2dd94c0","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000027","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:08.1305877+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"6c286f0a86bfd1029bc70028d0c2f1cf","SpanId":"691bcd6ee2dd94c0","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000027","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:08.1309168+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"6c286f0a86bfd1029bc70028d0c2f1cf","SpanId":"691bcd6ee2dd94c0","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000027","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:08.1312508+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"6c286f0a86bfd1029bc70028d0c2f1cf","SpanId":"691bcd6ee2dd94c0","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000027","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:08.1313887+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"6c286f0a86bfd1029bc70028d0c2f1cf","SpanId":"691bcd6ee2dd94c0","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000027","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:08.1315748+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"6c286f0a86bfd1029bc70028d0c2f1cf","SpanId":"691bcd6ee2dd94c0","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000027","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:08.1323267+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"6c286f0a86bfd1029bc70028d0c2f1cf","SpanId":"691bcd6ee2dd94c0","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000027","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:08.1326458+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"6c286f0a86bfd1029bc70028d0c2f1cf","SpanId":"691bcd6ee2dd94c0","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000027","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:08.1327702+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"6c286f0a86bfd1029bc70028d0c2f1cf","SpanId":"691bcd6ee2dd94c0","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000027","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:08.1336985+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"6c286f0a86bfd1029bc70028d0c2f1cf","SpanId":"691bcd6ee2dd94c0","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000027","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:08.1347085+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"6c286f0a86bfd1029bc70028d0c2f1cf","SpanId":"691bcd6ee2dd94c0","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000027","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:08.1359135+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"6c286f0a86bfd1029bc70028d0c2f1cf","SpanId":"691bcd6ee2dd94c0","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000027","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:08.1362327+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"6c286f0a86bfd1029bc70028d0c2f1cf","SpanId":"691bcd6ee2dd94c0","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000027","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:08.1363783+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"6c286f0a86bfd1029bc70028d0c2f1cf","SpanId":"691bcd6ee2dd94c0","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000027","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:08.1365367+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"6c286f0a86bfd1029bc70028d0c2f1cf","SpanId":"691bcd6ee2dd94c0","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000027","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:08.1367384+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"6c286f0a86bfd1029bc70028d0c2f1cf","SpanId":"691bcd6ee2dd94c0","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000027","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:08.1369361+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"6c286f0a86bfd1029bc70028d0c2f1cf","SpanId":"691bcd6ee2dd94c0","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.8128,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000027","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:08.1370845+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"6c286f0a86bfd1029bc70028d0c2f1cf","SpanId":"691bcd6ee2dd94c0","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000027","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:08.1372596+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"6c286f0a86bfd1029bc70028d0c2f1cf","SpanId":"691bcd6ee2dd94c0","Properties":{"ElapsedMilliseconds":113.6249,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000027","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:11.0204942+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"f8fed64e41dd45b0222cc2fb88f66c41","SpanId":"6d9d3f3a9d32ce47","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000028","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:11.0210463+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"f8fed64e41dd45b0222cc2fb88f66c41","SpanId":"6d9d3f3a9d32ce47","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000028","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:11.0225389+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"f8fed64e41dd45b0222cc2fb88f66c41","SpanId":"6d9d3f3a9d32ce47","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000028","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:11.0235896+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"f8fed64e41dd45b0222cc2fb88f66c41","SpanId":"6d9d3f3a9d32ce47","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000028","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:11.0237733+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"f8fed64e41dd45b0222cc2fb88f66c41","SpanId":"6d9d3f3a9d32ce47","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000028","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:11.0241190+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"f8fed64e41dd45b0222cc2fb88f66c41","SpanId":"6d9d3f3a9d32ce47","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000028","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:11.0242596+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"f8fed64e41dd45b0222cc2fb88f66c41","SpanId":"6d9d3f3a9d32ce47","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000028","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:11.0244476+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"f8fed64e41dd45b0222cc2fb88f66c41","SpanId":"6d9d3f3a9d32ce47","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000028","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:11.0252169+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"f8fed64e41dd45b0222cc2fb88f66c41","SpanId":"6d9d3f3a9d32ce47","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000028","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:11.0255899+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"f8fed64e41dd45b0222cc2fb88f66c41","SpanId":"6d9d3f3a9d32ce47","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000028","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:11.0257222+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"f8fed64e41dd45b0222cc2fb88f66c41","SpanId":"6d9d3f3a9d32ce47","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000028","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:11.0267911+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"f8fed64e41dd45b0222cc2fb88f66c41","SpanId":"6d9d3f3a9d32ce47","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000028","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:11.0278747+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"f8fed64e41dd45b0222cc2fb88f66c41","SpanId":"6d9d3f3a9d32ce47","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000028","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:11.0293470+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"f8fed64e41dd45b0222cc2fb88f66c41","SpanId":"6d9d3f3a9d32ce47","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000028","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:11.0297054+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"f8fed64e41dd45b0222cc2fb88f66c41","SpanId":"6d9d3f3a9d32ce47","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000028","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:11.0299053+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"f8fed64e41dd45b0222cc2fb88f66c41","SpanId":"6d9d3f3a9d32ce47","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000028","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:11.0300364+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"f8fed64e41dd45b0222cc2fb88f66c41","SpanId":"6d9d3f3a9d32ce47","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000028","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:11.0302578+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"f8fed64e41dd45b0222cc2fb88f66c41","SpanId":"6d9d3f3a9d32ce47","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000028","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:11.0304636+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"f8fed64e41dd45b0222cc2fb88f66c41","SpanId":"6d9d3f3a9d32ce47","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.459,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000028","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:11.0306333+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"f8fed64e41dd45b0222cc2fb88f66c41","SpanId":"6d9d3f3a9d32ce47","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000028","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:11.0308033+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"f8fed64e41dd45b0222cc2fb88f66c41","SpanId":"6d9d3f3a9d32ce47","Properties":{"ElapsedMilliseconds":10.3221,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000028","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:14.0203718+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"8ac7510a5922e3fb44143bcc1f1d4743","SpanId":"cd413bc0ef35f382","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000029","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:14.0207813+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"8ac7510a5922e3fb44143bcc1f1d4743","SpanId":"cd413bc0ef35f382","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000029","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:14.0210625+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"8ac7510a5922e3fb44143bcc1f1d4743","SpanId":"cd413bc0ef35f382","Properties":{"ElapsedMilliseconds":0.6787,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000029","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:14.0238181+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"bcd0452a64bb4180f0b9a9f1d646fca8","SpanId":"9205c2fce9f7881a","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000002A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:14.0241729+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"bcd0452a64bb4180f0b9a9f1d646fca8","SpanId":"9205c2fce9f7881a","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000002A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:14.0256377+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"bcd0452a64bb4180f0b9a9f1d646fca8","SpanId":"9205c2fce9f7881a","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:0000002A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:14.0260186+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"bcd0452a64bb4180f0b9a9f1d646fca8","SpanId":"9205c2fce9f7881a","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000002A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:14.0262732+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"bcd0452a64bb4180f0b9a9f1d646fca8","SpanId":"9205c2fce9f7881a","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:14.0266478+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"bcd0452a64bb4180f0b9a9f1d646fca8","SpanId":"9205c2fce9f7881a","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:14.0267905+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"bcd0452a64bb4180f0b9a9f1d646fca8","SpanId":"9205c2fce9f7881a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:14.0269279+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"bcd0452a64bb4180f0b9a9f1d646fca8","SpanId":"9205c2fce9f7881a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:14.0276991+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"bcd0452a64bb4180f0b9a9f1d646fca8","SpanId":"9205c2fce9f7881a","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:14.0280253+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"bcd0452a64bb4180f0b9a9f1d646fca8","SpanId":"9205c2fce9f7881a","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:14.0282353+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"bcd0452a64bb4180f0b9a9f1d646fca8","SpanId":"9205c2fce9f7881a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:14.0291521+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"bcd0452a64bb4180f0b9a9f1d646fca8","SpanId":"9205c2fce9f7881a","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:14.0300884+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"bcd0452a64bb4180f0b9a9f1d646fca8","SpanId":"9205c2fce9f7881a","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:14.0312797+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"bcd0452a64bb4180f0b9a9f1d646fca8","SpanId":"9205c2fce9f7881a","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:14.0316946+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"bcd0452a64bb4180f0b9a9f1d646fca8","SpanId":"9205c2fce9f7881a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:14.0318500+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"bcd0452a64bb4180f0b9a9f1d646fca8","SpanId":"9205c2fce9f7881a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:14.0319709+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"bcd0452a64bb4180f0b9a9f1d646fca8","SpanId":"9205c2fce9f7881a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:14.0322008+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"bcd0452a64bb4180f0b9a9f1d646fca8","SpanId":"9205c2fce9f7881a","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:14.0324814+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"bcd0452a64bb4180f0b9a9f1d646fca8","SpanId":"9205c2fce9f7881a","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.9697,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:0000002A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:14.0327816+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"bcd0452a64bb4180f0b9a9f1d646fca8","SpanId":"9205c2fce9f7881a","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000002A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:14.0330126+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"bcd0452a64bb4180f0b9a9f1d646fca8","SpanId":"9205c2fce9f7881a","Properties":{"ElapsedMilliseconds":9.1898,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000002A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:17.0201422+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"504af1de432fa21573f6b0d095569f77","SpanId":"4f49bc662cad696e","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000002B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:17.0211527+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"504af1de432fa21573f6b0d095569f77","SpanId":"4f49bc662cad696e","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000002B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:17.0225664+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"504af1de432fa21573f6b0d095569f77","SpanId":"4f49bc662cad696e","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:0000002B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:17.0228863+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"504af1de432fa21573f6b0d095569f77","SpanId":"4f49bc662cad696e","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000002B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:17.0230959+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"504af1de432fa21573f6b0d095569f77","SpanId":"4f49bc662cad696e","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:17.0234009+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"504af1de432fa21573f6b0d095569f77","SpanId":"4f49bc662cad696e","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:17.0235371+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"504af1de432fa21573f6b0d095569f77","SpanId":"4f49bc662cad696e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:17.0237077+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"504af1de432fa21573f6b0d095569f77","SpanId":"4f49bc662cad696e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:17.0244088+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"504af1de432fa21573f6b0d095569f77","SpanId":"4f49bc662cad696e","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:17.0246897+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"504af1de432fa21573f6b0d095569f77","SpanId":"4f49bc662cad696e","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:17.0248702+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"504af1de432fa21573f6b0d095569f77","SpanId":"4f49bc662cad696e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:17.0256814+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"504af1de432fa21573f6b0d095569f77","SpanId":"4f49bc662cad696e","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:17.0264403+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"504af1de432fa21573f6b0d095569f77","SpanId":"4f49bc662cad696e","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:17.0274697+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"504af1de432fa21573f6b0d095569f77","SpanId":"4f49bc662cad696e","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:17.0277891+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"504af1de432fa21573f6b0d095569f77","SpanId":"4f49bc662cad696e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:17.0279107+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"504af1de432fa21573f6b0d095569f77","SpanId":"4f49bc662cad696e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:17.0280217+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"504af1de432fa21573f6b0d095569f77","SpanId":"4f49bc662cad696e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:17.0282108+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"504af1de432fa21573f6b0d095569f77","SpanId":"4f49bc662cad696e","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:17.0284575+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"504af1de432fa21573f6b0d095569f77","SpanId":"4f49bc662cad696e","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.1743,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:0000002B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:17.0286214+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"504af1de432fa21573f6b0d095569f77","SpanId":"4f49bc662cad696e","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000002B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:17.0287782+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"504af1de432fa21573f6b0d095569f77","SpanId":"4f49bc662cad696e","Properties":{"ElapsedMilliseconds":8.6451,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000002B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:20.0204732+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"ba1294966bf958b774695d3b6d8eb393","SpanId":"efa08f14ebd8816e","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000002C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:20.0211502+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"ba1294966bf958b774695d3b6d8eb393","SpanId":"efa08f14ebd8816e","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000002C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:20.0214729+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"ba1294966bf958b774695d3b6d8eb393","SpanId":"efa08f14ebd8816e","Properties":{"ElapsedMilliseconds":0.9993,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000002C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:20.0238918+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"a4b7a720ed0b34ef47ced040ae1996a3","SpanId":"8641b1fc8ad4532c","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000002D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:20.0242662+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"a4b7a720ed0b34ef47ced040ae1996a3","SpanId":"8641b1fc8ad4532c","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000002D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:20.0253929+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"a4b7a720ed0b34ef47ced040ae1996a3","SpanId":"8641b1fc8ad4532c","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:0000002D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:20.0257561+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"a4b7a720ed0b34ef47ced040ae1996a3","SpanId":"8641b1fc8ad4532c","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000002D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:20.0259536+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"a4b7a720ed0b34ef47ced040ae1996a3","SpanId":"8641b1fc8ad4532c","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:20.0262896+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"a4b7a720ed0b34ef47ced040ae1996a3","SpanId":"8641b1fc8ad4532c","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:20.0264417+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"a4b7a720ed0b34ef47ced040ae1996a3","SpanId":"8641b1fc8ad4532c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:20.0266647+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"a4b7a720ed0b34ef47ced040ae1996a3","SpanId":"8641b1fc8ad4532c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:20.0273316+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"a4b7a720ed0b34ef47ced040ae1996a3","SpanId":"8641b1fc8ad4532c","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:20.0276023+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"a4b7a720ed0b34ef47ced040ae1996a3","SpanId":"8641b1fc8ad4532c","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:20.0277466+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"a4b7a720ed0b34ef47ced040ae1996a3","SpanId":"8641b1fc8ad4532c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:20.0285456+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"a4b7a720ed0b34ef47ced040ae1996a3","SpanId":"8641b1fc8ad4532c","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:20.0293826+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"a4b7a720ed0b34ef47ced040ae1996a3","SpanId":"8641b1fc8ad4532c","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:20.0305079+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"a4b7a720ed0b34ef47ced040ae1996a3","SpanId":"8641b1fc8ad4532c","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:20.0308211+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"a4b7a720ed0b34ef47ced040ae1996a3","SpanId":"8641b1fc8ad4532c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:20.0309885+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"a4b7a720ed0b34ef47ced040ae1996a3","SpanId":"8641b1fc8ad4532c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:20.0311308+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"a4b7a720ed0b34ef47ced040ae1996a3","SpanId":"8641b1fc8ad4532c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:20.0313537+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"a4b7a720ed0b34ef47ced040ae1996a3","SpanId":"8641b1fc8ad4532c","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:20.0315552+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"a4b7a720ed0b34ef47ced040ae1996a3","SpanId":"8641b1fc8ad4532c","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.3879,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:0000002D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:20.0317418+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"a4b7a720ed0b34ef47ced040ae1996a3","SpanId":"8641b1fc8ad4532c","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000002D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:20.0319196+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"a4b7a720ed0b34ef47ced040ae1996a3","SpanId":"8641b1fc8ad4532c","Properties":{"ElapsedMilliseconds":8.0255,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000002D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:23.0204269+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"e07da66f89f9b54bb26833a95f699ad3","SpanId":"1c97248e472bf43a","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000002E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:23.0210437+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"e07da66f89f9b54bb26833a95f699ad3","SpanId":"1c97248e472bf43a","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000002E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:23.0230150+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"e07da66f89f9b54bb26833a95f699ad3","SpanId":"1c97248e472bf43a","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:0000002E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:23.0233705+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"e07da66f89f9b54bb26833a95f699ad3","SpanId":"1c97248e472bf43a","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000002E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:23.0235599+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"e07da66f89f9b54bb26833a95f699ad3","SpanId":"1c97248e472bf43a","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:23.0239236+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"e07da66f89f9b54bb26833a95f699ad3","SpanId":"1c97248e472bf43a","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:23.0240984+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"e07da66f89f9b54bb26833a95f699ad3","SpanId":"1c97248e472bf43a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:23.0242161+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"e07da66f89f9b54bb26833a95f699ad3","SpanId":"1c97248e472bf43a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:23.0250703+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"e07da66f89f9b54bb26833a95f699ad3","SpanId":"1c97248e472bf43a","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:23.0253303+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"e07da66f89f9b54bb26833a95f699ad3","SpanId":"1c97248e472bf43a","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:23.0254486+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"e07da66f89f9b54bb26833a95f699ad3","SpanId":"1c97248e472bf43a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:23.0265260+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"e07da66f89f9b54bb26833a95f699ad3","SpanId":"1c97248e472bf43a","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:23.0274747+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"e07da66f89f9b54bb26833a95f699ad3","SpanId":"1c97248e472bf43a","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:23.0288075+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"e07da66f89f9b54bb26833a95f699ad3","SpanId":"1c97248e472bf43a","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:23.0291072+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"e07da66f89f9b54bb26833a95f699ad3","SpanId":"1c97248e472bf43a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:23.0292694+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"e07da66f89f9b54bb26833a95f699ad3","SpanId":"1c97248e472bf43a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:23.0293862+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"e07da66f89f9b54bb26833a95f699ad3","SpanId":"1c97248e472bf43a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:23.0295886+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"e07da66f89f9b54bb26833a95f699ad3","SpanId":"1c97248e472bf43a","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000002E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:23.0297829+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"e07da66f89f9b54bb26833a95f699ad3","SpanId":"1c97248e472bf43a","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.0115,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:0000002E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:23.0299296+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"e07da66f89f9b54bb26833a95f699ad3","SpanId":"1c97248e472bf43a","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000002E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:23.0300993+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"e07da66f89f9b54bb26833a95f699ad3","SpanId":"1c97248e472bf43a","Properties":{"ElapsedMilliseconds":9.6778,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000002E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:26.0203782+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"04a3452c7916c2f1133bb65169b38e4a","SpanId":"e5d4278bfd1b58fd","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000002F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:26.0207640+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"04a3452c7916c2f1133bb65169b38e4a","SpanId":"e5d4278bfd1b58fd","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000002F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:26.0212115+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"04a3452c7916c2f1133bb65169b38e4a","SpanId":"e5d4278bfd1b58fd","Properties":{"ElapsedMilliseconds":0.8331,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000002F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:26.0242519+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"c8b8089aaf4e3e69ce97314d86da82bc","SpanId":"169bf3e48a60cd76","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000030","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:26.0245923+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"c8b8089aaf4e3e69ce97314d86da82bc","SpanId":"169bf3e48a60cd76","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000030","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:26.0259100+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c8b8089aaf4e3e69ce97314d86da82bc","SpanId":"169bf3e48a60cd76","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000030","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:26.3612679+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"c8b8089aaf4e3e69ce97314d86da82bc","SpanId":"169bf3e48a60cd76","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000030","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:26.3621125+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"c8b8089aaf4e3e69ce97314d86da82bc","SpanId":"169bf3e48a60cd76","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000030","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:26.3626393+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"c8b8089aaf4e3e69ce97314d86da82bc","SpanId":"169bf3e48a60cd76","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000030","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:26.3628261+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"c8b8089aaf4e3e69ce97314d86da82bc","SpanId":"169bf3e48a60cd76","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000030","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:26.3629780+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"c8b8089aaf4e3e69ce97314d86da82bc","SpanId":"169bf3e48a60cd76","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000030","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:26.3637954+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c8b8089aaf4e3e69ce97314d86da82bc","SpanId":"169bf3e48a60cd76","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000030","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:26.3641445+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"c8b8089aaf4e3e69ce97314d86da82bc","SpanId":"169bf3e48a60cd76","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000030","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:26.3645634+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"c8b8089aaf4e3e69ce97314d86da82bc","SpanId":"169bf3e48a60cd76","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000030","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:26.3655836+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c8b8089aaf4e3e69ce97314d86da82bc","SpanId":"169bf3e48a60cd76","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000030","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:26.3664451+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c8b8089aaf4e3e69ce97314d86da82bc","SpanId":"169bf3e48a60cd76","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000030","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:26.3676580+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c8b8089aaf4e3e69ce97314d86da82bc","SpanId":"169bf3e48a60cd76","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000030","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:26.3679523+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"c8b8089aaf4e3e69ce97314d86da82bc","SpanId":"169bf3e48a60cd76","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000030","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:26.3680647+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"c8b8089aaf4e3e69ce97314d86da82bc","SpanId":"169bf3e48a60cd76","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000030","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:26.3682054+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"c8b8089aaf4e3e69ce97314d86da82bc","SpanId":"169bf3e48a60cd76","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000030","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:26.3684162+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"c8b8089aaf4e3e69ce97314d86da82bc","SpanId":"169bf3e48a60cd76","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000030","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:26.3686581+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"c8b8089aaf4e3e69ce97314d86da82bc","SpanId":"169bf3e48a60cd76","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.1486,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000030","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:26.3688256+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"c8b8089aaf4e3e69ce97314d86da82bc","SpanId":"169bf3e48a60cd76","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000030","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:26.3690115+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"c8b8089aaf4e3e69ce97314d86da82bc","SpanId":"169bf3e48a60cd76","Properties":{"ElapsedMilliseconds":344.7616,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000030","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:29.0201210+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"f1f371e60f545fad5278b94ff81ac2c0","SpanId":"f5cdecb109abc3b5","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000031","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:29.0205700+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"f1f371e60f545fad5278b94ff81ac2c0","SpanId":"f5cdecb109abc3b5","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000031","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:29.0223691+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"f1f371e60f545fad5278b94ff81ac2c0","SpanId":"f5cdecb109abc3b5","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000031","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:29.0229455+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"f1f371e60f545fad5278b94ff81ac2c0","SpanId":"f5cdecb109abc3b5","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000031","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:29.0231331+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"f1f371e60f545fad5278b94ff81ac2c0","SpanId":"f5cdecb109abc3b5","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000031","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:29.0235046+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"f1f371e60f545fad5278b94ff81ac2c0","SpanId":"f5cdecb109abc3b5","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000031","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:29.0236654+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"f1f371e60f545fad5278b94ff81ac2c0","SpanId":"f5cdecb109abc3b5","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000031","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:29.0238124+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"f1f371e60f545fad5278b94ff81ac2c0","SpanId":"f5cdecb109abc3b5","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000031","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:29.0246309+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"f1f371e60f545fad5278b94ff81ac2c0","SpanId":"f5cdecb109abc3b5","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000031","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:29.0249832+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"f1f371e60f545fad5278b94ff81ac2c0","SpanId":"f5cdecb109abc3b5","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000031","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:29.0251325+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"f1f371e60f545fad5278b94ff81ac2c0","SpanId":"f5cdecb109abc3b5","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000031","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:29.0264361+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"f1f371e60f545fad5278b94ff81ac2c0","SpanId":"f5cdecb109abc3b5","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000031","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:29.0277746+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"f1f371e60f545fad5278b94ff81ac2c0","SpanId":"f5cdecb109abc3b5","Properties":{"elapsed":"1","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000031","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:29.0295947+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"f1f371e60f545fad5278b94ff81ac2c0","SpanId":"f5cdecb109abc3b5","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000031","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:29.0301023+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"f1f371e60f545fad5278b94ff81ac2c0","SpanId":"f5cdecb109abc3b5","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000031","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:29.0302786+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"f1f371e60f545fad5278b94ff81ac2c0","SpanId":"f5cdecb109abc3b5","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000031","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:29.0304406+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"f1f371e60f545fad5278b94ff81ac2c0","SpanId":"f5cdecb109abc3b5","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000031","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:29.0307800+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"f1f371e60f545fad5278b94ff81ac2c0","SpanId":"f5cdecb109abc3b5","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000031","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:29.0311482+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"f1f371e60f545fad5278b94ff81ac2c0","SpanId":"f5cdecb109abc3b5","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":7.7646,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000031","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:29.0313813+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"f1f371e60f545fad5278b94ff81ac2c0","SpanId":"f5cdecb109abc3b5","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000031","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:29.0317415+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"f1f371e60f545fad5278b94ff81ac2c0","SpanId":"f5cdecb109abc3b5","Properties":{"ElapsedMilliseconds":11.6052,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000031","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:32.0203192+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"04abe32e78fbcbec931b778473a720e6","SpanId":"ffd6c18dda86a5c1","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000032","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:32.0207277+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"04abe32e78fbcbec931b778473a720e6","SpanId":"ffd6c18dda86a5c1","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000032","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:32.0210038+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"04abe32e78fbcbec931b778473a720e6","SpanId":"ffd6c18dda86a5c1","Properties":{"ElapsedMilliseconds":0.6878,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000032","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:32.0234417+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"6352df4c678af9a19d1ee384d7dec6f7","SpanId":"0896402e14ae717a","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000033","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:32.0237187+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"6352df4c678af9a19d1ee384d7dec6f7","SpanId":"0896402e14ae717a","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000033","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:32.0248147+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"6352df4c678af9a19d1ee384d7dec6f7","SpanId":"0896402e14ae717a","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000033","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:32.0251305+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"6352df4c678af9a19d1ee384d7dec6f7","SpanId":"0896402e14ae717a","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000033","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:32.0252859+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"6352df4c678af9a19d1ee384d7dec6f7","SpanId":"0896402e14ae717a","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000033","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:32.0256174+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"6352df4c678af9a19d1ee384d7dec6f7","SpanId":"0896402e14ae717a","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000033","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:32.0257850+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"6352df4c678af9a19d1ee384d7dec6f7","SpanId":"0896402e14ae717a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000033","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:32.0259258+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"6352df4c678af9a19d1ee384d7dec6f7","SpanId":"0896402e14ae717a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000033","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:32.0267857+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"6352df4c678af9a19d1ee384d7dec6f7","SpanId":"0896402e14ae717a","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000033","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:32.0270859+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"6352df4c678af9a19d1ee384d7dec6f7","SpanId":"0896402e14ae717a","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000033","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:32.0272081+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"6352df4c678af9a19d1ee384d7dec6f7","SpanId":"0896402e14ae717a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000033","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:32.0282505+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"6352df4c678af9a19d1ee384d7dec6f7","SpanId":"0896402e14ae717a","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000033","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:32.0292140+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"6352df4c678af9a19d1ee384d7dec6f7","SpanId":"0896402e14ae717a","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000033","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:32.0303203+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"6352df4c678af9a19d1ee384d7dec6f7","SpanId":"0896402e14ae717a","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000033","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:32.0306095+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"6352df4c678af9a19d1ee384d7dec6f7","SpanId":"0896402e14ae717a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000033","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:32.0307851+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"6352df4c678af9a19d1ee384d7dec6f7","SpanId":"0896402e14ae717a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000033","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:32.0309282+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"6352df4c678af9a19d1ee384d7dec6f7","SpanId":"0896402e14ae717a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000033","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:32.0311527+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"6352df4c678af9a19d1ee384d7dec6f7","SpanId":"0896402e14ae717a","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000033","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:32.0313532+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"6352df4c678af9a19d1ee384d7dec6f7","SpanId":"0896402e14ae717a","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.8559,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000033","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:32.0315300+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"6352df4c678af9a19d1ee384d7dec6f7","SpanId":"0896402e14ae717a","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000033","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:32.0317081+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"6352df4c678af9a19d1ee384d7dec6f7","SpanId":"0896402e14ae717a","Properties":{"ElapsedMilliseconds":8.2662,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000033","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:35.0198619+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"c5d21b5ad17e274e74f24924f6dcb3be","SpanId":"d07ba227599a0f6d","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000034","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:35.0201893+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"c5d21b5ad17e274e74f24924f6dcb3be","SpanId":"d07ba227599a0f6d","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000034","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:35.0214362+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c5d21b5ad17e274e74f24924f6dcb3be","SpanId":"d07ba227599a0f6d","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000034","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:35.0218439+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"c5d21b5ad17e274e74f24924f6dcb3be","SpanId":"d07ba227599a0f6d","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000034","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:35.0220340+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"c5d21b5ad17e274e74f24924f6dcb3be","SpanId":"d07ba227599a0f6d","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000034","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:35.0224132+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"c5d21b5ad17e274e74f24924f6dcb3be","SpanId":"d07ba227599a0f6d","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000034","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:35.0226108+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"c5d21b5ad17e274e74f24924f6dcb3be","SpanId":"d07ba227599a0f6d","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000034","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:35.0227737+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"c5d21b5ad17e274e74f24924f6dcb3be","SpanId":"d07ba227599a0f6d","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000034","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:35.0236560+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c5d21b5ad17e274e74f24924f6dcb3be","SpanId":"d07ba227599a0f6d","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000034","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:35.0240235+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"c5d21b5ad17e274e74f24924f6dcb3be","SpanId":"d07ba227599a0f6d","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000034","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:35.0241989+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"c5d21b5ad17e274e74f24924f6dcb3be","SpanId":"d07ba227599a0f6d","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000034","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:35.0253513+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c5d21b5ad17e274e74f24924f6dcb3be","SpanId":"d07ba227599a0f6d","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000034","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:35.0266688+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c5d21b5ad17e274e74f24924f6dcb3be","SpanId":"d07ba227599a0f6d","Properties":{"elapsed":"1","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000034","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:35.0288027+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c5d21b5ad17e274e74f24924f6dcb3be","SpanId":"d07ba227599a0f6d","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000034","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:35.0291533+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"c5d21b5ad17e274e74f24924f6dcb3be","SpanId":"d07ba227599a0f6d","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000034","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:35.0293838+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"c5d21b5ad17e274e74f24924f6dcb3be","SpanId":"d07ba227599a0f6d","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000034","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:35.0295253+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"c5d21b5ad17e274e74f24924f6dcb3be","SpanId":"d07ba227599a0f6d","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000034","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:35.0299546+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"c5d21b5ad17e274e74f24924f6dcb3be","SpanId":"d07ba227599a0f6d","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000034","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:35.0302781+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"c5d21b5ad17e274e74f24924f6dcb3be","SpanId":"d07ba227599a0f6d","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":8.0415,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000034","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:35.0305427+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"c5d21b5ad17e274e74f24924f6dcb3be","SpanId":"d07ba227599a0f6d","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000034","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:35.0307673+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"c5d21b5ad17e274e74f24924f6dcb3be","SpanId":"d07ba227599a0f6d","Properties":{"ElapsedMilliseconds":10.9013,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000034","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:38.0202089+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"a660f648c0ba757eb7f3bd00f9d4fb9f","SpanId":"304af3fca2b8a1a1","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000035","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:38.0206583+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"a660f648c0ba757eb7f3bd00f9d4fb9f","SpanId":"304af3fca2b8a1a1","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000035","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:38.0208678+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"a660f648c0ba757eb7f3bd00f9d4fb9f","SpanId":"304af3fca2b8a1a1","Properties":{"ElapsedMilliseconds":0.661,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000035","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:38.0239294+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"60d223a1851de554199a2d2b5f899014","SpanId":"8539c5412631ae28","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000036","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:38.0243395+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"60d223a1851de554199a2d2b5f899014","SpanId":"8539c5412631ae28","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000036","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:38.0258220+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"60d223a1851de554199a2d2b5f899014","SpanId":"8539c5412631ae28","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000036","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:38.0262590+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"60d223a1851de554199a2d2b5f899014","SpanId":"8539c5412631ae28","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000036","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:38.0264510+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"60d223a1851de554199a2d2b5f899014","SpanId":"8539c5412631ae28","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000036","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:38.0267674+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"60d223a1851de554199a2d2b5f899014","SpanId":"8539c5412631ae28","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000036","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:38.0268927+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"60d223a1851de554199a2d2b5f899014","SpanId":"8539c5412631ae28","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000036","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:38.0270384+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"60d223a1851de554199a2d2b5f899014","SpanId":"8539c5412631ae28","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000036","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:38.0278614+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"60d223a1851de554199a2d2b5f899014","SpanId":"8539c5412631ae28","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000036","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:38.0282417+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"60d223a1851de554199a2d2b5f899014","SpanId":"8539c5412631ae28","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000036","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:38.0283916+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"60d223a1851de554199a2d2b5f899014","SpanId":"8539c5412631ae28","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000036","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:38.0294114+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"60d223a1851de554199a2d2b5f899014","SpanId":"8539c5412631ae28","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000036","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:38.0304098+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"60d223a1851de554199a2d2b5f899014","SpanId":"8539c5412631ae28","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000036","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:38.0318223+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"60d223a1851de554199a2d2b5f899014","SpanId":"8539c5412631ae28","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000036","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:38.0321165+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"60d223a1851de554199a2d2b5f899014","SpanId":"8539c5412631ae28","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000036","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:38.0322344+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"60d223a1851de554199a2d2b5f899014","SpanId":"8539c5412631ae28","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000036","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:38.0324023+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"60d223a1851de554199a2d2b5f899014","SpanId":"8539c5412631ae28","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000036","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:38.0326485+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"60d223a1851de554199a2d2b5f899014","SpanId":"8539c5412631ae28","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000036","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:38.0330617+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"60d223a1851de554199a2d2b5f899014","SpanId":"8539c5412631ae28","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.4204,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000036","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:38.0332641+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"60d223a1851de554199a2d2b5f899014","SpanId":"8539c5412631ae28","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000036","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:38.0335047+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"60d223a1851de554199a2d2b5f899014","SpanId":"8539c5412631ae28","Properties":{"ElapsedMilliseconds":9.5737,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000036","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:41.0202071+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"cfb9875781a2f61f1a716585a9ab3aef","SpanId":"270b00275dbbedbc","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000037","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:41.0206959+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"cfb9875781a2f61f1a716585a9ab3aef","SpanId":"270b00275dbbedbc","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000037","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:41.0220923+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"cfb9875781a2f61f1a716585a9ab3aef","SpanId":"270b00275dbbedbc","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000037","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:41.0226431+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"cfb9875781a2f61f1a716585a9ab3aef","SpanId":"270b00275dbbedbc","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000037","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:41.0228390+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"cfb9875781a2f61f1a716585a9ab3aef","SpanId":"270b00275dbbedbc","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000037","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:41.0232550+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"cfb9875781a2f61f1a716585a9ab3aef","SpanId":"270b00275dbbedbc","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000037","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:41.0234402+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"cfb9875781a2f61f1a716585a9ab3aef","SpanId":"270b00275dbbedbc","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000037","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:41.0236325+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"cfb9875781a2f61f1a716585a9ab3aef","SpanId":"270b00275dbbedbc","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000037","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:41.0245597+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"cfb9875781a2f61f1a716585a9ab3aef","SpanId":"270b00275dbbedbc","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000037","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:41.0250056+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"cfb9875781a2f61f1a716585a9ab3aef","SpanId":"270b00275dbbedbc","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000037","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:41.0251419+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"cfb9875781a2f61f1a716585a9ab3aef","SpanId":"270b00275dbbedbc","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000037","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:41.0263782+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"cfb9875781a2f61f1a716585a9ab3aef","SpanId":"270b00275dbbedbc","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000037","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:41.0276351+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"cfb9875781a2f61f1a716585a9ab3aef","SpanId":"270b00275dbbedbc","Properties":{"elapsed":"1","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000037","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:41.0292013+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"cfb9875781a2f61f1a716585a9ab3aef","SpanId":"270b00275dbbedbc","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000037","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:41.0295649+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"cfb9875781a2f61f1a716585a9ab3aef","SpanId":"270b00275dbbedbc","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000037","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:41.0297199+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"cfb9875781a2f61f1a716585a9ab3aef","SpanId":"270b00275dbbedbc","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000037","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:41.0298261+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"cfb9875781a2f61f1a716585a9ab3aef","SpanId":"270b00275dbbedbc","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000037","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:41.0300617+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"cfb9875781a2f61f1a716585a9ab3aef","SpanId":"270b00275dbbedbc","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000037","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:41.0303929+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"cfb9875781a2f61f1a716585a9ab3aef","SpanId":"270b00275dbbedbc","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":7.3181,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000037","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:41.0305828+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"cfb9875781a2f61f1a716585a9ab3aef","SpanId":"270b00275dbbedbc","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000037","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:41.0307910+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"cfb9875781a2f61f1a716585a9ab3aef","SpanId":"270b00275dbbedbc","Properties":{"ElapsedMilliseconds":10.5831,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000037","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:44.0201452+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"a1bcb0674d3cc911aa50a7b9a21556f4","SpanId":"d1a33cb9143784ff","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000038","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:44.0205040+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"a1bcb0674d3cc911aa50a7b9a21556f4","SpanId":"d1a33cb9143784ff","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000038","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:44.0207240+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"a1bcb0674d3cc911aa50a7b9a21556f4","SpanId":"d1a33cb9143784ff","Properties":{"ElapsedMilliseconds":0.5786,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000038","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:44.0233736+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"f24923b984429cacb8bcbb6cd3fd81c0","SpanId":"183f854dde0368ec","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000039","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:44.0236759+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"f24923b984429cacb8bcbb6cd3fd81c0","SpanId":"183f854dde0368ec","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000039","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:44.0255830+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"f24923b984429cacb8bcbb6cd3fd81c0","SpanId":"183f854dde0368ec","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000039","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:44.0259286+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"f24923b984429cacb8bcbb6cd3fd81c0","SpanId":"183f854dde0368ec","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000039","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:44.0260937+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"f24923b984429cacb8bcbb6cd3fd81c0","SpanId":"183f854dde0368ec","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000039","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:44.0264257+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"f24923b984429cacb8bcbb6cd3fd81c0","SpanId":"183f854dde0368ec","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000039","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:44.0265908+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"f24923b984429cacb8bcbb6cd3fd81c0","SpanId":"183f854dde0368ec","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000039","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:44.0266952+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"f24923b984429cacb8bcbb6cd3fd81c0","SpanId":"183f854dde0368ec","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000039","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:44.0274384+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"f24923b984429cacb8bcbb6cd3fd81c0","SpanId":"183f854dde0368ec","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000039","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:44.0277308+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"f24923b984429cacb8bcbb6cd3fd81c0","SpanId":"183f854dde0368ec","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000039","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:44.0278614+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"f24923b984429cacb8bcbb6cd3fd81c0","SpanId":"183f854dde0368ec","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000039","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:44.0287667+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"f24923b984429cacb8bcbb6cd3fd81c0","SpanId":"183f854dde0368ec","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000039","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:44.0298429+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"f24923b984429cacb8bcbb6cd3fd81c0","SpanId":"183f854dde0368ec","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000039","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:44.0323525+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"f24923b984429cacb8bcbb6cd3fd81c0","SpanId":"183f854dde0368ec","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000039","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:44.0326865+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"f24923b984429cacb8bcbb6cd3fd81c0","SpanId":"183f854dde0368ec","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000039","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:44.0328013+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"f24923b984429cacb8bcbb6cd3fd81c0","SpanId":"183f854dde0368ec","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000039","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:44.0329689+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"f24923b984429cacb8bcbb6cd3fd81c0","SpanId":"183f854dde0368ec","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000039","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:44.0331890+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"f24923b984429cacb8bcbb6cd3fd81c0","SpanId":"183f854dde0368ec","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000039","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:44.0334786+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"f24923b984429cacb8bcbb6cd3fd81c0","SpanId":"183f854dde0368ec","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":7.1816,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000039","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:44.0337140+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"f24923b984429cacb8bcbb6cd3fd81c0","SpanId":"183f854dde0368ec","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000039","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:44.0339420+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"f24923b984429cacb8bcbb6cd3fd81c0","SpanId":"183f854dde0368ec","Properties":{"ElapsedMilliseconds":10.5639,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000039","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:47.0200594+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"fa343a34c5be88e226c118f69b27a8ea","SpanId":"e39593148e867178","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000003A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:47.0205608+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"fa343a34c5be88e226c118f69b27a8ea","SpanId":"e39593148e867178","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000003A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:47.0226042+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"fa343a34c5be88e226c118f69b27a8ea","SpanId":"e39593148e867178","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:0000003A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:47.0229429+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"fa343a34c5be88e226c118f69b27a8ea","SpanId":"e39593148e867178","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000003A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:47.0231229+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"fa343a34c5be88e226c118f69b27a8ea","SpanId":"e39593148e867178","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:47.0235558+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"fa343a34c5be88e226c118f69b27a8ea","SpanId":"e39593148e867178","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:47.0237223+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"fa343a34c5be88e226c118f69b27a8ea","SpanId":"e39593148e867178","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:47.0238771+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"fa343a34c5be88e226c118f69b27a8ea","SpanId":"e39593148e867178","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:47.0245861+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"fa343a34c5be88e226c118f69b27a8ea","SpanId":"e39593148e867178","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:47.0249060+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"fa343a34c5be88e226c118f69b27a8ea","SpanId":"e39593148e867178","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:47.0250474+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"fa343a34c5be88e226c118f69b27a8ea","SpanId":"e39593148e867178","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:47.0260129+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"fa343a34c5be88e226c118f69b27a8ea","SpanId":"e39593148e867178","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:47.0272941+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"fa343a34c5be88e226c118f69b27a8ea","SpanId":"e39593148e867178","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:47.0290418+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"fa343a34c5be88e226c118f69b27a8ea","SpanId":"e39593148e867178","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:47.0303730+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"fa343a34c5be88e226c118f69b27a8ea","SpanId":"e39593148e867178","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:47.0305409+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"fa343a34c5be88e226c118f69b27a8ea","SpanId":"e39593148e867178","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:47.0306665+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"fa343a34c5be88e226c118f69b27a8ea","SpanId":"e39593148e867178","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:47.0308869+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"fa343a34c5be88e226c118f69b27a8ea","SpanId":"e39593148e867178","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:47.0310876+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"fa343a34c5be88e226c118f69b27a8ea","SpanId":"e39593148e867178","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":7.6803,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:0000003A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:47.0312674+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"fa343a34c5be88e226c118f69b27a8ea","SpanId":"e39593148e867178","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000003A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:47.0316685+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"fa343a34c5be88e226c118f69b27a8ea","SpanId":"e39593148e867178","Properties":{"ElapsedMilliseconds":11.609,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000003A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:50.0205364+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"99ceec1f5a5cbb5567496b6463b39d94","SpanId":"d95b217fa32d222a","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000003B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:50.0211559+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"99ceec1f5a5cbb5567496b6463b39d94","SpanId":"d95b217fa32d222a","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000003B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:50.0214079+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"99ceec1f5a5cbb5567496b6463b39d94","SpanId":"d95b217fa32d222a","Properties":{"ElapsedMilliseconds":0.8746,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000003B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:50.0237831+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"1bc900e25f6eb2b332f05d328170c439","SpanId":"5c10d03de0855d7e","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000003C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:50.0240720+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"1bc900e25f6eb2b332f05d328170c439","SpanId":"5c10d03de0855d7e","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000003C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:50.0251400+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"1bc900e25f6eb2b332f05d328170c439","SpanId":"5c10d03de0855d7e","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:0000003C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:50.0256911+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"1bc900e25f6eb2b332f05d328170c439","SpanId":"5c10d03de0855d7e","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000003C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:50.0259453+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"1bc900e25f6eb2b332f05d328170c439","SpanId":"5c10d03de0855d7e","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:50.0262746+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"1bc900e25f6eb2b332f05d328170c439","SpanId":"5c10d03de0855d7e","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:50.0264341+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"1bc900e25f6eb2b332f05d328170c439","SpanId":"5c10d03de0855d7e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:50.0265620+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"1bc900e25f6eb2b332f05d328170c439","SpanId":"5c10d03de0855d7e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:50.0274719+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"1bc900e25f6eb2b332f05d328170c439","SpanId":"5c10d03de0855d7e","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:50.0278776+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"1bc900e25f6eb2b332f05d328170c439","SpanId":"5c10d03de0855d7e","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:50.0280288+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"1bc900e25f6eb2b332f05d328170c439","SpanId":"5c10d03de0855d7e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:50.0295572+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"1bc900e25f6eb2b332f05d328170c439","SpanId":"5c10d03de0855d7e","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:50.0308080+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"1bc900e25f6eb2b332f05d328170c439","SpanId":"5c10d03de0855d7e","Properties":{"elapsed":"1","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:50.0326890+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"1bc900e25f6eb2b332f05d328170c439","SpanId":"5c10d03de0855d7e","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:50.0329982+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"1bc900e25f6eb2b332f05d328170c439","SpanId":"5c10d03de0855d7e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:50.0331149+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"1bc900e25f6eb2b332f05d328170c439","SpanId":"5c10d03de0855d7e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:50.0332387+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"1bc900e25f6eb2b332f05d328170c439","SpanId":"5c10d03de0855d7e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:50.0334632+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"1bc900e25f6eb2b332f05d328170c439","SpanId":"5c10d03de0855d7e","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:50.0337122+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"1bc900e25f6eb2b332f05d328170c439","SpanId":"5c10d03de0855d7e","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":7.5633,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:0000003C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:50.0338864+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"1bc900e25f6eb2b332f05d328170c439","SpanId":"5c10d03de0855d7e","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000003C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:50.0340787+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"1bc900e25f6eb2b332f05d328170c439","SpanId":"5c10d03de0855d7e","Properties":{"ElapsedMilliseconds":10.2938,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000003C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:53.0200362+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"8a6ca0e0c2addc3957ddccfcc7edcf36","SpanId":"0db2bfc51a5a08c1","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000003D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:53.0204260+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"8a6ca0e0c2addc3957ddccfcc7edcf36","SpanId":"0db2bfc51a5a08c1","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000003D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:53.0218294+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"8a6ca0e0c2addc3957ddccfcc7edcf36","SpanId":"0db2bfc51a5a08c1","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:0000003D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:53.0222547+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"8a6ca0e0c2addc3957ddccfcc7edcf36","SpanId":"0db2bfc51a5a08c1","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000003D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:53.0224804+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"8a6ca0e0c2addc3957ddccfcc7edcf36","SpanId":"0db2bfc51a5a08c1","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:53.0229709+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"8a6ca0e0c2addc3957ddccfcc7edcf36","SpanId":"0db2bfc51a5a08c1","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:53.0231728+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"8a6ca0e0c2addc3957ddccfcc7edcf36","SpanId":"0db2bfc51a5a08c1","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:53.0233451+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"8a6ca0e0c2addc3957ddccfcc7edcf36","SpanId":"0db2bfc51a5a08c1","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:53.0244263+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"8a6ca0e0c2addc3957ddccfcc7edcf36","SpanId":"0db2bfc51a5a08c1","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:53.0249659+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"8a6ca0e0c2addc3957ddccfcc7edcf36","SpanId":"0db2bfc51a5a08c1","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:53.0251947+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"8a6ca0e0c2addc3957ddccfcc7edcf36","SpanId":"0db2bfc51a5a08c1","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:53.0263666+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"8a6ca0e0c2addc3957ddccfcc7edcf36","SpanId":"0db2bfc51a5a08c1","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:53.0275153+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"8a6ca0e0c2addc3957ddccfcc7edcf36","SpanId":"0db2bfc51a5a08c1","Properties":{"elapsed":"1","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:53.0290371+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"8a6ca0e0c2addc3957ddccfcc7edcf36","SpanId":"0db2bfc51a5a08c1","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:53.0298257+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"8a6ca0e0c2addc3957ddccfcc7edcf36","SpanId":"0db2bfc51a5a08c1","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:53.0299527+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"8a6ca0e0c2addc3957ddccfcc7edcf36","SpanId":"0db2bfc51a5a08c1","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:53.0300856+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"8a6ca0e0c2addc3957ddccfcc7edcf36","SpanId":"0db2bfc51a5a08c1","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:53.0302895+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"8a6ca0e0c2addc3957ddccfcc7edcf36","SpanId":"0db2bfc51a5a08c1","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:53.0305406+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"8a6ca0e0c2addc3957ddccfcc7edcf36","SpanId":"0db2bfc51a5a08c1","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":7.7858,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:0000003D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:53.0307106+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"8a6ca0e0c2addc3957ddccfcc7edcf36","SpanId":"0db2bfc51a5a08c1","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000003D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:53.0309257+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"8a6ca0e0c2addc3957ddccfcc7edcf36","SpanId":"0db2bfc51a5a08c1","Properties":{"ElapsedMilliseconds":10.8871,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000003D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:56.0197264+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"797c0f4be535f06a6419388d02679a16","SpanId":"0f4e402094c21c66","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000003E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:56.0200705+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"797c0f4be535f06a6419388d02679a16","SpanId":"0f4e402094c21c66","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000003E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:56.0202805+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"797c0f4be535f06a6419388d02679a16","SpanId":"0f4e402094c21c66","Properties":{"ElapsedMilliseconds":0.5569,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000003E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:56.0232944+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"5e578bdcf16826a5fdbffb1f9ca9c729","SpanId":"aa282b13e703c2b3","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000003F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:56.0237963+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"5e578bdcf16826a5fdbffb1f9ca9c729","SpanId":"aa282b13e703c2b3","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000003F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:56.0257175+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"5e578bdcf16826a5fdbffb1f9ca9c729","SpanId":"aa282b13e703c2b3","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:0000003F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:56.0260420+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"5e578bdcf16826a5fdbffb1f9ca9c729","SpanId":"aa282b13e703c2b3","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000003F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:56.0262088+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"5e578bdcf16826a5fdbffb1f9ca9c729","SpanId":"aa282b13e703c2b3","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:56.0265880+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"5e578bdcf16826a5fdbffb1f9ca9c729","SpanId":"aa282b13e703c2b3","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:56.0267077+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"5e578bdcf16826a5fdbffb1f9ca9c729","SpanId":"aa282b13e703c2b3","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:56.0268224+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"5e578bdcf16826a5fdbffb1f9ca9c729","SpanId":"aa282b13e703c2b3","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:56.0275828+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"5e578bdcf16826a5fdbffb1f9ca9c729","SpanId":"aa282b13e703c2b3","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:56.0278828+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"5e578bdcf16826a5fdbffb1f9ca9c729","SpanId":"aa282b13e703c2b3","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:56.0280190+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"5e578bdcf16826a5fdbffb1f9ca9c729","SpanId":"aa282b13e703c2b3","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:56.0289567+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"5e578bdcf16826a5fdbffb1f9ca9c729","SpanId":"aa282b13e703c2b3","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:56.0299054+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"5e578bdcf16826a5fdbffb1f9ca9c729","SpanId":"aa282b13e703c2b3","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:56.0313330+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"5e578bdcf16826a5fdbffb1f9ca9c729","SpanId":"aa282b13e703c2b3","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:56.0316786+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"5e578bdcf16826a5fdbffb1f9ca9c729","SpanId":"aa282b13e703c2b3","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:56.0317997+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"5e578bdcf16826a5fdbffb1f9ca9c729","SpanId":"aa282b13e703c2b3","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:56.0319043+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"5e578bdcf16826a5fdbffb1f9ca9c729","SpanId":"aa282b13e703c2b3","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:56.0320973+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"5e578bdcf16826a5fdbffb1f9ca9c729","SpanId":"aa282b13e703c2b3","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000003F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:56.0322675+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"5e578bdcf16826a5fdbffb1f9ca9c729","SpanId":"aa282b13e703c2b3","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.8119,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:0000003F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:56.0324491+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"5e578bdcf16826a5fdbffb1f9ca9c729","SpanId":"aa282b13e703c2b3","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000003F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:56.0326229+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"5e578bdcf16826a5fdbffb1f9ca9c729","SpanId":"aa282b13e703c2b3","Properties":{"ElapsedMilliseconds":9.3368,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000003F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:59.0202536+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"3c7ecbb1acafaade5c11a4d4e194ee7a","SpanId":"c75b9c02515f7d65","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000040","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:59.0219663+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"3c7ecbb1acafaade5c11a4d4e194ee7a","SpanId":"c75b9c02515f7d65","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000040","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:59.0232640+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3c7ecbb1acafaade5c11a4d4e194ee7a","SpanId":"c75b9c02515f7d65","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000040","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:59.0235916+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"3c7ecbb1acafaade5c11a4d4e194ee7a","SpanId":"c75b9c02515f7d65","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000040","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:59.0237461+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"3c7ecbb1acafaade5c11a4d4e194ee7a","SpanId":"c75b9c02515f7d65","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000040","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:59.0241388+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"3c7ecbb1acafaade5c11a4d4e194ee7a","SpanId":"c75b9c02515f7d65","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000040","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:59.0242590+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"3c7ecbb1acafaade5c11a4d4e194ee7a","SpanId":"c75b9c02515f7d65","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000040","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:59.0243962+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"3c7ecbb1acafaade5c11a4d4e194ee7a","SpanId":"c75b9c02515f7d65","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000040","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:59.0254030+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3c7ecbb1acafaade5c11a4d4e194ee7a","SpanId":"c75b9c02515f7d65","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000040","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:59.0257899+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"3c7ecbb1acafaade5c11a4d4e194ee7a","SpanId":"c75b9c02515f7d65","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000040","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:59.0259564+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"3c7ecbb1acafaade5c11a4d4e194ee7a","SpanId":"c75b9c02515f7d65","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000040","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:59.0271574+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3c7ecbb1acafaade5c11a4d4e194ee7a","SpanId":"c75b9c02515f7d65","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000040","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:59.0282939+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3c7ecbb1acafaade5c11a4d4e194ee7a","SpanId":"c75b9c02515f7d65","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000040","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:59.0296820+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3c7ecbb1acafaade5c11a4d4e194ee7a","SpanId":"c75b9c02515f7d65","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000040","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:59.0300512+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"3c7ecbb1acafaade5c11a4d4e194ee7a","SpanId":"c75b9c02515f7d65","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000040","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:59.0302339+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"3c7ecbb1acafaade5c11a4d4e194ee7a","SpanId":"c75b9c02515f7d65","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000040","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:59.0304012+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"3c7ecbb1acafaade5c11a4d4e194ee7a","SpanId":"c75b9c02515f7d65","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000040","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:38:59.0306271+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"3c7ecbb1acafaade5c11a4d4e194ee7a","SpanId":"c75b9c02515f7d65","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000040","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:59.0308535+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"3c7ecbb1acafaade5c11a4d4e194ee7a","SpanId":"c75b9c02515f7d65","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.8568,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000040","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:59.0310638+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"3c7ecbb1acafaade5c11a4d4e194ee7a","SpanId":"c75b9c02515f7d65","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000040","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:38:59.0313271+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"3c7ecbb1acafaade5c11a4d4e194ee7a","SpanId":"c75b9c02515f7d65","Properties":{"ElapsedMilliseconds":11.0606,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000040","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:02.0207824+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"94629e4db3534de17ac2f61f9d3e1cd0","SpanId":"ab0181c5dd04a7fb","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000041","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:02.0211524+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"94629e4db3534de17ac2f61f9d3e1cd0","SpanId":"ab0181c5dd04a7fb","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000041","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:02.0214441+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"94629e4db3534de17ac2f61f9d3e1cd0","SpanId":"ab0181c5dd04a7fb","Properties":{"ElapsedMilliseconds":0.6618,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000041","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:02.0238333+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"bbb6c817808dad64b883fd3adb5afa12","SpanId":"377332696109405b","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000042","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:02.0240624+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"bbb6c817808dad64b883fd3adb5afa12","SpanId":"377332696109405b","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000042","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:02.0256095+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"bbb6c817808dad64b883fd3adb5afa12","SpanId":"377332696109405b","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000042","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:02.0260559+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"bbb6c817808dad64b883fd3adb5afa12","SpanId":"377332696109405b","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000042","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:02.0262210+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"bbb6c817808dad64b883fd3adb5afa12","SpanId":"377332696109405b","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000042","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:02.0265731+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"bbb6c817808dad64b883fd3adb5afa12","SpanId":"377332696109405b","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000042","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:02.0266984+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"bbb6c817808dad64b883fd3adb5afa12","SpanId":"377332696109405b","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000042","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:02.0268487+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"bbb6c817808dad64b883fd3adb5afa12","SpanId":"377332696109405b","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000042","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:02.0276421+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"bbb6c817808dad64b883fd3adb5afa12","SpanId":"377332696109405b","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000042","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:02.0280220+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"bbb6c817808dad64b883fd3adb5afa12","SpanId":"377332696109405b","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000042","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:02.0281889+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"bbb6c817808dad64b883fd3adb5afa12","SpanId":"377332696109405b","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000042","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:02.0291444+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"bbb6c817808dad64b883fd3adb5afa12","SpanId":"377332696109405b","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000042","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:02.0301011+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"bbb6c817808dad64b883fd3adb5afa12","SpanId":"377332696109405b","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000042","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:02.0314316+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"bbb6c817808dad64b883fd3adb5afa12","SpanId":"377332696109405b","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000042","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:02.0317616+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"bbb6c817808dad64b883fd3adb5afa12","SpanId":"377332696109405b","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000042","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:02.0319160+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"bbb6c817808dad64b883fd3adb5afa12","SpanId":"377332696109405b","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000042","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:02.0320563+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"bbb6c817808dad64b883fd3adb5afa12","SpanId":"377332696109405b","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000042","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:02.0323277+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"bbb6c817808dad64b883fd3adb5afa12","SpanId":"377332696109405b","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000042","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:02.0325252+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"bbb6c817808dad64b883fd3adb5afa12","SpanId":"377332696109405b","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.0841,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000042","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:02.0326851+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"bbb6c817808dad64b883fd3adb5afa12","SpanId":"377332696109405b","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000042","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:02.0328573+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"bbb6c817808dad64b883fd3adb5afa12","SpanId":"377332696109405b","Properties":{"ElapsedMilliseconds":9.0182,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000042","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:05.0206303+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"a9ebfe56261adab16da66c87a0d2f95e","SpanId":"68c626adb57293a8","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000043","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:05.0211230+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"a9ebfe56261adab16da66c87a0d2f95e","SpanId":"68c626adb57293a8","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000043","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:05.0229788+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"a9ebfe56261adab16da66c87a0d2f95e","SpanId":"68c626adb57293a8","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000043","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:05.0234136+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"a9ebfe56261adab16da66c87a0d2f95e","SpanId":"68c626adb57293a8","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000043","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:05.0236285+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"a9ebfe56261adab16da66c87a0d2f95e","SpanId":"68c626adb57293a8","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000043","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:05.0239653+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"a9ebfe56261adab16da66c87a0d2f95e","SpanId":"68c626adb57293a8","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000043","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:05.0240903+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"a9ebfe56261adab16da66c87a0d2f95e","SpanId":"68c626adb57293a8","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000043","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:05.0242158+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"a9ebfe56261adab16da66c87a0d2f95e","SpanId":"68c626adb57293a8","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000043","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:05.0250095+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"a9ebfe56261adab16da66c87a0d2f95e","SpanId":"68c626adb57293a8","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000043","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:05.0253867+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"a9ebfe56261adab16da66c87a0d2f95e","SpanId":"68c626adb57293a8","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000043","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:05.0255323+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"a9ebfe56261adab16da66c87a0d2f95e","SpanId":"68c626adb57293a8","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000043","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:05.0265182+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"a9ebfe56261adab16da66c87a0d2f95e","SpanId":"68c626adb57293a8","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000043","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:05.0274644+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"a9ebfe56261adab16da66c87a0d2f95e","SpanId":"68c626adb57293a8","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000043","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:05.0288043+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"a9ebfe56261adab16da66c87a0d2f95e","SpanId":"68c626adb57293a8","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000043","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:05.0291529+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"a9ebfe56261adab16da66c87a0d2f95e","SpanId":"68c626adb57293a8","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000043","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:05.0293027+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"a9ebfe56261adab16da66c87a0d2f95e","SpanId":"68c626adb57293a8","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000043","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:05.0294330+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"a9ebfe56261adab16da66c87a0d2f95e","SpanId":"68c626adb57293a8","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000043","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:05.0296977+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"a9ebfe56261adab16da66c87a0d2f95e","SpanId":"68c626adb57293a8","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000043","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:05.0298947+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"a9ebfe56261adab16da66c87a0d2f95e","SpanId":"68c626adb57293a8","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.0619,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000043","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:05.0300476+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"a9ebfe56261adab16da66c87a0d2f95e","SpanId":"68c626adb57293a8","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000043","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:05.0302155+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"a9ebfe56261adab16da66c87a0d2f95e","SpanId":"68c626adb57293a8","Properties":{"ElapsedMilliseconds":9.5907,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000043","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:08.0202924+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"db0501c39dc292c47d28c89e8eab0641","SpanId":"576283dc955533fd","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000044","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:08.0206860+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"db0501c39dc292c47d28c89e8eab0641","SpanId":"576283dc955533fd","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000044","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:08.0209780+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"db0501c39dc292c47d28c89e8eab0641","SpanId":"576283dc955533fd","Properties":{"ElapsedMilliseconds":0.6866,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000044","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:08.0234879+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"bc3f6298806c72ceef29f36c851fc867","SpanId":"08e433b1287061d0","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000045","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:08.0238326+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"bc3f6298806c72ceef29f36c851fc867","SpanId":"08e433b1287061d0","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000045","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:08.0250601+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"bc3f6298806c72ceef29f36c851fc867","SpanId":"08e433b1287061d0","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000045","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:08.0254521+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"bc3f6298806c72ceef29f36c851fc867","SpanId":"08e433b1287061d0","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000045","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:08.0256332+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"bc3f6298806c72ceef29f36c851fc867","SpanId":"08e433b1287061d0","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000045","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:08.0260534+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"bc3f6298806c72ceef29f36c851fc867","SpanId":"08e433b1287061d0","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000045","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:08.0262004+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"bc3f6298806c72ceef29f36c851fc867","SpanId":"08e433b1287061d0","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000045","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:08.0263468+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"bc3f6298806c72ceef29f36c851fc867","SpanId":"08e433b1287061d0","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000045","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:08.0271603+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"bc3f6298806c72ceef29f36c851fc867","SpanId":"08e433b1287061d0","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000045","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:08.0275102+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"bc3f6298806c72ceef29f36c851fc867","SpanId":"08e433b1287061d0","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000045","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:08.0276384+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"bc3f6298806c72ceef29f36c851fc867","SpanId":"08e433b1287061d0","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000045","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:08.0286729+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"bc3f6298806c72ceef29f36c851fc867","SpanId":"08e433b1287061d0","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000045","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:08.0296360+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"bc3f6298806c72ceef29f36c851fc867","SpanId":"08e433b1287061d0","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000045","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:08.0308093+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"bc3f6298806c72ceef29f36c851fc867","SpanId":"08e433b1287061d0","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000045","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:08.0311693+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"bc3f6298806c72ceef29f36c851fc867","SpanId":"08e433b1287061d0","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000045","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:08.0312848+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"bc3f6298806c72ceef29f36c851fc867","SpanId":"08e433b1287061d0","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000045","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:08.0314213+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"bc3f6298806c72ceef29f36c851fc867","SpanId":"08e433b1287061d0","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000045","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:08.0316134+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"bc3f6298806c72ceef29f36c851fc867","SpanId":"08e433b1287061d0","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000045","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:08.0318163+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"bc3f6298806c72ceef29f36c851fc867","SpanId":"08e433b1287061d0","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.8888,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000045","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:08.0320167+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"bc3f6298806c72ceef29f36c851fc867","SpanId":"08e433b1287061d0","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000045","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:08.0322812+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"bc3f6298806c72ceef29f36c851fc867","SpanId":"08e433b1287061d0","Properties":{"ElapsedMilliseconds":8.7922,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000045","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:11.0206583+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"28077dccf29eaab8897868cb8d255c1e","SpanId":"a31d224ccfcde436","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000046","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:11.0211854+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"28077dccf29eaab8897868cb8d255c1e","SpanId":"a31d224ccfcde436","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000046","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:11.0229625+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"28077dccf29eaab8897868cb8d255c1e","SpanId":"a31d224ccfcde436","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000046","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:11.0233544+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"28077dccf29eaab8897868cb8d255c1e","SpanId":"a31d224ccfcde436","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000046","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:11.0235551+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"28077dccf29eaab8897868cb8d255c1e","SpanId":"a31d224ccfcde436","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000046","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:11.0239298+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"28077dccf29eaab8897868cb8d255c1e","SpanId":"a31d224ccfcde436","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000046","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:11.0240733+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"28077dccf29eaab8897868cb8d255c1e","SpanId":"a31d224ccfcde436","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000046","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:11.0242695+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"28077dccf29eaab8897868cb8d255c1e","SpanId":"a31d224ccfcde436","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000046","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:11.0250364+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"28077dccf29eaab8897868cb8d255c1e","SpanId":"a31d224ccfcde436","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000046","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:11.0253588+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"28077dccf29eaab8897868cb8d255c1e","SpanId":"a31d224ccfcde436","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000046","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:11.0255034+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"28077dccf29eaab8897868cb8d255c1e","SpanId":"a31d224ccfcde436","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000046","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:11.0265187+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"28077dccf29eaab8897868cb8d255c1e","SpanId":"a31d224ccfcde436","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000046","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:11.0274747+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"28077dccf29eaab8897868cb8d255c1e","SpanId":"a31d224ccfcde436","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000046","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:11.0287068+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"28077dccf29eaab8897868cb8d255c1e","SpanId":"a31d224ccfcde436","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000046","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:11.0290665+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"28077dccf29eaab8897868cb8d255c1e","SpanId":"a31d224ccfcde436","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000046","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:11.0292037+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"28077dccf29eaab8897868cb8d255c1e","SpanId":"a31d224ccfcde436","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000046","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:11.0293410+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"28077dccf29eaab8897868cb8d255c1e","SpanId":"a31d224ccfcde436","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000046","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:11.0295186+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"28077dccf29eaab8897868cb8d255c1e","SpanId":"a31d224ccfcde436","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000046","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:11.0297095+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"28077dccf29eaab8897868cb8d255c1e","SpanId":"a31d224ccfcde436","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.8965,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000046","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:11.0298554+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"28077dccf29eaab8897868cb8d255c1e","SpanId":"a31d224ccfcde436","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000046","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:11.0300839+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"28077dccf29eaab8897868cb8d255c1e","SpanId":"a31d224ccfcde436","Properties":{"ElapsedMilliseconds":9.4334,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000046","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:14.0199904+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"0bc6167386aace54790fc7caa861f8d1","SpanId":"eacc6829eb863944","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000047","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:14.0207198+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"0bc6167386aace54790fc7caa861f8d1","SpanId":"eacc6829eb863944","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000047","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:14.0210236+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"0bc6167386aace54790fc7caa861f8d1","SpanId":"eacc6829eb863944","Properties":{"ElapsedMilliseconds":1.0454,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000047","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:14.0240061+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"b829caa8503bd3e0d7588645f572114d","SpanId":"560484021b723143","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000048","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:14.0243182+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"b829caa8503bd3e0d7588645f572114d","SpanId":"560484021b723143","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000048","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:14.0254032+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"b829caa8503bd3e0d7588645f572114d","SpanId":"560484021b723143","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000048","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:14.0257342+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"b829caa8503bd3e0d7588645f572114d","SpanId":"560484021b723143","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000048","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:14.0258984+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"b829caa8503bd3e0d7588645f572114d","SpanId":"560484021b723143","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000048","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:14.0262097+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"b829caa8503bd3e0d7588645f572114d","SpanId":"560484021b723143","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000048","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:14.0263440+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"b829caa8503bd3e0d7588645f572114d","SpanId":"560484021b723143","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000048","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:14.0264739+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"b829caa8503bd3e0d7588645f572114d","SpanId":"560484021b723143","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000048","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:14.0272198+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"b829caa8503bd3e0d7588645f572114d","SpanId":"560484021b723143","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000048","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:14.0275768+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"b829caa8503bd3e0d7588645f572114d","SpanId":"560484021b723143","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000048","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:14.0277127+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"b829caa8503bd3e0d7588645f572114d","SpanId":"560484021b723143","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000048","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:14.0286323+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"b829caa8503bd3e0d7588645f572114d","SpanId":"560484021b723143","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000048","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:14.0296316+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"b829caa8503bd3e0d7588645f572114d","SpanId":"560484021b723143","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000048","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:14.0309448+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"b829caa8503bd3e0d7588645f572114d","SpanId":"560484021b723143","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000048","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:14.0312504+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"b829caa8503bd3e0d7588645f572114d","SpanId":"560484021b723143","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000048","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:14.0313836+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"b829caa8503bd3e0d7588645f572114d","SpanId":"560484021b723143","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000048","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:14.0315002+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"b829caa8503bd3e0d7588645f572114d","SpanId":"560484021b723143","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000048","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:14.0317378+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"b829caa8503bd3e0d7588645f572114d","SpanId":"560484021b723143","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000048","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:14.0319233+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"b829caa8503bd3e0d7588645f572114d","SpanId":"560484021b723143","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.8323,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000048","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:14.0320856+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"b829caa8503bd3e0d7588645f572114d","SpanId":"560484021b723143","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000048","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:14.0322769+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"b829caa8503bd3e0d7588645f572114d","SpanId":"560484021b723143","Properties":{"ElapsedMilliseconds":8.2722,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000048","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:17.0199007+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"e47e622919b99e6d9ba716cf3bf1c4d3","SpanId":"3627b552ac23329e","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000049","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:17.0202594+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"e47e622919b99e6d9ba716cf3bf1c4d3","SpanId":"3627b552ac23329e","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000049","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:17.0215375+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"e47e622919b99e6d9ba716cf3bf1c4d3","SpanId":"3627b552ac23329e","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000049","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:17.0218683+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"e47e622919b99e6d9ba716cf3bf1c4d3","SpanId":"3627b552ac23329e","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000049","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:17.0220543+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"e47e622919b99e6d9ba716cf3bf1c4d3","SpanId":"3627b552ac23329e","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000049","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:17.0224395+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"e47e622919b99e6d9ba716cf3bf1c4d3","SpanId":"3627b552ac23329e","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000049","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:17.0225712+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"e47e622919b99e6d9ba716cf3bf1c4d3","SpanId":"3627b552ac23329e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000049","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:17.0226977+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"e47e622919b99e6d9ba716cf3bf1c4d3","SpanId":"3627b552ac23329e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000049","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:17.0235552+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"e47e622919b99e6d9ba716cf3bf1c4d3","SpanId":"3627b552ac23329e","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000049","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:17.0238883+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"e47e622919b99e6d9ba716cf3bf1c4d3","SpanId":"3627b552ac23329e","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000049","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:17.0240762+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"e47e622919b99e6d9ba716cf3bf1c4d3","SpanId":"3627b552ac23329e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000049","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:17.0250053+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"e47e622919b99e6d9ba716cf3bf1c4d3","SpanId":"3627b552ac23329e","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000049","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:17.0260004+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"e47e622919b99e6d9ba716cf3bf1c4d3","SpanId":"3627b552ac23329e","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000049","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:17.0272572+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"e47e622919b99e6d9ba716cf3bf1c4d3","SpanId":"3627b552ac23329e","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000049","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:17.0276114+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"e47e622919b99e6d9ba716cf3bf1c4d3","SpanId":"3627b552ac23329e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000049","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:17.0277407+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"e47e622919b99e6d9ba716cf3bf1c4d3","SpanId":"3627b552ac23329e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000049","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:17.0278666+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"e47e622919b99e6d9ba716cf3bf1c4d3","SpanId":"3627b552ac23329e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000049","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:17.0281398+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"e47e622919b99e6d9ba716cf3bf1c4d3","SpanId":"3627b552ac23329e","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000049","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:17.0283442+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"e47e622919b99e6d9ba716cf3bf1c4d3","SpanId":"3627b552ac23329e","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.1059,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000049","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:17.0285282+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"e47e622919b99e6d9ba716cf3bf1c4d3","SpanId":"3627b552ac23329e","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000049","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:17.0287272+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"e47e622919b99e6d9ba716cf3bf1c4d3","SpanId":"3627b552ac23329e","Properties":{"ElapsedMilliseconds":8.8325,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000049","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:20.0206088+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"338f4f775f92a714a470ada8852cd943","SpanId":"33f59d8cb7a1d384","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000004A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:20.0209811+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"338f4f775f92a714a470ada8852cd943","SpanId":"33f59d8cb7a1d384","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000004A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:20.0214324+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"338f4f775f92a714a470ada8852cd943","SpanId":"33f59d8cb7a1d384","Properties":{"ElapsedMilliseconds":0.8214,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000004A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:20.0237226+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"e8cf96c245b50edebdbe6d8cf8213d4f","SpanId":"09f551ff9ca54849","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000004B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:20.0240026+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"e8cf96c245b50edebdbe6d8cf8213d4f","SpanId":"09f551ff9ca54849","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000004B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:20.0252023+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"e8cf96c245b50edebdbe6d8cf8213d4f","SpanId":"09f551ff9ca54849","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:0000004B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:20.0258503+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"e8cf96c245b50edebdbe6d8cf8213d4f","SpanId":"09f551ff9ca54849","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000004B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:20.0260584+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"e8cf96c245b50edebdbe6d8cf8213d4f","SpanId":"09f551ff9ca54849","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:20.0264871+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"e8cf96c245b50edebdbe6d8cf8213d4f","SpanId":"09f551ff9ca54849","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:20.0266182+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"e8cf96c245b50edebdbe6d8cf8213d4f","SpanId":"09f551ff9ca54849","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:20.0267686+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"e8cf96c245b50edebdbe6d8cf8213d4f","SpanId":"09f551ff9ca54849","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:20.0275784+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"e8cf96c245b50edebdbe6d8cf8213d4f","SpanId":"09f551ff9ca54849","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:20.0279304+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"e8cf96c245b50edebdbe6d8cf8213d4f","SpanId":"09f551ff9ca54849","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:20.0281041+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"e8cf96c245b50edebdbe6d8cf8213d4f","SpanId":"09f551ff9ca54849","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:20.0292255+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"e8cf96c245b50edebdbe6d8cf8213d4f","SpanId":"09f551ff9ca54849","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:20.0302366+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"e8cf96c245b50edebdbe6d8cf8213d4f","SpanId":"09f551ff9ca54849","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:20.0315628+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"e8cf96c245b50edebdbe6d8cf8213d4f","SpanId":"09f551ff9ca54849","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:20.0319226+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"e8cf96c245b50edebdbe6d8cf8213d4f","SpanId":"09f551ff9ca54849","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:20.0321149+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"e8cf96c245b50edebdbe6d8cf8213d4f","SpanId":"09f551ff9ca54849","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:20.0322857+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"e8cf96c245b50edebdbe6d8cf8213d4f","SpanId":"09f551ff9ca54849","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:20.0325259+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"e8cf96c245b50edebdbe6d8cf8213d4f","SpanId":"09f551ff9ca54849","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:20.0327500+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"e8cf96c245b50edebdbe6d8cf8213d4f","SpanId":"09f551ff9ca54849","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.3876,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:0000004B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:20.0329349+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"e8cf96c245b50edebdbe6d8cf8213d4f","SpanId":"09f551ff9ca54849","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000004B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:20.0332138+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"e8cf96c245b50edebdbe6d8cf8213d4f","SpanId":"09f551ff9ca54849","Properties":{"ElapsedMilliseconds":9.487,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000004B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:23.0202469+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"d703945864fcb49fdae87c2adfc9bed2","SpanId":"7539eb9d32b0f124","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000004C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:23.0209484+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"d703945864fcb49fdae87c2adfc9bed2","SpanId":"7539eb9d32b0f124","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000004C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:23.0222751+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"d703945864fcb49fdae87c2adfc9bed2","SpanId":"7539eb9d32b0f124","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:0000004C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:23.0226168+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"d703945864fcb49fdae87c2adfc9bed2","SpanId":"7539eb9d32b0f124","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000004C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:23.0227609+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"d703945864fcb49fdae87c2adfc9bed2","SpanId":"7539eb9d32b0f124","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:23.0231144+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"d703945864fcb49fdae87c2adfc9bed2","SpanId":"7539eb9d32b0f124","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:23.0232509+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"d703945864fcb49fdae87c2adfc9bed2","SpanId":"7539eb9d32b0f124","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:23.0233955+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"d703945864fcb49fdae87c2adfc9bed2","SpanId":"7539eb9d32b0f124","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:23.0241508+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"d703945864fcb49fdae87c2adfc9bed2","SpanId":"7539eb9d32b0f124","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:23.0245114+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"d703945864fcb49fdae87c2adfc9bed2","SpanId":"7539eb9d32b0f124","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:23.0246554+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"d703945864fcb49fdae87c2adfc9bed2","SpanId":"7539eb9d32b0f124","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:23.0256499+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"d703945864fcb49fdae87c2adfc9bed2","SpanId":"7539eb9d32b0f124","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:23.0266405+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"d703945864fcb49fdae87c2adfc9bed2","SpanId":"7539eb9d32b0f124","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:23.0279590+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"d703945864fcb49fdae87c2adfc9bed2","SpanId":"7539eb9d32b0f124","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:23.0283458+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"d703945864fcb49fdae87c2adfc9bed2","SpanId":"7539eb9d32b0f124","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:23.0285061+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"d703945864fcb49fdae87c2adfc9bed2","SpanId":"7539eb9d32b0f124","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:23.0286330+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"d703945864fcb49fdae87c2adfc9bed2","SpanId":"7539eb9d32b0f124","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:23.0288347+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"d703945864fcb49fdae87c2adfc9bed2","SpanId":"7539eb9d32b0f124","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:23.0290227+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"d703945864fcb49fdae87c2adfc9bed2","SpanId":"7539eb9d32b0f124","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.0316,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:0000004C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:23.0292091+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"d703945864fcb49fdae87c2adfc9bed2","SpanId":"7539eb9d32b0f124","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000004C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:23.0294843+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"d703945864fcb49fdae87c2adfc9bed2","SpanId":"7539eb9d32b0f124","Properties":{"ElapsedMilliseconds":9.2422,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000004C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:26.0201289+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"359dec561f3b0a1ad8fbdb435c64f890","SpanId":"f06e2a59260bb6b3","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000004D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:26.0205171+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"359dec561f3b0a1ad8fbdb435c64f890","SpanId":"f06e2a59260bb6b3","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000004D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:26.0207498+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"359dec561f3b0a1ad8fbdb435c64f890","SpanId":"f06e2a59260bb6b3","Properties":{"ElapsedMilliseconds":0.6205,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000004D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:26.0233606+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"6a9e441271d036adf02aa178300ffb62","SpanId":"49565ab4def02803","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000004E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:26.0236776+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"6a9e441271d036adf02aa178300ffb62","SpanId":"49565ab4def02803","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000004E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:26.0247093+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"6a9e441271d036adf02aa178300ffb62","SpanId":"49565ab4def02803","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:0000004E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:26.0250107+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"6a9e441271d036adf02aa178300ffb62","SpanId":"49565ab4def02803","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000004E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:26.0251627+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"6a9e441271d036adf02aa178300ffb62","SpanId":"49565ab4def02803","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:26.0254563+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"6a9e441271d036adf02aa178300ffb62","SpanId":"49565ab4def02803","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:26.0255870+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"6a9e441271d036adf02aa178300ffb62","SpanId":"49565ab4def02803","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:26.0257381+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"6a9e441271d036adf02aa178300ffb62","SpanId":"49565ab4def02803","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:26.0265214+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"6a9e441271d036adf02aa178300ffb62","SpanId":"49565ab4def02803","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:26.0268346+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"6a9e441271d036adf02aa178300ffb62","SpanId":"49565ab4def02803","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:26.0269629+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"6a9e441271d036adf02aa178300ffb62","SpanId":"49565ab4def02803","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:26.0278162+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"6a9e441271d036adf02aa178300ffb62","SpanId":"49565ab4def02803","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:26.0286993+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"6a9e441271d036adf02aa178300ffb62","SpanId":"49565ab4def02803","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:26.0298841+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"6a9e441271d036adf02aa178300ffb62","SpanId":"49565ab4def02803","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:26.0301730+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"6a9e441271d036adf02aa178300ffb62","SpanId":"49565ab4def02803","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:26.0302827+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"6a9e441271d036adf02aa178300ffb62","SpanId":"49565ab4def02803","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:26.0304538+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"6a9e441271d036adf02aa178300ffb62","SpanId":"49565ab4def02803","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:26.0306487+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"6a9e441271d036adf02aa178300ffb62","SpanId":"49565ab4def02803","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:26.0308180+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"6a9e441271d036adf02aa178300ffb62","SpanId":"49565ab4def02803","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.4695,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:0000004E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:26.0309693+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"6a9e441271d036adf02aa178300ffb62","SpanId":"49565ab4def02803","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000004E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:26.0311493+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"6a9e441271d036adf02aa178300ffb62","SpanId":"49565ab4def02803","Properties":{"ElapsedMilliseconds":7.7863,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000004E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:29.0199204+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"790b805b9ad6dd82ff8da53b2a7a1d82","SpanId":"a3611473443885c4","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000004F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:29.0205244+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"790b805b9ad6dd82ff8da53b2a7a1d82","SpanId":"a3611473443885c4","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000004F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:29.0216712+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"790b805b9ad6dd82ff8da53b2a7a1d82","SpanId":"a3611473443885c4","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:0000004F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:29.0220010+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"790b805b9ad6dd82ff8da53b2a7a1d82","SpanId":"a3611473443885c4","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000004F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:29.0221737+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"790b805b9ad6dd82ff8da53b2a7a1d82","SpanId":"a3611473443885c4","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:29.0224871+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"790b805b9ad6dd82ff8da53b2a7a1d82","SpanId":"a3611473443885c4","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:29.0226219+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"790b805b9ad6dd82ff8da53b2a7a1d82","SpanId":"a3611473443885c4","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:29.0227321+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"790b805b9ad6dd82ff8da53b2a7a1d82","SpanId":"a3611473443885c4","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:29.0235336+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"790b805b9ad6dd82ff8da53b2a7a1d82","SpanId":"a3611473443885c4","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:29.0238640+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"790b805b9ad6dd82ff8da53b2a7a1d82","SpanId":"a3611473443885c4","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:29.0240300+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"790b805b9ad6dd82ff8da53b2a7a1d82","SpanId":"a3611473443885c4","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:29.0250210+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"790b805b9ad6dd82ff8da53b2a7a1d82","SpanId":"a3611473443885c4","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:29.0261208+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"790b805b9ad6dd82ff8da53b2a7a1d82","SpanId":"a3611473443885c4","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:29.0275511+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"790b805b9ad6dd82ff8da53b2a7a1d82","SpanId":"a3611473443885c4","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:29.0278550+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"790b805b9ad6dd82ff8da53b2a7a1d82","SpanId":"a3611473443885c4","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:29.0279683+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"790b805b9ad6dd82ff8da53b2a7a1d82","SpanId":"a3611473443885c4","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:29.0282429+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"790b805b9ad6dd82ff8da53b2a7a1d82","SpanId":"a3611473443885c4","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:29.0284606+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"790b805b9ad6dd82ff8da53b2a7a1d82","SpanId":"a3611473443885c4","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000004F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:29.0286357+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"790b805b9ad6dd82ff8da53b2a7a1d82","SpanId":"a3611473443885c4","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.2613,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:0000004F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:29.0287894+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"790b805b9ad6dd82ff8da53b2a7a1d82","SpanId":"a3611473443885c4","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000004F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:29.0290117+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"790b805b9ad6dd82ff8da53b2a7a1d82","SpanId":"a3611473443885c4","Properties":{"ElapsedMilliseconds":9.0915,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000004F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:32.0198812+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"fa0703a3d458e57708381af5029aee9e","SpanId":"036d1fb3dfdbef24","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000050","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:32.0203668+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"fa0703a3d458e57708381af5029aee9e","SpanId":"036d1fb3dfdbef24","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000050","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:32.0206803+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"fa0703a3d458e57708381af5029aee9e","SpanId":"036d1fb3dfdbef24","Properties":{"ElapsedMilliseconds":0.7872,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000050","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:32.0235129+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"49548168d192ed86c3969ff3e4fcdd22","SpanId":"56fc7e9af3321659","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000051","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:32.0238503+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"49548168d192ed86c3969ff3e4fcdd22","SpanId":"56fc7e9af3321659","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000051","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:32.0252882+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"49548168d192ed86c3969ff3e4fcdd22","SpanId":"56fc7e9af3321659","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000051","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:32.0256849+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"49548168d192ed86c3969ff3e4fcdd22","SpanId":"56fc7e9af3321659","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000051","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:32.0258631+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"49548168d192ed86c3969ff3e4fcdd22","SpanId":"56fc7e9af3321659","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000051","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:32.0262149+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"49548168d192ed86c3969ff3e4fcdd22","SpanId":"56fc7e9af3321659","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000051","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:32.0263481+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"49548168d192ed86c3969ff3e4fcdd22","SpanId":"56fc7e9af3321659","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000051","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:32.0264600+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"49548168d192ed86c3969ff3e4fcdd22","SpanId":"56fc7e9af3321659","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000051","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:32.0272065+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"49548168d192ed86c3969ff3e4fcdd22","SpanId":"56fc7e9af3321659","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000051","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:32.0275394+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"49548168d192ed86c3969ff3e4fcdd22","SpanId":"56fc7e9af3321659","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000051","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:32.0277336+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"49548168d192ed86c3969ff3e4fcdd22","SpanId":"56fc7e9af3321659","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000051","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:32.0286572+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"49548168d192ed86c3969ff3e4fcdd22","SpanId":"56fc7e9af3321659","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000051","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:32.0296019+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"49548168d192ed86c3969ff3e4fcdd22","SpanId":"56fc7e9af3321659","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000051","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:32.0307892+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"49548168d192ed86c3969ff3e4fcdd22","SpanId":"56fc7e9af3321659","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000051","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:32.0311451+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"49548168d192ed86c3969ff3e4fcdd22","SpanId":"56fc7e9af3321659","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000051","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:32.0312786+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"49548168d192ed86c3969ff3e4fcdd22","SpanId":"56fc7e9af3321659","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000051","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:32.0314119+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"49548168d192ed86c3969ff3e4fcdd22","SpanId":"56fc7e9af3321659","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000051","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:32.0316156+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"49548168d192ed86c3969ff3e4fcdd22","SpanId":"56fc7e9af3321659","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000051","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:32.0318049+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"49548168d192ed86c3969ff3e4fcdd22","SpanId":"56fc7e9af3321659","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.7116,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000051","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:32.0319987+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"49548168d192ed86c3969ff3e4fcdd22","SpanId":"56fc7e9af3321659","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000051","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:32.0322158+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"49548168d192ed86c3969ff3e4fcdd22","SpanId":"56fc7e9af3321659","Properties":{"ElapsedMilliseconds":8.7053,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000051","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:35.0208180+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"3f3dc1aa62c9dd99926d883667719164","SpanId":"38f1c689fe6626ac","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000052","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:35.0215635+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"3f3dc1aa62c9dd99926d883667719164","SpanId":"38f1c689fe6626ac","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000052","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:35.0231239+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3f3dc1aa62c9dd99926d883667719164","SpanId":"38f1c689fe6626ac","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000052","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:35.0234618+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"3f3dc1aa62c9dd99926d883667719164","SpanId":"38f1c689fe6626ac","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000052","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:35.0236216+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"3f3dc1aa62c9dd99926d883667719164","SpanId":"38f1c689fe6626ac","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000052","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:35.0239732+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"3f3dc1aa62c9dd99926d883667719164","SpanId":"38f1c689fe6626ac","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000052","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:35.0240985+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"3f3dc1aa62c9dd99926d883667719164","SpanId":"38f1c689fe6626ac","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000052","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:35.0242287+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"3f3dc1aa62c9dd99926d883667719164","SpanId":"38f1c689fe6626ac","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000052","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:35.0250206+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3f3dc1aa62c9dd99926d883667719164","SpanId":"38f1c689fe6626ac","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000052","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:35.0254188+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"3f3dc1aa62c9dd99926d883667719164","SpanId":"38f1c689fe6626ac","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000052","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:35.0256180+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"3f3dc1aa62c9dd99926d883667719164","SpanId":"38f1c689fe6626ac","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000052","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:35.0266308+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3f3dc1aa62c9dd99926d883667719164","SpanId":"38f1c689fe6626ac","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000052","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:35.0276553+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3f3dc1aa62c9dd99926d883667719164","SpanId":"38f1c689fe6626ac","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000052","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:35.0289117+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3f3dc1aa62c9dd99926d883667719164","SpanId":"38f1c689fe6626ac","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000052","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:35.0293671+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"3f3dc1aa62c9dd99926d883667719164","SpanId":"38f1c689fe6626ac","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000052","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:35.0295684+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"3f3dc1aa62c9dd99926d883667719164","SpanId":"38f1c689fe6626ac","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000052","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:35.0297239+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"3f3dc1aa62c9dd99926d883667719164","SpanId":"38f1c689fe6626ac","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000052","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:35.0299558+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"3f3dc1aa62c9dd99926d883667719164","SpanId":"38f1c689fe6626ac","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000052","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:35.0301762+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"3f3dc1aa62c9dd99926d883667719164","SpanId":"38f1c689fe6626ac","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.3136,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000052","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:35.0304456+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"3f3dc1aa62c9dd99926d883667719164","SpanId":"38f1c689fe6626ac","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000052","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:35.0306480+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"3f3dc1aa62c9dd99926d883667719164","SpanId":"38f1c689fe6626ac","Properties":{"ElapsedMilliseconds":9.8387,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000052","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:38.0201933+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"8df397adf9bc6eed60f91ede856f5b5f","SpanId":"f12750be55d0a0fb","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000053","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:38.0208126+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"8df397adf9bc6eed60f91ede856f5b5f","SpanId":"f12750be55d0a0fb","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000053","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:38.0211287+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"8df397adf9bc6eed60f91ede856f5b5f","SpanId":"f12750be55d0a0fb","Properties":{"ElapsedMilliseconds":0.9281,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000053","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:38.0240384+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"08628f4d6e7f769fc587eae03c788b38","SpanId":"808ea12347237525","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000054","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:38.0244240+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"08628f4d6e7f769fc587eae03c788b38","SpanId":"808ea12347237525","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000054","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:38.0257173+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"08628f4d6e7f769fc587eae03c788b38","SpanId":"808ea12347237525","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000054","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:38.0260612+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"08628f4d6e7f769fc587eae03c788b38","SpanId":"808ea12347237525","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000054","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:38.0262529+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"08628f4d6e7f769fc587eae03c788b38","SpanId":"808ea12347237525","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000054","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:38.0266923+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"08628f4d6e7f769fc587eae03c788b38","SpanId":"808ea12347237525","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000054","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:38.0268587+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"08628f4d6e7f769fc587eae03c788b38","SpanId":"808ea12347237525","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000054","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:38.0270937+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"08628f4d6e7f769fc587eae03c788b38","SpanId":"808ea12347237525","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000054","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:38.0281843+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"08628f4d6e7f769fc587eae03c788b38","SpanId":"808ea12347237525","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000054","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:38.0287732+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"08628f4d6e7f769fc587eae03c788b38","SpanId":"808ea12347237525","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000054","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:38.0290233+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"08628f4d6e7f769fc587eae03c788b38","SpanId":"808ea12347237525","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000054","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:38.0305138+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"08628f4d6e7f769fc587eae03c788b38","SpanId":"808ea12347237525","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000054","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:38.0320662+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"08628f4d6e7f769fc587eae03c788b38","SpanId":"808ea12347237525","Properties":{"elapsed":"1","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000054","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:38.0339979+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"08628f4d6e7f769fc587eae03c788b38","SpanId":"808ea12347237525","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000054","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:38.0344512+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"08628f4d6e7f769fc587eae03c788b38","SpanId":"808ea12347237525","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000054","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:38.0346606+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"08628f4d6e7f769fc587eae03c788b38","SpanId":"808ea12347237525","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000054","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:38.0348574+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"08628f4d6e7f769fc587eae03c788b38","SpanId":"808ea12347237525","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000054","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:38.0350936+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"08628f4d6e7f769fc587eae03c788b38","SpanId":"808ea12347237525","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000054","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:38.0353279+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"08628f4d6e7f769fc587eae03c788b38","SpanId":"808ea12347237525","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":8.7477,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000054","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:38.0355125+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"08628f4d6e7f769fc587eae03c788b38","SpanId":"808ea12347237525","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000054","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:38.0357232+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"08628f4d6e7f769fc587eae03c788b38","SpanId":"808ea12347237525","Properties":{"ElapsedMilliseconds":11.6862,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000054","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:41.0198650+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"b9d3ade280ec74dfc9f7914dd79c4c24","SpanId":"e37100814720a0c3","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000055","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:41.0202706+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"b9d3ade280ec74dfc9f7914dd79c4c24","SpanId":"e37100814720a0c3","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000055","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:41.0215069+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"b9d3ade280ec74dfc9f7914dd79c4c24","SpanId":"e37100814720a0c3","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000055","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:41.0219180+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"b9d3ade280ec74dfc9f7914dd79c4c24","SpanId":"e37100814720a0c3","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000055","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:41.0221548+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"b9d3ade280ec74dfc9f7914dd79c4c24","SpanId":"e37100814720a0c3","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000055","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:41.0226365+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"b9d3ade280ec74dfc9f7914dd79c4c24","SpanId":"e37100814720a0c3","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000055","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:41.0228162+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"b9d3ade280ec74dfc9f7914dd79c4c24","SpanId":"e37100814720a0c3","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000055","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:41.0230710+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"b9d3ade280ec74dfc9f7914dd79c4c24","SpanId":"e37100814720a0c3","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000055","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:41.0240682+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"b9d3ade280ec74dfc9f7914dd79c4c24","SpanId":"e37100814720a0c3","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000055","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:41.0244746+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"b9d3ade280ec74dfc9f7914dd79c4c24","SpanId":"e37100814720a0c3","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000055","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:41.0246492+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"b9d3ade280ec74dfc9f7914dd79c4c24","SpanId":"e37100814720a0c3","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000055","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:41.0258340+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"b9d3ade280ec74dfc9f7914dd79c4c24","SpanId":"e37100814720a0c3","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000055","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:41.0269593+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"b9d3ade280ec74dfc9f7914dd79c4c24","SpanId":"e37100814720a0c3","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000055","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:41.0284703+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"b9d3ade280ec74dfc9f7914dd79c4c24","SpanId":"e37100814720a0c3","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000055","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:41.0288222+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"b9d3ade280ec74dfc9f7914dd79c4c24","SpanId":"e37100814720a0c3","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000055","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:41.0289963+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"b9d3ade280ec74dfc9f7914dd79c4c24","SpanId":"e37100814720a0c3","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000055","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:41.0291815+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"b9d3ade280ec74dfc9f7914dd79c4c24","SpanId":"e37100814720a0c3","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000055","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:41.0294186+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"b9d3ade280ec74dfc9f7914dd79c4c24","SpanId":"e37100814720a0c3","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000055","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:41.0296416+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"b9d3ade280ec74dfc9f7914dd79c4c24","SpanId":"e37100814720a0c3","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":7.1784,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000055","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:41.0298267+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"b9d3ade280ec74dfc9f7914dd79c4c24","SpanId":"e37100814720a0c3","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000055","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:41.0300376+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"b9d3ade280ec74dfc9f7914dd79c4c24","SpanId":"e37100814720a0c3","Properties":{"ElapsedMilliseconds":10.1725,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000055","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:44.0208934+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"f6b231489ccf7104cd25313b0b31683c","SpanId":"1d05f8c933df9409","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000056","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:44.0227827+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"f6b231489ccf7104cd25313b0b31683c","SpanId":"1d05f8c933df9409","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000056","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:44.0229803+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"f6b231489ccf7104cd25313b0b31683c","SpanId":"1d05f8c933df9409","Properties":{"ElapsedMilliseconds":2.0929,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000056","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:44.0253863+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"b41d3126612382257149c7303da9a844","SpanId":"cae905664c756be0","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000057","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:44.0256999+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"b41d3126612382257149c7303da9a844","SpanId":"cae905664c756be0","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000057","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:44.0267849+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"b41d3126612382257149c7303da9a844","SpanId":"cae905664c756be0","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000057","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:44.0271373+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"b41d3126612382257149c7303da9a844","SpanId":"cae905664c756be0","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000057","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:44.0273840+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"b41d3126612382257149c7303da9a844","SpanId":"cae905664c756be0","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000057","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:44.0277256+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"b41d3126612382257149c7303da9a844","SpanId":"cae905664c756be0","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000057","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:44.0278938+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"b41d3126612382257149c7303da9a844","SpanId":"cae905664c756be0","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000057","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:44.0280313+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"b41d3126612382257149c7303da9a844","SpanId":"cae905664c756be0","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000057","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:44.0288655+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"b41d3126612382257149c7303da9a844","SpanId":"cae905664c756be0","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000057","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:44.0291999+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"b41d3126612382257149c7303da9a844","SpanId":"cae905664c756be0","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000057","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:44.0294119+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"b41d3126612382257149c7303da9a844","SpanId":"cae905664c756be0","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000057","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:44.0304220+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"b41d3126612382257149c7303da9a844","SpanId":"cae905664c756be0","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000057","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:44.0314813+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"b41d3126612382257149c7303da9a844","SpanId":"cae905664c756be0","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000057","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:44.0326632+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"b41d3126612382257149c7303da9a844","SpanId":"cae905664c756be0","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000057","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:44.0330185+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"b41d3126612382257149c7303da9a844","SpanId":"cae905664c756be0","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000057","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:44.0331511+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"b41d3126612382257149c7303da9a844","SpanId":"cae905664c756be0","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000057","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:44.0332624+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"b41d3126612382257149c7303da9a844","SpanId":"cae905664c756be0","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000057","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:44.0334816+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"b41d3126612382257149c7303da9a844","SpanId":"cae905664c756be0","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000057","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:44.0336750+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"b41d3126612382257149c7303da9a844","SpanId":"cae905664c756be0","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.0774,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000057","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:44.0338839+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"b41d3126612382257149c7303da9a844","SpanId":"cae905664c756be0","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000057","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:44.0340555+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"b41d3126612382257149c7303da9a844","SpanId":"cae905664c756be0","Properties":{"ElapsedMilliseconds":8.6716,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000057","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:47.0208900+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"c3c8a548534784674f4a66abe17fa186","SpanId":"591d9706188e5c72","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000058","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:47.0217036+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"c3c8a548534784674f4a66abe17fa186","SpanId":"591d9706188e5c72","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000058","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:47.0236121+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c3c8a548534784674f4a66abe17fa186","SpanId":"591d9706188e5c72","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000058","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:47.0239249+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"c3c8a548534784674f4a66abe17fa186","SpanId":"591d9706188e5c72","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000058","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:47.0241393+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"c3c8a548534784674f4a66abe17fa186","SpanId":"591d9706188e5c72","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000058","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:47.0244392+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"c3c8a548534784674f4a66abe17fa186","SpanId":"591d9706188e5c72","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000058","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:47.0245557+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"c3c8a548534784674f4a66abe17fa186","SpanId":"591d9706188e5c72","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000058","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:47.0246972+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"c3c8a548534784674f4a66abe17fa186","SpanId":"591d9706188e5c72","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000058","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:47.0254374+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c3c8a548534784674f4a66abe17fa186","SpanId":"591d9706188e5c72","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000058","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:47.0257599+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"c3c8a548534784674f4a66abe17fa186","SpanId":"591d9706188e5c72","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000058","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:47.0259401+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"c3c8a548534784674f4a66abe17fa186","SpanId":"591d9706188e5c72","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000058","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:47.0268411+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c3c8a548534784674f4a66abe17fa186","SpanId":"591d9706188e5c72","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000058","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:47.0277791+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c3c8a548534784674f4a66abe17fa186","SpanId":"591d9706188e5c72","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000058","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:47.0292543+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c3c8a548534784674f4a66abe17fa186","SpanId":"591d9706188e5c72","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000058","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:47.0296162+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"c3c8a548534784674f4a66abe17fa186","SpanId":"591d9706188e5c72","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000058","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:47.0297576+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"c3c8a548534784674f4a66abe17fa186","SpanId":"591d9706188e5c72","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000058","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:47.0299054+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"c3c8a548534784674f4a66abe17fa186","SpanId":"591d9706188e5c72","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000058","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:47.0301179+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"c3c8a548534784674f4a66abe17fa186","SpanId":"591d9706188e5c72","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000058","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:47.0303240+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"c3c8a548534784674f4a66abe17fa186","SpanId":"591d9706188e5c72","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.983,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000058","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:47.0305340+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"c3c8a548534784674f4a66abe17fa186","SpanId":"591d9706188e5c72","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000058","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:47.0306989+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"c3c8a548534784674f4a66abe17fa186","SpanId":"591d9706188e5c72","Properties":{"ElapsedMilliseconds":9.8181,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000058","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:50.0202481+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"9c96d344a8d53c57546497cc6c5fa6bf","SpanId":"94cb3e980187e6f7","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000059","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:50.0210687+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"9c96d344a8d53c57546497cc6c5fa6bf","SpanId":"94cb3e980187e6f7","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000059","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:50.0213346+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"9c96d344a8d53c57546497cc6c5fa6bf","SpanId":"94cb3e980187e6f7","Properties":{"ElapsedMilliseconds":1.0975,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000059","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:50.0237526+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"f1fb151ebc22612b6334489828f19234","SpanId":"1cf0808123cc0c28","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000005A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:50.0241019+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"f1fb151ebc22612b6334489828f19234","SpanId":"1cf0808123cc0c28","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000005A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:50.0257761+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"f1fb151ebc22612b6334489828f19234","SpanId":"1cf0808123cc0c28","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:0000005A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:50.0261336+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"f1fb151ebc22612b6334489828f19234","SpanId":"1cf0808123cc0c28","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000005A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:50.0263059+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"f1fb151ebc22612b6334489828f19234","SpanId":"1cf0808123cc0c28","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:50.0266549+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"f1fb151ebc22612b6334489828f19234","SpanId":"1cf0808123cc0c28","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:50.0267736+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"f1fb151ebc22612b6334489828f19234","SpanId":"1cf0808123cc0c28","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:50.0269522+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"f1fb151ebc22612b6334489828f19234","SpanId":"1cf0808123cc0c28","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:50.0277057+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"f1fb151ebc22612b6334489828f19234","SpanId":"1cf0808123cc0c28","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:50.0280139+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"f1fb151ebc22612b6334489828f19234","SpanId":"1cf0808123cc0c28","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:50.0281466+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"f1fb151ebc22612b6334489828f19234","SpanId":"1cf0808123cc0c28","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:50.0290510+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"f1fb151ebc22612b6334489828f19234","SpanId":"1cf0808123cc0c28","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:50.0300612+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"f1fb151ebc22612b6334489828f19234","SpanId":"1cf0808123cc0c28","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:50.0313036+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"f1fb151ebc22612b6334489828f19234","SpanId":"1cf0808123cc0c28","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:50.0316128+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"f1fb151ebc22612b6334489828f19234","SpanId":"1cf0808123cc0c28","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:50.0317479+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"f1fb151ebc22612b6334489828f19234","SpanId":"1cf0808123cc0c28","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:50.0319084+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"f1fb151ebc22612b6334489828f19234","SpanId":"1cf0808123cc0c28","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:50.0321327+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"f1fb151ebc22612b6334489828f19234","SpanId":"1cf0808123cc0c28","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:50.0323163+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"f1fb151ebc22612b6334489828f19234","SpanId":"1cf0808123cc0c28","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.775,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:0000005A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:50.0325119+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"f1fb151ebc22612b6334489828f19234","SpanId":"1cf0808123cc0c28","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000005A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:50.0326854+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"f1fb151ebc22612b6334489828f19234","SpanId":"1cf0808123cc0c28","Properties":{"ElapsedMilliseconds":8.9288,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000005A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:53.0199960+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"02c6051a31c83c0ff2b1e717857f9e2b","SpanId":"a293cd273e865d7f","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000005B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:53.0209409+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"02c6051a31c83c0ff2b1e717857f9e2b","SpanId":"a293cd273e865d7f","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000005B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:53.0223676+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"02c6051a31c83c0ff2b1e717857f9e2b","SpanId":"a293cd273e865d7f","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:0000005B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:53.0226805+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"02c6051a31c83c0ff2b1e717857f9e2b","SpanId":"a293cd273e865d7f","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000005B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:53.0228356+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"02c6051a31c83c0ff2b1e717857f9e2b","SpanId":"a293cd273e865d7f","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:53.0231345+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"02c6051a31c83c0ff2b1e717857f9e2b","SpanId":"a293cd273e865d7f","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:53.0232462+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"02c6051a31c83c0ff2b1e717857f9e2b","SpanId":"a293cd273e865d7f","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:53.0234193+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"02c6051a31c83c0ff2b1e717857f9e2b","SpanId":"a293cd273e865d7f","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:53.0240988+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"02c6051a31c83c0ff2b1e717857f9e2b","SpanId":"a293cd273e865d7f","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:53.0244052+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"02c6051a31c83c0ff2b1e717857f9e2b","SpanId":"a293cd273e865d7f","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:53.0245359+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"02c6051a31c83c0ff2b1e717857f9e2b","SpanId":"a293cd273e865d7f","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:53.0285152+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"02c6051a31c83c0ff2b1e717857f9e2b","SpanId":"a293cd273e865d7f","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:53.0300206+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"02c6051a31c83c0ff2b1e717857f9e2b","SpanId":"a293cd273e865d7f","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:53.0312112+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"02c6051a31c83c0ff2b1e717857f9e2b","SpanId":"a293cd273e865d7f","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:53.0315283+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"02c6051a31c83c0ff2b1e717857f9e2b","SpanId":"a293cd273e865d7f","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:53.0316991+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"02c6051a31c83c0ff2b1e717857f9e2b","SpanId":"a293cd273e865d7f","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:53.0318114+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"02c6051a31c83c0ff2b1e717857f9e2b","SpanId":"a293cd273e865d7f","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:53.0320723+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"02c6051a31c83c0ff2b1e717857f9e2b","SpanId":"a293cd273e865d7f","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:53.0323764+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"02c6051a31c83c0ff2b1e717857f9e2b","SpanId":"a293cd273e865d7f","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":9.3535,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:0000005B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:53.0327518+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"02c6051a31c83c0ff2b1e717857f9e2b","SpanId":"a293cd273e865d7f","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000005B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:53.0329688+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"02c6051a31c83c0ff2b1e717857f9e2b","SpanId":"a293cd273e865d7f","Properties":{"ElapsedMilliseconds":12.9842,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000005B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:56.0203364+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"8c827ab0d67b924ed4045fb2e64a2413","SpanId":"fd5775b586ea74a6","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000005C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:56.0208017+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"8c827ab0d67b924ed4045fb2e64a2413","SpanId":"fd5775b586ea74a6","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000005C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:56.0210184+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"8c827ab0d67b924ed4045fb2e64a2413","SpanId":"fd5775b586ea74a6","Properties":{"ElapsedMilliseconds":0.7192,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000005C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:56.0240711+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"6d8b1bacff4fe7f325837dab24d2f9f6","SpanId":"659f7defd8416823","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000005D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:56.0244223+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"6d8b1bacff4fe7f325837dab24d2f9f6","SpanId":"659f7defd8416823","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000005D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:56.0257530+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"6d8b1bacff4fe7f325837dab24d2f9f6","SpanId":"659f7defd8416823","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:0000005D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:56.0261589+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"6d8b1bacff4fe7f325837dab24d2f9f6","SpanId":"659f7defd8416823","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000005D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:56.0264462+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"6d8b1bacff4fe7f325837dab24d2f9f6","SpanId":"659f7defd8416823","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:56.0268625+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"6d8b1bacff4fe7f325837dab24d2f9f6","SpanId":"659f7defd8416823","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:56.0273512+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"6d8b1bacff4fe7f325837dab24d2f9f6","SpanId":"659f7defd8416823","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:56.0274956+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"6d8b1bacff4fe7f325837dab24d2f9f6","SpanId":"659f7defd8416823","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:56.0284793+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"6d8b1bacff4fe7f325837dab24d2f9f6","SpanId":"659f7defd8416823","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:56.0288639+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"6d8b1bacff4fe7f325837dab24d2f9f6","SpanId":"659f7defd8416823","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:56.0290753+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"6d8b1bacff4fe7f325837dab24d2f9f6","SpanId":"659f7defd8416823","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:56.0301746+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"6d8b1bacff4fe7f325837dab24d2f9f6","SpanId":"659f7defd8416823","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:56.0313823+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"6d8b1bacff4fe7f325837dab24d2f9f6","SpanId":"659f7defd8416823","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:56.0327553+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"6d8b1bacff4fe7f325837dab24d2f9f6","SpanId":"659f7defd8416823","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:56.0331694+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"6d8b1bacff4fe7f325837dab24d2f9f6","SpanId":"659f7defd8416823","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:56.0333223+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"6d8b1bacff4fe7f325837dab24d2f9f6","SpanId":"659f7defd8416823","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:56.0334515+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"6d8b1bacff4fe7f325837dab24d2f9f6","SpanId":"659f7defd8416823","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:56.0336722+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"6d8b1bacff4fe7f325837dab24d2f9f6","SpanId":"659f7defd8416823","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:56.0339260+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"6d8b1bacff4fe7f325837dab24d2f9f6","SpanId":"659f7defd8416823","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":7.2243,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:0000005D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:56.0340851+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"6d8b1bacff4fe7f325837dab24d2f9f6","SpanId":"659f7defd8416823","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000005D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:56.0342742+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"6d8b1bacff4fe7f325837dab24d2f9f6","SpanId":"659f7defd8416823","Properties":{"ElapsedMilliseconds":10.2029,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000005D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:59.0205802+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"3a9ae9a72874f8d0e57fd0dcdf8c72ca","SpanId":"42867f01018eed51","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000005E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:59.0214063+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"3a9ae9a72874f8d0e57fd0dcdf8c72ca","SpanId":"42867f01018eed51","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000005E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:59.0228875+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3a9ae9a72874f8d0e57fd0dcdf8c72ca","SpanId":"42867f01018eed51","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:0000005E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:59.0232317+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"3a9ae9a72874f8d0e57fd0dcdf8c72ca","SpanId":"42867f01018eed51","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000005E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:59.0234625+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"3a9ae9a72874f8d0e57fd0dcdf8c72ca","SpanId":"42867f01018eed51","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:59.0237916+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"3a9ae9a72874f8d0e57fd0dcdf8c72ca","SpanId":"42867f01018eed51","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:59.0239188+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"3a9ae9a72874f8d0e57fd0dcdf8c72ca","SpanId":"42867f01018eed51","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:59.0240421+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"3a9ae9a72874f8d0e57fd0dcdf8c72ca","SpanId":"42867f01018eed51","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:59.0247690+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3a9ae9a72874f8d0e57fd0dcdf8c72ca","SpanId":"42867f01018eed51","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:59.0251197+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"3a9ae9a72874f8d0e57fd0dcdf8c72ca","SpanId":"42867f01018eed51","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:59.0252470+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"3a9ae9a72874f8d0e57fd0dcdf8c72ca","SpanId":"42867f01018eed51","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:59.0261489+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3a9ae9a72874f8d0e57fd0dcdf8c72ca","SpanId":"42867f01018eed51","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:59.0270826+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3a9ae9a72874f8d0e57fd0dcdf8c72ca","SpanId":"42867f01018eed51","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:59.0282863+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3a9ae9a72874f8d0e57fd0dcdf8c72ca","SpanId":"42867f01018eed51","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:59.0286701+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"3a9ae9a72874f8d0e57fd0dcdf8c72ca","SpanId":"42867f01018eed51","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:59.0288008+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"3a9ae9a72874f8d0e57fd0dcdf8c72ca","SpanId":"42867f01018eed51","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:59.0289225+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"3a9ae9a72874f8d0e57fd0dcdf8c72ca","SpanId":"42867f01018eed51","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:39:59.0291143+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"3a9ae9a72874f8d0e57fd0dcdf8c72ca","SpanId":"42867f01018eed51","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000005E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:59.0293508+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"3a9ae9a72874f8d0e57fd0dcdf8c72ca","SpanId":"42867f01018eed51","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.6791,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:0000005E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:59.0295348+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"3a9ae9a72874f8d0e57fd0dcdf8c72ca","SpanId":"42867f01018eed51","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000005E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:39:59.0297733+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"3a9ae9a72874f8d0e57fd0dcdf8c72ca","SpanId":"42867f01018eed51","Properties":{"ElapsedMilliseconds":9.2024,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000005E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:02.0209284+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"a72f6ab170729916a40c3e067643cd57","SpanId":"a715b3e114e3ffa2","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000005F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:02.0214432+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"a72f6ab170729916a40c3e067643cd57","SpanId":"a715b3e114e3ffa2","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000005F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:02.0216256+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"a72f6ab170729916a40c3e067643cd57","SpanId":"a715b3e114e3ffa2","Properties":{"ElapsedMilliseconds":0.7003,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000005F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:02.0241998+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"c5c63337a7209f656cc3c41a7f8ece19","SpanId":"0681b8359758471a","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000060","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:02.0246303+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"c5c63337a7209f656cc3c41a7f8ece19","SpanId":"0681b8359758471a","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000060","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:02.0260566+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c5c63337a7209f656cc3c41a7f8ece19","SpanId":"0681b8359758471a","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000060","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:02.0264217+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"c5c63337a7209f656cc3c41a7f8ece19","SpanId":"0681b8359758471a","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000060","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:02.0265965+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"c5c63337a7209f656cc3c41a7f8ece19","SpanId":"0681b8359758471a","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000060","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:02.0269644+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"c5c63337a7209f656cc3c41a7f8ece19","SpanId":"0681b8359758471a","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000060","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:02.0271494+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"c5c63337a7209f656cc3c41a7f8ece19","SpanId":"0681b8359758471a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000060","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:02.0272850+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"c5c63337a7209f656cc3c41a7f8ece19","SpanId":"0681b8359758471a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000060","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:02.0281673+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c5c63337a7209f656cc3c41a7f8ece19","SpanId":"0681b8359758471a","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000060","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:02.0285309+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"c5c63337a7209f656cc3c41a7f8ece19","SpanId":"0681b8359758471a","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000060","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:02.0286484+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"c5c63337a7209f656cc3c41a7f8ece19","SpanId":"0681b8359758471a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000060","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:02.0296396+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c5c63337a7209f656cc3c41a7f8ece19","SpanId":"0681b8359758471a","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000060","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:02.0306867+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c5c63337a7209f656cc3c41a7f8ece19","SpanId":"0681b8359758471a","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000060","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:02.0318804+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c5c63337a7209f656cc3c41a7f8ece19","SpanId":"0681b8359758471a","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000060","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:02.0321849+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"c5c63337a7209f656cc3c41a7f8ece19","SpanId":"0681b8359758471a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000060","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:02.0323709+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"c5c63337a7209f656cc3c41a7f8ece19","SpanId":"0681b8359758471a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000060","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:02.0324843+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"c5c63337a7209f656cc3c41a7f8ece19","SpanId":"0681b8359758471a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000060","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:02.0326872+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"c5c63337a7209f656cc3c41a7f8ece19","SpanId":"0681b8359758471a","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000060","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:02.0328969+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"c5c63337a7209f656cc3c41a7f8ece19","SpanId":"0681b8359758471a","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.0685,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000060","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:02.0330599+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"c5c63337a7209f656cc3c41a7f8ece19","SpanId":"0681b8359758471a","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000060","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:02.0332517+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"c5c63337a7209f656cc3c41a7f8ece19","SpanId":"0681b8359758471a","Properties":{"ElapsedMilliseconds":9.0518,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000060","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:05.0206686+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"3fbec031b7d01a77f5163ca3be824284","SpanId":"8e695c2aaeb8c792","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000061","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:05.0211429+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"3fbec031b7d01a77f5163ca3be824284","SpanId":"8e695c2aaeb8c792","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000061","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:05.0439712+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3fbec031b7d01a77f5163ca3be824284","SpanId":"8e695c2aaeb8c792","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000061","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:05.0444298+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"3fbec031b7d01a77f5163ca3be824284","SpanId":"8e695c2aaeb8c792","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000061","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:05.0445898+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"3fbec031b7d01a77f5163ca3be824284","SpanId":"8e695c2aaeb8c792","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000061","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:05.0449585+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"3fbec031b7d01a77f5163ca3be824284","SpanId":"8e695c2aaeb8c792","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000061","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:05.0451428+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"3fbec031b7d01a77f5163ca3be824284","SpanId":"8e695c2aaeb8c792","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000061","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:05.0452897+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"3fbec031b7d01a77f5163ca3be824284","SpanId":"8e695c2aaeb8c792","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000061","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:05.0465040+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3fbec031b7d01a77f5163ca3be824284","SpanId":"8e695c2aaeb8c792","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000061","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:05.0468598+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"3fbec031b7d01a77f5163ca3be824284","SpanId":"8e695c2aaeb8c792","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000061","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:05.0469929+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"3fbec031b7d01a77f5163ca3be824284","SpanId":"8e695c2aaeb8c792","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000061","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:05.0488648+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3fbec031b7d01a77f5163ca3be824284","SpanId":"8e695c2aaeb8c792","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000061","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:05.0502095+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3fbec031b7d01a77f5163ca3be824284","SpanId":"8e695c2aaeb8c792","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000061","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:05.0520997+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3fbec031b7d01a77f5163ca3be824284","SpanId":"8e695c2aaeb8c792","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000061","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:05.0524552+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"3fbec031b7d01a77f5163ca3be824284","SpanId":"8e695c2aaeb8c792","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000061","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:05.0526683+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"3fbec031b7d01a77f5163ca3be824284","SpanId":"8e695c2aaeb8c792","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000061","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:05.0527792+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"3fbec031b7d01a77f5163ca3be824284","SpanId":"8e695c2aaeb8c792","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000061","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:05.0529695+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"3fbec031b7d01a77f5163ca3be824284","SpanId":"8e695c2aaeb8c792","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000061","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:05.0531482+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"3fbec031b7d01a77f5163ca3be824284","SpanId":"8e695c2aaeb8c792","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":8.3627,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000061","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:05.0533028+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"3fbec031b7d01a77f5163ca3be824284","SpanId":"8e695c2aaeb8c792","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000061","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:05.0534977+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"3fbec031b7d01a77f5163ca3be824284","SpanId":"8e695c2aaeb8c792","Properties":{"ElapsedMilliseconds":32.8373,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000061","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:08.0206546+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"ecb3e923671213c1e0ada357e86341ec","SpanId":"fb4f71dfd07cd741","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000062","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:08.0210698+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"ecb3e923671213c1e0ada357e86341ec","SpanId":"fb4f71dfd07cd741","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000062","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:08.0213369+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"ecb3e923671213c1e0ada357e86341ec","SpanId":"fb4f71dfd07cd741","Properties":{"ElapsedMilliseconds":0.6683,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000062","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:08.0236535+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"3e2920cb24c0bdd3cd4b40a397529cdd","SpanId":"d1ec100bb3da6647","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000063","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:08.0239230+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"3e2920cb24c0bdd3cd4b40a397529cdd","SpanId":"d1ec100bb3da6647","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000063","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:08.0249177+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3e2920cb24c0bdd3cd4b40a397529cdd","SpanId":"d1ec100bb3da6647","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000063","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:08.0252500+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"3e2920cb24c0bdd3cd4b40a397529cdd","SpanId":"d1ec100bb3da6647","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000063","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:08.0256130+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"3e2920cb24c0bdd3cd4b40a397529cdd","SpanId":"d1ec100bb3da6647","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000063","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:08.0258976+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"3e2920cb24c0bdd3cd4b40a397529cdd","SpanId":"d1ec100bb3da6647","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000063","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:08.0260097+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"3e2920cb24c0bdd3cd4b40a397529cdd","SpanId":"d1ec100bb3da6647","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000063","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:08.0261261+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"3e2920cb24c0bdd3cd4b40a397529cdd","SpanId":"d1ec100bb3da6647","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000063","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:08.0267996+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3e2920cb24c0bdd3cd4b40a397529cdd","SpanId":"d1ec100bb3da6647","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000063","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:08.0271059+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"3e2920cb24c0bdd3cd4b40a397529cdd","SpanId":"d1ec100bb3da6647","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000063","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:08.0272168+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"3e2920cb24c0bdd3cd4b40a397529cdd","SpanId":"d1ec100bb3da6647","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000063","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:08.0280530+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3e2920cb24c0bdd3cd4b40a397529cdd","SpanId":"d1ec100bb3da6647","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000063","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:08.0289112+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3e2920cb24c0bdd3cd4b40a397529cdd","SpanId":"d1ec100bb3da6647","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000063","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:08.0300720+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3e2920cb24c0bdd3cd4b40a397529cdd","SpanId":"d1ec100bb3da6647","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000063","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:08.0303921+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"3e2920cb24c0bdd3cd4b40a397529cdd","SpanId":"d1ec100bb3da6647","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000063","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:08.0305039+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"3e2920cb24c0bdd3cd4b40a397529cdd","SpanId":"d1ec100bb3da6647","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000063","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:08.0306140+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"3e2920cb24c0bdd3cd4b40a397529cdd","SpanId":"d1ec100bb3da6647","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000063","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:08.0308039+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"3e2920cb24c0bdd3cd4b40a397529cdd","SpanId":"d1ec100bb3da6647","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000063","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:08.0310059+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"3e2920cb24c0bdd3cd4b40a397529cdd","SpanId":"d1ec100bb3da6647","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.2214,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000063","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:08.0311472+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"3e2920cb24c0bdd3cd4b40a397529cdd","SpanId":"d1ec100bb3da6647","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000063","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:08.0312989+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"3e2920cb24c0bdd3cd4b40a397529cdd","SpanId":"d1ec100bb3da6647","Properties":{"ElapsedMilliseconds":7.6479,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000063","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:11.0202678+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"bcf6b13314d863623699667ca47bde20","SpanId":"290b23cbbc036377","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000064","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:11.0207381+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"bcf6b13314d863623699667ca47bde20","SpanId":"290b23cbbc036377","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000064","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:11.0218872+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"bcf6b13314d863623699667ca47bde20","SpanId":"290b23cbbc036377","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000064","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:11.0222407+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"bcf6b13314d863623699667ca47bde20","SpanId":"290b23cbbc036377","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000064","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:11.0224065+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"bcf6b13314d863623699667ca47bde20","SpanId":"290b23cbbc036377","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000064","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:11.0226900+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"bcf6b13314d863623699667ca47bde20","SpanId":"290b23cbbc036377","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000064","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:11.0228106+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"bcf6b13314d863623699667ca47bde20","SpanId":"290b23cbbc036377","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000064","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:11.0229225+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"bcf6b13314d863623699667ca47bde20","SpanId":"290b23cbbc036377","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000064","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:11.0236149+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"bcf6b13314d863623699667ca47bde20","SpanId":"290b23cbbc036377","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000064","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:11.0239800+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"bcf6b13314d863623699667ca47bde20","SpanId":"290b23cbbc036377","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000064","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:11.0241079+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"bcf6b13314d863623699667ca47bde20","SpanId":"290b23cbbc036377","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000064","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:11.0249612+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"bcf6b13314d863623699667ca47bde20","SpanId":"290b23cbbc036377","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000064","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:11.0258399+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"bcf6b13314d863623699667ca47bde20","SpanId":"290b23cbbc036377","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000064","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:11.0270441+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"bcf6b13314d863623699667ca47bde20","SpanId":"290b23cbbc036377","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000064","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:11.0273989+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"bcf6b13314d863623699667ca47bde20","SpanId":"290b23cbbc036377","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000064","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:11.0275122+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"bcf6b13314d863623699667ca47bde20","SpanId":"290b23cbbc036377","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000064","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:11.0276251+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"bcf6b13314d863623699667ca47bde20","SpanId":"290b23cbbc036377","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000064","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:11.0278165+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"bcf6b13314d863623699667ca47bde20","SpanId":"290b23cbbc036377","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000064","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:11.0280434+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"bcf6b13314d863623699667ca47bde20","SpanId":"290b23cbbc036377","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.4584,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000064","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:11.0281856+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"bcf6b13314d863623699667ca47bde20","SpanId":"290b23cbbc036377","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000064","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:11.0283906+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"bcf6b13314d863623699667ca47bde20","SpanId":"290b23cbbc036377","Properties":{"ElapsedMilliseconds":8.1314,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000064","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:14.0202644+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"527375e597d9e6626e18f9dc145e6be2","SpanId":"2a83d039c6c784c9","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000065","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:14.0206694+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"527375e597d9e6626e18f9dc145e6be2","SpanId":"2a83d039c6c784c9","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000065","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:14.0209865+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"527375e597d9e6626e18f9dc145e6be2","SpanId":"2a83d039c6c784c9","Properties":{"ElapsedMilliseconds":0.7118,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000065","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:14.0235122+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"44838540e5be5834f09adf50fedd3373","SpanId":"d86ef69f51570089","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000066","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:14.0237574+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"44838540e5be5834f09adf50fedd3373","SpanId":"d86ef69f51570089","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000066","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:14.0254171+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"44838540e5be5834f09adf50fedd3373","SpanId":"d86ef69f51570089","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000066","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:14.0257413+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"44838540e5be5834f09adf50fedd3373","SpanId":"d86ef69f51570089","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000066","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:14.0259129+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"44838540e5be5834f09adf50fedd3373","SpanId":"d86ef69f51570089","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000066","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:14.0262242+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"44838540e5be5834f09adf50fedd3373","SpanId":"d86ef69f51570089","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000066","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:14.0264063+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"44838540e5be5834f09adf50fedd3373","SpanId":"d86ef69f51570089","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000066","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:14.0265109+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"44838540e5be5834f09adf50fedd3373","SpanId":"d86ef69f51570089","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000066","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:14.0272163+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"44838540e5be5834f09adf50fedd3373","SpanId":"d86ef69f51570089","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000066","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:14.0275345+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"44838540e5be5834f09adf50fedd3373","SpanId":"d86ef69f51570089","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000066","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:14.0276695+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"44838540e5be5834f09adf50fedd3373","SpanId":"d86ef69f51570089","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000066","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:14.0285714+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"44838540e5be5834f09adf50fedd3373","SpanId":"d86ef69f51570089","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000066","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:14.0295531+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"44838540e5be5834f09adf50fedd3373","SpanId":"d86ef69f51570089","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000066","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:14.0307720+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"44838540e5be5834f09adf50fedd3373","SpanId":"d86ef69f51570089","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000066","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:14.0310714+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"44838540e5be5834f09adf50fedd3373","SpanId":"d86ef69f51570089","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000066","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:14.0312254+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"44838540e5be5834f09adf50fedd3373","SpanId":"d86ef69f51570089","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000066","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:14.0313536+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"44838540e5be5834f09adf50fedd3373","SpanId":"d86ef69f51570089","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000066","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:14.0315485+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"44838540e5be5834f09adf50fedd3373","SpanId":"d86ef69f51570089","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000066","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:14.0317441+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"44838540e5be5834f09adf50fedd3373","SpanId":"d86ef69f51570089","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.6373,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000066","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:14.0319017+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"44838540e5be5834f09adf50fedd3373","SpanId":"d86ef69f51570089","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000066","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:14.0320799+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"44838540e5be5834f09adf50fedd3373","SpanId":"d86ef69f51570089","Properties":{"ElapsedMilliseconds":8.5624,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000066","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:17.0200886+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"9c6a89bb036311c3428219a423612902","SpanId":"4aaf043558df72e6","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000067","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:17.0209244+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"9c6a89bb036311c3428219a423612902","SpanId":"4aaf043558df72e6","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000067","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:17.0227725+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"9c6a89bb036311c3428219a423612902","SpanId":"4aaf043558df72e6","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000067","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:17.0231051+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"9c6a89bb036311c3428219a423612902","SpanId":"4aaf043558df72e6","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000067","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:17.0232680+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"9c6a89bb036311c3428219a423612902","SpanId":"4aaf043558df72e6","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000067","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:17.0235904+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"9c6a89bb036311c3428219a423612902","SpanId":"4aaf043558df72e6","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000067","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:17.0237592+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"9c6a89bb036311c3428219a423612902","SpanId":"4aaf043558df72e6","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000067","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:17.0238843+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"9c6a89bb036311c3428219a423612902","SpanId":"4aaf043558df72e6","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000067","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:17.0246235+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"9c6a89bb036311c3428219a423612902","SpanId":"4aaf043558df72e6","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000067","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:17.0249417+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"9c6a89bb036311c3428219a423612902","SpanId":"4aaf043558df72e6","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000067","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:17.0250643+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"9c6a89bb036311c3428219a423612902","SpanId":"4aaf043558df72e6","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000067","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:17.0259494+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"9c6a89bb036311c3428219a423612902","SpanId":"4aaf043558df72e6","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000067","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:17.0275416+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"9c6a89bb036311c3428219a423612902","SpanId":"4aaf043558df72e6","Properties":{"elapsed":"1","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000067","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:17.0288158+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"9c6a89bb036311c3428219a423612902","SpanId":"4aaf043558df72e6","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000067","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:17.0291213+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"9c6a89bb036311c3428219a423612902","SpanId":"4aaf043558df72e6","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000067","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:17.0293174+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"9c6a89bb036311c3428219a423612902","SpanId":"4aaf043558df72e6","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000067","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:17.0294417+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"9c6a89bb036311c3428219a423612902","SpanId":"4aaf043558df72e6","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000067","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:17.0296417+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"9c6a89bb036311c3428219a423612902","SpanId":"4aaf043558df72e6","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000067","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:17.0298218+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"9c6a89bb036311c3428219a423612902","SpanId":"4aaf043558df72e6","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.3488,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000067","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:17.0299831+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"9c6a89bb036311c3428219a423612902","SpanId":"4aaf043558df72e6","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000067","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:17.0301445+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"9c6a89bb036311c3428219a423612902","SpanId":"4aaf043558df72e6","Properties":{"ElapsedMilliseconds":10.0722,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000067","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:20.0201205+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"db4157c0413a2e473de324c2c90de35e","SpanId":"10fa22a9340a07bc","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000068","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:20.0209783+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"db4157c0413a2e473de324c2c90de35e","SpanId":"10fa22a9340a07bc","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000068","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:20.0212972+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"db4157c0413a2e473de324c2c90de35e","SpanId":"10fa22a9340a07bc","Properties":{"ElapsedMilliseconds":1.1765,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000068","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:20.0238049+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"c729a43d391167635a3017f4cd88f6e2","SpanId":"4e463e1783874a12","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000069","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:20.0241426+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"c729a43d391167635a3017f4cd88f6e2","SpanId":"4e463e1783874a12","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000069","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:20.0252063+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c729a43d391167635a3017f4cd88f6e2","SpanId":"4e463e1783874a12","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000069","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:20.0258124+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"c729a43d391167635a3017f4cd88f6e2","SpanId":"4e463e1783874a12","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000069","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:20.0260513+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"c729a43d391167635a3017f4cd88f6e2","SpanId":"4e463e1783874a12","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000069","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:20.0263671+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"c729a43d391167635a3017f4cd88f6e2","SpanId":"4e463e1783874a12","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000069","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:20.0264969+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"c729a43d391167635a3017f4cd88f6e2","SpanId":"4e463e1783874a12","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000069","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:20.0266132+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"c729a43d391167635a3017f4cd88f6e2","SpanId":"4e463e1783874a12","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000069","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:20.0273260+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c729a43d391167635a3017f4cd88f6e2","SpanId":"4e463e1783874a12","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000069","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:20.0276855+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"c729a43d391167635a3017f4cd88f6e2","SpanId":"4e463e1783874a12","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000069","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:20.0278152+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"c729a43d391167635a3017f4cd88f6e2","SpanId":"4e463e1783874a12","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000069","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:20.0287314+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c729a43d391167635a3017f4cd88f6e2","SpanId":"4e463e1783874a12","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000069","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:20.0296663+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c729a43d391167635a3017f4cd88f6e2","SpanId":"4e463e1783874a12","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000069","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:20.0309561+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c729a43d391167635a3017f4cd88f6e2","SpanId":"4e463e1783874a12","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000069","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:20.0312934+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"c729a43d391167635a3017f4cd88f6e2","SpanId":"4e463e1783874a12","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000069","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:20.0314365+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"c729a43d391167635a3017f4cd88f6e2","SpanId":"4e463e1783874a12","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000069","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:20.0315525+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"c729a43d391167635a3017f4cd88f6e2","SpanId":"4e463e1783874a12","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000069","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:20.0317626+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"c729a43d391167635a3017f4cd88f6e2","SpanId":"4e463e1783874a12","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000069","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:20.0320040+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"c729a43d391167635a3017f4cd88f6e2","SpanId":"4e463e1783874a12","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.7666,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000069","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:20.0323030+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"c729a43d391167635a3017f4cd88f6e2","SpanId":"4e463e1783874a12","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000069","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:20.0324782+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"c729a43d391167635a3017f4cd88f6e2","SpanId":"4e463e1783874a12","Properties":{"ElapsedMilliseconds":8.6733,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000069","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:23.0202059+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"0ed75cb1ebb13c4e5a6728131db7c202","SpanId":"8a5598364b9ab885","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000006A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:23.0205932+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"0ed75cb1ebb13c4e5a6728131db7c202","SpanId":"8a5598364b9ab885","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000006A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:23.0218682+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"0ed75cb1ebb13c4e5a6728131db7c202","SpanId":"8a5598364b9ab885","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:0000006A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:23.0222626+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"0ed75cb1ebb13c4e5a6728131db7c202","SpanId":"8a5598364b9ab885","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000006A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:23.0224611+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"0ed75cb1ebb13c4e5a6728131db7c202","SpanId":"8a5598364b9ab885","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:23.0227824+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"0ed75cb1ebb13c4e5a6728131db7c202","SpanId":"8a5598364b9ab885","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:23.0229219+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"0ed75cb1ebb13c4e5a6728131db7c202","SpanId":"8a5598364b9ab885","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:23.0230569+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"0ed75cb1ebb13c4e5a6728131db7c202","SpanId":"8a5598364b9ab885","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:23.0240831+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"0ed75cb1ebb13c4e5a6728131db7c202","SpanId":"8a5598364b9ab885","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:23.0245116+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"0ed75cb1ebb13c4e5a6728131db7c202","SpanId":"8a5598364b9ab885","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:23.0246476+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"0ed75cb1ebb13c4e5a6728131db7c202","SpanId":"8a5598364b9ab885","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:23.0255781+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"0ed75cb1ebb13c4e5a6728131db7c202","SpanId":"8a5598364b9ab885","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:23.0265330+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"0ed75cb1ebb13c4e5a6728131db7c202","SpanId":"8a5598364b9ab885","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:23.0278609+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"0ed75cb1ebb13c4e5a6728131db7c202","SpanId":"8a5598364b9ab885","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:23.0281767+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"0ed75cb1ebb13c4e5a6728131db7c202","SpanId":"8a5598364b9ab885","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:23.0282996+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"0ed75cb1ebb13c4e5a6728131db7c202","SpanId":"8a5598364b9ab885","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:23.0284309+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"0ed75cb1ebb13c4e5a6728131db7c202","SpanId":"8a5598364b9ab885","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:23.0286145+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"0ed75cb1ebb13c4e5a6728131db7c202","SpanId":"8a5598364b9ab885","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:23.0288399+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"0ed75cb1ebb13c4e5a6728131db7c202","SpanId":"8a5598364b9ab885","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.19,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:0000006A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:23.0290162+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"0ed75cb1ebb13c4e5a6728131db7c202","SpanId":"8a5598364b9ab885","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000006A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:23.0291889+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"0ed75cb1ebb13c4e5a6728131db7c202","SpanId":"8a5598364b9ab885","Properties":{"ElapsedMilliseconds":8.9872,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000006A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:26.0201902+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"0e8655169384685cf457fbc4ebf74b55","SpanId":"d29ac233f091439b","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000006B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:26.0207802+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"0e8655169384685cf457fbc4ebf74b55","SpanId":"d29ac233f091439b","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000006B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:26.0209552+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"0e8655169384685cf457fbc4ebf74b55","SpanId":"d29ac233f091439b","Properties":{"ElapsedMilliseconds":0.7732,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000006B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:26.0233422+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"0ebe57d278092908feff3664f200f8d5","SpanId":"8d681871cf0da4be","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000006C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:26.0235752+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"0ebe57d278092908feff3664f200f8d5","SpanId":"8d681871cf0da4be","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000006C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:26.0246507+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"0ebe57d278092908feff3664f200f8d5","SpanId":"8d681871cf0da4be","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:0000006C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:26.0249805+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"0ebe57d278092908feff3664f200f8d5","SpanId":"8d681871cf0da4be","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000006C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:26.0251455+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"0ebe57d278092908feff3664f200f8d5","SpanId":"8d681871cf0da4be","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:26.0254469+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"0ebe57d278092908feff3664f200f8d5","SpanId":"8d681871cf0da4be","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:26.0256291+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"0ebe57d278092908feff3664f200f8d5","SpanId":"8d681871cf0da4be","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:26.0257606+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"0ebe57d278092908feff3664f200f8d5","SpanId":"8d681871cf0da4be","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:26.0265001+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"0ebe57d278092908feff3664f200f8d5","SpanId":"8d681871cf0da4be","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:26.0268176+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"0ebe57d278092908feff3664f200f8d5","SpanId":"8d681871cf0da4be","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:26.0269474+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"0ebe57d278092908feff3664f200f8d5","SpanId":"8d681871cf0da4be","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:26.0278198+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"0ebe57d278092908feff3664f200f8d5","SpanId":"8d681871cf0da4be","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:26.0289173+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"0ebe57d278092908feff3664f200f8d5","SpanId":"8d681871cf0da4be","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:26.0303271+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"0ebe57d278092908feff3664f200f8d5","SpanId":"8d681871cf0da4be","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:26.0307180+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"0ebe57d278092908feff3664f200f8d5","SpanId":"8d681871cf0da4be","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:26.0308392+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"0ebe57d278092908feff3664f200f8d5","SpanId":"8d681871cf0da4be","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:26.0309588+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"0ebe57d278092908feff3664f200f8d5","SpanId":"8d681871cf0da4be","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:26.0311501+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"0ebe57d278092908feff3664f200f8d5","SpanId":"8d681871cf0da4be","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:26.0313551+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"0ebe57d278092908feff3664f200f8d5","SpanId":"8d681871cf0da4be","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.017,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:0000006C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:26.0315240+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"0ebe57d278092908feff3664f200f8d5","SpanId":"8d681871cf0da4be","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000006C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:26.0316935+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"0ebe57d278092908feff3664f200f8d5","SpanId":"8d681871cf0da4be","Properties":{"ElapsedMilliseconds":8.3456,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000006C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:29.0206870+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"d86db9433c79806d552689c41104286a","SpanId":"589b04e46195cb96","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000006D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:29.0210591+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"d86db9433c79806d552689c41104286a","SpanId":"589b04e46195cb96","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000006D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:29.0221452+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"d86db9433c79806d552689c41104286a","SpanId":"589b04e46195cb96","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:0000006D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:29.0224982+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"d86db9433c79806d552689c41104286a","SpanId":"589b04e46195cb96","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000006D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:29.0226684+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"d86db9433c79806d552689c41104286a","SpanId":"589b04e46195cb96","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:29.0230247+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"d86db9433c79806d552689c41104286a","SpanId":"589b04e46195cb96","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:29.0231373+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"d86db9433c79806d552689c41104286a","SpanId":"589b04e46195cb96","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:29.0232575+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"d86db9433c79806d552689c41104286a","SpanId":"589b04e46195cb96","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:29.0239839+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"d86db9433c79806d552689c41104286a","SpanId":"589b04e46195cb96","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:29.0242960+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"d86db9433c79806d552689c41104286a","SpanId":"589b04e46195cb96","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:29.0244529+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"d86db9433c79806d552689c41104286a","SpanId":"589b04e46195cb96","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:29.0253681+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"d86db9433c79806d552689c41104286a","SpanId":"589b04e46195cb96","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:29.0263654+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"d86db9433c79806d552689c41104286a","SpanId":"589b04e46195cb96","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:29.0276080+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"d86db9433c79806d552689c41104286a","SpanId":"589b04e46195cb96","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:29.0279637+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"d86db9433c79806d552689c41104286a","SpanId":"589b04e46195cb96","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:29.0280961+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"d86db9433c79806d552689c41104286a","SpanId":"589b04e46195cb96","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:29.0282742+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"d86db9433c79806d552689c41104286a","SpanId":"589b04e46195cb96","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:29.0285309+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"d86db9433c79806d552689c41104286a","SpanId":"589b04e46195cb96","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:29.0287185+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"d86db9433c79806d552689c41104286a","SpanId":"589b04e46195cb96","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.8134,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:0000006D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:29.0288966+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"d86db9433c79806d552689c41104286a","SpanId":"589b04e46195cb96","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000006D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:29.0291083+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"d86db9433c79806d552689c41104286a","SpanId":"589b04e46195cb96","Properties":{"ElapsedMilliseconds":8.422,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000006D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:32.0208267+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"28cbfc0776eb96a267809b4095c96c13","SpanId":"32550df995aa3a3c","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000006E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:32.0211826+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"28cbfc0776eb96a267809b4095c96c13","SpanId":"32550df995aa3a3c","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000006E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:32.0214216+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"28cbfc0776eb96a267809b4095c96c13","SpanId":"32550df995aa3a3c","Properties":{"ElapsedMilliseconds":0.6012,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000006E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:32.0245855+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"37533c14fb990b7823ca9247a7a158af","SpanId":"9dfe983a995b5a3e","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000006F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:32.0248342+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"37533c14fb990b7823ca9247a7a158af","SpanId":"9dfe983a995b5a3e","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000006F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:32.0263918+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"37533c14fb990b7823ca9247a7a158af","SpanId":"9dfe983a995b5a3e","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:0000006F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:32.0267853+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"37533c14fb990b7823ca9247a7a158af","SpanId":"9dfe983a995b5a3e","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000006F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:32.0269816+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"37533c14fb990b7823ca9247a7a158af","SpanId":"9dfe983a995b5a3e","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:32.0273374+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"37533c14fb990b7823ca9247a7a158af","SpanId":"9dfe983a995b5a3e","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:32.0274706+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"37533c14fb990b7823ca9247a7a158af","SpanId":"9dfe983a995b5a3e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:32.0275940+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"37533c14fb990b7823ca9247a7a158af","SpanId":"9dfe983a995b5a3e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:32.0284010+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"37533c14fb990b7823ca9247a7a158af","SpanId":"9dfe983a995b5a3e","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:32.0287913+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"37533c14fb990b7823ca9247a7a158af","SpanId":"9dfe983a995b5a3e","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:32.0289322+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"37533c14fb990b7823ca9247a7a158af","SpanId":"9dfe983a995b5a3e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:32.0298884+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"37533c14fb990b7823ca9247a7a158af","SpanId":"9dfe983a995b5a3e","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:32.0308688+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"37533c14fb990b7823ca9247a7a158af","SpanId":"9dfe983a995b5a3e","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:32.0322421+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"37533c14fb990b7823ca9247a7a158af","SpanId":"9dfe983a995b5a3e","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:32.0325579+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"37533c14fb990b7823ca9247a7a158af","SpanId":"9dfe983a995b5a3e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:32.0326819+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"37533c14fb990b7823ca9247a7a158af","SpanId":"9dfe983a995b5a3e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:32.0328221+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"37533c14fb990b7823ca9247a7a158af","SpanId":"9dfe983a995b5a3e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:32.0330388+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"37533c14fb990b7823ca9247a7a158af","SpanId":"9dfe983a995b5a3e","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000006F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:32.0332694+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"37533c14fb990b7823ca9247a7a158af","SpanId":"9dfe983a995b5a3e","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.0624,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:0000006F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:32.0334756+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"37533c14fb990b7823ca9247a7a158af","SpanId":"9dfe983a995b5a3e","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000006F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:32.0336898+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"37533c14fb990b7823ca9247a7a158af","SpanId":"9dfe983a995b5a3e","Properties":{"ElapsedMilliseconds":9.099,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000006F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:35.0205257+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"7d109e6a2e2c4dc730100b3fa56191da","SpanId":"d06e5bee4fcf5fc8","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000070","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:35.0208967+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"7d109e6a2e2c4dc730100b3fa56191da","SpanId":"d06e5bee4fcf5fc8","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000070","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:35.0219866+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"7d109e6a2e2c4dc730100b3fa56191da","SpanId":"d06e5bee4fcf5fc8","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000070","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:35.0223573+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"7d109e6a2e2c4dc730100b3fa56191da","SpanId":"d06e5bee4fcf5fc8","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000070","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:35.0225167+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"7d109e6a2e2c4dc730100b3fa56191da","SpanId":"d06e5bee4fcf5fc8","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000070","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:35.0228092+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"7d109e6a2e2c4dc730100b3fa56191da","SpanId":"d06e5bee4fcf5fc8","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000070","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:35.0229205+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"7d109e6a2e2c4dc730100b3fa56191da","SpanId":"d06e5bee4fcf5fc8","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000070","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:35.0230355+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"7d109e6a2e2c4dc730100b3fa56191da","SpanId":"d06e5bee4fcf5fc8","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000070","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:35.0237301+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"7d109e6a2e2c4dc730100b3fa56191da","SpanId":"d06e5bee4fcf5fc8","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000070","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:35.0240596+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"7d109e6a2e2c4dc730100b3fa56191da","SpanId":"d06e5bee4fcf5fc8","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000070","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:35.0241805+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"7d109e6a2e2c4dc730100b3fa56191da","SpanId":"d06e5bee4fcf5fc8","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000070","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:35.0250573+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"7d109e6a2e2c4dc730100b3fa56191da","SpanId":"d06e5bee4fcf5fc8","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000070","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:35.0259308+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"7d109e6a2e2c4dc730100b3fa56191da","SpanId":"d06e5bee4fcf5fc8","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000070","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:35.0271474+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"7d109e6a2e2c4dc730100b3fa56191da","SpanId":"d06e5bee4fcf5fc8","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000070","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:35.0274151+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"7d109e6a2e2c4dc730100b3fa56191da","SpanId":"d06e5bee4fcf5fc8","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000070","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:35.0275200+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"7d109e6a2e2c4dc730100b3fa56191da","SpanId":"d06e5bee4fcf5fc8","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000070","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:35.0276330+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"7d109e6a2e2c4dc730100b3fa56191da","SpanId":"d06e5bee4fcf5fc8","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000070","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:35.0278737+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"7d109e6a2e2c4dc730100b3fa56191da","SpanId":"d06e5bee4fcf5fc8","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000070","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:35.0280634+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"7d109e6a2e2c4dc730100b3fa56191da","SpanId":"d06e5bee4fcf5fc8","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.3683,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000070","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:35.0282120+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"7d109e6a2e2c4dc730100b3fa56191da","SpanId":"d06e5bee4fcf5fc8","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000070","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:35.0284155+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"7d109e6a2e2c4dc730100b3fa56191da","SpanId":"d06e5bee4fcf5fc8","Properties":{"ElapsedMilliseconds":7.8891,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000070","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:38.0211013+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"400b9b68b30dc7f9baf3586a470ea804","SpanId":"754080682e44de6a","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000071","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:38.0214700+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"400b9b68b30dc7f9baf3586a470ea804","SpanId":"754080682e44de6a","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000071","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:38.0217296+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"400b9b68b30dc7f9baf3586a470ea804","SpanId":"754080682e44de6a","Properties":{"ElapsedMilliseconds":0.6299,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000071","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:38.0242506+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"bccd04dc401831836e6d3bfb23145bde","SpanId":"231c3970bc616055","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000072","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:38.0245571+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"bccd04dc401831836e6d3bfb23145bde","SpanId":"231c3970bc616055","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000072","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:38.0258905+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"bccd04dc401831836e6d3bfb23145bde","SpanId":"231c3970bc616055","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000072","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:38.0261810+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"bccd04dc401831836e6d3bfb23145bde","SpanId":"231c3970bc616055","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000072","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:38.0263528+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"bccd04dc401831836e6d3bfb23145bde","SpanId":"231c3970bc616055","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000072","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:38.0266903+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"bccd04dc401831836e6d3bfb23145bde","SpanId":"231c3970bc616055","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000072","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:38.0268046+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"bccd04dc401831836e6d3bfb23145bde","SpanId":"231c3970bc616055","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000072","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:38.0269219+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"bccd04dc401831836e6d3bfb23145bde","SpanId":"231c3970bc616055","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000072","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:38.0276248+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"bccd04dc401831836e6d3bfb23145bde","SpanId":"231c3970bc616055","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000072","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:38.0279430+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"bccd04dc401831836e6d3bfb23145bde","SpanId":"231c3970bc616055","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000072","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:38.0280743+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"bccd04dc401831836e6d3bfb23145bde","SpanId":"231c3970bc616055","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000072","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:38.0290387+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"bccd04dc401831836e6d3bfb23145bde","SpanId":"231c3970bc616055","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000072","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:38.0300507+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"bccd04dc401831836e6d3bfb23145bde","SpanId":"231c3970bc616055","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000072","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:38.0312562+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"bccd04dc401831836e6d3bfb23145bde","SpanId":"231c3970bc616055","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000072","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:38.0316133+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"bccd04dc401831836e6d3bfb23145bde","SpanId":"231c3970bc616055","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000072","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:38.0317421+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"bccd04dc401831836e6d3bfb23145bde","SpanId":"231c3970bc616055","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000072","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:38.0318708+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"bccd04dc401831836e6d3bfb23145bde","SpanId":"231c3970bc616055","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000072","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:38.0320631+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"bccd04dc401831836e6d3bfb23145bde","SpanId":"231c3970bc616055","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000072","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:38.0322442+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"bccd04dc401831836e6d3bfb23145bde","SpanId":"231c3970bc616055","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.6711,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000072","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:38.0324491+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"bccd04dc401831836e6d3bfb23145bde","SpanId":"231c3970bc616055","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000072","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:38.0326454+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"bccd04dc401831836e6d3bfb23145bde","SpanId":"231c3970bc616055","Properties":{"ElapsedMilliseconds":8.3961,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000072","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:41.0208505+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"3ce7ecaf0f3062947a25b2534219635e","SpanId":"ebe5e04637a355be","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000073","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:41.0211707+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"3ce7ecaf0f3062947a25b2534219635e","SpanId":"ebe5e04637a355be","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000073","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:41.0222808+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3ce7ecaf0f3062947a25b2534219635e","SpanId":"ebe5e04637a355be","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000073","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:41.0226239+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"3ce7ecaf0f3062947a25b2534219635e","SpanId":"ebe5e04637a355be","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000073","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:41.0227903+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"3ce7ecaf0f3062947a25b2534219635e","SpanId":"ebe5e04637a355be","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000073","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:41.0231527+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"3ce7ecaf0f3062947a25b2534219635e","SpanId":"ebe5e04637a355be","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000073","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:41.0232771+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"3ce7ecaf0f3062947a25b2534219635e","SpanId":"ebe5e04637a355be","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000073","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:41.0233997+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"3ce7ecaf0f3062947a25b2534219635e","SpanId":"ebe5e04637a355be","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000073","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:41.0241110+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3ce7ecaf0f3062947a25b2534219635e","SpanId":"ebe5e04637a355be","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000073","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:41.0244337+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"3ce7ecaf0f3062947a25b2534219635e","SpanId":"ebe5e04637a355be","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000073","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:41.0245798+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"3ce7ecaf0f3062947a25b2534219635e","SpanId":"ebe5e04637a355be","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000073","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:41.0255478+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3ce7ecaf0f3062947a25b2534219635e","SpanId":"ebe5e04637a355be","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000073","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:41.0264518+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3ce7ecaf0f3062947a25b2534219635e","SpanId":"ebe5e04637a355be","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000073","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:41.0276403+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3ce7ecaf0f3062947a25b2534219635e","SpanId":"ebe5e04637a355be","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000073","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:41.0279925+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"3ce7ecaf0f3062947a25b2534219635e","SpanId":"ebe5e04637a355be","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000073","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:41.0281825+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"3ce7ecaf0f3062947a25b2534219635e","SpanId":"ebe5e04637a355be","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000073","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:41.0283323+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"3ce7ecaf0f3062947a25b2534219635e","SpanId":"ebe5e04637a355be","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000073","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:41.0285663+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"3ce7ecaf0f3062947a25b2534219635e","SpanId":"ebe5e04637a355be","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000073","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:41.0287928+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"3ce7ecaf0f3062947a25b2534219635e","SpanId":"ebe5e04637a355be","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.7579,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000073","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:41.0290019+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"3ce7ecaf0f3062947a25b2534219635e","SpanId":"ebe5e04637a355be","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000073","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:41.0293362+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"3ce7ecaf0f3062947a25b2534219635e","SpanId":"ebe5e04637a355be","Properties":{"ElapsedMilliseconds":8.4863,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000073","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:44.0201226+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"1dfcfc022140a6601b7b7fd066e53058","SpanId":"a92e8aa13086a8b6","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000074","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:44.0208327+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"1dfcfc022140a6601b7b7fd066e53058","SpanId":"a92e8aa13086a8b6","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000074","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:44.0211589+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"1dfcfc022140a6601b7b7fd066e53058","SpanId":"a92e8aa13086a8b6","Properties":{"ElapsedMilliseconds":1.0398,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000074","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:44.0235664+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"cca6903f8eeb3bdd743c73372f91632e","SpanId":"0883f7c1f362cec7","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000075","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:44.0241377+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"cca6903f8eeb3bdd743c73372f91632e","SpanId":"0883f7c1f362cec7","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000075","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:44.0256532+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"cca6903f8eeb3bdd743c73372f91632e","SpanId":"0883f7c1f362cec7","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000075","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:44.0260274+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"cca6903f8eeb3bdd743c73372f91632e","SpanId":"0883f7c1f362cec7","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000075","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:44.0261894+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"cca6903f8eeb3bdd743c73372f91632e","SpanId":"0883f7c1f362cec7","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000075","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:44.0265000+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"cca6903f8eeb3bdd743c73372f91632e","SpanId":"0883f7c1f362cec7","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000075","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:44.0266211+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"cca6903f8eeb3bdd743c73372f91632e","SpanId":"0883f7c1f362cec7","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000075","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:44.0267459+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"cca6903f8eeb3bdd743c73372f91632e","SpanId":"0883f7c1f362cec7","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000075","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:44.0274617+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"cca6903f8eeb3bdd743c73372f91632e","SpanId":"0883f7c1f362cec7","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000075","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:44.0278052+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"cca6903f8eeb3bdd743c73372f91632e","SpanId":"0883f7c1f362cec7","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000075","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:44.0279148+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"cca6903f8eeb3bdd743c73372f91632e","SpanId":"0883f7c1f362cec7","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000075","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:44.0288019+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"cca6903f8eeb3bdd743c73372f91632e","SpanId":"0883f7c1f362cec7","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000075","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:44.0297372+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"cca6903f8eeb3bdd743c73372f91632e","SpanId":"0883f7c1f362cec7","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000075","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:44.0311701+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"cca6903f8eeb3bdd743c73372f91632e","SpanId":"0883f7c1f362cec7","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000075","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:44.0314895+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"cca6903f8eeb3bdd743c73372f91632e","SpanId":"0883f7c1f362cec7","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000075","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:44.0316032+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"cca6903f8eeb3bdd743c73372f91632e","SpanId":"0883f7c1f362cec7","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000075","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:44.0317173+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"cca6903f8eeb3bdd743c73372f91632e","SpanId":"0883f7c1f362cec7","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000075","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:44.0319632+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"cca6903f8eeb3bdd743c73372f91632e","SpanId":"0883f7c1f362cec7","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000075","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:44.0321326+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"cca6903f8eeb3bdd743c73372f91632e","SpanId":"0883f7c1f362cec7","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.7509,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000075","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:44.0322836+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"cca6903f8eeb3bdd743c73372f91632e","SpanId":"0883f7c1f362cec7","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000075","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:44.0324669+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"cca6903f8eeb3bdd743c73372f91632e","SpanId":"0883f7c1f362cec7","Properties":{"ElapsedMilliseconds":8.8985,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000075","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:47.0203245+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"f7f54eb177bd2869525e649d7e4c2e66","SpanId":"42a45a09f473ddbf","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000076","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:47.0206609+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"f7f54eb177bd2869525e649d7e4c2e66","SpanId":"42a45a09f473ddbf","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000076","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:47.0218760+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"f7f54eb177bd2869525e649d7e4c2e66","SpanId":"42a45a09f473ddbf","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000076","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:47.0221825+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"f7f54eb177bd2869525e649d7e4c2e66","SpanId":"42a45a09f473ddbf","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000076","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:47.0223369+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"f7f54eb177bd2869525e649d7e4c2e66","SpanId":"42a45a09f473ddbf","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000076","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:47.0226206+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"f7f54eb177bd2869525e649d7e4c2e66","SpanId":"42a45a09f473ddbf","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000076","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:47.0227289+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"f7f54eb177bd2869525e649d7e4c2e66","SpanId":"42a45a09f473ddbf","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000076","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:47.0228430+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"f7f54eb177bd2869525e649d7e4c2e66","SpanId":"42a45a09f473ddbf","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000076","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:47.0235316+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"f7f54eb177bd2869525e649d7e4c2e66","SpanId":"42a45a09f473ddbf","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000076","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:47.0238608+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"f7f54eb177bd2869525e649d7e4c2e66","SpanId":"42a45a09f473ddbf","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000076","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:47.0239789+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"f7f54eb177bd2869525e649d7e4c2e66","SpanId":"42a45a09f473ddbf","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000076","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:47.0248443+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"f7f54eb177bd2869525e649d7e4c2e66","SpanId":"42a45a09f473ddbf","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000076","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:47.0258333+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"f7f54eb177bd2869525e649d7e4c2e66","SpanId":"42a45a09f473ddbf","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000076","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:47.0271599+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"f7f54eb177bd2869525e649d7e4c2e66","SpanId":"42a45a09f473ddbf","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000076","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:47.0274658+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"f7f54eb177bd2869525e649d7e4c2e66","SpanId":"42a45a09f473ddbf","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000076","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:47.0275851+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"f7f54eb177bd2869525e649d7e4c2e66","SpanId":"42a45a09f473ddbf","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000076","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:47.0276828+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"f7f54eb177bd2869525e649d7e4c2e66","SpanId":"42a45a09f473ddbf","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000076","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:47.0279140+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"f7f54eb177bd2869525e649d7e4c2e66","SpanId":"42a45a09f473ddbf","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000076","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:47.0281044+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"f7f54eb177bd2869525e649d7e4c2e66","SpanId":"42a45a09f473ddbf","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.5911,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000076","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:47.0282609+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"f7f54eb177bd2869525e649d7e4c2e66","SpanId":"42a45a09f473ddbf","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000076","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:47.0284418+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"f7f54eb177bd2869525e649d7e4c2e66","SpanId":"42a45a09f473ddbf","Properties":{"ElapsedMilliseconds":8.1422,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000076","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:50.0200325+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"6533e2632a894923852d4b3eb68a20db","SpanId":"5da7d1db5f8764a3","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000077","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:50.0203875+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"6533e2632a894923852d4b3eb68a20db","SpanId":"5da7d1db5f8764a3","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000077","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:50.0206296+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"6533e2632a894923852d4b3eb68a20db","SpanId":"5da7d1db5f8764a3","Properties":{"ElapsedMilliseconds":0.595,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000077","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:50.0231339+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"20641ceb17676d87bc40c3b5c04dfa15","SpanId":"98bf2051ad04ea55","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000078","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:50.0234116+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"20641ceb17676d87bc40c3b5c04dfa15","SpanId":"98bf2051ad04ea55","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000078","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:50.0245034+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"20641ceb17676d87bc40c3b5c04dfa15","SpanId":"98bf2051ad04ea55","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000078","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:50.0248551+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"20641ceb17676d87bc40c3b5c04dfa15","SpanId":"98bf2051ad04ea55","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000078","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:50.0250193+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"20641ceb17676d87bc40c3b5c04dfa15","SpanId":"98bf2051ad04ea55","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000078","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:50.0253679+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"20641ceb17676d87bc40c3b5c04dfa15","SpanId":"98bf2051ad04ea55","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000078","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:50.0254941+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"20641ceb17676d87bc40c3b5c04dfa15","SpanId":"98bf2051ad04ea55","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000078","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:50.0256157+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"20641ceb17676d87bc40c3b5c04dfa15","SpanId":"98bf2051ad04ea55","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000078","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:50.0263320+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"20641ceb17676d87bc40c3b5c04dfa15","SpanId":"98bf2051ad04ea55","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000078","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:50.0266277+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"20641ceb17676d87bc40c3b5c04dfa15","SpanId":"98bf2051ad04ea55","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000078","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:50.0267478+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"20641ceb17676d87bc40c3b5c04dfa15","SpanId":"98bf2051ad04ea55","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000078","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:50.0276605+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"20641ceb17676d87bc40c3b5c04dfa15","SpanId":"98bf2051ad04ea55","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000078","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:50.0285727+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"20641ceb17676d87bc40c3b5c04dfa15","SpanId":"98bf2051ad04ea55","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000078","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:50.0299583+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"20641ceb17676d87bc40c3b5c04dfa15","SpanId":"98bf2051ad04ea55","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000078","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:50.0302927+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"20641ceb17676d87bc40c3b5c04dfa15","SpanId":"98bf2051ad04ea55","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000078","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:50.0304315+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"20641ceb17676d87bc40c3b5c04dfa15","SpanId":"98bf2051ad04ea55","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000078","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:50.0305433+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"20641ceb17676d87bc40c3b5c04dfa15","SpanId":"98bf2051ad04ea55","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000078","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:50.0307469+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"20641ceb17676d87bc40c3b5c04dfa15","SpanId":"98bf2051ad04ea55","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000078","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:50.0309215+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"20641ceb17676d87bc40c3b5c04dfa15","SpanId":"98bf2051ad04ea55","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.6744,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000078","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:50.0310649+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"20641ceb17676d87bc40c3b5c04dfa15","SpanId":"98bf2051ad04ea55","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000078","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:50.0312779+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"20641ceb17676d87bc40c3b5c04dfa15","SpanId":"98bf2051ad04ea55","Properties":{"ElapsedMilliseconds":8.1381,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000078","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:53.0197385+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"558fc466c086272324dce9203daef89d","SpanId":"d6d7916f5165e5a2","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000079","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:53.0200608+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"558fc466c086272324dce9203daef89d","SpanId":"d6d7916f5165e5a2","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000079","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:53.0211529+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"558fc466c086272324dce9203daef89d","SpanId":"d6d7916f5165e5a2","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000079","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:53.0215108+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"558fc466c086272324dce9203daef89d","SpanId":"d6d7916f5165e5a2","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000079","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:53.0216917+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"558fc466c086272324dce9203daef89d","SpanId":"d6d7916f5165e5a2","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000079","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:53.0220639+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"558fc466c086272324dce9203daef89d","SpanId":"d6d7916f5165e5a2","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000079","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:53.0221872+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"558fc466c086272324dce9203daef89d","SpanId":"d6d7916f5165e5a2","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000079","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:53.0223205+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"558fc466c086272324dce9203daef89d","SpanId":"d6d7916f5165e5a2","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000079","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:53.0230136+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"558fc466c086272324dce9203daef89d","SpanId":"d6d7916f5165e5a2","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000079","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:53.0233183+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"558fc466c086272324dce9203daef89d","SpanId":"d6d7916f5165e5a2","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000079","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:53.0234682+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"558fc466c086272324dce9203daef89d","SpanId":"d6d7916f5165e5a2","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000079","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:53.0244769+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"558fc466c086272324dce9203daef89d","SpanId":"d6d7916f5165e5a2","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000079","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:53.0254871+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"558fc466c086272324dce9203daef89d","SpanId":"d6d7916f5165e5a2","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000079","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:53.0268590+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"558fc466c086272324dce9203daef89d","SpanId":"d6d7916f5165e5a2","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000079","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:53.0272106+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"558fc466c086272324dce9203daef89d","SpanId":"d6d7916f5165e5a2","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000079","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:53.0273516+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"558fc466c086272324dce9203daef89d","SpanId":"d6d7916f5165e5a2","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000079","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:53.0274900+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"558fc466c086272324dce9203daef89d","SpanId":"d6d7916f5165e5a2","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000079","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:53.0277155+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"558fc466c086272324dce9203daef89d","SpanId":"d6d7916f5165e5a2","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000079","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:53.0278931+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"558fc466c086272324dce9203daef89d","SpanId":"d6d7916f5165e5a2","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.9534,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000079","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:53.0281344+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"558fc466c086272324dce9203daef89d","SpanId":"d6d7916f5165e5a2","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000079","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:53.0284172+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"558fc466c086272324dce9203daef89d","SpanId":"d6d7916f5165e5a2","Properties":{"ElapsedMilliseconds":8.68,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000079","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:56.0204763+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"d0f11639b17036d64938a292a330c7ba","SpanId":"04d5f74c9cfa972c","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000007A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:56.0207950+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"d0f11639b17036d64938a292a330c7ba","SpanId":"04d5f74c9cfa972c","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000007A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:56.0210056+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"d0f11639b17036d64938a292a330c7ba","SpanId":"04d5f74c9cfa972c","Properties":{"ElapsedMilliseconds":0.5361,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000007A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:56.0235071+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"bce76dd653d6a03214a56147d591ed9e","SpanId":"c603cd98438ecf9b","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000007B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:56.0238287+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"bce76dd653d6a03214a56147d591ed9e","SpanId":"c603cd98438ecf9b","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000007B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:56.0249225+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"bce76dd653d6a03214a56147d591ed9e","SpanId":"c603cd98438ecf9b","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:0000007B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:56.0252232+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"bce76dd653d6a03214a56147d591ed9e","SpanId":"c603cd98438ecf9b","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000007B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:56.0253940+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"bce76dd653d6a03214a56147d591ed9e","SpanId":"c603cd98438ecf9b","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:56.0257155+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"bce76dd653d6a03214a56147d591ed9e","SpanId":"c603cd98438ecf9b","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:56.0258353+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"bce76dd653d6a03214a56147d591ed9e","SpanId":"c603cd98438ecf9b","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:56.0259532+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"bce76dd653d6a03214a56147d591ed9e","SpanId":"c603cd98438ecf9b","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:56.0267386+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"bce76dd653d6a03214a56147d591ed9e","SpanId":"c603cd98438ecf9b","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:56.0270374+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"bce76dd653d6a03214a56147d591ed9e","SpanId":"c603cd98438ecf9b","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:56.0271707+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"bce76dd653d6a03214a56147d591ed9e","SpanId":"c603cd98438ecf9b","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:56.0281857+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"bce76dd653d6a03214a56147d591ed9e","SpanId":"c603cd98438ecf9b","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:56.0291528+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"bce76dd653d6a03214a56147d591ed9e","SpanId":"c603cd98438ecf9b","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:56.0304460+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"bce76dd653d6a03214a56147d591ed9e","SpanId":"c603cd98438ecf9b","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:56.0307770+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"bce76dd653d6a03214a56147d591ed9e","SpanId":"c603cd98438ecf9b","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:56.0309207+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"bce76dd653d6a03214a56147d591ed9e","SpanId":"c603cd98438ecf9b","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:56.0310360+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"bce76dd653d6a03214a56147d591ed9e","SpanId":"c603cd98438ecf9b","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:56.0312695+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"bce76dd653d6a03214a56147d591ed9e","SpanId":"c603cd98438ecf9b","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:56.0314729+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"bce76dd653d6a03214a56147d591ed9e","SpanId":"c603cd98438ecf9b","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.8776,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:0000007B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:56.0316352+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"bce76dd653d6a03214a56147d591ed9e","SpanId":"c603cd98438ecf9b","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000007B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:56.0318008+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"bce76dd653d6a03214a56147d591ed9e","SpanId":"c603cd98438ecf9b","Properties":{"ElapsedMilliseconds":8.2924,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000007B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:59.0200741+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"02367cb06f887100eb3321beecaff3ab","SpanId":"f9110c2616c9242c","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000007C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:59.0206625+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"02367cb06f887100eb3321beecaff3ab","SpanId":"f9110c2616c9242c","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000007C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:59.0223389+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"02367cb06f887100eb3321beecaff3ab","SpanId":"f9110c2616c9242c","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:0000007C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:59.0226405+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"02367cb06f887100eb3321beecaff3ab","SpanId":"f9110c2616c9242c","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000007C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:59.0227945+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"02367cb06f887100eb3321beecaff3ab","SpanId":"f9110c2616c9242c","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:59.0230996+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"02367cb06f887100eb3321beecaff3ab","SpanId":"f9110c2616c9242c","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:59.0232223+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"02367cb06f887100eb3321beecaff3ab","SpanId":"f9110c2616c9242c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:59.0233611+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"02367cb06f887100eb3321beecaff3ab","SpanId":"f9110c2616c9242c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:59.0239974+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"02367cb06f887100eb3321beecaff3ab","SpanId":"f9110c2616c9242c","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:59.0242735+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"02367cb06f887100eb3321beecaff3ab","SpanId":"f9110c2616c9242c","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:59.0244309+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"02367cb06f887100eb3321beecaff3ab","SpanId":"f9110c2616c9242c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:59.0251949+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"02367cb06f887100eb3321beecaff3ab","SpanId":"f9110c2616c9242c","Properties":{"elapsed":"0","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:59.0259254+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"02367cb06f887100eb3321beecaff3ab","SpanId":"f9110c2616c9242c","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:59.0270263+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"02367cb06f887100eb3321beecaff3ab","SpanId":"f9110c2616c9242c","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:59.0272961+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"02367cb06f887100eb3321beecaff3ab","SpanId":"f9110c2616c9242c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:59.0274291+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"02367cb06f887100eb3321beecaff3ab","SpanId":"f9110c2616c9242c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:59.0275670+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"02367cb06f887100eb3321beecaff3ab","SpanId":"f9110c2616c9242c","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:40:59.0278300+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"02367cb06f887100eb3321beecaff3ab","SpanId":"f9110c2616c9242c","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:59.0280313+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"02367cb06f887100eb3321beecaff3ab","SpanId":"f9110c2616c9242c","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.0452,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:0000007C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:59.0281919+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"02367cb06f887100eb3321beecaff3ab","SpanId":"f9110c2616c9242c","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000007C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:40:59.0284061+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"02367cb06f887100eb3321beecaff3ab","SpanId":"f9110c2616c9242c","Properties":{"ElapsedMilliseconds":8.3364,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000007C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:02.0208113+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"7f37bc1467c09d4ef8f5ff5a81fee4a0","SpanId":"461b8f36a92c54d8","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000007D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:02.0214373+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"7f37bc1467c09d4ef8f5ff5a81fee4a0","SpanId":"461b8f36a92c54d8","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000007D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:02.0217942+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"7f37bc1467c09d4ef8f5ff5a81fee4a0","SpanId":"461b8f36a92c54d8","Properties":{"ElapsedMilliseconds":0.9876,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000007D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:02.0241028+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"59b7238e3e367c7031424c3e172a7a18","SpanId":"43ff8d27e14e4086","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000007E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:02.0243783+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"59b7238e3e367c7031424c3e172a7a18","SpanId":"43ff8d27e14e4086","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000007E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:02.0254596+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"59b7238e3e367c7031424c3e172a7a18","SpanId":"43ff8d27e14e4086","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:0000007E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:02.0261357+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"59b7238e3e367c7031424c3e172a7a18","SpanId":"43ff8d27e14e4086","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000007E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:02.0263021+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"59b7238e3e367c7031424c3e172a7a18","SpanId":"43ff8d27e14e4086","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:02.0266745+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"59b7238e3e367c7031424c3e172a7a18","SpanId":"43ff8d27e14e4086","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:02.0268214+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"59b7238e3e367c7031424c3e172a7a18","SpanId":"43ff8d27e14e4086","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:02.0269483+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"59b7238e3e367c7031424c3e172a7a18","SpanId":"43ff8d27e14e4086","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:02.0275702+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"59b7238e3e367c7031424c3e172a7a18","SpanId":"43ff8d27e14e4086","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:02.0278668+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"59b7238e3e367c7031424c3e172a7a18","SpanId":"43ff8d27e14e4086","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:02.0279986+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"59b7238e3e367c7031424c3e172a7a18","SpanId":"43ff8d27e14e4086","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:02.0288749+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"59b7238e3e367c7031424c3e172a7a18","SpanId":"43ff8d27e14e4086","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:02.0296240+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"59b7238e3e367c7031424c3e172a7a18","SpanId":"43ff8d27e14e4086","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:02.0307135+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"59b7238e3e367c7031424c3e172a7a18","SpanId":"43ff8d27e14e4086","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:02.0310364+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"59b7238e3e367c7031424c3e172a7a18","SpanId":"43ff8d27e14e4086","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:02.0311724+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"59b7238e3e367c7031424c3e172a7a18","SpanId":"43ff8d27e14e4086","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:02.0312935+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"59b7238e3e367c7031424c3e172a7a18","SpanId":"43ff8d27e14e4086","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:02.0315021+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"59b7238e3e367c7031424c3e172a7a18","SpanId":"43ff8d27e14e4086","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:02.0316865+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"59b7238e3e367c7031424c3e172a7a18","SpanId":"43ff8d27e14e4086","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.1312,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:0000007E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:02.0318587+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"59b7238e3e367c7031424c3e172a7a18","SpanId":"43ff8d27e14e4086","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000007E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:02.0322509+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"59b7238e3e367c7031424c3e172a7a18","SpanId":"43ff8d27e14e4086","Properties":{"ElapsedMilliseconds":8.1434,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000007E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:05.0204101+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"261a4a7486f561a3fb2c111791e5903e","SpanId":"002e55f92f17d877","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000007F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:05.0207429+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"261a4a7486f561a3fb2c111791e5903e","SpanId":"002e55f92f17d877","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000007F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:05.0218217+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"261a4a7486f561a3fb2c111791e5903e","SpanId":"002e55f92f17d877","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:0000007F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:05.0221085+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"261a4a7486f561a3fb2c111791e5903e","SpanId":"002e55f92f17d877","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000007F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:05.0222714+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"261a4a7486f561a3fb2c111791e5903e","SpanId":"002e55f92f17d877","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:05.0226426+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"261a4a7486f561a3fb2c111791e5903e","SpanId":"002e55f92f17d877","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:05.0227656+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"261a4a7486f561a3fb2c111791e5903e","SpanId":"002e55f92f17d877","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:05.0228907+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"261a4a7486f561a3fb2c111791e5903e","SpanId":"002e55f92f17d877","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:05.0234748+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"261a4a7486f561a3fb2c111791e5903e","SpanId":"002e55f92f17d877","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:05.0237516+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"261a4a7486f561a3fb2c111791e5903e","SpanId":"002e55f92f17d877","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:05.0238872+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"261a4a7486f561a3fb2c111791e5903e","SpanId":"002e55f92f17d877","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:05.0246917+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"261a4a7486f561a3fb2c111791e5903e","SpanId":"002e55f92f17d877","Properties":{"elapsed":"0","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:05.0254229+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"261a4a7486f561a3fb2c111791e5903e","SpanId":"002e55f92f17d877","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:05.0264323+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"261a4a7486f561a3fb2c111791e5903e","SpanId":"002e55f92f17d877","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:05.0267284+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"261a4a7486f561a3fb2c111791e5903e","SpanId":"002e55f92f17d877","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:05.0268676+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"261a4a7486f561a3fb2c111791e5903e","SpanId":"002e55f92f17d877","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:05.0270067+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"261a4a7486f561a3fb2c111791e5903e","SpanId":"002e55f92f17d877","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:05.0272011+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"261a4a7486f561a3fb2c111791e5903e","SpanId":"002e55f92f17d877","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000007F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:05.0274057+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"261a4a7486f561a3fb2c111791e5903e","SpanId":"002e55f92f17d877","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":4.8707,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:0000007F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:05.0275969+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"261a4a7486f561a3fb2c111791e5903e","SpanId":"002e55f92f17d877","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000007F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:05.0278512+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"261a4a7486f561a3fb2c111791e5903e","SpanId":"002e55f92f17d877","Properties":{"ElapsedMilliseconds":7.4417,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000007F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:08.0208883+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"6075c9bc6b98e723ad6499741e800af8","SpanId":"d80c51cb2262bde6","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000080","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:08.0217501+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"6075c9bc6b98e723ad6499741e800af8","SpanId":"d80c51cb2262bde6","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000080","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:08.0220497+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"6075c9bc6b98e723ad6499741e800af8","SpanId":"d80c51cb2262bde6","Properties":{"ElapsedMilliseconds":1.1709,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000080","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:08.0244980+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"452440f804ae682d1de5b50f4c0b1eb0","SpanId":"4c9e2db64e241b67","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000081","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:08.0248061+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"452440f804ae682d1de5b50f4c0b1eb0","SpanId":"4c9e2db64e241b67","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000081","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:08.0263258+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"452440f804ae682d1de5b50f4c0b1eb0","SpanId":"4c9e2db64e241b67","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000081","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:08.0266067+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"452440f804ae682d1de5b50f4c0b1eb0","SpanId":"4c9e2db64e241b67","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000081","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:08.0267750+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"452440f804ae682d1de5b50f4c0b1eb0","SpanId":"4c9e2db64e241b67","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000081","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:08.0271179+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"452440f804ae682d1de5b50f4c0b1eb0","SpanId":"4c9e2db64e241b67","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000081","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:08.0272534+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"452440f804ae682d1de5b50f4c0b1eb0","SpanId":"4c9e2db64e241b67","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000081","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:08.0273998+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"452440f804ae682d1de5b50f4c0b1eb0","SpanId":"4c9e2db64e241b67","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000081","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:08.0280237+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"452440f804ae682d1de5b50f4c0b1eb0","SpanId":"4c9e2db64e241b67","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000081","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:08.0282962+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"452440f804ae682d1de5b50f4c0b1eb0","SpanId":"4c9e2db64e241b67","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000081","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:08.0284330+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"452440f804ae682d1de5b50f4c0b1eb0","SpanId":"4c9e2db64e241b67","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000081","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:08.0292091+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"452440f804ae682d1de5b50f4c0b1eb0","SpanId":"4c9e2db64e241b67","Properties":{"elapsed":"0","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000081","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:08.0299296+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"452440f804ae682d1de5b50f4c0b1eb0","SpanId":"4c9e2db64e241b67","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000081","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:08.0309809+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"452440f804ae682d1de5b50f4c0b1eb0","SpanId":"4c9e2db64e241b67","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000081","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:08.0312461+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"452440f804ae682d1de5b50f4c0b1eb0","SpanId":"4c9e2db64e241b67","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000081","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:08.0313724+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"452440f804ae682d1de5b50f4c0b1eb0","SpanId":"4c9e2db64e241b67","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000081","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:08.0315410+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"452440f804ae682d1de5b50f4c0b1eb0","SpanId":"4c9e2db64e241b67","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000081","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:08.0317447+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"452440f804ae682d1de5b50f4c0b1eb0","SpanId":"4c9e2db64e241b67","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000081","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:08.0319272+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"452440f804ae682d1de5b50f4c0b1eb0","SpanId":"4c9e2db64e241b67","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":4.9652,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000081","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:08.0320918+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"452440f804ae682d1de5b50f4c0b1eb0","SpanId":"4c9e2db64e241b67","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000081","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:08.0323336+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"452440f804ae682d1de5b50f4c0b1eb0","SpanId":"4c9e2db64e241b67","Properties":{"ElapsedMilliseconds":7.8213,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000081","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:11.0200850+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"d929ddc279c4cdceca2d0af38e022f36","SpanId":"463a58524986718f","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000082","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:11.0205737+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"d929ddc279c4cdceca2d0af38e022f36","SpanId":"463a58524986718f","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000082","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:11.0216273+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"d929ddc279c4cdceca2d0af38e022f36","SpanId":"463a58524986718f","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000082","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:11.0219046+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"d929ddc279c4cdceca2d0af38e022f36","SpanId":"463a58524986718f","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000082","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:11.0220375+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"d929ddc279c4cdceca2d0af38e022f36","SpanId":"463a58524986718f","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000082","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:11.0223482+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"d929ddc279c4cdceca2d0af38e022f36","SpanId":"463a58524986718f","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000082","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:11.0224722+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"d929ddc279c4cdceca2d0af38e022f36","SpanId":"463a58524986718f","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000082","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:11.0225813+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"d929ddc279c4cdceca2d0af38e022f36","SpanId":"463a58524986718f","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000082","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:11.0232701+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"d929ddc279c4cdceca2d0af38e022f36","SpanId":"463a58524986718f","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000082","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:11.0235530+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"d929ddc279c4cdceca2d0af38e022f36","SpanId":"463a58524986718f","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000082","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:11.0236612+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"d929ddc279c4cdceca2d0af38e022f36","SpanId":"463a58524986718f","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000082","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:11.0244099+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"d929ddc279c4cdceca2d0af38e022f36","SpanId":"463a58524986718f","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000082","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:11.0251475+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"d929ddc279c4cdceca2d0af38e022f36","SpanId":"463a58524986718f","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000082","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:11.0262255+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"d929ddc279c4cdceca2d0af38e022f36","SpanId":"463a58524986718f","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000082","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:11.0265048+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"d929ddc279c4cdceca2d0af38e022f36","SpanId":"463a58524986718f","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000082","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:11.0266239+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"d929ddc279c4cdceca2d0af38e022f36","SpanId":"463a58524986718f","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000082","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:11.0267863+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"d929ddc279c4cdceca2d0af38e022f36","SpanId":"463a58524986718f","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000082","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:11.0269580+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"d929ddc279c4cdceca2d0af38e022f36","SpanId":"463a58524986718f","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000082","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:11.0271378+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"d929ddc279c4cdceca2d0af38e022f36","SpanId":"463a58524986718f","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":4.9299,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000082","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:11.0272815+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"d929ddc279c4cdceca2d0af38e022f36","SpanId":"463a58524986718f","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000082","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:11.0274494+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"d929ddc279c4cdceca2d0af38e022f36","SpanId":"463a58524986718f","Properties":{"ElapsedMilliseconds":7.3664,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000082","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:14.0727403+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"3d070045033dac15073f7c14d66d3220","SpanId":"93eccc3355dbd332","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000083","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:14.0732599+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"3d070045033dac15073f7c14d66d3220","SpanId":"93eccc3355dbd332","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000083","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:14.0736649+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"3d070045033dac15073f7c14d66d3220","SpanId":"93eccc3355dbd332","Properties":{"ElapsedMilliseconds":0.9319,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000083","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:14.1060112+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"c0ed0725623738191b028e24eb7d08d8","SpanId":"c98824209f90c4f1","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000084","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:14.1063803+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"c0ed0725623738191b028e24eb7d08d8","SpanId":"c98824209f90c4f1","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000084","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:14.1076366+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c0ed0725623738191b028e24eb7d08d8","SpanId":"c98824209f90c4f1","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000084","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:14.1079742+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"c0ed0725623738191b028e24eb7d08d8","SpanId":"c98824209f90c4f1","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000084","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:14.1081381+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"c0ed0725623738191b028e24eb7d08d8","SpanId":"c98824209f90c4f1","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000084","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:14.1085250+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"c0ed0725623738191b028e24eb7d08d8","SpanId":"c98824209f90c4f1","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000084","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:14.1086955+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"c0ed0725623738191b028e24eb7d08d8","SpanId":"c98824209f90c4f1","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000084","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:14.1088463+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"c0ed0725623738191b028e24eb7d08d8","SpanId":"c98824209f90c4f1","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000084","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:14.1097373+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c0ed0725623738191b028e24eb7d08d8","SpanId":"c98824209f90c4f1","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000084","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:14.1101099+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"c0ed0725623738191b028e24eb7d08d8","SpanId":"c98824209f90c4f1","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000084","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:14.1103574+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"c0ed0725623738191b028e24eb7d08d8","SpanId":"c98824209f90c4f1","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000084","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:14.1115759+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c0ed0725623738191b028e24eb7d08d8","SpanId":"c98824209f90c4f1","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000084","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:14.1127092+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c0ed0725623738191b028e24eb7d08d8","SpanId":"c98824209f90c4f1","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000084","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:14.1142495+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c0ed0725623738191b028e24eb7d08d8","SpanId":"c98824209f90c4f1","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000084","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:14.1147549+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"c0ed0725623738191b028e24eb7d08d8","SpanId":"c98824209f90c4f1","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000084","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:14.1149500+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"c0ed0725623738191b028e24eb7d08d8","SpanId":"c98824209f90c4f1","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000084","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:14.1150880+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"c0ed0725623738191b028e24eb7d08d8","SpanId":"c98824209f90c4f1","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000084","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:14.1153678+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"c0ed0725623738191b028e24eb7d08d8","SpanId":"c98824209f90c4f1","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000084","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:14.1156252+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"c0ed0725623738191b028e24eb7d08d8","SpanId":"c98824209f90c4f1","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":7.2382,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000084","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:14.1159114+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"c0ed0725623738191b028e24eb7d08d8","SpanId":"c98824209f90c4f1","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000084","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:14.1161846+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"c0ed0725623738191b028e24eb7d08d8","SpanId":"c98824209f90c4f1","Properties":{"ElapsedMilliseconds":10.1542,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000084","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:17.2147667+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"c3f6ea3c183e729aa41ca0cacef90800","SpanId":"698b01f8b8531c06","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000085","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:17.2153711+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"c3f6ea3c183e729aa41ca0cacef90800","SpanId":"698b01f8b8531c06","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000085","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:17.2177598+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c3f6ea3c183e729aa41ca0cacef90800","SpanId":"698b01f8b8531c06","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000085","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:17.2188907+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"c3f6ea3c183e729aa41ca0cacef90800","SpanId":"698b01f8b8531c06","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000085","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:17.2193823+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"c3f6ea3c183e729aa41ca0cacef90800","SpanId":"698b01f8b8531c06","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000085","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:17.2198796+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"c3f6ea3c183e729aa41ca0cacef90800","SpanId":"698b01f8b8531c06","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000085","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:17.2200374+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"c3f6ea3c183e729aa41ca0cacef90800","SpanId":"698b01f8b8531c06","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000085","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:17.2201953+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"c3f6ea3c183e729aa41ca0cacef90800","SpanId":"698b01f8b8531c06","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000085","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:17.2211607+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c3f6ea3c183e729aa41ca0cacef90800","SpanId":"698b01f8b8531c06","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000085","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:17.2216531+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"c3f6ea3c183e729aa41ca0cacef90800","SpanId":"698b01f8b8531c06","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000085","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:17.2219321+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"c3f6ea3c183e729aa41ca0cacef90800","SpanId":"698b01f8b8531c06","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000085","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:17.2231310+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c3f6ea3c183e729aa41ca0cacef90800","SpanId":"698b01f8b8531c06","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000085","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:17.2246577+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c3f6ea3c183e729aa41ca0cacef90800","SpanId":"698b01f8b8531c06","Properties":{"elapsed":"1","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000085","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:17.2267163+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c3f6ea3c183e729aa41ca0cacef90800","SpanId":"698b01f8b8531c06","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000085","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:17.2280613+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"c3f6ea3c183e729aa41ca0cacef90800","SpanId":"698b01f8b8531c06","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000085","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:17.2283467+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"c3f6ea3c183e729aa41ca0cacef90800","SpanId":"698b01f8b8531c06","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000085","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:17.2285338+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"c3f6ea3c183e729aa41ca0cacef90800","SpanId":"698b01f8b8531c06","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000085","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:17.2290259+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"c3f6ea3c183e729aa41ca0cacef90800","SpanId":"698b01f8b8531c06","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000085","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:17.2304897+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"c3f6ea3c183e729aa41ca0cacef90800","SpanId":"698b01f8b8531c06","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":10.791,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000085","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:17.2323498+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"c3f6ea3c183e729aa41ca0cacef90800","SpanId":"698b01f8b8531c06","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000085","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:17.2327731+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"c3f6ea3c183e729aa41ca0cacef90800","SpanId":"698b01f8b8531c06","Properties":{"ElapsedMilliseconds":18.0045,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000085","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:20.2182157+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"f7fc7c1c2e83b73c92e559b95413ab8b","SpanId":"8add26f1c5e7e1af","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000086","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:20.2186609+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"f7fc7c1c2e83b73c92e559b95413ab8b","SpanId":"8add26f1c5e7e1af","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000086","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:20.2189226+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"f7fc7c1c2e83b73c92e559b95413ab8b","SpanId":"8add26f1c5e7e1af","Properties":{"ElapsedMilliseconds":0.7041,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000086","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:20.2350563+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"17ff4c89eba58a511958e7fd121e907c","SpanId":"6c7c5c9eecc6fc45","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000087","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:20.2358284+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"17ff4c89eba58a511958e7fd121e907c","SpanId":"6c7c5c9eecc6fc45","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000087","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:20.2375468+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"17ff4c89eba58a511958e7fd121e907c","SpanId":"6c7c5c9eecc6fc45","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000087","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:20.2380086+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"17ff4c89eba58a511958e7fd121e907c","SpanId":"6c7c5c9eecc6fc45","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000087","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:20.2382411+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"17ff4c89eba58a511958e7fd121e907c","SpanId":"6c7c5c9eecc6fc45","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000087","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:20.2386633+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"17ff4c89eba58a511958e7fd121e907c","SpanId":"6c7c5c9eecc6fc45","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000087","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:20.2388032+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"17ff4c89eba58a511958e7fd121e907c","SpanId":"6c7c5c9eecc6fc45","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000087","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:20.2389998+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"17ff4c89eba58a511958e7fd121e907c","SpanId":"6c7c5c9eecc6fc45","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000087","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:20.2402233+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"17ff4c89eba58a511958e7fd121e907c","SpanId":"6c7c5c9eecc6fc45","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000087","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:20.2408125+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"17ff4c89eba58a511958e7fd121e907c","SpanId":"6c7c5c9eecc6fc45","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000087","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:20.2410687+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"17ff4c89eba58a511958e7fd121e907c","SpanId":"6c7c5c9eecc6fc45","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000087","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:20.2426824+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"17ff4c89eba58a511958e7fd121e907c","SpanId":"6c7c5c9eecc6fc45","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000087","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:20.2442482+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"17ff4c89eba58a511958e7fd121e907c","SpanId":"6c7c5c9eecc6fc45","Properties":{"elapsed":"1","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000087","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:20.2460374+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"17ff4c89eba58a511958e7fd121e907c","SpanId":"6c7c5c9eecc6fc45","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000087","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:20.2464539+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"17ff4c89eba58a511958e7fd121e907c","SpanId":"6c7c5c9eecc6fc45","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000087","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:20.2466330+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"17ff4c89eba58a511958e7fd121e907c","SpanId":"6c7c5c9eecc6fc45","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000087","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:20.2469457+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"17ff4c89eba58a511958e7fd121e907c","SpanId":"6c7c5c9eecc6fc45","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000087","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:20.2472305+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"17ff4c89eba58a511958e7fd121e907c","SpanId":"6c7c5c9eecc6fc45","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000087","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:20.2475619+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"17ff4c89eba58a511958e7fd121e907c","SpanId":"6c7c5c9eecc6fc45","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":9.0506,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000087","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:20.2478143+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"17ff4c89eba58a511958e7fd121e907c","SpanId":"6c7c5c9eecc6fc45","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000087","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:20.2480750+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"17ff4c89eba58a511958e7fd121e907c","SpanId":"6c7c5c9eecc6fc45","Properties":{"ElapsedMilliseconds":13.0264,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000087","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:23.2173781+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"3a65b5577c641cfb0ddf0bd0bc569fdb","SpanId":"be588fdad87e86f5","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000088","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:23.2182758+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"3a65b5577c641cfb0ddf0bd0bc569fdb","SpanId":"be588fdad87e86f5","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000088","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:23.2206982+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3a65b5577c641cfb0ddf0bd0bc569fdb","SpanId":"be588fdad87e86f5","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000088","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:23.2212215+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"3a65b5577c641cfb0ddf0bd0bc569fdb","SpanId":"be588fdad87e86f5","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000088","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:23.2215821+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"3a65b5577c641cfb0ddf0bd0bc569fdb","SpanId":"be588fdad87e86f5","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000088","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:23.2220279+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"3a65b5577c641cfb0ddf0bd0bc569fdb","SpanId":"be588fdad87e86f5","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000088","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:23.2223767+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"3a65b5577c641cfb0ddf0bd0bc569fdb","SpanId":"be588fdad87e86f5","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000088","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:23.2226263+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"3a65b5577c641cfb0ddf0bd0bc569fdb","SpanId":"be588fdad87e86f5","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000088","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:23.2237495+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3a65b5577c641cfb0ddf0bd0bc569fdb","SpanId":"be588fdad87e86f5","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000088","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:23.2242063+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"3a65b5577c641cfb0ddf0bd0bc569fdb","SpanId":"be588fdad87e86f5","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000088","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:23.2243981+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"3a65b5577c641cfb0ddf0bd0bc569fdb","SpanId":"be588fdad87e86f5","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000088","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:23.2256989+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3a65b5577c641cfb0ddf0bd0bc569fdb","SpanId":"be588fdad87e86f5","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000088","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:23.2271292+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3a65b5577c641cfb0ddf0bd0bc569fdb","SpanId":"be588fdad87e86f5","Properties":{"elapsed":"1","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000088","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:23.2290721+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"3a65b5577c641cfb0ddf0bd0bc569fdb","SpanId":"be588fdad87e86f5","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000088","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:23.2294908+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"3a65b5577c641cfb0ddf0bd0bc569fdb","SpanId":"be588fdad87e86f5","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000088","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:23.2297189+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"3a65b5577c641cfb0ddf0bd0bc569fdb","SpanId":"be588fdad87e86f5","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000088","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:23.2299578+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"3a65b5577c641cfb0ddf0bd0bc569fdb","SpanId":"be588fdad87e86f5","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000088","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:23.2302519+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"3a65b5577c641cfb0ddf0bd0bc569fdb","SpanId":"be588fdad87e86f5","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000088","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:23.2305287+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"3a65b5577c641cfb0ddf0bd0bc569fdb","SpanId":"be588fdad87e86f5","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":8.6877,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000088","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:23.2307786+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"3a65b5577c641cfb0ddf0bd0bc569fdb","SpanId":"be588fdad87e86f5","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000088","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:23.2311450+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"3a65b5577c641cfb0ddf0bd0bc569fdb","SpanId":"be588fdad87e86f5","Properties":{"ElapsedMilliseconds":13.7788,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000088","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:26.2037595+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"10a8e7fa5ff497094d890a70407ab4bc","SpanId":"210d6a9adba18c49","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000089","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:26.2041891+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"10a8e7fa5ff497094d890a70407ab4bc","SpanId":"210d6a9adba18c49","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000089","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:26.2044501+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"10a8e7fa5ff497094d890a70407ab4bc","SpanId":"210d6a9adba18c49","Properties":{"ElapsedMilliseconds":0.6945,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000089","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:26.2067981+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"bc90399d5f97e798c387fc2caa09402e","SpanId":"aa7b6b42d5b0c002","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000008A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:26.2071010+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"bc90399d5f97e798c387fc2caa09402e","SpanId":"aa7b6b42d5b0c002","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000008A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:26.2081194+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"bc90399d5f97e798c387fc2caa09402e","SpanId":"aa7b6b42d5b0c002","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:0000008A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:26.2084742+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"bc90399d5f97e798c387fc2caa09402e","SpanId":"aa7b6b42d5b0c002","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000008A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:26.2087605+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"bc90399d5f97e798c387fc2caa09402e","SpanId":"aa7b6b42d5b0c002","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:26.2090539+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"bc90399d5f97e798c387fc2caa09402e","SpanId":"aa7b6b42d5b0c002","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:26.2091722+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"bc90399d5f97e798c387fc2caa09402e","SpanId":"aa7b6b42d5b0c002","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:26.2092845+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"bc90399d5f97e798c387fc2caa09402e","SpanId":"aa7b6b42d5b0c002","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:26.2100546+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"bc90399d5f97e798c387fc2caa09402e","SpanId":"aa7b6b42d5b0c002","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:26.2104597+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"bc90399d5f97e798c387fc2caa09402e","SpanId":"aa7b6b42d5b0c002","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:26.2106426+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"bc90399d5f97e798c387fc2caa09402e","SpanId":"aa7b6b42d5b0c002","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:26.2115648+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"bc90399d5f97e798c387fc2caa09402e","SpanId":"aa7b6b42d5b0c002","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:26.2124416+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"bc90399d5f97e798c387fc2caa09402e","SpanId":"aa7b6b42d5b0c002","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:26.2136335+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"bc90399d5f97e798c387fc2caa09402e","SpanId":"aa7b6b42d5b0c002","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:26.2139810+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"bc90399d5f97e798c387fc2caa09402e","SpanId":"aa7b6b42d5b0c002","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:26.2140964+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"bc90399d5f97e798c387fc2caa09402e","SpanId":"aa7b6b42d5b0c002","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:26.2142147+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"bc90399d5f97e798c387fc2caa09402e","SpanId":"aa7b6b42d5b0c002","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:26.2143907+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"bc90399d5f97e798c387fc2caa09402e","SpanId":"aa7b6b42d5b0c002","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:26.2145617+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"bc90399d5f97e798c387fc2caa09402e","SpanId":"aa7b6b42d5b0c002","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.6152,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:0000008A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:26.2147598+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"bc90399d5f97e798c387fc2caa09402e","SpanId":"aa7b6b42d5b0c002","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000008A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:26.2149320+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"bc90399d5f97e798c387fc2caa09402e","SpanId":"aa7b6b42d5b0c002","Properties":{"ElapsedMilliseconds":8.1373,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000008A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:29.2152072+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"dd2463ea7b5fc16ffc564128a3cbf9ee","SpanId":"30b1198dad8f07de","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000008B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:29.2156336+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"dd2463ea7b5fc16ffc564128a3cbf9ee","SpanId":"30b1198dad8f07de","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000008B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:29.2170573+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"dd2463ea7b5fc16ffc564128a3cbf9ee","SpanId":"30b1198dad8f07de","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:0000008B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:29.2175178+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"dd2463ea7b5fc16ffc564128a3cbf9ee","SpanId":"30b1198dad8f07de","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000008B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:29.2177513+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"dd2463ea7b5fc16ffc564128a3cbf9ee","SpanId":"30b1198dad8f07de","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:29.2181910+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"dd2463ea7b5fc16ffc564128a3cbf9ee","SpanId":"30b1198dad8f07de","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:29.2183604+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"dd2463ea7b5fc16ffc564128a3cbf9ee","SpanId":"30b1198dad8f07de","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:29.2185074+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"dd2463ea7b5fc16ffc564128a3cbf9ee","SpanId":"30b1198dad8f07de","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:29.2194361+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"dd2463ea7b5fc16ffc564128a3cbf9ee","SpanId":"30b1198dad8f07de","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:29.2198625+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"dd2463ea7b5fc16ffc564128a3cbf9ee","SpanId":"30b1198dad8f07de","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:29.2200994+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"dd2463ea7b5fc16ffc564128a3cbf9ee","SpanId":"30b1198dad8f07de","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:29.2212253+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"dd2463ea7b5fc16ffc564128a3cbf9ee","SpanId":"30b1198dad8f07de","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:29.2224280+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"dd2463ea7b5fc16ffc564128a3cbf9ee","SpanId":"30b1198dad8f07de","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:29.2240870+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"dd2463ea7b5fc16ffc564128a3cbf9ee","SpanId":"30b1198dad8f07de","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:29.2245826+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"dd2463ea7b5fc16ffc564128a3cbf9ee","SpanId":"30b1198dad8f07de","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:29.2248077+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"dd2463ea7b5fc16ffc564128a3cbf9ee","SpanId":"30b1198dad8f07de","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:29.2250091+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"dd2463ea7b5fc16ffc564128a3cbf9ee","SpanId":"30b1198dad8f07de","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:29.2252555+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"dd2463ea7b5fc16ffc564128a3cbf9ee","SpanId":"30b1198dad8f07de","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:29.2255164+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"dd2463ea7b5fc16ffc564128a3cbf9ee","SpanId":"30b1198dad8f07de","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":7.5388,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:0000008B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:29.2259186+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"dd2463ea7b5fc16ffc564128a3cbf9ee","SpanId":"30b1198dad8f07de","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000008B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:29.2261590+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"dd2463ea7b5fc16ffc564128a3cbf9ee","SpanId":"30b1198dad8f07de","Properties":{"ElapsedMilliseconds":10.9532,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000008B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:32.2009989+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"5bb565e802c80d3b5b90e26affdf6caf","SpanId":"92cf4da349eda324","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000008C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:32.2013923+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"5bb565e802c80d3b5b90e26affdf6caf","SpanId":"92cf4da349eda324","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000008C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:32.2016277+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"5bb565e802c80d3b5b90e26affdf6caf","SpanId":"92cf4da349eda324","Properties":{"ElapsedMilliseconds":0.6303,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000008C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:32.2048363+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"b736d3e2d97db03c1e1e8db20a522863","SpanId":"5c78e0b7a6b0edb3","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000008D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:32.2052084+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"b736d3e2d97db03c1e1e8db20a522863","SpanId":"5c78e0b7a6b0edb3","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000008D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:32.2067160+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"b736d3e2d97db03c1e1e8db20a522863","SpanId":"5c78e0b7a6b0edb3","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:0000008D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:32.2070902+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"b736d3e2d97db03c1e1e8db20a522863","SpanId":"5c78e0b7a6b0edb3","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000008D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:32.2072855+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"b736d3e2d97db03c1e1e8db20a522863","SpanId":"5c78e0b7a6b0edb3","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:32.2076239+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"b736d3e2d97db03c1e1e8db20a522863","SpanId":"5c78e0b7a6b0edb3","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:32.2077538+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"b736d3e2d97db03c1e1e8db20a522863","SpanId":"5c78e0b7a6b0edb3","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:32.2079285+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"b736d3e2d97db03c1e1e8db20a522863","SpanId":"5c78e0b7a6b0edb3","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:32.2087422+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"b736d3e2d97db03c1e1e8db20a522863","SpanId":"5c78e0b7a6b0edb3","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:32.2090937+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"b736d3e2d97db03c1e1e8db20a522863","SpanId":"5c78e0b7a6b0edb3","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:32.2092166+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"b736d3e2d97db03c1e1e8db20a522863","SpanId":"5c78e0b7a6b0edb3","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:32.2101784+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"b736d3e2d97db03c1e1e8db20a522863","SpanId":"5c78e0b7a6b0edb3","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:32.2112839+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"b736d3e2d97db03c1e1e8db20a522863","SpanId":"5c78e0b7a6b0edb3","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:32.2126676+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"b736d3e2d97db03c1e1e8db20a522863","SpanId":"5c78e0b7a6b0edb3","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:32.2130230+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"b736d3e2d97db03c1e1e8db20a522863","SpanId":"5c78e0b7a6b0edb3","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:32.2131518+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"b736d3e2d97db03c1e1e8db20a522863","SpanId":"5c78e0b7a6b0edb3","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:32.2133335+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"b736d3e2d97db03c1e1e8db20a522863","SpanId":"5c78e0b7a6b0edb3","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:32.2135529+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"b736d3e2d97db03c1e1e8db20a522863","SpanId":"5c78e0b7a6b0edb3","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:32.2137503+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"b736d3e2d97db03c1e1e8db20a522863","SpanId":"5c78e0b7a6b0edb3","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.2558,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:0000008D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:32.2139411+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"b736d3e2d97db03c1e1e8db20a522863","SpanId":"5c78e0b7a6b0edb3","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000008D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:32.2141257+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"b736d3e2d97db03c1e1e8db20a522863","SpanId":"5c78e0b7a6b0edb3","Properties":{"ElapsedMilliseconds":9.2895,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000008D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:35.2019147+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"b9240e0edaad6ea1511f23238cb91df0","SpanId":"7c70957bf3fd74b1","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000008E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:35.2024569+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"b9240e0edaad6ea1511f23238cb91df0","SpanId":"7c70957bf3fd74b1","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000008E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:35.2036342+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"b9240e0edaad6ea1511f23238cb91df0","SpanId":"7c70957bf3fd74b1","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:0000008E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:35.2040062+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"b9240e0edaad6ea1511f23238cb91df0","SpanId":"7c70957bf3fd74b1","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000008E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:35.2041961+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"b9240e0edaad6ea1511f23238cb91df0","SpanId":"7c70957bf3fd74b1","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:35.2046093+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"b9240e0edaad6ea1511f23238cb91df0","SpanId":"7c70957bf3fd74b1","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:35.2048529+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"b9240e0edaad6ea1511f23238cb91df0","SpanId":"7c70957bf3fd74b1","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:35.2050762+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"b9240e0edaad6ea1511f23238cb91df0","SpanId":"7c70957bf3fd74b1","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:35.2059430+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"b9240e0edaad6ea1511f23238cb91df0","SpanId":"7c70957bf3fd74b1","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:35.2062896+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"b9240e0edaad6ea1511f23238cb91df0","SpanId":"7c70957bf3fd74b1","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:35.2064527+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"b9240e0edaad6ea1511f23238cb91df0","SpanId":"7c70957bf3fd74b1","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:35.2074247+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"b9240e0edaad6ea1511f23238cb91df0","SpanId":"7c70957bf3fd74b1","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:35.2084292+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"b9240e0edaad6ea1511f23238cb91df0","SpanId":"7c70957bf3fd74b1","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:35.2096816+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"b9240e0edaad6ea1511f23238cb91df0","SpanId":"7c70957bf3fd74b1","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:35.2099974+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"b9240e0edaad6ea1511f23238cb91df0","SpanId":"7c70957bf3fd74b1","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:35.2101778+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"b9240e0edaad6ea1511f23238cb91df0","SpanId":"7c70957bf3fd74b1","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:35.2103041+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"b9240e0edaad6ea1511f23238cb91df0","SpanId":"7c70957bf3fd74b1","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:35.2105284+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"b9240e0edaad6ea1511f23238cb91df0","SpanId":"7c70957bf3fd74b1","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000008E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:35.2107153+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"b9240e0edaad6ea1511f23238cb91df0","SpanId":"7c70957bf3fd74b1","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.2716,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:0000008E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:35.2108806+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"b9240e0edaad6ea1511f23238cb91df0","SpanId":"7c70957bf3fd74b1","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000008E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:35.2110707+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"b9240e0edaad6ea1511f23238cb91df0","SpanId":"7c70957bf3fd74b1","Properties":{"ElapsedMilliseconds":9.1627,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000008E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:38.2044575+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"682747e49904c86962864da20fc96738","SpanId":"c64d3b9be6359ae9","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000008F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:38.2048598+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"682747e49904c86962864da20fc96738","SpanId":"c64d3b9be6359ae9","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000008F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:38.2050860+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"682747e49904c86962864da20fc96738","SpanId":"c64d3b9be6359ae9","Properties":{"ElapsedMilliseconds":0.632,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000008F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:38.2074328+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"9002a6b5efc77a6818e4ef0bde3ad5ef","SpanId":"ef12fe03306905ef","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000090","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:38.2077245+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"9002a6b5efc77a6818e4ef0bde3ad5ef","SpanId":"ef12fe03306905ef","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000090","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:38.2090125+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"9002a6b5efc77a6818e4ef0bde3ad5ef","SpanId":"ef12fe03306905ef","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000090","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:38.2094645+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"9002a6b5efc77a6818e4ef0bde3ad5ef","SpanId":"ef12fe03306905ef","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000090","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:38.2097536+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"9002a6b5efc77a6818e4ef0bde3ad5ef","SpanId":"ef12fe03306905ef","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000090","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:38.2101447+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"9002a6b5efc77a6818e4ef0bde3ad5ef","SpanId":"ef12fe03306905ef","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000090","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:38.2103019+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"9002a6b5efc77a6818e4ef0bde3ad5ef","SpanId":"ef12fe03306905ef","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000090","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:38.2104848+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"9002a6b5efc77a6818e4ef0bde3ad5ef","SpanId":"ef12fe03306905ef","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000090","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:38.2113033+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"9002a6b5efc77a6818e4ef0bde3ad5ef","SpanId":"ef12fe03306905ef","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000090","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:38.2117237+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"9002a6b5efc77a6818e4ef0bde3ad5ef","SpanId":"ef12fe03306905ef","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000090","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:38.2119424+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"9002a6b5efc77a6818e4ef0bde3ad5ef","SpanId":"ef12fe03306905ef","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000090","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:38.2130241+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"9002a6b5efc77a6818e4ef0bde3ad5ef","SpanId":"ef12fe03306905ef","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000090","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:38.2141255+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"9002a6b5efc77a6818e4ef0bde3ad5ef","SpanId":"ef12fe03306905ef","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000090","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:38.2155675+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"9002a6b5efc77a6818e4ef0bde3ad5ef","SpanId":"ef12fe03306905ef","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000090","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:38.2159506+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"9002a6b5efc77a6818e4ef0bde3ad5ef","SpanId":"ef12fe03306905ef","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000090","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:38.2160827+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"9002a6b5efc77a6818e4ef0bde3ad5ef","SpanId":"ef12fe03306905ef","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000090","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:38.2162052+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"9002a6b5efc77a6818e4ef0bde3ad5ef","SpanId":"ef12fe03306905ef","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000090","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:38.2164260+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"9002a6b5efc77a6818e4ef0bde3ad5ef","SpanId":"ef12fe03306905ef","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000090","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:38.2166798+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"9002a6b5efc77a6818e4ef0bde3ad5ef","SpanId":"ef12fe03306905ef","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.6872,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000090","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:38.2168639+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"9002a6b5efc77a6818e4ef0bde3ad5ef","SpanId":"ef12fe03306905ef","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000090","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:38.2170734+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"9002a6b5efc77a6818e4ef0bde3ad5ef","SpanId":"ef12fe03306905ef","Properties":{"ElapsedMilliseconds":9.6462,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000090","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:41.2050898+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"ecd66754575128fd36f360393804bfd2","SpanId":"97f454f92cb582ca","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000091","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:41.2055029+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"ecd66754575128fd36f360393804bfd2","SpanId":"97f454f92cb582ca","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000091","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:41.2072342+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"ecd66754575128fd36f360393804bfd2","SpanId":"97f454f92cb582ca","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000091","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:41.2076783+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"ecd66754575128fd36f360393804bfd2","SpanId":"97f454f92cb582ca","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000091","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:41.2079943+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"ecd66754575128fd36f360393804bfd2","SpanId":"97f454f92cb582ca","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000091","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:41.2084042+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"ecd66754575128fd36f360393804bfd2","SpanId":"97f454f92cb582ca","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000091","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:41.2086332+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"ecd66754575128fd36f360393804bfd2","SpanId":"97f454f92cb582ca","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000091","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:41.2087629+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"ecd66754575128fd36f360393804bfd2","SpanId":"97f454f92cb582ca","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000091","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:41.2096566+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"ecd66754575128fd36f360393804bfd2","SpanId":"97f454f92cb582ca","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000091","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:41.2101170+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"ecd66754575128fd36f360393804bfd2","SpanId":"97f454f92cb582ca","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000091","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:41.2102715+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"ecd66754575128fd36f360393804bfd2","SpanId":"97f454f92cb582ca","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000091","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:41.2113546+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"ecd66754575128fd36f360393804bfd2","SpanId":"97f454f92cb582ca","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000091","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:41.2124227+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"ecd66754575128fd36f360393804bfd2","SpanId":"97f454f92cb582ca","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000091","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:41.2138508+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"ecd66754575128fd36f360393804bfd2","SpanId":"97f454f92cb582ca","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000091","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:41.2142795+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"ecd66754575128fd36f360393804bfd2","SpanId":"97f454f92cb582ca","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000091","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:41.2144353+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"ecd66754575128fd36f360393804bfd2","SpanId":"97f454f92cb582ca","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000091","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:41.2145653+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"ecd66754575128fd36f360393804bfd2","SpanId":"97f454f92cb582ca","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000091","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:41.2147862+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"ecd66754575128fd36f360393804bfd2","SpanId":"97f454f92cb582ca","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000091","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:41.2150719+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"ecd66754575128fd36f360393804bfd2","SpanId":"97f454f92cb582ca","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.8447,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000091","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:41.2152525+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"ecd66754575128fd36f360393804bfd2","SpanId":"97f454f92cb582ca","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000091","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:41.2154572+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"ecd66754575128fd36f360393804bfd2","SpanId":"97f454f92cb582ca","Properties":{"ElapsedMilliseconds":10.3746,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000091","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:44.2032278+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"5aa727c713b8e1c6b098ed04319e1687","SpanId":"917c6ea10a5f6ced","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000092","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:44.2036131+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"5aa727c713b8e1c6b098ed04319e1687","SpanId":"917c6ea10a5f6ced","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000092","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:44.2038662+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"5aa727c713b8e1c6b098ed04319e1687","SpanId":"917c6ea10a5f6ced","Properties":{"ElapsedMilliseconds":0.6382,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000092","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:44.2072994+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"9c38e5303e68abad63c78be3dd87f52c","SpanId":"c6a0c6c2ff6c74e1","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000093","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:44.2076914+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"9c38e5303e68abad63c78be3dd87f52c","SpanId":"c6a0c6c2ff6c74e1","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000093","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:44.2088340+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"9c38e5303e68abad63c78be3dd87f52c","SpanId":"c6a0c6c2ff6c74e1","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000093","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:44.2092525+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"9c38e5303e68abad63c78be3dd87f52c","SpanId":"c6a0c6c2ff6c74e1","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000093","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:44.2095486+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"9c38e5303e68abad63c78be3dd87f52c","SpanId":"c6a0c6c2ff6c74e1","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000093","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:44.2099395+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"9c38e5303e68abad63c78be3dd87f52c","SpanId":"c6a0c6c2ff6c74e1","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000093","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:44.2101336+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"9c38e5303e68abad63c78be3dd87f52c","SpanId":"c6a0c6c2ff6c74e1","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000093","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:44.2102880+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"9c38e5303e68abad63c78be3dd87f52c","SpanId":"c6a0c6c2ff6c74e1","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000093","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:44.2111302+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"9c38e5303e68abad63c78be3dd87f52c","SpanId":"c6a0c6c2ff6c74e1","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000093","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:44.2115015+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"9c38e5303e68abad63c78be3dd87f52c","SpanId":"c6a0c6c2ff6c74e1","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000093","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:44.2116630+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"9c38e5303e68abad63c78be3dd87f52c","SpanId":"c6a0c6c2ff6c74e1","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000093","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:44.2127536+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"9c38e5303e68abad63c78be3dd87f52c","SpanId":"c6a0c6c2ff6c74e1","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000093","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:44.2138579+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"9c38e5303e68abad63c78be3dd87f52c","SpanId":"c6a0c6c2ff6c74e1","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000093","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:44.2151252+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"9c38e5303e68abad63c78be3dd87f52c","SpanId":"c6a0c6c2ff6c74e1","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000093","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:44.2154432+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"9c38e5303e68abad63c78be3dd87f52c","SpanId":"c6a0c6c2ff6c74e1","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000093","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:44.2156196+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"9c38e5303e68abad63c78be3dd87f52c","SpanId":"c6a0c6c2ff6c74e1","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000093","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:44.2157419+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"9c38e5303e68abad63c78be3dd87f52c","SpanId":"c6a0c6c2ff6c74e1","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000093","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:44.2159380+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"9c38e5303e68abad63c78be3dd87f52c","SpanId":"c6a0c6c2ff6c74e1","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000093","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:44.2161297+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"9c38e5303e68abad63c78be3dd87f52c","SpanId":"c6a0c6c2ff6c74e1","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.3313,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000093","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:44.2163019+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"9c38e5303e68abad63c78be3dd87f52c","SpanId":"c6a0c6c2ff6c74e1","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000093","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:44.2165121+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"9c38e5303e68abad63c78be3dd87f52c","SpanId":"c6a0c6c2ff6c74e1","Properties":{"ElapsedMilliseconds":9.2028,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000093","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:47.2036189+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"5750987e17237171e66367a0f63483f6","SpanId":"6b43fb75ac7210d4","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000094","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:47.2040110+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"5750987e17237171e66367a0f63483f6","SpanId":"6b43fb75ac7210d4","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000094","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:47.2052869+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"5750987e17237171e66367a0f63483f6","SpanId":"6b43fb75ac7210d4","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000094","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:47.2056910+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"5750987e17237171e66367a0f63483f6","SpanId":"6b43fb75ac7210d4","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000094","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:47.2058733+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"5750987e17237171e66367a0f63483f6","SpanId":"6b43fb75ac7210d4","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000094","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:47.2062214+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"5750987e17237171e66367a0f63483f6","SpanId":"6b43fb75ac7210d4","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000094","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:47.2064446+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"5750987e17237171e66367a0f63483f6","SpanId":"6b43fb75ac7210d4","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000094","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:47.2065897+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"5750987e17237171e66367a0f63483f6","SpanId":"6b43fb75ac7210d4","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000094","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:47.2073675+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"5750987e17237171e66367a0f63483f6","SpanId":"6b43fb75ac7210d4","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000094","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:47.2076667+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"5750987e17237171e66367a0f63483f6","SpanId":"6b43fb75ac7210d4","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000094","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:47.2078096+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"5750987e17237171e66367a0f63483f6","SpanId":"6b43fb75ac7210d4","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000094","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:47.2087407+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"5750987e17237171e66367a0f63483f6","SpanId":"6b43fb75ac7210d4","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000094","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:47.2097343+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"5750987e17237171e66367a0f63483f6","SpanId":"6b43fb75ac7210d4","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000094","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:47.2109917+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"5750987e17237171e66367a0f63483f6","SpanId":"6b43fb75ac7210d4","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000094","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:47.2113048+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"5750987e17237171e66367a0f63483f6","SpanId":"6b43fb75ac7210d4","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000094","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:47.2115029+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"5750987e17237171e66367a0f63483f6","SpanId":"6b43fb75ac7210d4","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000094","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:47.2116384+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"5750987e17237171e66367a0f63483f6","SpanId":"6b43fb75ac7210d4","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000094","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:47.2118821+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"5750987e17237171e66367a0f63483f6","SpanId":"6b43fb75ac7210d4","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000094","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:47.2120675+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"5750987e17237171e66367a0f63483f6","SpanId":"6b43fb75ac7210d4","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.9812,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000094","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:47.2122313+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"5750987e17237171e66367a0f63483f6","SpanId":"6b43fb75ac7210d4","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000094","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:47.2124072+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"5750987e17237171e66367a0f63483f6","SpanId":"6b43fb75ac7210d4","Properties":{"ElapsedMilliseconds":8.7908,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000094","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:50.2021617+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"81d96b03f6235cca3c770d7aa3110dfe","SpanId":"d6866805f5d97fda","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000095","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:50.2025248+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"81d96b03f6235cca3c770d7aa3110dfe","SpanId":"d6866805f5d97fda","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000095","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:50.2027701+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"81d96b03f6235cca3c770d7aa3110dfe","SpanId":"d6866805f5d97fda","Properties":{"ElapsedMilliseconds":0.6087,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000095","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:50.2055197+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"0ce4d6b5dda35f634d2077fa68ad3387","SpanId":"c057246c735a531a","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000096","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:50.2058360+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"0ce4d6b5dda35f634d2077fa68ad3387","SpanId":"c057246c735a531a","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000096","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:50.2070209+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"0ce4d6b5dda35f634d2077fa68ad3387","SpanId":"c057246c735a531a","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000096","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:50.2073893+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"0ce4d6b5dda35f634d2077fa68ad3387","SpanId":"c057246c735a531a","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000096","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:50.2075673+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"0ce4d6b5dda35f634d2077fa68ad3387","SpanId":"c057246c735a531a","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000096","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:50.2078850+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"0ce4d6b5dda35f634d2077fa68ad3387","SpanId":"c057246c735a531a","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000096","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:50.2080230+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"0ce4d6b5dda35f634d2077fa68ad3387","SpanId":"c057246c735a531a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000096","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:50.2081646+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"0ce4d6b5dda35f634d2077fa68ad3387","SpanId":"c057246c735a531a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000096","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:50.2089105+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"0ce4d6b5dda35f634d2077fa68ad3387","SpanId":"c057246c735a531a","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000096","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:50.2092506+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"0ce4d6b5dda35f634d2077fa68ad3387","SpanId":"c057246c735a531a","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000096","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:50.2093989+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"0ce4d6b5dda35f634d2077fa68ad3387","SpanId":"c057246c735a531a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000096","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:50.2102815+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"0ce4d6b5dda35f634d2077fa68ad3387","SpanId":"c057246c735a531a","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000096","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:50.2112325+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"0ce4d6b5dda35f634d2077fa68ad3387","SpanId":"c057246c735a531a","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000096","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:50.2124526+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"0ce4d6b5dda35f634d2077fa68ad3387","SpanId":"c057246c735a531a","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000096","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:50.2127935+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"0ce4d6b5dda35f634d2077fa68ad3387","SpanId":"c057246c735a531a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000096","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:50.2129367+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"0ce4d6b5dda35f634d2077fa68ad3387","SpanId":"c057246c735a531a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000096","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:50.2130655+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"0ce4d6b5dda35f634d2077fa68ad3387","SpanId":"c057246c735a531a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000096","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:50.2132591+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"0ce4d6b5dda35f634d2077fa68ad3387","SpanId":"c057246c735a531a","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000096","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:50.2134942+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"0ce4d6b5dda35f634d2077fa68ad3387","SpanId":"c057246c735a531a","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.7306,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000096","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:50.2136596+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"0ce4d6b5dda35f634d2077fa68ad3387","SpanId":"c057246c735a531a","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000096","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:50.2138188+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"0ce4d6b5dda35f634d2077fa68ad3387","SpanId":"c057246c735a531a","Properties":{"ElapsedMilliseconds":8.3021,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000096","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:53.0555736+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"32fdf793991bc0725a4c5cabf75971e2","SpanId":"697e7582ab631846","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000097","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:53.0560018+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"32fdf793991bc0725a4c5cabf75971e2","SpanId":"697e7582ab631846","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000097","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:53.0572076+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"32fdf793991bc0725a4c5cabf75971e2","SpanId":"697e7582ab631846","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000097","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:53.0577018+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"32fdf793991bc0725a4c5cabf75971e2","SpanId":"697e7582ab631846","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000097","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:53.0578952+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"32fdf793991bc0725a4c5cabf75971e2","SpanId":"697e7582ab631846","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000097","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:53.0583319+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"32fdf793991bc0725a4c5cabf75971e2","SpanId":"697e7582ab631846","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000097","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:53.0584929+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"32fdf793991bc0725a4c5cabf75971e2","SpanId":"697e7582ab631846","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000097","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:53.0586580+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"32fdf793991bc0725a4c5cabf75971e2","SpanId":"697e7582ab631846","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000097","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:53.0595609+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"32fdf793991bc0725a4c5cabf75971e2","SpanId":"697e7582ab631846","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000097","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:53.0600250+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"32fdf793991bc0725a4c5cabf75971e2","SpanId":"697e7582ab631846","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000097","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:53.0601790+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"32fdf793991bc0725a4c5cabf75971e2","SpanId":"697e7582ab631846","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000097","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:53.0612003+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"32fdf793991bc0725a4c5cabf75971e2","SpanId":"697e7582ab631846","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000097","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:53.0624169+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"32fdf793991bc0725a4c5cabf75971e2","SpanId":"697e7582ab631846","Properties":{"elapsed":"1","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000097","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:53.0638198+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"32fdf793991bc0725a4c5cabf75971e2","SpanId":"697e7582ab631846","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000097","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:53.0642341+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"32fdf793991bc0725a4c5cabf75971e2","SpanId":"697e7582ab631846","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000097","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:53.0644409+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"32fdf793991bc0725a4c5cabf75971e2","SpanId":"697e7582ab631846","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000097","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:53.0646297+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"32fdf793991bc0725a4c5cabf75971e2","SpanId":"697e7582ab631846","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000097","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:53.0648729+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"32fdf793991bc0725a4c5cabf75971e2","SpanId":"697e7582ab631846","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000097","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:53.0651777+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"32fdf793991bc0725a4c5cabf75971e2","SpanId":"697e7582ab631846","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":7.0003,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000097","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:53.0653962+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"32fdf793991bc0725a4c5cabf75971e2","SpanId":"697e7582ab631846","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000097","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:53.0656200+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"32fdf793991bc0725a4c5cabf75971e2","SpanId":"697e7582ab631846","Properties":{"ElapsedMilliseconds":10.045,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000097","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:56.2037638+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"36b6b21fffc79783af2fd5b330c86c3d","SpanId":"52c30dab212e1c44","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000098","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:56.2040885+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"36b6b21fffc79783af2fd5b330c86c3d","SpanId":"52c30dab212e1c44","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000098","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:56.2043689+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"36b6b21fffc79783af2fd5b330c86c3d","SpanId":"52c30dab212e1c44","Properties":{"ElapsedMilliseconds":0.6273,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000098","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:56.2082310+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"a4a11ede0f30092224f14f347942e2ff","SpanId":"4e9f3dd590634433","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000099","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:56.2085765+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"a4a11ede0f30092224f14f347942e2ff","SpanId":"4e9f3dd590634433","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:00000099","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:56.2102650+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"a4a11ede0f30092224f14f347942e2ff","SpanId":"4e9f3dd590634433","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:00000099","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:56.2106989+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"a4a11ede0f30092224f14f347942e2ff","SpanId":"4e9f3dd590634433","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000099","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:56.2109031+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"a4a11ede0f30092224f14f347942e2ff","SpanId":"4e9f3dd590634433","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000099","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:56.2113958+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"a4a11ede0f30092224f14f347942e2ff","SpanId":"4e9f3dd590634433","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000099","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:56.2115919+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"a4a11ede0f30092224f14f347942e2ff","SpanId":"4e9f3dd590634433","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000099","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:56.2117431+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"a4a11ede0f30092224f14f347942e2ff","SpanId":"4e9f3dd590634433","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000099","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:56.2126919+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"a4a11ede0f30092224f14f347942e2ff","SpanId":"4e9f3dd590634433","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000099","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:56.2129964+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"a4a11ede0f30092224f14f347942e2ff","SpanId":"4e9f3dd590634433","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000099","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:56.2131234+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"a4a11ede0f30092224f14f347942e2ff","SpanId":"4e9f3dd590634433","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000099","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:56.2139590+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"a4a11ede0f30092224f14f347942e2ff","SpanId":"4e9f3dd590634433","Properties":{"elapsed":"0","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000099","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:56.2147919+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"a4a11ede0f30092224f14f347942e2ff","SpanId":"4e9f3dd590634433","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000099","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:56.2158771+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"a4a11ede0f30092224f14f347942e2ff","SpanId":"4e9f3dd590634433","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000099","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:56.2161216+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"a4a11ede0f30092224f14f347942e2ff","SpanId":"4e9f3dd590634433","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000099","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:56.2163549+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"a4a11ede0f30092224f14f347942e2ff","SpanId":"4e9f3dd590634433","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000099","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:56.2164907+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"a4a11ede0f30092224f14f347942e2ff","SpanId":"4e9f3dd590634433","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000099","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:56.2167314+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"a4a11ede0f30092224f14f347942e2ff","SpanId":"4e9f3dd590634433","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:00000099","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:56.2169445+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"a4a11ede0f30092224f14f347942e2ff","SpanId":"4e9f3dd590634433","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.8215,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:00000099","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:56.2171099+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"a4a11ede0f30092224f14f347942e2ff","SpanId":"4e9f3dd590634433","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:00000099","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:56.2173366+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"a4a11ede0f30092224f14f347942e2ff","SpanId":"4e9f3dd590634433","Properties":{"ElapsedMilliseconds":9.1062,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:00000099","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:59.2066123+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"68cd0af2e01e4f0f84df11b342d7e928","SpanId":"50561c394d9379a7","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000009A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:59.2070090+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"68cd0af2e01e4f0f84df11b342d7e928","SpanId":"50561c394d9379a7","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000009A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:59.2081685+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"68cd0af2e01e4f0f84df11b342d7e928","SpanId":"50561c394d9379a7","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:0000009A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:59.2085722+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"68cd0af2e01e4f0f84df11b342d7e928","SpanId":"50561c394d9379a7","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000009A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:59.2087215+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"68cd0af2e01e4f0f84df11b342d7e928","SpanId":"50561c394d9379a7","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:59.2090337+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"68cd0af2e01e4f0f84df11b342d7e928","SpanId":"50561c394d9379a7","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:59.2092197+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"68cd0af2e01e4f0f84df11b342d7e928","SpanId":"50561c394d9379a7","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:59.2093577+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"68cd0af2e01e4f0f84df11b342d7e928","SpanId":"50561c394d9379a7","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:59.2100647+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"68cd0af2e01e4f0f84df11b342d7e928","SpanId":"50561c394d9379a7","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:59.2103798+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"68cd0af2e01e4f0f84df11b342d7e928","SpanId":"50561c394d9379a7","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:59.2105233+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"68cd0af2e01e4f0f84df11b342d7e928","SpanId":"50561c394d9379a7","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:59.2114811+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"68cd0af2e01e4f0f84df11b342d7e928","SpanId":"50561c394d9379a7","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:59.2125123+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"68cd0af2e01e4f0f84df11b342d7e928","SpanId":"50561c394d9379a7","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:59.2137466+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"68cd0af2e01e4f0f84df11b342d7e928","SpanId":"50561c394d9379a7","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:59.2140724+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"68cd0af2e01e4f0f84df11b342d7e928","SpanId":"50561c394d9379a7","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:59.2142326+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"68cd0af2e01e4f0f84df11b342d7e928","SpanId":"50561c394d9379a7","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:59.2143762+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"68cd0af2e01e4f0f84df11b342d7e928","SpanId":"50561c394d9379a7","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:41:59.2145844+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"68cd0af2e01e4f0f84df11b342d7e928","SpanId":"50561c394d9379a7","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:59.2147737+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"68cd0af2e01e4f0f84df11b342d7e928","SpanId":"50561c394d9379a7","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.8554,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:0000009A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:59.2149265+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"68cd0af2e01e4f0f84df11b342d7e928","SpanId":"50561c394d9379a7","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000009A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:41:59.2151027+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"68cd0af2e01e4f0f84df11b342d7e928","SpanId":"50561c394d9379a7","Properties":{"ElapsedMilliseconds":8.4904,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000009A","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:02.2053487+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"1ef2fd9376925e479e20be6e6084c430","SpanId":"733abf5e14ae6435","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000009B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:02.2059595+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"1ef2fd9376925e479e20be6e6084c430","SpanId":"733abf5e14ae6435","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000009B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:02.2065693+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"1ef2fd9376925e479e20be6e6084c430","SpanId":"733abf5e14ae6435","Properties":{"ElapsedMilliseconds":1.2183,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000009B","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:02.2106101+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"14585a6fc665d38209a2fadc296ed969","SpanId":"c3160c4877365314","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000009C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:02.2109584+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"14585a6fc665d38209a2fadc296ed969","SpanId":"c3160c4877365314","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000009C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:02.2122880+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"14585a6fc665d38209a2fadc296ed969","SpanId":"c3160c4877365314","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:0000009C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:02.2127413+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"14585a6fc665d38209a2fadc296ed969","SpanId":"c3160c4877365314","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000009C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:02.2129145+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"14585a6fc665d38209a2fadc296ed969","SpanId":"c3160c4877365314","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:02.2132605+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"14585a6fc665d38209a2fadc296ed969","SpanId":"c3160c4877365314","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:02.2133999+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"14585a6fc665d38209a2fadc296ed969","SpanId":"c3160c4877365314","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:02.2135324+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"14585a6fc665d38209a2fadc296ed969","SpanId":"c3160c4877365314","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:02.2143618+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"14585a6fc665d38209a2fadc296ed969","SpanId":"c3160c4877365314","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:02.2147784+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"14585a6fc665d38209a2fadc296ed969","SpanId":"c3160c4877365314","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:02.2149802+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"14585a6fc665d38209a2fadc296ed969","SpanId":"c3160c4877365314","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:02.2160853+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"14585a6fc665d38209a2fadc296ed969","SpanId":"c3160c4877365314","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:02.2171023+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"14585a6fc665d38209a2fadc296ed969","SpanId":"c3160c4877365314","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:02.2185864+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"14585a6fc665d38209a2fadc296ed969","SpanId":"c3160c4877365314","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:02.2189026+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"14585a6fc665d38209a2fadc296ed969","SpanId":"c3160c4877365314","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:02.2190244+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"14585a6fc665d38209a2fadc296ed969","SpanId":"c3160c4877365314","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:02.2191414+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"14585a6fc665d38209a2fadc296ed969","SpanId":"c3160c4877365314","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:02.2193512+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"14585a6fc665d38209a2fadc296ed969","SpanId":"c3160c4877365314","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:02.2195939+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"14585a6fc665d38209a2fadc296ed969","SpanId":"c3160c4877365314","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.4668,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:0000009C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:02.2197460+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"14585a6fc665d38209a2fadc296ed969","SpanId":"c3160c4877365314","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000009C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:02.2199724+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"14585a6fc665d38209a2fadc296ed969","SpanId":"c3160c4877365314","Properties":{"ElapsedMilliseconds":9.3608,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000009C","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:05.2018021+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"1919e133f136232d5bb3548a0940a94a","SpanId":"bd8876d4202e16f9","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000009D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:05.2023646+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"1919e133f136232d5bb3548a0940a94a","SpanId":"bd8876d4202e16f9","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000009D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:05.2040468+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"1919e133f136232d5bb3548a0940a94a","SpanId":"bd8876d4202e16f9","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:0000009D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:05.2045284+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"1919e133f136232d5bb3548a0940a94a","SpanId":"bd8876d4202e16f9","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000009D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:05.2047456+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"1919e133f136232d5bb3548a0940a94a","SpanId":"bd8876d4202e16f9","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:05.2051128+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"1919e133f136232d5bb3548a0940a94a","SpanId":"bd8876d4202e16f9","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:05.2053259+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"1919e133f136232d5bb3548a0940a94a","SpanId":"bd8876d4202e16f9","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:05.2055497+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"1919e133f136232d5bb3548a0940a94a","SpanId":"bd8876d4202e16f9","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:05.2065466+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"1919e133f136232d5bb3548a0940a94a","SpanId":"bd8876d4202e16f9","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:05.2069540+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"1919e133f136232d5bb3548a0940a94a","SpanId":"bd8876d4202e16f9","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:05.2071333+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"1919e133f136232d5bb3548a0940a94a","SpanId":"bd8876d4202e16f9","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:05.2082179+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"1919e133f136232d5bb3548a0940a94a","SpanId":"bd8876d4202e16f9","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:05.2093057+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"1919e133f136232d5bb3548a0940a94a","SpanId":"bd8876d4202e16f9","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:05.2108850+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"1919e133f136232d5bb3548a0940a94a","SpanId":"bd8876d4202e16f9","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:05.2112324+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"1919e133f136232d5bb3548a0940a94a","SpanId":"bd8876d4202e16f9","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:05.2114167+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"1919e133f136232d5bb3548a0940a94a","SpanId":"bd8876d4202e16f9","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:05.2115639+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"1919e133f136232d5bb3548a0940a94a","SpanId":"bd8876d4202e16f9","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:05.2117882+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"1919e133f136232d5bb3548a0940a94a","SpanId":"bd8876d4202e16f9","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:05.2120276+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"1919e133f136232d5bb3548a0940a94a","SpanId":"bd8876d4202e16f9","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":7.0635,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:0000009D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:05.2121909+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"1919e133f136232d5bb3548a0940a94a","SpanId":"bd8876d4202e16f9","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000009D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:05.2124086+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"1919e133f136232d5bb3548a0940a94a","SpanId":"bd8876d4202e16f9","Properties":{"ElapsedMilliseconds":10.6206,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000009D","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:08.2020935+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"8d7c3e2bf244146f434744a5731a53cb","SpanId":"edc252b7c7905648","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000009E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:08.2025332+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"8d7c3e2bf244146f434744a5731a53cb","SpanId":"edc252b7c7905648","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000009E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:08.2027452+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"8d7c3e2bf244146f434744a5731a53cb","SpanId":"edc252b7c7905648","Properties":{"ElapsedMilliseconds":0.6537,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000009E","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:08.2063630+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"7cea242d104fc9e8c4bdf5ece7e7480e","SpanId":"7d6eaf15a9bd85a2","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000009F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:08.2066520+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"7cea242d104fc9e8c4bdf5ece7e7480e","SpanId":"7d6eaf15a9bd85a2","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:0000009F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:08.2076641+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"7cea242d104fc9e8c4bdf5ece7e7480e","SpanId":"7d6eaf15a9bd85a2","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:0000009F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:08.2079728+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"7cea242d104fc9e8c4bdf5ece7e7480e","SpanId":"7d6eaf15a9bd85a2","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000009F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:08.2081353+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"7cea242d104fc9e8c4bdf5ece7e7480e","SpanId":"7d6eaf15a9bd85a2","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:08.2084392+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"7cea242d104fc9e8c4bdf5ece7e7480e","SpanId":"7d6eaf15a9bd85a2","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:08.2086108+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"7cea242d104fc9e8c4bdf5ece7e7480e","SpanId":"7d6eaf15a9bd85a2","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:08.2087250+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"7cea242d104fc9e8c4bdf5ece7e7480e","SpanId":"7d6eaf15a9bd85a2","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:08.2094068+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"7cea242d104fc9e8c4bdf5ece7e7480e","SpanId":"7d6eaf15a9bd85a2","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:08.2097007+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"7cea242d104fc9e8c4bdf5ece7e7480e","SpanId":"7d6eaf15a9bd85a2","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:08.2098268+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"7cea242d104fc9e8c4bdf5ece7e7480e","SpanId":"7d6eaf15a9bd85a2","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:08.2107463+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"7cea242d104fc9e8c4bdf5ece7e7480e","SpanId":"7d6eaf15a9bd85a2","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:08.2116741+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"7cea242d104fc9e8c4bdf5ece7e7480e","SpanId":"7d6eaf15a9bd85a2","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:08.2128720+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"7cea242d104fc9e8c4bdf5ece7e7480e","SpanId":"7d6eaf15a9bd85a2","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:08.2132033+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"7cea242d104fc9e8c4bdf5ece7e7480e","SpanId":"7d6eaf15a9bd85a2","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:08.2133154+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"7cea242d104fc9e8c4bdf5ece7e7480e","SpanId":"7d6eaf15a9bd85a2","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:08.2134201+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"7cea242d104fc9e8c4bdf5ece7e7480e","SpanId":"7d6eaf15a9bd85a2","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:08.2137135+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"7cea242d104fc9e8c4bdf5ece7e7480e","SpanId":"7d6eaf15a9bd85a2","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:0000009F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:08.2139029+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"7cea242d104fc9e8c4bdf5ece7e7480e","SpanId":"7d6eaf15a9bd85a2","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.5672,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:0000009F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:08.2140556+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"7cea242d104fc9e8c4bdf5ece7e7480e","SpanId":"7d6eaf15a9bd85a2","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:0000009F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:08.2142249+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"7cea242d104fc9e8c4bdf5ece7e7480e","SpanId":"7d6eaf15a9bd85a2","Properties":{"ElapsedMilliseconds":7.8654,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:0000009F","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:11.2028968+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"0c7ec7d3ffd38a8c99aa56bb05cf719e","SpanId":"6cf4a3d90a102474","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000A0","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:11.2033703+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"0c7ec7d3ffd38a8c99aa56bb05cf719e","SpanId":"6cf4a3d90a102474","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:000000A0","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:11.2044402+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"0c7ec7d3ffd38a8c99aa56bb05cf719e","SpanId":"6cf4a3d90a102474","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:000000A0","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:11.2047331+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"0c7ec7d3ffd38a8c99aa56bb05cf719e","SpanId":"6cf4a3d90a102474","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:000000A0","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:11.2048878+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"0c7ec7d3ffd38a8c99aa56bb05cf719e","SpanId":"6cf4a3d90a102474","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A0","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:11.2052352+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"0c7ec7d3ffd38a8c99aa56bb05cf719e","SpanId":"6cf4a3d90a102474","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A0","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:11.2053677+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"0c7ec7d3ffd38a8c99aa56bb05cf719e","SpanId":"6cf4a3d90a102474","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A0","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:11.2054872+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"0c7ec7d3ffd38a8c99aa56bb05cf719e","SpanId":"6cf4a3d90a102474","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A0","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:11.2061734+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"0c7ec7d3ffd38a8c99aa56bb05cf719e","SpanId":"6cf4a3d90a102474","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A0","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:11.2064812+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"0c7ec7d3ffd38a8c99aa56bb05cf719e","SpanId":"6cf4a3d90a102474","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A0","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:11.2066086+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"0c7ec7d3ffd38a8c99aa56bb05cf719e","SpanId":"6cf4a3d90a102474","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A0","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:11.2074897+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"0c7ec7d3ffd38a8c99aa56bb05cf719e","SpanId":"6cf4a3d90a102474","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A0","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:11.2084329+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"0c7ec7d3ffd38a8c99aa56bb05cf719e","SpanId":"6cf4a3d90a102474","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A0","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:11.2096357+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"0c7ec7d3ffd38a8c99aa56bb05cf719e","SpanId":"6cf4a3d90a102474","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A0","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:11.2099631+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"0c7ec7d3ffd38a8c99aa56bb05cf719e","SpanId":"6cf4a3d90a102474","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A0","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:11.2100885+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"0c7ec7d3ffd38a8c99aa56bb05cf719e","SpanId":"6cf4a3d90a102474","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A0","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:11.2102017+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"0c7ec7d3ffd38a8c99aa56bb05cf719e","SpanId":"6cf4a3d90a102474","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A0","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:11.2103975+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"0c7ec7d3ffd38a8c99aa56bb05cf719e","SpanId":"6cf4a3d90a102474","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A0","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:11.2105858+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"0c7ec7d3ffd38a8c99aa56bb05cf719e","SpanId":"6cf4a3d90a102474","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.4683,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:000000A0","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:11.2107242+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"0c7ec7d3ffd38a8c99aa56bb05cf719e","SpanId":"6cf4a3d90a102474","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:000000A0","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:11.2108826+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"0c7ec7d3ffd38a8c99aa56bb05cf719e","SpanId":"6cf4a3d90a102474","Properties":{"ElapsedMilliseconds":7.9878,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000A0","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:14.2017900+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"5325077aa246e4aee43e9e57d5e65db5","SpanId":"07088bccc493c80b","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000A1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:14.2021625+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"5325077aa246e4aee43e9e57d5e65db5","SpanId":"07088bccc493c80b","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:000000A1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:14.2024949+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"5325077aa246e4aee43e9e57d5e65db5","SpanId":"07088bccc493c80b","Properties":{"ElapsedMilliseconds":0.6801,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000A1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:14.2061253+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"8638963b06bc73a5eb562cbc628af338","SpanId":"acb7bf667abb6c2a","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000A2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:14.2064715+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"8638963b06bc73a5eb562cbc628af338","SpanId":"acb7bf667abb6c2a","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:000000A2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:14.2076868+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"8638963b06bc73a5eb562cbc628af338","SpanId":"acb7bf667abb6c2a","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:000000A2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:14.2080832+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"8638963b06bc73a5eb562cbc628af338","SpanId":"acb7bf667abb6c2a","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:000000A2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:14.2082525+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"8638963b06bc73a5eb562cbc628af338","SpanId":"acb7bf667abb6c2a","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:14.2085754+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"8638963b06bc73a5eb562cbc628af338","SpanId":"acb7bf667abb6c2a","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:14.2087073+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"8638963b06bc73a5eb562cbc628af338","SpanId":"acb7bf667abb6c2a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:14.2088262+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"8638963b06bc73a5eb562cbc628af338","SpanId":"acb7bf667abb6c2a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:14.2095417+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"8638963b06bc73a5eb562cbc628af338","SpanId":"acb7bf667abb6c2a","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:14.2098842+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"8638963b06bc73a5eb562cbc628af338","SpanId":"acb7bf667abb6c2a","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:14.2100138+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"8638963b06bc73a5eb562cbc628af338","SpanId":"acb7bf667abb6c2a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:14.2109340+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"8638963b06bc73a5eb562cbc628af338","SpanId":"acb7bf667abb6c2a","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:14.2119128+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"8638963b06bc73a5eb562cbc628af338","SpanId":"acb7bf667abb6c2a","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:14.2132489+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"8638963b06bc73a5eb562cbc628af338","SpanId":"acb7bf667abb6c2a","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:14.2135646+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"8638963b06bc73a5eb562cbc628af338","SpanId":"acb7bf667abb6c2a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:14.2137002+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"8638963b06bc73a5eb562cbc628af338","SpanId":"acb7bf667abb6c2a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:14.2138388+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"8638963b06bc73a5eb562cbc628af338","SpanId":"acb7bf667abb6c2a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:14.2140487+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"8638963b06bc73a5eb562cbc628af338","SpanId":"acb7bf667abb6c2a","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:14.2143568+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"8638963b06bc73a5eb562cbc628af338","SpanId":"acb7bf667abb6c2a","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.9239,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:000000A2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:14.2145811+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"8638963b06bc73a5eb562cbc628af338","SpanId":"acb7bf667abb6c2a","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:000000A2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:14.2147717+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"8638963b06bc73a5eb562cbc628af338","SpanId":"acb7bf667abb6c2a","Properties":{"ElapsedMilliseconds":8.6481,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000A2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:17.2022845+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"783fa2abe7f2db9493e4e5d99f7c972f","SpanId":"ea880bafdc87259f","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000A3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:17.2026895+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"783fa2abe7f2db9493e4e5d99f7c972f","SpanId":"ea880bafdc87259f","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:000000A3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:17.2037268+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"783fa2abe7f2db9493e4e5d99f7c972f","SpanId":"ea880bafdc87259f","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:000000A3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:17.2040965+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"783fa2abe7f2db9493e4e5d99f7c972f","SpanId":"ea880bafdc87259f","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:000000A3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:17.2042508+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"783fa2abe7f2db9493e4e5d99f7c972f","SpanId":"ea880bafdc87259f","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:17.2045491+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"783fa2abe7f2db9493e4e5d99f7c972f","SpanId":"ea880bafdc87259f","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:17.2046532+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"783fa2abe7f2db9493e4e5d99f7c972f","SpanId":"ea880bafdc87259f","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:17.2047729+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"783fa2abe7f2db9493e4e5d99f7c972f","SpanId":"ea880bafdc87259f","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:17.2054478+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"783fa2abe7f2db9493e4e5d99f7c972f","SpanId":"ea880bafdc87259f","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:17.2057735+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"783fa2abe7f2db9493e4e5d99f7c972f","SpanId":"ea880bafdc87259f","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:17.2058895+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"783fa2abe7f2db9493e4e5d99f7c972f","SpanId":"ea880bafdc87259f","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:17.2067478+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"783fa2abe7f2db9493e4e5d99f7c972f","SpanId":"ea880bafdc87259f","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:17.2075918+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"783fa2abe7f2db9493e4e5d99f7c972f","SpanId":"ea880bafdc87259f","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:17.2088399+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"783fa2abe7f2db9493e4e5d99f7c972f","SpanId":"ea880bafdc87259f","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:17.2091368+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"783fa2abe7f2db9493e4e5d99f7c972f","SpanId":"ea880bafdc87259f","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:17.2092565+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"783fa2abe7f2db9493e4e5d99f7c972f","SpanId":"ea880bafdc87259f","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:17.2093892+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"783fa2abe7f2db9493e4e5d99f7c972f","SpanId":"ea880bafdc87259f","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:17.2096229+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"783fa2abe7f2db9493e4e5d99f7c972f","SpanId":"ea880bafdc87259f","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:17.2097978+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"783fa2abe7f2db9493e4e5d99f7c972f","SpanId":"ea880bafdc87259f","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.3541,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:000000A3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:17.2099472+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"783fa2abe7f2db9493e4e5d99f7c972f","SpanId":"ea880bafdc87259f","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:000000A3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:17.2101055+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"783fa2abe7f2db9493e4e5d99f7c972f","SpanId":"ea880bafdc87259f","Properties":{"ElapsedMilliseconds":7.8242,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000A3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:20.2039175+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"fd1863cf02539b8faa96ce9a52d0a944","SpanId":"98d28d44ec529d89","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000A4","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:20.2045285+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"fd1863cf02539b8faa96ce9a52d0a944","SpanId":"98d28d44ec529d89","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:000000A4","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:20.2054235+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"fd1863cf02539b8faa96ce9a52d0a944","SpanId":"98d28d44ec529d89","Properties":{"ElapsedMilliseconds":1.5054,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000A4","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:20.2098033+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"dbdfcc82c1c3cb949d2a5904efe0e0bf","SpanId":"cf0d5c83edd5e9bd","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000A5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:20.2102556+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"dbdfcc82c1c3cb949d2a5904efe0e0bf","SpanId":"cf0d5c83edd5e9bd","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:000000A5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:20.2118966+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"dbdfcc82c1c3cb949d2a5904efe0e0bf","SpanId":"cf0d5c83edd5e9bd","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:000000A5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:20.2124001+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"dbdfcc82c1c3cb949d2a5904efe0e0bf","SpanId":"cf0d5c83edd5e9bd","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:000000A5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:20.2126090+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"dbdfcc82c1c3cb949d2a5904efe0e0bf","SpanId":"cf0d5c83edd5e9bd","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:20.2130497+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"dbdfcc82c1c3cb949d2a5904efe0e0bf","SpanId":"cf0d5c83edd5e9bd","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:20.2132706+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"dbdfcc82c1c3cb949d2a5904efe0e0bf","SpanId":"cf0d5c83edd5e9bd","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:20.2134988+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"dbdfcc82c1c3cb949d2a5904efe0e0bf","SpanId":"cf0d5c83edd5e9bd","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:20.2146429+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"dbdfcc82c1c3cb949d2a5904efe0e0bf","SpanId":"cf0d5c83edd5e9bd","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:20.2151507+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"dbdfcc82c1c3cb949d2a5904efe0e0bf","SpanId":"cf0d5c83edd5e9bd","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:20.2153575+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"dbdfcc82c1c3cb949d2a5904efe0e0bf","SpanId":"cf0d5c83edd5e9bd","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:20.2169482+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"dbdfcc82c1c3cb949d2a5904efe0e0bf","SpanId":"cf0d5c83edd5e9bd","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:20.2182717+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"dbdfcc82c1c3cb949d2a5904efe0e0bf","SpanId":"cf0d5c83edd5e9bd","Properties":{"elapsed":"1","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:20.2196200+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"dbdfcc82c1c3cb949d2a5904efe0e0bf","SpanId":"cf0d5c83edd5e9bd","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:20.2199875+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"dbdfcc82c1c3cb949d2a5904efe0e0bf","SpanId":"cf0d5c83edd5e9bd","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:20.2201129+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"dbdfcc82c1c3cb949d2a5904efe0e0bf","SpanId":"cf0d5c83edd5e9bd","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:20.2202326+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"dbdfcc82c1c3cb949d2a5904efe0e0bf","SpanId":"cf0d5c83edd5e9bd","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:20.2204480+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"dbdfcc82c1c3cb949d2a5904efe0e0bf","SpanId":"cf0d5c83edd5e9bd","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:20.2206219+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"dbdfcc82c1c3cb949d2a5904efe0e0bf","SpanId":"cf0d5c83edd5e9bd","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":7.739,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:000000A5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:20.2207653+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"dbdfcc82c1c3cb949d2a5904efe0e0bf","SpanId":"cf0d5c83edd5e9bd","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:000000A5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:20.2209223+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"dbdfcc82c1c3cb949d2a5904efe0e0bf","SpanId":"cf0d5c83edd5e9bd","Properties":{"ElapsedMilliseconds":11.1266,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000A5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:23.2040774+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"5827955103f88a8077fd89bac9be3959","SpanId":"2d3cd2d57220e9c6","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000A6","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:23.2044318+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"5827955103f88a8077fd89bac9be3959","SpanId":"2d3cd2d57220e9c6","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:000000A6","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:23.2055989+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"5827955103f88a8077fd89bac9be3959","SpanId":"2d3cd2d57220e9c6","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:000000A6","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:23.2058974+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"5827955103f88a8077fd89bac9be3959","SpanId":"2d3cd2d57220e9c6","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:000000A6","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:23.2060787+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"5827955103f88a8077fd89bac9be3959","SpanId":"2d3cd2d57220e9c6","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A6","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:23.2064379+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"5827955103f88a8077fd89bac9be3959","SpanId":"2d3cd2d57220e9c6","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A6","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:23.2065567+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"5827955103f88a8077fd89bac9be3959","SpanId":"2d3cd2d57220e9c6","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A6","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:23.2066713+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"5827955103f88a8077fd89bac9be3959","SpanId":"2d3cd2d57220e9c6","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A6","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:23.2073876+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"5827955103f88a8077fd89bac9be3959","SpanId":"2d3cd2d57220e9c6","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A6","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:23.2076639+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"5827955103f88a8077fd89bac9be3959","SpanId":"2d3cd2d57220e9c6","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A6","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:23.2077864+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"5827955103f88a8077fd89bac9be3959","SpanId":"2d3cd2d57220e9c6","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A6","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:23.2087269+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"5827955103f88a8077fd89bac9be3959","SpanId":"2d3cd2d57220e9c6","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A6","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:23.2096132+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"5827955103f88a8077fd89bac9be3959","SpanId":"2d3cd2d57220e9c6","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A6","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:23.2107990+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"5827955103f88a8077fd89bac9be3959","SpanId":"2d3cd2d57220e9c6","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A6","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:23.2111068+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"5827955103f88a8077fd89bac9be3959","SpanId":"2d3cd2d57220e9c6","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A6","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:23.2112279+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"5827955103f88a8077fd89bac9be3959","SpanId":"2d3cd2d57220e9c6","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A6","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:23.2113522+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"5827955103f88a8077fd89bac9be3959","SpanId":"2d3cd2d57220e9c6","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A6","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:23.2115454+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"5827955103f88a8077fd89bac9be3959","SpanId":"2d3cd2d57220e9c6","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A6","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:23.2117189+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"5827955103f88a8077fd89bac9be3959","SpanId":"2d3cd2d57220e9c6","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.413,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:000000A6","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:23.2118621+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"5827955103f88a8077fd89bac9be3959","SpanId":"2d3cd2d57220e9c6","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:000000A6","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:23.2120646+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"5827955103f88a8077fd89bac9be3959","SpanId":"2d3cd2d57220e9c6","Properties":{"ElapsedMilliseconds":7.9903,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000A6","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:26.2021451+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"8f91fccbedf711fda2bc9c3936f62f58","SpanId":"2a3a5b71d946766d","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000A7","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:26.2025252+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"8f91fccbedf711fda2bc9c3936f62f58","SpanId":"2a3a5b71d946766d","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:000000A7","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:26.2027569+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"8f91fccbedf711fda2bc9c3936f62f58","SpanId":"2a3a5b71d946766d","Properties":{"ElapsedMilliseconds":0.6153,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000A7","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:26.2055436+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"16b17361da7352afd709bc990200fed7","SpanId":"6169358d6e861d6f","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000A8","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:26.2059312+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"16b17361da7352afd709bc990200fed7","SpanId":"6169358d6e861d6f","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:000000A8","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:26.2073740+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"16b17361da7352afd709bc990200fed7","SpanId":"6169358d6e861d6f","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:000000A8","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:26.2077486+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"16b17361da7352afd709bc990200fed7","SpanId":"6169358d6e861d6f","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:000000A8","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:26.2079211+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"16b17361da7352afd709bc990200fed7","SpanId":"6169358d6e861d6f","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A8","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:26.2082245+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"16b17361da7352afd709bc990200fed7","SpanId":"6169358d6e861d6f","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A8","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:26.2083614+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"16b17361da7352afd709bc990200fed7","SpanId":"6169358d6e861d6f","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A8","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:26.2085001+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"16b17361da7352afd709bc990200fed7","SpanId":"6169358d6e861d6f","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A8","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:26.2092660+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"16b17361da7352afd709bc990200fed7","SpanId":"6169358d6e861d6f","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A8","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:26.2096641+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"16b17361da7352afd709bc990200fed7","SpanId":"6169358d6e861d6f","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A8","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:26.2098270+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"16b17361da7352afd709bc990200fed7","SpanId":"6169358d6e861d6f","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A8","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:26.2111051+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"16b17361da7352afd709bc990200fed7","SpanId":"6169358d6e861d6f","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A8","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:26.2122702+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"16b17361da7352afd709bc990200fed7","SpanId":"6169358d6e861d6f","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A8","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:26.2136119+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"16b17361da7352afd709bc990200fed7","SpanId":"6169358d6e861d6f","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A8","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:26.2139191+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"16b17361da7352afd709bc990200fed7","SpanId":"6169358d6e861d6f","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A8","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:26.2140727+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"16b17361da7352afd709bc990200fed7","SpanId":"6169358d6e861d6f","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A8","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:26.2142039+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"16b17361da7352afd709bc990200fed7","SpanId":"6169358d6e861d6f","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A8","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:26.2144996+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"16b17361da7352afd709bc990200fed7","SpanId":"6169358d6e861d6f","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A8","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:26.2146947+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"16b17361da7352afd709bc990200fed7","SpanId":"6169358d6e861d6f","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.5927,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:000000A8","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:26.2148764+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"16b17361da7352afd709bc990200fed7","SpanId":"6169358d6e861d6f","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:000000A8","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:26.2150566+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"16b17361da7352afd709bc990200fed7","SpanId":"6169358d6e861d6f","Properties":{"ElapsedMilliseconds":9.5133,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000A8","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:29.2160033+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"c430a66c477b10db33dd3ec1bce71d4a","SpanId":"321e6ab2e872b33e","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000A9","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:29.2165449+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"c430a66c477b10db33dd3ec1bce71d4a","SpanId":"321e6ab2e872b33e","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:000000A9","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:29.2186011+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c430a66c477b10db33dd3ec1bce71d4a","SpanId":"321e6ab2e872b33e","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:000000A9","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:29.2190656+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"c430a66c477b10db33dd3ec1bce71d4a","SpanId":"321e6ab2e872b33e","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:000000A9","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:29.2192850+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"c430a66c477b10db33dd3ec1bce71d4a","SpanId":"321e6ab2e872b33e","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A9","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:29.2197054+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"c430a66c477b10db33dd3ec1bce71d4a","SpanId":"321e6ab2e872b33e","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A9","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:29.2198349+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"c430a66c477b10db33dd3ec1bce71d4a","SpanId":"321e6ab2e872b33e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A9","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:29.2199889+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"c430a66c477b10db33dd3ec1bce71d4a","SpanId":"321e6ab2e872b33e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A9","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:29.2209404+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c430a66c477b10db33dd3ec1bce71d4a","SpanId":"321e6ab2e872b33e","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A9","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:29.2213941+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"c430a66c477b10db33dd3ec1bce71d4a","SpanId":"321e6ab2e872b33e","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A9","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:29.2215876+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"c430a66c477b10db33dd3ec1bce71d4a","SpanId":"321e6ab2e872b33e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A9","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:29.2228838+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c430a66c477b10db33dd3ec1bce71d4a","SpanId":"321e6ab2e872b33e","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A9","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:29.2242818+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c430a66c477b10db33dd3ec1bce71d4a","SpanId":"321e6ab2e872b33e","Properties":{"elapsed":"1","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A9","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:29.2263592+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"c430a66c477b10db33dd3ec1bce71d4a","SpanId":"321e6ab2e872b33e","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A9","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:29.2267639+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"c430a66c477b10db33dd3ec1bce71d4a","SpanId":"321e6ab2e872b33e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A9","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:29.2269124+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"c430a66c477b10db33dd3ec1bce71d4a","SpanId":"321e6ab2e872b33e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A9","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:29.2270807+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"c430a66c477b10db33dd3ec1bce71d4a","SpanId":"321e6ab2e872b33e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A9","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:29.2274247+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"c430a66c477b10db33dd3ec1bce71d4a","SpanId":"321e6ab2e872b33e","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000A9","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:29.2276781+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"c430a66c477b10db33dd3ec1bce71d4a","SpanId":"321e6ab2e872b33e","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":8.1438,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:000000A9","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:29.2278968+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"c430a66c477b10db33dd3ec1bce71d4a","SpanId":"321e6ab2e872b33e","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:000000A9","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:29.2281176+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"c430a66c477b10db33dd3ec1bce71d4a","SpanId":"321e6ab2e872b33e","Properties":{"ElapsedMilliseconds":12.1162,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000A9","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:32.2057446+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"9f10611342982844927fd0aa550bf732","SpanId":"e70037c6f9843773","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000AA","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:32.2061109+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"9f10611342982844927fd0aa550bf732","SpanId":"e70037c6f9843773","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:000000AA","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:32.2064079+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"9f10611342982844927fd0aa550bf732","SpanId":"e70037c6f9843773","Properties":{"ElapsedMilliseconds":0.6619,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000AA","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:32.2089575+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"aa87b42e4fcc8adfd7b23888b5583fb3","SpanId":"154398b6d4aeb0e0","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000AB","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:32.2093219+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"aa87b42e4fcc8adfd7b23888b5583fb3","SpanId":"154398b6d4aeb0e0","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:000000AB","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:32.2105995+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"aa87b42e4fcc8adfd7b23888b5583fb3","SpanId":"154398b6d4aeb0e0","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:000000AB","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:32.2109474+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"aa87b42e4fcc8adfd7b23888b5583fb3","SpanId":"154398b6d4aeb0e0","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:000000AB","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:32.2111221+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"aa87b42e4fcc8adfd7b23888b5583fb3","SpanId":"154398b6d4aeb0e0","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AB","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:32.2115287+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"aa87b42e4fcc8adfd7b23888b5583fb3","SpanId":"154398b6d4aeb0e0","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AB","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:32.2116546+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"aa87b42e4fcc8adfd7b23888b5583fb3","SpanId":"154398b6d4aeb0e0","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AB","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:32.2117810+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"aa87b42e4fcc8adfd7b23888b5583fb3","SpanId":"154398b6d4aeb0e0","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AB","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:32.2125142+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"aa87b42e4fcc8adfd7b23888b5583fb3","SpanId":"154398b6d4aeb0e0","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AB","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:32.2128244+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"aa87b42e4fcc8adfd7b23888b5583fb3","SpanId":"154398b6d4aeb0e0","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AB","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:32.2129692+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"aa87b42e4fcc8adfd7b23888b5583fb3","SpanId":"154398b6d4aeb0e0","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AB","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:32.2139346+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"aa87b42e4fcc8adfd7b23888b5583fb3","SpanId":"154398b6d4aeb0e0","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AB","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:32.2148565+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"aa87b42e4fcc8adfd7b23888b5583fb3","SpanId":"154398b6d4aeb0e0","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AB","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:32.2187269+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"aa87b42e4fcc8adfd7b23888b5583fb3","SpanId":"154398b6d4aeb0e0","Properties":{"elapsed":"3","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AB","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:32.2191881+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"aa87b42e4fcc8adfd7b23888b5583fb3","SpanId":"154398b6d4aeb0e0","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AB","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:32.2194366+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"aa87b42e4fcc8adfd7b23888b5583fb3","SpanId":"154398b6d4aeb0e0","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AB","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:32.2195872+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"aa87b42e4fcc8adfd7b23888b5583fb3","SpanId":"154398b6d4aeb0e0","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AB","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:32.2198502+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"aa87b42e4fcc8adfd7b23888b5583fb3","SpanId":"154398b6d4aeb0e0","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AB","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:32.2200475+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"aa87b42e4fcc8adfd7b23888b5583fb3","SpanId":"154398b6d4aeb0e0","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":8.6521,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:000000AB","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:32.2202326+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"aa87b42e4fcc8adfd7b23888b5583fb3","SpanId":"154398b6d4aeb0e0","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:000000AB","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:32.2205184+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"aa87b42e4fcc8adfd7b23888b5583fb3","SpanId":"154398b6d4aeb0e0","Properties":{"ElapsedMilliseconds":11.5571,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000AB","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:35.2055732+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"648fe9c2c78ec0b0c8b2cab653986a4c","SpanId":"1bdadce106ff915f","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000AC","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:35.2060298+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"648fe9c2c78ec0b0c8b2cab653986a4c","SpanId":"1bdadce106ff915f","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:000000AC","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:35.2075026+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"648fe9c2c78ec0b0c8b2cab653986a4c","SpanId":"1bdadce106ff915f","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:000000AC","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:35.2078765+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"648fe9c2c78ec0b0c8b2cab653986a4c","SpanId":"1bdadce106ff915f","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:000000AC","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:35.2080511+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"648fe9c2c78ec0b0c8b2cab653986a4c","SpanId":"1bdadce106ff915f","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AC","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:35.2084228+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"648fe9c2c78ec0b0c8b2cab653986a4c","SpanId":"1bdadce106ff915f","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AC","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:35.2085446+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"648fe9c2c78ec0b0c8b2cab653986a4c","SpanId":"1bdadce106ff915f","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AC","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:35.2086540+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"648fe9c2c78ec0b0c8b2cab653986a4c","SpanId":"1bdadce106ff915f","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AC","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:35.2094091+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"648fe9c2c78ec0b0c8b2cab653986a4c","SpanId":"1bdadce106ff915f","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AC","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:35.2097137+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"648fe9c2c78ec0b0c8b2cab653986a4c","SpanId":"1bdadce106ff915f","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AC","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:35.2098398+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"648fe9c2c78ec0b0c8b2cab653986a4c","SpanId":"1bdadce106ff915f","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AC","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:35.2108249+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"648fe9c2c78ec0b0c8b2cab653986a4c","SpanId":"1bdadce106ff915f","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AC","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:35.2117920+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"648fe9c2c78ec0b0c8b2cab653986a4c","SpanId":"1bdadce106ff915f","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AC","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:35.2134644+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"648fe9c2c78ec0b0c8b2cab653986a4c","SpanId":"1bdadce106ff915f","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AC","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:35.2139125+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"648fe9c2c78ec0b0c8b2cab653986a4c","SpanId":"1bdadce106ff915f","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AC","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:35.2140686+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"648fe9c2c78ec0b0c8b2cab653986a4c","SpanId":"1bdadce106ff915f","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AC","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:35.2142629+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"648fe9c2c78ec0b0c8b2cab653986a4c","SpanId":"1bdadce106ff915f","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AC","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:35.2146040+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"648fe9c2c78ec0b0c8b2cab653986a4c","SpanId":"1bdadce106ff915f","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AC","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:35.2148313+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"648fe9c2c78ec0b0c8b2cab653986a4c","SpanId":"1bdadce106ff915f","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.5562,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:000000AC","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:35.2149805+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"648fe9c2c78ec0b0c8b2cab653986a4c","SpanId":"1bdadce106ff915f","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:000000AC","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:35.2152848+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"648fe9c2c78ec0b0c8b2cab653986a4c","SpanId":"1bdadce106ff915f","Properties":{"ElapsedMilliseconds":9.702,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000AC","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:38.2089253+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"f2050038a98c0cf8c18ae1bd0c864170","SpanId":"181f47b99d36feaf","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000AD","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:38.2094440+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"f2050038a98c0cf8c18ae1bd0c864170","SpanId":"181f47b99d36feaf","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:000000AD","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:38.2097371+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"f2050038a98c0cf8c18ae1bd0c864170","SpanId":"181f47b99d36feaf","Properties":{"ElapsedMilliseconds":0.8121,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000AD","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:38.2395102+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"0f38ffd3394fb751bf951405d559ff9b","SpanId":"90d78bc4959a8deb","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000AE","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:38.2399553+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"0f38ffd3394fb751bf951405d559ff9b","SpanId":"90d78bc4959a8deb","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:000000AE","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:38.2416343+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"0f38ffd3394fb751bf951405d559ff9b","SpanId":"90d78bc4959a8deb","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:000000AE","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:38.2421267+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"0f38ffd3394fb751bf951405d559ff9b","SpanId":"90d78bc4959a8deb","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:000000AE","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:38.2423704+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"0f38ffd3394fb751bf951405d559ff9b","SpanId":"90d78bc4959a8deb","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AE","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:38.2428128+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"0f38ffd3394fb751bf951405d559ff9b","SpanId":"90d78bc4959a8deb","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AE","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:38.2430100+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"0f38ffd3394fb751bf951405d559ff9b","SpanId":"90d78bc4959a8deb","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AE","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:38.2432451+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"0f38ffd3394fb751bf951405d559ff9b","SpanId":"90d78bc4959a8deb","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AE","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:38.2446558+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"0f38ffd3394fb751bf951405d559ff9b","SpanId":"90d78bc4959a8deb","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AE","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:38.2451663+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"0f38ffd3394fb751bf951405d559ff9b","SpanId":"90d78bc4959a8deb","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AE","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:38.2454324+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"0f38ffd3394fb751bf951405d559ff9b","SpanId":"90d78bc4959a8deb","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AE","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:38.2476870+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"0f38ffd3394fb751bf951405d559ff9b","SpanId":"90d78bc4959a8deb","Properties":{"elapsed":"2","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AE","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:38.2496428+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"0f38ffd3394fb751bf951405d559ff9b","SpanId":"90d78bc4959a8deb","Properties":{"elapsed":"1","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AE","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:38.2564433+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"0f38ffd3394fb751bf951405d559ff9b","SpanId":"90d78bc4959a8deb","Properties":{"elapsed":"6","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AE","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:38.2571450+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"0f38ffd3394fb751bf951405d559ff9b","SpanId":"90d78bc4959a8deb","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AE","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:38.2576620+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"0f38ffd3394fb751bf951405d559ff9b","SpanId":"90d78bc4959a8deb","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AE","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:38.2580795+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"0f38ffd3394fb751bf951405d559ff9b","SpanId":"90d78bc4959a8deb","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AE","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:38.2588655+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"0f38ffd3394fb751bf951405d559ff9b","SpanId":"90d78bc4959a8deb","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AE","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:38.2592414+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"0f38ffd3394fb751bf951405d559ff9b","SpanId":"90d78bc4959a8deb","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":16.6413,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:000000AE","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:38.2595302+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"0f38ffd3394fb751bf951405d559ff9b","SpanId":"90d78bc4959a8deb","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:000000AE","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:38.2597831+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"0f38ffd3394fb751bf951405d559ff9b","SpanId":"90d78bc4959a8deb","Properties":{"ElapsedMilliseconds":20.2714,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000AE","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:41.2057994+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"a1a85a49d0766791f0c8639cb2d89a0d","SpanId":"c720df1872167fc2","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000AF","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:41.2065089+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"a1a85a49d0766791f0c8639cb2d89a0d","SpanId":"c720df1872167fc2","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:000000AF","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:41.2084889+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"a1a85a49d0766791f0c8639cb2d89a0d","SpanId":"c720df1872167fc2","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:000000AF","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:41.2089995+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"a1a85a49d0766791f0c8639cb2d89a0d","SpanId":"c720df1872167fc2","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:000000AF","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:41.2093240+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"a1a85a49d0766791f0c8639cb2d89a0d","SpanId":"c720df1872167fc2","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AF","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:41.2098515+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"a1a85a49d0766791f0c8639cb2d89a0d","SpanId":"c720df1872167fc2","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AF","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:41.2104588+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"a1a85a49d0766791f0c8639cb2d89a0d","SpanId":"c720df1872167fc2","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AF","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:41.2106744+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"a1a85a49d0766791f0c8639cb2d89a0d","SpanId":"c720df1872167fc2","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AF","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:41.2123495+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"a1a85a49d0766791f0c8639cb2d89a0d","SpanId":"c720df1872167fc2","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AF","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:41.2128770+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"a1a85a49d0766791f0c8639cb2d89a0d","SpanId":"c720df1872167fc2","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AF","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:41.2130920+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"a1a85a49d0766791f0c8639cb2d89a0d","SpanId":"c720df1872167fc2","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AF","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:41.2146661+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"a1a85a49d0766791f0c8639cb2d89a0d","SpanId":"c720df1872167fc2","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AF","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:41.2162133+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"a1a85a49d0766791f0c8639cb2d89a0d","SpanId":"c720df1872167fc2","Properties":{"elapsed":"1","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AF","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:41.2181595+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"a1a85a49d0766791f0c8639cb2d89a0d","SpanId":"c720df1872167fc2","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AF","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:41.2186048+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"a1a85a49d0766791f0c8639cb2d89a0d","SpanId":"c720df1872167fc2","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AF","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:41.2187854+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"a1a85a49d0766791f0c8639cb2d89a0d","SpanId":"c720df1872167fc2","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AF","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:41.2189150+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"a1a85a49d0766791f0c8639cb2d89a0d","SpanId":"c720df1872167fc2","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AF","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:41.2191632+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"a1a85a49d0766791f0c8639cb2d89a0d","SpanId":"c720df1872167fc2","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000AF","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:41.2193770+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"a1a85a49d0766791f0c8639cb2d89a0d","SpanId":"c720df1872167fc2","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":9.7568,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:000000AF","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:41.2195820+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"a1a85a49d0766791f0c8639cb2d89a0d","SpanId":"c720df1872167fc2","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:000000AF","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:41.2197731+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"a1a85a49d0766791f0c8639cb2d89a0d","SpanId":"c720df1872167fc2","Properties":{"ElapsedMilliseconds":13.9776,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000AF","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:44.2179810+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"6ed907c7e4b1ff8d514d562522d4a2bf","SpanId":"5b3225e9bd70a085","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000B0","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:44.2184007+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"6ed907c7e4b1ff8d514d562522d4a2bf","SpanId":"5b3225e9bd70a085","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:000000B0","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:44.2188142+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"6ed907c7e4b1ff8d514d562522d4a2bf","SpanId":"5b3225e9bd70a085","Properties":{"ElapsedMilliseconds":0.8342,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000B0","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:44.2431441+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"52749da335b367f3267b95df44c45119","SpanId":"e3af1bcddf1627d2","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000B1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:44.2435297+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"52749da335b367f3267b95df44c45119","SpanId":"e3af1bcddf1627d2","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:000000B1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:44.2494594+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"52749da335b367f3267b95df44c45119","SpanId":"e3af1bcddf1627d2","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:000000B1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:44.2499159+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"52749da335b367f3267b95df44c45119","SpanId":"e3af1bcddf1627d2","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:000000B1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:44.2501827+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"52749da335b367f3267b95df44c45119","SpanId":"e3af1bcddf1627d2","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:44.2507172+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"52749da335b367f3267b95df44c45119","SpanId":"e3af1bcddf1627d2","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:44.2508762+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"52749da335b367f3267b95df44c45119","SpanId":"e3af1bcddf1627d2","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:44.2510334+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"52749da335b367f3267b95df44c45119","SpanId":"e3af1bcddf1627d2","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:44.2521657+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"52749da335b367f3267b95df44c45119","SpanId":"e3af1bcddf1627d2","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:44.2526764+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"52749da335b367f3267b95df44c45119","SpanId":"e3af1bcddf1627d2","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:44.2529002+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"52749da335b367f3267b95df44c45119","SpanId":"e3af1bcddf1627d2","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:44.2545613+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"52749da335b367f3267b95df44c45119","SpanId":"e3af1bcddf1627d2","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:44.2562196+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"52749da335b367f3267b95df44c45119","SpanId":"e3af1bcddf1627d2","Properties":{"elapsed":"1","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:44.2581943+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"52749da335b367f3267b95df44c45119","SpanId":"e3af1bcddf1627d2","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:44.2587588+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"52749da335b367f3267b95df44c45119","SpanId":"e3af1bcddf1627d2","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:44.2589468+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"52749da335b367f3267b95df44c45119","SpanId":"e3af1bcddf1627d2","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:44.2591888+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"52749da335b367f3267b95df44c45119","SpanId":"e3af1bcddf1627d2","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:44.2595641+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"52749da335b367f3267b95df44c45119","SpanId":"e3af1bcddf1627d2","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:44.2600520+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"52749da335b367f3267b95df44c45119","SpanId":"e3af1bcddf1627d2","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":9.5184,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:000000B1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:44.2603034+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"52749da335b367f3267b95df44c45119","SpanId":"e3af1bcddf1627d2","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:000000B1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:44.2607124+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"52749da335b367f3267b95df44c45119","SpanId":"e3af1bcddf1627d2","Properties":{"ElapsedMilliseconds":17.6183,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000B1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:47.2039392+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"d58e554e42639fc1f11e150c53406b7d","SpanId":"83492230964784f0","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000B2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:47.2045742+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"d58e554e42639fc1f11e150c53406b7d","SpanId":"83492230964784f0","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:000000B2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:47.2070138+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"d58e554e42639fc1f11e150c53406b7d","SpanId":"83492230964784f0","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:000000B2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:47.2074040+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"d58e554e42639fc1f11e150c53406b7d","SpanId":"83492230964784f0","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:000000B2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:47.2075877+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"d58e554e42639fc1f11e150c53406b7d","SpanId":"83492230964784f0","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:47.2084281+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"d58e554e42639fc1f11e150c53406b7d","SpanId":"83492230964784f0","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:47.2088751+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"d58e554e42639fc1f11e150c53406b7d","SpanId":"83492230964784f0","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:47.2091325+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"d58e554e42639fc1f11e150c53406b7d","SpanId":"83492230964784f0","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:47.2099559+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"d58e554e42639fc1f11e150c53406b7d","SpanId":"83492230964784f0","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:47.2102830+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"d58e554e42639fc1f11e150c53406b7d","SpanId":"83492230964784f0","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:47.2104729+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"d58e554e42639fc1f11e150c53406b7d","SpanId":"83492230964784f0","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:47.2119096+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"d58e554e42639fc1f11e150c53406b7d","SpanId":"83492230964784f0","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:47.2129597+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"d58e554e42639fc1f11e150c53406b7d","SpanId":"83492230964784f0","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:47.2141924+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"d58e554e42639fc1f11e150c53406b7d","SpanId":"83492230964784f0","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:47.2145980+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"d58e554e42639fc1f11e150c53406b7d","SpanId":"83492230964784f0","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:47.2147261+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"d58e554e42639fc1f11e150c53406b7d","SpanId":"83492230964784f0","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:47.2148403+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"d58e554e42639fc1f11e150c53406b7d","SpanId":"83492230964784f0","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:47.2150524+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"d58e554e42639fc1f11e150c53406b7d","SpanId":"83492230964784f0","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:47.2152428+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"d58e554e42639fc1f11e150c53406b7d","SpanId":"83492230964784f0","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":7.0913,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:000000B2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:47.2154600+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"d58e554e42639fc1f11e150c53406b7d","SpanId":"83492230964784f0","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:000000B2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:47.2156487+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"d58e554e42639fc1f11e150c53406b7d","SpanId":"83492230964784f0","Properties":{"ElapsedMilliseconds":11.7148,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000B2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:50.2031016+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"c79983e931ab8d77bd69b585496184e7","SpanId":"65a54d10e7490676","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000B3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:50.2036116+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"c79983e931ab8d77bd69b585496184e7","SpanId":"65a54d10e7490676","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:000000B3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:50.2039036+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"c79983e931ab8d77bd69b585496184e7","SpanId":"65a54d10e7490676","Properties":{"ElapsedMilliseconds":0.802,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000B3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:50.2066794+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"f244a87c510e89c00653f2b2b0f30598","SpanId":"a0da0dda4f25a43a","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000B4","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:50.2070343+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"f244a87c510e89c00653f2b2b0f30598","SpanId":"a0da0dda4f25a43a","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:000000B4","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:50.2081760+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"f244a87c510e89c00653f2b2b0f30598","SpanId":"a0da0dda4f25a43a","Properties":{"elapsed":"0","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:000000B4","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:50.2085515+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"f244a87c510e89c00653f2b2b0f30598","SpanId":"a0da0dda4f25a43a","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:000000B4","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:50.2087214+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"f244a87c510e89c00653f2b2b0f30598","SpanId":"a0da0dda4f25a43a","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B4","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:50.2090500+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"f244a87c510e89c00653f2b2b0f30598","SpanId":"a0da0dda4f25a43a","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B4","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:50.2091659+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"f244a87c510e89c00653f2b2b0f30598","SpanId":"a0da0dda4f25a43a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B4","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:50.2092898+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"f244a87c510e89c00653f2b2b0f30598","SpanId":"a0da0dda4f25a43a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B4","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:50.2101084+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"f244a87c510e89c00653f2b2b0f30598","SpanId":"a0da0dda4f25a43a","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B4","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:50.2104421+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"f244a87c510e89c00653f2b2b0f30598","SpanId":"a0da0dda4f25a43a","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B4","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:50.2105786+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"f244a87c510e89c00653f2b2b0f30598","SpanId":"a0da0dda4f25a43a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B4","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:50.2114475+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"f244a87c510e89c00653f2b2b0f30598","SpanId":"a0da0dda4f25a43a","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B4","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:50.2124359+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"f244a87c510e89c00653f2b2b0f30598","SpanId":"a0da0dda4f25a43a","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B4","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:50.2136708+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"f244a87c510e89c00653f2b2b0f30598","SpanId":"a0da0dda4f25a43a","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B4","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:50.2139742+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"f244a87c510e89c00653f2b2b0f30598","SpanId":"a0da0dda4f25a43a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B4","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:50.2141059+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"f244a87c510e89c00653f2b2b0f30598","SpanId":"a0da0dda4f25a43a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B4","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:50.2142706+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"f244a87c510e89c00653f2b2b0f30598","SpanId":"a0da0dda4f25a43a","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B4","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:50.2144960+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"f244a87c510e89c00653f2b2b0f30598","SpanId":"a0da0dda4f25a43a","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B4","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:50.2146734+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"f244a87c510e89c00653f2b2b0f30598","SpanId":"a0da0dda4f25a43a","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.7659,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:000000B4","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:50.2148514+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"f244a87c510e89c00653f2b2b0f30598","SpanId":"a0da0dda4f25a43a","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:000000B4","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:50.2151195+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"f244a87c510e89c00653f2b2b0f30598","SpanId":"a0da0dda4f25a43a","Properties":{"ElapsedMilliseconds":8.437,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000B4","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:53.2028055+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"9cc7e144943ef7b952674643101281b4","SpanId":"dff5d941daccc8fc","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000B5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:53.2032916+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"9cc7e144943ef7b952674643101281b4","SpanId":"dff5d941daccc8fc","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:000000B5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:53.2046841+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"9cc7e144943ef7b952674643101281b4","SpanId":"dff5d941daccc8fc","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:000000B5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:53.2050576+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"9cc7e144943ef7b952674643101281b4","SpanId":"dff5d941daccc8fc","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:000000B5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:53.2052502+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"9cc7e144943ef7b952674643101281b4","SpanId":"dff5d941daccc8fc","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:53.2055765+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"9cc7e144943ef7b952674643101281b4","SpanId":"dff5d941daccc8fc","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:53.2056983+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"9cc7e144943ef7b952674643101281b4","SpanId":"dff5d941daccc8fc","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:53.2058222+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"9cc7e144943ef7b952674643101281b4","SpanId":"dff5d941daccc8fc","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:53.2065816+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"9cc7e144943ef7b952674643101281b4","SpanId":"dff5d941daccc8fc","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:53.2068954+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"9cc7e144943ef7b952674643101281b4","SpanId":"dff5d941daccc8fc","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:53.2070166+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"9cc7e144943ef7b952674643101281b4","SpanId":"dff5d941daccc8fc","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:53.2078771+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"9cc7e144943ef7b952674643101281b4","SpanId":"dff5d941daccc8fc","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:53.2088274+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"9cc7e144943ef7b952674643101281b4","SpanId":"dff5d941daccc8fc","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:53.2099768+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"9cc7e144943ef7b952674643101281b4","SpanId":"dff5d941daccc8fc","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:53.2102920+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"9cc7e144943ef7b952674643101281b4","SpanId":"dff5d941daccc8fc","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:53.2104346+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"9cc7e144943ef7b952674643101281b4","SpanId":"dff5d941daccc8fc","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:53.2105979+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"9cc7e144943ef7b952674643101281b4","SpanId":"dff5d941daccc8fc","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:42:53.2108032+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"9cc7e144943ef7b952674643101281b4","SpanId":"dff5d941daccc8fc","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:53.2109883+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"9cc7e144943ef7b952674643101281b4","SpanId":"dff5d941daccc8fc","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":5.5334,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:000000B5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:53.2111568+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"9cc7e144943ef7b952674643101281b4","SpanId":"dff5d941daccc8fc","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:000000B5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:42:53.2113709+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"9cc7e144943ef7b952674643101281b4","SpanId":"dff5d941daccc8fc","Properties":{"ElapsedMilliseconds":8.5472,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000B5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:43:13.2644711+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"4d79b78ef0541af45a8f994372d9dc86","SpanId":"67a3275072719ab3","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000B6","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:43:13.3812107+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"4d79b78ef0541af45a8f994372d9dc86","SpanId":"67a3275072719ab3","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:000000B6","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:43:13.3816697+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"4d79b78ef0541af45a8f994372d9dc86","SpanId":"67a3275072719ab3","Properties":{"ElapsedMilliseconds":117.1527,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000B6","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:43:13.3840794+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"55e50c662f9b7d712684f60852a5deab","SpanId":"9e5f38e006257856","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000B7","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:43:13.3843959+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"55e50c662f9b7d712684f60852a5deab","SpanId":"9e5f38e006257856","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:000000B7","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:43:13.3956883+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"55e50c662f9b7d712684f60852a5deab","SpanId":"9e5f38e006257856","Properties":{"elapsed":"7","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:000000B7","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:43:13.3962824+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"55e50c662f9b7d712684f60852a5deab","SpanId":"9e5f38e006257856","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:000000B7","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:43:13.3964963+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"55e50c662f9b7d712684f60852a5deab","SpanId":"9e5f38e006257856","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B7","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:43:13.3988037+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"55e50c662f9b7d712684f60852a5deab","SpanId":"9e5f38e006257856","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B7","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:43:13.3989825+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"55e50c662f9b7d712684f60852a5deab","SpanId":"9e5f38e006257856","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B7","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:43:13.3991758+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"55e50c662f9b7d712684f60852a5deab","SpanId":"9e5f38e006257856","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B7","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:43:13.4001249+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"55e50c662f9b7d712684f60852a5deab","SpanId":"9e5f38e006257856","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B7","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:43:13.4004830+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"55e50c662f9b7d712684f60852a5deab","SpanId":"9e5f38e006257856","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B7","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:43:13.4007037+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"55e50c662f9b7d712684f60852a5deab","SpanId":"9e5f38e006257856","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B7","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:43:13.4018707+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"55e50c662f9b7d712684f60852a5deab","SpanId":"9e5f38e006257856","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B7","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:43:13.4029123+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"55e50c662f9b7d712684f60852a5deab","SpanId":"9e5f38e006257856","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B7","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:43:13.4042093+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"55e50c662f9b7d712684f60852a5deab","SpanId":"9e5f38e006257856","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B7","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:43:13.4045737+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"55e50c662f9b7d712684f60852a5deab","SpanId":"9e5f38e006257856","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B7","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:43:13.4047104+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"55e50c662f9b7d712684f60852a5deab","SpanId":"9e5f38e006257856","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B7","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:43:13.4048321+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"55e50c662f9b7d712684f60852a5deab","SpanId":"9e5f38e006257856","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B7","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:43:13.4051041+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"55e50c662f9b7d712684f60852a5deab","SpanId":"9e5f38e006257856","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B7","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:43:13.4053358+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"55e50c662f9b7d712684f60852a5deab","SpanId":"9e5f38e006257856","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":8.5522,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:000000B7","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:43:13.4055930+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"55e50c662f9b7d712684f60852a5deab","SpanId":"9e5f38e006257856","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:000000B7","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:43:13.4057955+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"55e50c662f9b7d712684f60852a5deab","SpanId":"9e5f38e006257856","Properties":{"ElapsedMilliseconds":21.7148,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000B7","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:44:13.2836744+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"98f9fd2ceb8d0e50396c1e6d9c25fa46","SpanId":"2a46594319774f61","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000B8","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:44:13.6865769+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"98f9fd2ceb8d0e50396c1e6d9c25fa46","SpanId":"2a46594319774f61","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:000000B8","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:44:13.6869947+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"98f9fd2ceb8d0e50396c1e6d9c25fa46","SpanId":"2a46594319774f61","Properties":{"ElapsedMilliseconds":403.3192,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000B8","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:44:13.6898102+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"0fbc3fb62bfff6ed258ac394cce9731a","SpanId":"e548d0cac2b8d87e","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000B9","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:44:13.6972863+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"0fbc3fb62bfff6ed258ac394cce9731a","SpanId":"e548d0cac2b8d87e","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:000000B9","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:44:13.7050363+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"0fbc3fb62bfff6ed258ac394cce9731a","SpanId":"e548d0cac2b8d87e","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:000000B9","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:44:13.7056782+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"0fbc3fb62bfff6ed258ac394cce9731a","SpanId":"e548d0cac2b8d87e","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:000000B9","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:44:13.7058594+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"0fbc3fb62bfff6ed258ac394cce9731a","SpanId":"e548d0cac2b8d87e","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B9","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:44:13.7073615+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"0fbc3fb62bfff6ed258ac394cce9731a","SpanId":"e548d0cac2b8d87e","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B9","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:44:13.7075866+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"0fbc3fb62bfff6ed258ac394cce9731a","SpanId":"e548d0cac2b8d87e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B9","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:44:13.7077940+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"0fbc3fb62bfff6ed258ac394cce9731a","SpanId":"e548d0cac2b8d87e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B9","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:44:13.7086903+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"0fbc3fb62bfff6ed258ac394cce9731a","SpanId":"e548d0cac2b8d87e","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B9","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:44:13.7090890+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"0fbc3fb62bfff6ed258ac394cce9731a","SpanId":"e548d0cac2b8d87e","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B9","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:44:13.7092460+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"0fbc3fb62bfff6ed258ac394cce9731a","SpanId":"e548d0cac2b8d87e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B9","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:44:13.7104565+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"0fbc3fb62bfff6ed258ac394cce9731a","SpanId":"e548d0cac2b8d87e","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B9","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:44:13.7116763+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"0fbc3fb62bfff6ed258ac394cce9731a","SpanId":"e548d0cac2b8d87e","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B9","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:44:13.7145247+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"0fbc3fb62bfff6ed258ac394cce9731a","SpanId":"e548d0cac2b8d87e","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B9","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:44:13.7148700+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"0fbc3fb62bfff6ed258ac394cce9731a","SpanId":"e548d0cac2b8d87e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B9","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:44:13.7150941+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"0fbc3fb62bfff6ed258ac394cce9731a","SpanId":"e548d0cac2b8d87e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B9","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:44:13.7152733+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"0fbc3fb62bfff6ed258ac394cce9731a","SpanId":"e548d0cac2b8d87e","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B9","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:44:13.7155020+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"0fbc3fb62bfff6ed258ac394cce9731a","SpanId":"e548d0cac2b8d87e","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000B9","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:44:13.7156881+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"0fbc3fb62bfff6ed258ac394cce9731a","SpanId":"e548d0cac2b8d87e","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":9.5513,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:000000B9","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:44:13.7158603+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"0fbc3fb62bfff6ed258ac394cce9731a","SpanId":"e548d0cac2b8d87e","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:000000B9","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:44:13.7160815+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"0fbc3fb62bfff6ed258ac394cce9731a","SpanId":"e548d0cac2b8d87e","Properties":{"ElapsedMilliseconds":26.2437,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000B9","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:45:13.2679024+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"378d4514151dc22839d6a298fb11a5c0","SpanId":"c072b75eb340840c","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000BA","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:45:13.6457342+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"378d4514151dc22839d6a298fb11a5c0","SpanId":"c072b75eb340840c","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:000000BA","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:45:13.6464100+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"378d4514151dc22839d6a298fb11a5c0","SpanId":"c072b75eb340840c","Properties":{"ElapsedMilliseconds":378.343,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000BA","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:45:13.6528711+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"02498052a79bef2dac6574abcf297105","SpanId":"037f01eff1a64f88","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000BB","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:45:13.6536037+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"02498052a79bef2dac6574abcf297105","SpanId":"037f01eff1a64f88","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:000000BB","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:45:13.6848484+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"02498052a79bef2dac6574abcf297105","SpanId":"037f01eff1a64f88","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:000000BB","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:45:13.6853801+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"02498052a79bef2dac6574abcf297105","SpanId":"037f01eff1a64f88","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:000000BB","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:45:13.6856758+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"02498052a79bef2dac6574abcf297105","SpanId":"037f01eff1a64f88","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000BB","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:45:13.6860734+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"02498052a79bef2dac6574abcf297105","SpanId":"037f01eff1a64f88","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000BB","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:45:13.6861931+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"02498052a79bef2dac6574abcf297105","SpanId":"037f01eff1a64f88","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000BB","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:45:13.6863293+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"02498052a79bef2dac6574abcf297105","SpanId":"037f01eff1a64f88","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000BB","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:45:13.6873287+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"02498052a79bef2dac6574abcf297105","SpanId":"037f01eff1a64f88","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000BB","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:45:13.6877017+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"02498052a79bef2dac6574abcf297105","SpanId":"037f01eff1a64f88","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000BB","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:45:13.6878951+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"02498052a79bef2dac6574abcf297105","SpanId":"037f01eff1a64f88","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000BB","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:45:13.6893698+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"02498052a79bef2dac6574abcf297105","SpanId":"037f01eff1a64f88","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000BB","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:45:13.6904172+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"02498052a79bef2dac6574abcf297105","SpanId":"037f01eff1a64f88","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000BB","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:45:13.6922362+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"02498052a79bef2dac6574abcf297105","SpanId":"037f01eff1a64f88","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000BB","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:45:13.6926169+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"02498052a79bef2dac6574abcf297105","SpanId":"037f01eff1a64f88","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000BB","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:45:13.6927600+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"02498052a79bef2dac6574abcf297105","SpanId":"037f01eff1a64f88","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000BB","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:45:13.6929261+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"02498052a79bef2dac6574abcf297105","SpanId":"037f01eff1a64f88","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000BB","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:45:13.6931286+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"02498052a79bef2dac6574abcf297105","SpanId":"037f01eff1a64f88","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000BB","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:45:13.6933767+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"02498052a79bef2dac6574abcf297105","SpanId":"037f01eff1a64f88","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":7.4612,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:000000BB","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:45:13.6935775+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"02498052a79bef2dac6574abcf297105","SpanId":"037f01eff1a64f88","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:000000BB","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:45:13.6937577+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"02498052a79bef2dac6574abcf297105","SpanId":"037f01eff1a64f88","Properties":{"ElapsedMilliseconds":40.8902,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000BB","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:46:13.2687934+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"543523afcddd031106ae46a13255e463","SpanId":"372a2a5a7ed0820c","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000BC","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:46:13.2695412+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"543523afcddd031106ae46a13255e463","SpanId":"372a2a5a7ed0820c","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:000000BC","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:46:13.2698666+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"543523afcddd031106ae46a13255e463","SpanId":"372a2a5a7ed0820c","Properties":{"ElapsedMilliseconds":1.0875,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000BC","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:46:13.2895105+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"1db02977a0e8249347c26206eb91f147","SpanId":"d88384c31593b241","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000BD","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:46:13.2900144+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"1db02977a0e8249347c26206eb91f147","SpanId":"d88384c31593b241","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:000000BD","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:46:13.2940428+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"1db02977a0e8249347c26206eb91f147","SpanId":"d88384c31593b241","Properties":{"elapsed":"2","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:000000BD","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:46:13.2947989+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"1db02977a0e8249347c26206eb91f147","SpanId":"d88384c31593b241","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:000000BD","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:46:13.2951576+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"1db02977a0e8249347c26206eb91f147","SpanId":"d88384c31593b241","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000BD","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:46:13.2958510+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"1db02977a0e8249347c26206eb91f147","SpanId":"d88384c31593b241","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000BD","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:46:13.2960966+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"1db02977a0e8249347c26206eb91f147","SpanId":"d88384c31593b241","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000BD","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:46:13.2963819+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"1db02977a0e8249347c26206eb91f147","SpanId":"d88384c31593b241","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000BD","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:46:13.2978744+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"1db02977a0e8249347c26206eb91f147","SpanId":"d88384c31593b241","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000BD","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:46:13.2985573+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"1db02977a0e8249347c26206eb91f147","SpanId":"d88384c31593b241","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000BD","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:46:13.2988166+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"1db02977a0e8249347c26206eb91f147","SpanId":"d88384c31593b241","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000BD","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:46:13.3003550+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"1db02977a0e8249347c26206eb91f147","SpanId":"d88384c31593b241","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000BD","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:46:13.3020130+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"1db02977a0e8249347c26206eb91f147","SpanId":"d88384c31593b241","Properties":{"elapsed":"1","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000BD","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:46:13.3037812+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"1db02977a0e8249347c26206eb91f147","SpanId":"d88384c31593b241","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000BD","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:46:13.3041975+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"1db02977a0e8249347c26206eb91f147","SpanId":"d88384c31593b241","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000BD","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:46:13.3043624+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"1db02977a0e8249347c26206eb91f147","SpanId":"d88384c31593b241","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000BD","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:46:13.3045649+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"1db02977a0e8249347c26206eb91f147","SpanId":"d88384c31593b241","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000BD","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:46:13.3049464+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"1db02977a0e8249347c26206eb91f147","SpanId":"d88384c31593b241","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000BD","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:46:13.3051736+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"1db02977a0e8249347c26206eb91f147","SpanId":"d88384c31593b241","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":9.6409,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:000000BD","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:46:13.3053766+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"1db02977a0e8249347c26206eb91f147","SpanId":"d88384c31593b241","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:000000BD","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:46:13.3056181+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"1db02977a0e8249347c26206eb91f147","SpanId":"d88384c31593b241","Properties":{"ElapsedMilliseconds":16.1246,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000BD","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:47:13.2903933+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"24d6276de03f6d823f8e7e7475904c1e","SpanId":"dcc3ede9b8458c12","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000BE","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:47:13.3872690+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"24d6276de03f6d823f8e7e7475904c1e","SpanId":"dcc3ede9b8458c12","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:000000BE","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:47:13.3876159+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"24d6276de03f6d823f8e7e7475904c1e","SpanId":"dcc3ede9b8458c12","Properties":{"ElapsedMilliseconds":97.2204,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000BE","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:47:13.3911427+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"055164010c829d275f33a8e764067811","SpanId":"a37891dfe0b81a17","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000BF","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:47:13.3914892+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"055164010c829d275f33a8e764067811","SpanId":"a37891dfe0b81a17","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:000000BF","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:47:13.3977815+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"055164010c829d275f33a8e764067811","SpanId":"a37891dfe0b81a17","Properties":{"elapsed":"5","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:000000BF","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:47:13.3982348+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"055164010c829d275f33a8e764067811","SpanId":"a37891dfe0b81a17","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:000000BF","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:47:13.3984471+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"055164010c829d275f33a8e764067811","SpanId":"a37891dfe0b81a17","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000BF","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:47:13.3995709+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"055164010c829d275f33a8e764067811","SpanId":"a37891dfe0b81a17","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000BF","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:47:13.3997499+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"055164010c829d275f33a8e764067811","SpanId":"a37891dfe0b81a17","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000BF","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:47:13.3999007+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"055164010c829d275f33a8e764067811","SpanId":"a37891dfe0b81a17","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000BF","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:47:13.4006865+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"055164010c829d275f33a8e764067811","SpanId":"a37891dfe0b81a17","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000BF","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:47:13.4009986+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"055164010c829d275f33a8e764067811","SpanId":"a37891dfe0b81a17","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000BF","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:47:13.4011810+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"055164010c829d275f33a8e764067811","SpanId":"a37891dfe0b81a17","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000BF","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:47:13.4020672+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"055164010c829d275f33a8e764067811","SpanId":"a37891dfe0b81a17","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000BF","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:47:13.4029382+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"055164010c829d275f33a8e764067811","SpanId":"a37891dfe0b81a17","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000BF","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:47:13.4042126+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"055164010c829d275f33a8e764067811","SpanId":"a37891dfe0b81a17","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000BF","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:47:13.4045357+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"055164010c829d275f33a8e764067811","SpanId":"a37891dfe0b81a17","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000BF","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:47:13.4046963+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"055164010c829d275f33a8e764067811","SpanId":"a37891dfe0b81a17","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000BF","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:47:13.4048074+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"055164010c829d275f33a8e764067811","SpanId":"a37891dfe0b81a17","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000BF","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:47:13.4050544+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"055164010c829d275f33a8e764067811","SpanId":"a37891dfe0b81a17","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000BF","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:47:13.4052371+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"055164010c829d275f33a8e764067811","SpanId":"a37891dfe0b81a17","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.5408,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:000000BF","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:47:13.4054756+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"055164010c829d275f33a8e764067811","SpanId":"a37891dfe0b81a17","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:000000BF","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:47:13.4056659+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"055164010c829d275f33a8e764067811","SpanId":"a37891dfe0b81a17","Properties":{"ElapsedMilliseconds":14.5332,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000BF","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:48:13.2639487+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"3e85b72a94cb9c43b5700206e58401b1","SpanId":"dddea2ac2db4d546","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000C0","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:48:13.2643788+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"3e85b72a94cb9c43b5700206e58401b1","SpanId":"dddea2ac2db4d546","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:000000C0","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:48:13.2645767+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"3e85b72a94cb9c43b5700206e58401b1","SpanId":"dddea2ac2db4d546","Properties":{"ElapsedMilliseconds":0.6253,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000C0","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:48:13.3002515+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"25bff4819e8f730150a207b12ec2547b","SpanId":"0706428732c543c8","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000C1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:48:13.3007313+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"25bff4819e8f730150a207b12ec2547b","SpanId":"0706428732c543c8","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:000000C1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:48:13.3027231+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"25bff4819e8f730150a207b12ec2547b","SpanId":"0706428732c543c8","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:000000C1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:48:13.3031535+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"25bff4819e8f730150a207b12ec2547b","SpanId":"0706428732c543c8","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:000000C1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:48:13.3034331+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"25bff4819e8f730150a207b12ec2547b","SpanId":"0706428732c543c8","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000C1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:48:13.3039065+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"25bff4819e8f730150a207b12ec2547b","SpanId":"0706428732c543c8","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000C1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:48:13.3040702+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"25bff4819e8f730150a207b12ec2547b","SpanId":"0706428732c543c8","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000C1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:48:13.3042816+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"25bff4819e8f730150a207b12ec2547b","SpanId":"0706428732c543c8","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000C1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:48:13.3052083+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"25bff4819e8f730150a207b12ec2547b","SpanId":"0706428732c543c8","Properties":{"elapsed":"1","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000C1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:48:13.3056513+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"25bff4819e8f730150a207b12ec2547b","SpanId":"0706428732c543c8","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000C1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:48:13.3058371+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"25bff4819e8f730150a207b12ec2547b","SpanId":"0706428732c543c8","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000C1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:48:13.3069654+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"25bff4819e8f730150a207b12ec2547b","SpanId":"0706428732c543c8","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000C1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:48:13.3084110+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"25bff4819e8f730150a207b12ec2547b","SpanId":"0706428732c543c8","Properties":{"elapsed":"1","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000C1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:48:13.3099879+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"25bff4819e8f730150a207b12ec2547b","SpanId":"0706428732c543c8","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000C1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:48:13.3103830+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"25bff4819e8f730150a207b12ec2547b","SpanId":"0706428732c543c8","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000C1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:48:13.3105555+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"25bff4819e8f730150a207b12ec2547b","SpanId":"0706428732c543c8","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000C1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:48:13.3108204+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"25bff4819e8f730150a207b12ec2547b","SpanId":"0706428732c543c8","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000C1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:48:13.3110662+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"25bff4819e8f730150a207b12ec2547b","SpanId":"0706428732c543c8","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000C1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:48:13.3113054+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"25bff4819e8f730150a207b12ec2547b","SpanId":"0706428732c543c8","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":7.5911,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:000000C1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:48:13.3116498+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"25bff4819e8f730150a207b12ec2547b","SpanId":"0706428732c543c8","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:000000C1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:48:13.3118874+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"25bff4819e8f730150a207b12ec2547b","SpanId":"0706428732c543c8","Properties":{"ElapsedMilliseconds":11.6433,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000C1","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:49:13.2567856+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"2aa881181965f343cfb679fe8578800a","SpanId":"416306644616b64f","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000C2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:49:13.2573594+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"2aa881181965f343cfb679fe8578800a","SpanId":"416306644616b64f","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:000000C2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:49:13.2578106+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"2aa881181965f343cfb679fe8578800a","SpanId":"416306644616b64f","Properties":{"ElapsedMilliseconds":1.0192,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000C2","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:49:13.2681947+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"287fd1663d175b006d12dd034829a697","SpanId":"b12a800e3105e1c3","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000C3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:49:13.2685761+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"287fd1663d175b006d12dd034829a697","SpanId":"b12a800e3105e1c3","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:000000C3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:49:13.2701779+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"287fd1663d175b006d12dd034829a697","SpanId":"b12a800e3105e1c3","Properties":{"elapsed":"1","parameters":"@__jti_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT r.\"ID\", r.\"JTI\", r.\"Token\"\nFROM revoked_jwts AS r\nWHERE r.\"JTI\" = @__jti_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","RequestId":"0HNFMP8PQI2CU:000000C3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:49:13.2705718+03:00","Level":"Information","MessageTemplate":"Executing endpoint '{EndpointName}'","TraceId":"287fd1663d175b006d12dd034829a697","SpanId":"b12a800e3105e1c3","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:000000C3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:49:13.2707415+03:00","Level":"Information","MessageTemplate":"Route matched with {RouteData}. Executing controller action with signature {MethodInfo} on controller {Controller} ({AssemblyName}).","TraceId":"287fd1663d175b006d12dd034829a697","SpanId":"b12a800e3105e1c3","Properties":{"RouteData":"{action = \"ReadMessagesFromChat\", controller = \"Chat\"}","MethodInfo":"System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[MessagingApp.DTO.MessageReceivedDTO]]] ReadMessagesFromChatAsync(System.String, System.String, System.String, System.String, System.String)","Controller":"MessagingApp.Controllers.ChatController","AssemblyName":"MessagingApp","EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000C3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:49:13.2711100+03:00","Level":"Warning","MessageTemplate":"Invalid unreadNotRead 192.168.31.243:6865","TraceId":"287fd1663d175b006d12dd034829a697","SpanId":"b12a800e3105e1c3","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000C3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:49:13.2712253+03:00","Level":"Information","MessageTemplate":"Retrieving user by the token","TraceId":"287fd1663d175b006d12dd034829a697","SpanId":"b12a800e3105e1c3","Properties":{"SourceContext":"MessagingApp.Services.Implementation.AuthService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000C3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:49:13.2713637+03:00","Level":"Information","MessageTemplate":"Obtaining user by credentials (Messages excluded)","TraceId":"287fd1663d175b006d12dd034829a697","SpanId":"b12a800e3105e1c3","Properties":{"SourceContext":"MessagingApp.Services.Implementation.UserService","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000C3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:49:13.2721013+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"287fd1663d175b006d12dd034829a697","SpanId":"b12a800e3105e1c3","Properties":{"elapsed":"0","parameters":"@__userCreds_Username_0='?'","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"Username\" = @__userCreds_Username_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000C3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:49:13.2724351+03:00","Level":"Information","MessageTemplate":"Obtaining messages from chat...","TraceId":"287fd1663d175b006d12dd034829a697","SpanId":"b12a800e3105e1c3","Properties":{"SourceContext":"MessagingApp.Controllers.ChatController","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000C3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:49:13.2726235+03:00","Level":"Information","MessageTemplate":"Reading chat messages (last:10, skip:0, polling:True, unreadNotRead:)","TraceId":"287fd1663d175b006d12dd034829a697","SpanId":"b12a800e3105e1c3","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000C3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:49:13.2736012+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"287fd1663d175b006d12dd034829a697","SpanId":"b12a800e3105e1c3","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT c0.\"ID\", c0.\"Name\", c0.\"OwnerID\", s.\"ChatID\", s.\"UserID\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT c.\"ID\", c.\"Name\", c.\"OwnerID\"\n    FROM \"Chats\" AS c\n    WHERE c.\"ID\" = @__ChatID_0\n    LIMIT 1\n) AS c0\nLEFT JOIN (\n    SELECT u.\"ChatID\", u.\"UserID\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"UserChatJoinTable\" AS u\n    INNER JOIN \"Users\" AS u0 ON u.\"UserID\" = u0.\"ID\"\n) AS s ON c0.\"ID\" = s.\"ChatID\"\nORDER BY c0.\"ID\", s.\"ChatID\", s.\"UserID\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000C3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:49:13.2746772+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"287fd1663d175b006d12dd034829a697","SpanId":"b12a800e3105e1c3","Properties":{"elapsed":"0","parameters":"@__UserID_0='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\"\nFROM \"Users\" AS u\nWHERE u.\"ID\" = @__UserID_0\nLIMIT 1","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000C3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:49:13.2761286+03:00","Level":"Information","MessageTemplate":"Executed DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"287fd1663d175b006d12dd034829a697","SpanId":"b12a800e3105e1c3","Properties":{"elapsed":"1","parameters":"@__ChatID_0='?' (DbType = Int64), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SELECT m0.\"ID\", m0.\"ChatID\", m0.\"DestinationID\", m0.\"OriginID\", m0.\"Text\", m0.\"Timestamp\", m0.\"chatID0\", m0.\"isRead\", u.\"ID\", u.\"PasswordHash\", u.\"Role\", u.\"Username\", s.\"MessageId\", s.\"UserId\", s.\"ID\", s.\"PasswordHash\", s.\"Role\", s.\"Username\"\nFROM (\n    SELECT m.\"ID\", m.\"ChatID\", m.\"DestinationID\", m.\"OriginID\", m.\"Text\", m.\"Timestamp\", m.\"chatID\" AS \"chatID0\", m.\"isRead\"\n    FROM \"Messages\" AS m\n    WHERE m.\"ChatID\" = @__ChatID_0\n    ORDER BY m.\"Timestamp\" DESC\n    LIMIT @__p_2 OFFSET @__p_1\n) AS m0\nINNER JOIN \"Users\" AS u ON m0.\"OriginID\" = u.\"ID\"\nLEFT JOIN (\n    SELECT m1.\"MessageId\", m1.\"UserId\", u0.\"ID\", u0.\"PasswordHash\", u0.\"Role\", u0.\"Username\"\n    FROM \"MessageReadUsers\" AS m1\n    INNER JOIN \"Users\" AS u0 ON m1.\"UserId\" = u0.\"ID\"\n) AS s ON m0.\"ID\" = s.\"MessageId\"\nORDER BY m0.\"Timestamp\" DESC, m0.\"ID\", u.\"ID\", s.\"MessageId\", s.\"UserId\"","EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000C3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:49:13.2765450+03:00","Level":"Information","MessageTemplate":"Mapping messages to DTO","TraceId":"287fd1663d175b006d12dd034829a697","SpanId":"b12a800e3105e1c3","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000C3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:49:13.2767010+03:00","Level":"Information","MessageTemplate":"Marking the selected messages as read","TraceId":"287fd1663d175b006d12dd034829a697","SpanId":"b12a800e3105e1c3","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000C3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:49:13.2768298+03:00","Level":"Information","MessageTemplate":"Saving changes","TraceId":"287fd1663d175b006d12dd034829a697","SpanId":"b12a800e3105e1c3","Properties":{"SourceContext":"MessagingApp.Services.Implementation.ChatService","username":"1234567890","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000C3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU","Scope":["Username:1234567890"]}}
{"Timestamp":"2025-09-18T19:49:13.2770480+03:00","Level":"Information","MessageTemplate":"Executing {ObjectResultType}, writing value of type '{Type}'.","TraceId":"287fd1663d175b006d12dd034829a697","SpanId":"b12a800e3105e1c3","Properties":{"ObjectResultType":"OkObjectResult","Type":"System.Collections.Generic.List`1[[MessagingApp.DTO.MessageReceivedDTO, MessagingApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]","EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"830d9eda-0959-405d-9f5a-39e7f748446a","ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","RequestId":"0HNFMP8PQI2CU:000000C3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:49:13.2772509+03:00","Level":"Information","MessageTemplate":"Executed action {ActionName} in {ElapsedMilliseconds}ms","TraceId":"287fd1663d175b006d12dd034829a697","SpanId":"b12a800e3105e1c3","Properties":{"ActionName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","ElapsedMilliseconds":6.2775,"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNFMP8PQI2CU:000000C3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:49:13.2774948+03:00","Level":"Information","MessageTemplate":"Executed endpoint '{EndpointName}'","TraceId":"287fd1663d175b006d12dd034829a697","SpanId":"b12a800e3105e1c3","Properties":{"EndpointName":"MessagingApp.Controllers.ChatController.ReadMessagesFromChatAsync (MessagingApp)","EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNFMP8PQI2CU:000000C3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:49:13.2777128+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"287fd1663d175b006d12dd034829a697","SpanId":"b12a800e3105e1c3","Properties":{"ElapsedMilliseconds":9.5189,"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000C3","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:50:13.2324630+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"4614a43e48cc3d618d4e8fb817d64abc","SpanId":"305582d65c6c5798","Properties":{"Protocol":"HTTP/1.1","Method":"OPTIONS","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000C4","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:50:13.2334123+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"4614a43e48cc3d618d4e8fb817d64abc","SpanId":"305582d65c6c5798","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:000000C4","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:50:13.2351213+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"4614a43e48cc3d618d4e8fb817d64abc","SpanId":"305582d65c6c5798","Properties":{"ElapsedMilliseconds":2.6329,"StatusCode":204,"ContentType":null,"ContentLength":null,"Protocol":"HTTP/1.1","Method":"OPTIONS","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000C4","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:50:13.3071395+03:00","Level":"Information","MessageTemplate":"Request starting {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {ContentType} {ContentLength}","TraceId":"c44ab18a9c6084aaef16bffabf1a8b9b","SpanId":"a8859372c0e6fbf1","Properties":{"Protocol":"HTTP/1.1","Method":"GET","ContentType":null,"ContentLength":null,"Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000C5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:50:13.3076623+03:00","Level":"Information","MessageTemplate":"CORS policy execution successful.","TraceId":"c44ab18a9c6084aaef16bffabf1a8b9b","SpanId":"a8859372c0e6fbf1","Properties":{"EventId":{"Id":4,"Name":"PolicySuccess"},"SourceContext":"Microsoft.AspNetCore.Cors.Infrastructure.CorsService","RequestId":"0HNFMP8PQI2CU:000000C5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:50:13.3198181+03:00","Level":"Information","MessageTemplate":"Failed to validate the token.","TraceId":"c44ab18a9c6084aaef16bffabf1a8b9b","SpanId":"a8859372c0e6fbf1","Exception":"Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/18/2025 4:50:03 PM', Current time (UTC): '9/18/2025 4:50:13 PM'.\n   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)\n   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)","Properties":{"EventId":{"Id":1,"Name":"TokenValidationFailed"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HNFMP8PQI2CU:000000C5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:50:13.3246530+03:00","Level":"Information","MessageTemplate":"{AuthenticationScheme} was not authenticated. Failure message: {FailureMessage}","TraceId":"c44ab18a9c6084aaef16bffabf1a8b9b","SpanId":"a8859372c0e6fbf1","Properties":{"AuthenticationScheme":"Bearer","FailureMessage":"IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '9/18/2025 4:50:03 PM', Current time (UTC): '9/18/2025 4:50:13 PM'.","EventId":{"Id":7,"Name":"AuthenticationSchemeNotAuthenticatedWithFailure"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HNFMP8PQI2CU:000000C5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:50:13.3289873+03:00","Level":"Information","MessageTemplate":"Authorization failed. {Reason}","TraceId":"c44ab18a9c6084aaef16bffabf1a8b9b","SpanId":"a8859372c0e6fbf1","Properties":{"Reason":"These requirements were not met:\nDenyAnonymousAuthorizationRequirement: Requires an authenticated user.","EventId":{"Id":2,"Name":"UserAuthorizationFailed"},"SourceContext":"Microsoft.AspNetCore.Authorization.DefaultAuthorizationService","RequestId":"0HNFMP8PQI2CU:000000C5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:50:13.3338137+03:00","Level":"Information","MessageTemplate":"AuthenticationScheme: {AuthenticationScheme} was challenged.","TraceId":"c44ab18a9c6084aaef16bffabf1a8b9b","SpanId":"a8859372c0e6fbf1","Properties":{"AuthenticationScheme":"Bearer","EventId":{"Id":12,"Name":"AuthenticationSchemeChallenged"},"SourceContext":"Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler","RequestId":"0HNFMP8PQI2CU:000000C5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
{"Timestamp":"2025-09-18T19:50:13.3413891+03:00","Level":"Information","MessageTemplate":"Request finished {Protocol} {Method} {Scheme}://{Host}{PathBase}{Path}{QueryString} - {StatusCode} {ContentLength} {ContentType} {ElapsedMilliseconds}ms","TraceId":"c44ab18a9c6084aaef16bffabf1a8b9b","SpanId":"a8859372c0e6fbf1","Properties":{"ElapsedMilliseconds":34.2339,"StatusCode":401,"ContentType":null,"ContentLength":0,"Protocol":"HTTP/1.1","Method":"GET","Scheme":"http","Host":"192.168.31.243:6865","PathBase":"","Path":"/api/chats/readChatMsgs","QueryString":"?chatid=1&last=10&skip=0&unreadNotRead=null&polling=true","EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNFMP8PQI2CU:000000C5","RequestPath":"/api/chats/readChatMsgs","ConnectionId":"0HNFMP8PQI2CU"}}
